// ==UserScript==
// @name         Kuper product cards filter
// @description  Hide product cards by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://kuper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.74553179
// @icon         https://www.google.com/s2/favicons?sz=64&domain=kuper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/kuper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var P={5467:(S,d,t)=>{t.d(d,{E2:()=>v});var f=t(9928);function v(p,a={},e=null){const n=(0,f.Sw)(a,e);return n.append(p),n}function g(p,a=null,e={},n={}){const l=createActionLink(p,a,n);return v(l,e)}function c(p,a=null,e=null,n={},l={}){const m=createActionLinkWithIcon(p,e,a,l);return v(m,n)}},9928:(S,d,t)=>{t.d(d,{S:()=>p,Sw:()=>E,kU:()=>g,o5:()=>c});var f=t(4921),v=t(5539);function g(o,u,b){const h=a(o,"text",u);return h.value=b,h}function c(o,u,b,h,I,O){const V=a(o,"number",u);return V.value=b,V.step=h,V.min=I,V.max=O,V}function p(o,u,b){const h=a(o,"checkbox",u);return h.checked=b,h}function a(o={},u=null,b=null){const h=s("input",o);return u&&(h.type=u),b&&(h.addEventListener("keyup",(0,f.sg)(b,200)),h.addEventListener("change",(0,f.sg)(b,100))),h}function e(o={},u=null){return s("span",o,u)}function n(o={},u=null,b=null){const h=s("a",o,u);return b&&(h.href=b),h}function l(o,u=null,b={}){b.cursor||="pointer";const h=n(b,u);return o&&h.addEventListener("click",o),h}function m(o,u,b=null,h={},I={}){h.display||="inline-flex",h.alignItems||="center",h.gap||="0.25em";const O=l(o,b,h);return O.prepend(r(u,I)),O}function x(o={},u=null,b=null){const h=s("button",o,u);return b&&h.addEventListener("click",b),h}function E(o={},u=null){return s("div",o,u)}function y(o={}){return s("i",o)}function r(o,u={}){u.width||="1em",u.height||="1em",u.paddingBottom||="1px";const b=y(u);return b.setAttribute("data-lucide",o),b}function s(o,u,b=null){if(typeof u!="object"||u===null)throw new TypeError("styles should be an object");const h=document.createElement(o);return(0,v.ZM)(h,u),b&&(h.innerHTML=b),h}},573:(S,d,t)=>{t.d(d,{Fi:()=>g,ML:()=>l,YA:()=>e,fI:()=>c,sf:()=>x});var f=t(4214);function v(r,s=document){return!!s.querySelector(r)}function g(r,s=document,o=!1){const u=s.querySelector(r);return o&&!u&&console.log(`No element found for selector: ${r}`),u}function c(r,s=document,o=!1){const u=s.querySelectorAll(r);return o&&!u.length&&console.log(`No elements found for selector: ${r}`),u}function p(r,s,o){return[...r.querySelectorAll(s)].find(u=>u.textContent.trim().includes(o))}function a(r,s,o=!1,u=!1,b=null){const h=g(s,r);return e(h,o,u,b)}function e(r,s=!1,o=!1,u=null){if(!r)return u===null?(console.log("No element found"),null):u;const b=r.innerText;return m(b,s,o)}function n(r,s,o=!1){const u=r[s];return e(u,o)}function l(r,s=!1,o=!1){const u=r.textContent;return m(u,s,o)}function m(r,s,o){s&&(r=(0,f.zr)(r)),o&&(r=r.replace(",","."));const u=Number(r);return Number.isNaN(u)?(console.log(`Invalid number: ${r}`),0):u}function x(r){return[...r.childNodes].find(s=>s.nodeType===Node.TEXT_NODE)}function E(r){const s=o=>o.nodeType===Node.TEXT_NODE&&o.textContent.trim()!==""?[o]:[...o.childNodes].flatMap(s);return s(r)}function y(r){return normalizeSpacing(r.textContent)}},5539:(S,d,t)=>{t.d(d,{Bt:()=>v,UC:()=>e,ZM:()=>F,kl:()=>p});function f(i,w){i.parentNode.insertBefore(w,i.nextSibling)}function v(i){i.style.display="none"}function g(i){m(i),v(i)}function c(i){i.intersectionObserver||runOnceOnIntersection(i,()=>v(i))}function p(i){i.style.display=""}function a(i){const w=l(i);i.style.display=w}function e(i,w){w?v(i):p(i)}function n(i,w){w?c(i):(clearIntersectionObserver(i),p(i))}function l(i){return m(i),i.defaultDisplay}function m(i){if(i.defaultDisplay)return;const{display:w}=getComputedStyle(i);i.defaultDisplay=w}function x(){return{show:[],hide:[]}}function E(i,w,T){i?w.hide.push(T):w.show.push(T)}function y(i){i.show.forEach(p),i.hide.forEach(v)}function r(i,w,T=.3){w?o(i,T):s(i)}function s(i){i.style.opacity=""}function o(i,w=.3){i.style.opacity=w}function u(i){i.style.order=""}function b(i,w){i.style.order=w}function h(i,w){i.style.background=w}function I(i,w){const T=getFirstElement(w);if(!T)return;const A=createLink();A.href=i,T.parentNode.append(A),A.append(T)}function O(i,w){const T=getFirstElement(w);T&&V(i,T)}function V(i,w){const T=createLink();T.href=i,T.append(...w.childNodes),w.append(T)}function C(){const i=getURLQueryParam("scrollTo");if(!i)return;const w=document.getElementById(i);w?w.scrollIntoView():console.log(`Element with ID "${i}" was not found.`)}function N(i,w="custom-global-style"){let T=document.getElementById(w);T||(T=document.createElement("style"),T.id=w,T.type="text/css",document.head.appendChild(T)),T.textContent=i}function F(i,w){Object.assign(i.style,w)}function k(i){return Object.entries(i).map(([w,T])=>`${w.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${T};`).join(" ")}function H(i){return i?i.split(";").filter(w=>w.trim()!=="").reduce((w,T)=>{const[A,G]=T.split(":").map(L=>L.trim()),R=A.replace(/-([a-z])/g,(L,U)=>U.toUpperCase());return w[R]=G,w},{}):{}}function Z(i,w,T="text/plain"){const A=new Blob([i],{type:T}),G=URL.createObjectURL(A),R=document.createElement("a");R.href=G,R.download=w,document.body.appendChild(R),R.click(),document.body.removeChild(R),requestAnimationFrame(()=>URL.revokeObjectURL(G))}},4921:(S,d,t)=>{t.d(d,{sg:()=>c,xk:()=>f});function f(e,n,l=null){const m=e.querySelector(n);return m?Promise.resolve(m):new Promise(x=>{const E=new MutationObserver(r);E.observe(e,{childList:!0,subtree:!0});let y;l&&(y=setTimeout(()=>{E.disconnect(),console.log(`No element found for selector: ${n}`),x(null)},l));function r(){const s=e.querySelector(n);s&&(y&&clearTimeout(y),E.disconnect(),x(s))}})}function v(e,n){return e.querySelector(n)?new Promise(m=>{const x=new MutationObserver(E);x.observe(e,{childList:!0,subtree:!0});function E(){e.querySelector(n)||(x.disconnect(),m())}}):Promise.resolve()}function g(e,n=400){return new Promise(l=>{let m;const x=new MutationObserver(()=>{clearTimeout(m),E()});function E(){m=setTimeout(()=>{x.disconnect(),l()},n)}E(),x.observe(e,{childList:!0,subtree:!0})})}function c(e,n=250){let l;return(...m)=>{clearTimeout(l),l=setTimeout(()=>e(...m),n)}}function p(e,n){const l=new IntersectionObserver(m=>{m.forEach(x=>{x.isIntersecting&&(n(),a(e))})});e.intersectionObserver=l,l.observe(e)}function a(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}},3829:(S,d,t)=>{t.d(d,{Ay:()=>v,JE:()=>c,iG:()=>p});var f=t(8355);function v(e,n){return!g(e,n)}function g(e,n){if(!n.value)return!0;const l=e.toLowerCase(),m=(0,f.R)(n),x=[],E=[];return m.forEach(y=>{if(y.startsWith("!")){const r=y.substring(1);r&&E.push(r)}else x.push(y)}),x.every(y=>l.includes(y))&&E.every(y=>!l.includes(y))}function c(e,n){return n.value!=null&&e<n.value}function p(e,n){return n.value!=null&&e>n.value}function a(e,n){return n.value&&e!==n.value}},4521:(S,d,t)=>{t.d(d,{z:()=>v});var f=t(3048);function v(g,c=null){return{createGlobalFilter(p,a=null,e=g){return f.V.create(p,a,e)},createSectionFilter(p,a=null,e=g){if(!c)throw new Error("sectionId must be provided to use createSectionFilter.");return f.V.createWithCompositeKey(c,p,a,e)}}}},5884:(S,d,t)=>{t.d(d,{Hw:()=>p,Nm:()=>g,nW:()=>c});var f=t(9928),v=t(5467);function g(a,e,n={},l={}){const m=(0,f.kU)(l,e.updateValueFromEvent,e.value);return(0,v.E2)(m,n,a)}function c(a,e,n,l,m,x={},E={}){const y=(0,f.o5)(E,e.updateValueFromEvent,e.value,n,l,m);return(0,v.E2)(y,x,a)}function p(a,e,n={},l={}){const m=(0,f.S)(l,e.updateValueFromEvent,e.value);return(0,v.E2)(m,n,a)}},4402:(S,d,t)=>{t.d(d,{r:()=>v});var f=t(9928);function v(p={}){return(0,f.Sw)(p,"|")}function g(p={},a=75,e="customFiltersContainer"){const n=document.getElementById(e);if(!n)return console.log(`Element with id="${e}" not found.`),null;const l=createButton(p,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return l.addEventListener("mouseenter",()=>{l.style.filter="brightness(0.9)"}),l.addEventListener("mouseleave",()=>{l.style.filter="brightness(1)"}),l.addEventListener("click",()=>{const m=n.getBoundingClientRect();window.scrollTo({top:m.top+window.scrollY-a})}),new IntersectionObserver(([m])=>{l.style.display=m.isIntersecting?"none":"flex"},{threshold:.5}).observe(n),l}function c(p,a={}){const e=g(a);e&&p.appendChild(e)}},7877:(S,d,t)=>{t.d(d,{E9:()=>v,EY:()=>b,H1:()=>y,HX:()=>g,X0:()=>p,pW:()=>V});var f=t(5884);function v(C,N={},F={}){return(0,f.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,N,F)}function g(C,N={},F={},k=.1,H=3){return(0,f.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,k,H,5,N,F)}function c(C,N={},F={},k=.1,H=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,k,H,5,N,F)}function p(C,N={},F={}){return e("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,N,F)}function a(C,N={},F={}){return e("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,N,F)}function e(C,N,F={},k={}){return(0,f.nW)(C,N,"1","1","999999",F,k)}function n(C,N={},F={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,N,F)}function l(C,N,F={},k={}){return createNumberFilterControl(C,N,"5","0","100",F,k)}function m(C,N={},F={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",N,F)}function x(C,N,F={},k={},H="250"){return(0,f.nW)(C,N,H,"0","1000000",F,k)}function E(C,N={},F={},k="25"){return x("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,N,F,k)}function y(C,N={},F={},k="25"){return x("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,N,F,k)}function r(C,N={},F={}){return s("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,N,F)}function s(C,N,F={},k={}){return createNumberFilterControl(C,N,"1","0","99999",F,k)}function o(C,N={},F={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","7",N,F)}function u(C,N={},F={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,N,F)}function b(C,N={},F={}){return(0,f.Hw)("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,N,F)}function h(C,N={},F={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,N,F)}function I(C,N={},F={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,N,F)}function O(C,N={},F={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",C,N,F)}function V(C,N={},F={}){return(0,f.Hw)("\u0412\u043A\u043B: ",C,N,F)}},8355:(S,d,t)=>{t.d(d,{R:()=>f});function f(g){return g.value.toLowerCase().split(",").map(c=>c.trim()).filter(c=>c!=="")}function v(g){return f(g).filter(c=>!c.startsWith("!"))}},5213:(S,d,t)=>{t.d(d,{b:()=>g});var f=t(9928),v=t(573);function g(c,p,a=!1,e="customFiltersContainer"){let n=(0,v.Fi)(`#${e}`,c);if(n)if(a)n.remove();else return;n=(0,f.Sw)(),n.id=e,p(n,c)}},4444:(S,d,t)=>{t.d(d,{s:()=>f});function f(v){let p=2166136261;for(let a=0;a<v.length;a+=1){const e=v.charCodeAt(a);p^=e,p=Math.imul(p,16777619)}return p>>>0}},5081:(S,d,t)=>{t.d(d,{B:()=>g});var f=t(4444);function v(c){return(0,f.s)(c).toString(16).padStart(8,"0")}function g(c,p="common"){return c?v(c):p}},8200:(S,d,t)=>{t.d(d,{s:()=>f});function f(v){const{target:g}=v,{type:c}=g;switch(c){case"text":return`"${g.value}"`;case"number":return g.value;case"checkbox":return g.checked;default:return console.log(`Unknown input type: ${c}`),null}}},157:(S,d,t)=>{t.d(d,{Fg:()=>f,vx:()=>g});const f=window.GM_setValue,v=window.GM.setValue,g=window.GM_getValue,c=window.GM_addValueChangeListener},1870:(S,d,t)=>{t.d(d,{j:()=>f});class f{constructor(g,c){this.value=g,this.onChange=c}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,d,t)=>{t.d(d,{V:()=>p});var f=t(1870),v=t(8200),g=t(3976),c=t(157);class p extends f.j{constructor(e,n=null,l=null){super((0,c.vx)(e,n),l),this.storageKey=e,this.defaultValue=n}static create(e,n=null,l=null){return new p(e,n,l)}static createWithCompositeKey(e,n,l=null,m=null){const x=`${e}-${n}`;return new p(x,l,m)}updateValueFromEvent=e=>{const n=(0,v.s)(e),l=(0,g.$)(n);this.updateValue(l)};updateValue(e,n=!0){this.value!==e&&((0,c.Fg)(this.storageKey,e),this.value=e,n&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}},3976:(S,d,t)=>{t.d(d,{$:()=>f});function f(v){return v===""?null:JSON.parse(v)}},4214:(S,d,t)=>{t.d(d,{zr:()=>v});function f(a){return a.replace(/\D/g,"")}function v(a){return a.replace(/[^\d.,-]/g,"")}function g(a){return a.replace(/\s/g,"")}function c(a){return a.charAt(0).toUpperCase()+a.slice(1)}function p(a){return a.replace(/\s+/g," ").trim()}},5406:(S,d,t)=>{t.d(d,{Es:()=>y,Fc:()=>f});function f(r,s="common",o=!1){const{pathname:u}=window.location;return v(u,r,s,o)}function v(r,s,o,u=!1){const h=r.split("/")[s]||o;return u&&console.log(`Pathname element: ${h}`),h}function g(r,s="common",o=!1){const u=f(r,"",o);return c(u,s,o)}function c(r,s,o){if(!r)return s;const u=r.split("-").at(-1);return o&&console.log(`Pathname element ending: ${u}`),u}function p(r,s,o="common",u=!1){const b=v(r,s,"",u);return c(b,o,u)}function a(r){return new URLSearchParams(window.location.search).get(r)}function e(r){return r.split("?")[0]}function n(r){return window.location.pathname.includes(r)}function l(r){return r.some(s=>n(s))}function m(r){return window.location.pathname.split("/").some(o=>o===r)}function x(r){try{const s=new URL(window.location.href);Object.entries(r).forEach(([o,u])=>{s.searchParams.set(o,u)}),window.location.href=s.toString()}catch(s){console.error("Failed to redirect:",s)}}function E(r,s=[]){const o={pathname:window.location.pathname};s.forEach(h=>{o[h]=a(h)});function u(){const h={pathname:window.location.pathname};s.forEach(I=>{h[I]=a(I)}),Object.keys(o).some(I=>o[I]!==h[I])&&r()}let b=window.location.href;setInterval(()=>{window.location.href!==b&&(b=window.location.href,u())},200),window.addEventListener("popstate",u)}function y(r=[]){E(()=>window.location.reload(),r)}},9473:(S,d,t)=>{t.a(S,async(f,v)=>{try{let Z=function(){const R=(0,e.Fi)(l.Z.CHIP_LIST_ROOT);R&&((0,g.b)(R,i),w())},i=function(R,L){(0,a.ZM)(R,m.r.FILTERS_CONTAINER);const U=(0,n.E9)(h,m.r.CONTROL,m.r.TEXT_INPUT),j=(0,n.X0)(I,m.r.CONTROL,m.r.NUMBER_INPUT),B=(0,n.HX)(O,m.r.CONTROL,m.r.NUMBER_INPUT),z=(0,n.EY)(V,m.r.CONTROL,m.r.CHECKBOX_INPUT),X=(0,n.H1)(C,m.r.CONTROL,m.r.NUMBER_INPUT),Q=(0,r.nW)("\u041C\u0438\u043D. \u0440\u0430\u0437\u043C\u0435\u0440: ",N,"2","1","10000",m.r.CONTROL,m.r.NUMBER_INPUT),J=(0,s.r)(m.r.CONTROL),D=(0,n.pW)(F,m.r.CONTROL,m.r.CHECKBOX_INPUT);R.append(U,j,B,z,X,Q,J,D),L.append(R)},w=function(){(0,e.fI)(l.Z.PRODUCT).forEach(T)},T=function(R){if(!F.value){(0,a.kl)(R);return}const L=(0,e.Fi)(l.Z.PRODUCT_NAME,R),U=(0,e.Fi)(l.Z.PRODUCT_PRICE,R);if(!L||!U){(0,a.Bt)(R);return}L.style.webkitLineClamp=3;const j=L.innerText,B=(0,e.sf)(U),z=(0,e.ML)(B,!0,!0),X=(0,p.Ay)(j,h)||A(R)||(0,p.iG)(z,C)||G(R);(0,a.UC)(R,X)},A=function(R){const L=(0,e.Fi)(l.Z.PRODUCT_RATING,R),U=(0,e.Fi)(l.Z.PRODUCT_REVIEWS,R);if(!L||L.innerText.startsWith("\u043C\u0430\u043B\u043E")||!U)return!V.value;const j=(0,e.YA)(U,!0,!1,0),B=(0,e.YA)(L,!0,!0,0);return(0,p.JE)(j,I)||(0,p.JE)(B,O)},G=function(R){const L=(0,e.Fi)(l.Z.PRODUCT_VOLUME,R);if(!L)return!1;const U=(0,e.YA)(L,!0,!0,0);return(0,p.JE)(U,N)};var g=t(5213),c=t(5406),p=t(3829),a=t(5539),e=t(573),n=t(7877),l=t(3491),m=t(939),x=t(4521),E=t(4921),y=t(5081),r=t(5884),s=t(4402);const o=(0,y.B)((0,c.Fc)(3)+(0,c.Fc)(4,""));(0,c.Es)();const{createGlobalFilter:u,createSectionFilter:b}=(0,x.z)(w,o),h=b("name-filter"),I=b("min-reviews-filter"),O=b("min-rating-filter",4.8),V=b("no-rating-filter",!1),C=b("max-price-filter"),N=b("min-volume-filter"),F=u("filter-enabled",!0),k={productRoot:null},H=(0,e.Fi)(l.Z.CATEGORY_ROOT);H&&(k.productRoot=await(0,E.xk)(H,l.Z.PRODUCTS_ROOT),Z(),new MutationObserver((0,E.sg)(Z)).observe(k.productRoot,{childList:!0,subtree:!0})),v()}catch(o){v(o)}},1)},3491:(S,d,t)=>{t.d(d,{Z:()=>f});const f={CATEGORY_ROOT:'[class^="Category_root_"]',PRODUCTS_ROOT:'[class^="Products_root_"]',CHIP_LIST_ROOT:'[class^="ChipsList_root_"]',PRODUCT:'[class^="ProductCard_root_"]',PRODUCT_NAME:'[class^="ProductCard_title_"]',PRODUCT_PRICE:'[class^="ProductCardPrice_price_"]',PRODUCT_RATING:'[class^="RatingBadge_root_"] > span:nth-child(1) > span',PRODUCT_REVIEWS:'[class^="RatingBadge_root_"] > span:nth-child(2) > span',PRODUCT_VOLUME:'[class^="ProductCard_volume_"]'}},939:(S,d,t)=>{t.d(d,{r:()=>v});const f={INPUT:{marginLeft:"6px",border:"1px solid #d9d9d9",borderRadius:"8px",padding:"7px 14px 6px",fontSize:"15px",height:"20px",backgroundColor:"#fff",boxShadow:"none"}},v={FILTERS_CONTAINER:{display:"flex",gridGap:"12px",paddingTop:"8px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center",fontSize:"15px"},TEXT_INPUT:{...f.INPUT,width:"150px"},NUMBER_INPUT:{...f.INPUT,width:"55px"},CHECKBOX_INPUT:{marginLeft:"6px",width:"21px",height:"21px",webkitAppearance:"auto"}}}},Y={};function $(S){var d=Y[S];if(d!==void 0)return d.exports;var t=Y[S]={exports:{}};return P[S](t,t.exports,$),t.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",d=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",f=g=>{g&&g.d<1&&(g.d=1,g.forEach(c=>c.r--),g.forEach(c=>c.r--?c.r++:c()))},v=g=>g.map(c=>{if(c!==null&&typeof c=="object"){if(c[S])return c;if(c.then){var p=[];p.d=0,c.then(n=>{a[d]=n,f(p)},n=>{a[t]=n,f(p)});var a={};return a[S]=n=>n(p),a}}var e={};return e[S]=n=>{},e[d]=c,e});$.a=(g,c,p)=>{var a;p&&((a=[]).d=-1);var e=new Set,n=g.exports,l,m,x,E=new Promise((y,r)=>{x=r,m=y});E[d]=n,E[S]=y=>(a&&y(a),e.forEach(y),E.catch(r=>{})),g.exports=E,c(y=>{l=v(y);var r,s=()=>l.map(u=>{if(u[t])throw u[t];return u[d]}),o=new Promise(u=>{r=()=>u(s),r.r=0;var b=h=>h!==a&&!e.has(h)&&(e.add(h),h&&!h.d&&(r.r++,h.push(r)));l.map(h=>h[S](b))});return r.r?o:s()},y=>(y?x(E[t]=y):m(n),f(a))),a&&a.d<0&&(a.d=0)}})(),$.d=(S,d)=>{for(var t in d)$.o(d,t)&&!$.o(S,t)&&Object.defineProperty(S,t,{enumerable:!0,get:d[t]})},$.o=(S,d)=>Object.prototype.hasOwnProperty.call(S,d);var W=$(9473)})();})();
