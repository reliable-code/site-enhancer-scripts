// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.74558794
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var $={5467:(A,E,e)=>{e.d(E,{E2:()=>f});var s=e(9928);function f(v,i={},n=null){const t=(0,s.Sw)(i,n);return t.append(v),t}function p(v,i=null,n={},t={}){const m=createActionLink(v,i,t);return f(m,n)}function d(v,i=null,n=null,t={},m={}){const h=createActionLinkWithIcon(v,n,i,m);return f(h,t)}},9928:(A,E,e)=>{e.d(E,{S:()=>v,Sw:()=>b,kU:()=>p,o5:()=>d});var s=e(4921),f=e(5539);function p(c,o,_){const C=i(c,"text",o);return C.value=_,C}function d(c,o,_,C,F,w){const S=i(c,"number",o);return S.value=_,S.step=C,S.min=F,S.max=w,S}function v(c,o,_){const C=i(c,"checkbox",o);return C.checked=_,C}function i(c={},o=null,_=null){const C=a("input",c);return o&&(C.type=o),_&&(C.addEventListener("keyup",(0,s.sg)(_,200)),C.addEventListener("change",(0,s.sg)(_,100))),C}function n(c={},o=null){return a("span",c,o)}function t(c={},o=null,_=null){const C=a("a",c,o);return _&&(C.href=_),C}function m(c,o=null,_={}){_.cursor||="pointer";const C=t(_,o);return c&&C.addEventListener("click",c),C}function h(c,o,_=null,C={},F={}){C.display||="inline-flex",C.alignItems||="center",C.gap||="0.25em";const w=m(c,_,C);return w.prepend(u(o,F)),w}function D(c={},o=null,_=null){const C=a("button",c,o);return _&&C.addEventListener("click",_),C}function b(c={},o=null){return a("div",c,o)}function P(c={}){return a("i",c)}function u(c,o={}){o.width||="1em",o.height||="1em",o.paddingBottom||="1px";const _=P(o);return _.setAttribute("data-lucide",c),_}function a(c,o,_=null){if(typeof o!="object"||o===null)throw new TypeError("styles should be an object");const C=document.createElement(c);return(0,f.ZM)(C,o),_&&(C.innerHTML=_),C}},573:(A,E,e)=>{e.d(E,{Fi:()=>p,YA:()=>n,fI:()=>d});var s=e(4214);function f(u,a=document){return!!a.querySelector(u)}function p(u,a=document,c=!1){const o=a.querySelector(u);return c&&!o&&console.log(`No element found for selector: ${u}`),o}function d(u,a=document,c=!1){const o=a.querySelectorAll(u);return c&&!o.length&&console.log(`No elements found for selector: ${u}`),o}function v(u,a,c){return[...u.querySelectorAll(a)].find(o=>o.textContent.trim().includes(c))}function i(u,a,c=!1,o=!1,_=null){const C=p(a,u);return n(C,c,o,_)}function n(u,a=!1,c=!1,o=null){if(!u)return o===null?(console.log("No element found"),null):o;const _=u.innerText;return h(_,a,c)}function t(u,a,c=!1){const o=u[a];return n(o,c)}function m(u,a=!1,c=!1){const o=u.textContent;return h(o,a,c)}function h(u,a,c){a&&(u=(0,s.zr)(u)),c&&(u=u.replace(",","."));const o=Number(u);return Number.isNaN(o)?(console.log(`Invalid number: ${u}`),0):o}function D(u){return[...u.childNodes].find(a=>a.nodeType===Node.TEXT_NODE)}function b(u){const a=c=>c.nodeType===Node.TEXT_NODE&&c.textContent.trim()!==""?[c]:[...c.childNodes].flatMap(a);return a(u)}function P(u){return normalizeSpacing(u.textContent)}},5539:(A,E,e)=>{e.d(E,{Bt:()=>f,UC:()=>n,ZM:()=>g,kl:()=>v});function s(r,l){r.parentNode.insertBefore(l,r.nextSibling)}function f(r){r.style.display="none"}function p(r){h(r),f(r)}function d(r){r.intersectionObserver||runOnceOnIntersection(r,()=>f(r))}function v(r){r.style.display=""}function i(r){const l=m(r);r.style.display=l}function n(r,l){l?f(r):v(r)}function t(r,l){l?d(r):(clearIntersectionObserver(r),v(r))}function m(r){return h(r),r.defaultDisplay}function h(r){if(r.defaultDisplay)return;const{display:l}=getComputedStyle(r);r.defaultDisplay=l}function D(){return{show:[],hide:[]}}function b(r,l,T){r?l.hide.push(T):l.show.push(T)}function P(r){r.show.forEach(v),r.hide.forEach(f)}function u(r,l,T=.3){l?c(r,T):a(r)}function a(r){r.style.opacity=""}function c(r,l=.3){r.style.opacity=l}function o(r){r.style.order=""}function _(r,l){r.style.order=l}function C(r,l){r.style.background=l}function F(r,l){const T=getFirstElement(l);if(!T)return;const I=createLink();I.href=r,T.parentNode.append(I),I.append(T)}function w(r,l){const T=getFirstElement(l);T&&S(r,T)}function S(r,l){const T=createLink();T.href=r,T.append(...l.childNodes),l.append(T)}function O(){const r=getURLQueryParam("scrollTo");if(!r)return;const l=document.getElementById(r);l?l.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function R(r,l="custom-global-style"){let T=document.getElementById(l);T||(T=document.createElement("style"),T.id=l,T.type="text/css",document.head.appendChild(T)),T.textContent=r}function g(r,l){Object.assign(r.style,l)}function N(r){return Object.entries(r).map(([l,T])=>`${l.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${T};`).join(" ")}function y(r){return r?r.split(";").filter(l=>l.trim()!=="").reduce((l,T)=>{const[I,U]=T.split(":").map(M=>M.trim()),L=I.replace(/-([a-z])/g,(M,x)=>x.toUpperCase());return l[L]=U,l},{}):{}}function k(r,l,T="text/plain"){const I=new Blob([r],{type:T}),U=URL.createObjectURL(I),L=document.createElement("a");L.href=U,L.download=l,document.body.appendChild(L),L.click(),document.body.removeChild(L),requestAnimationFrame(()=>URL.revokeObjectURL(U))}},4921:(A,E,e)=>{e.d(E,{sg:()=>d,xk:()=>s});function s(n,t,m=null){const h=n.querySelector(t);return h?Promise.resolve(h):new Promise(D=>{const b=new MutationObserver(u);b.observe(n,{childList:!0,subtree:!0});let P;m&&(P=setTimeout(()=>{b.disconnect(),console.log(`No element found for selector: ${t}`),D(null)},m));function u(){const a=n.querySelector(t);a&&(P&&clearTimeout(P),b.disconnect(),D(a))}})}function f(n,t){return n.querySelector(t)?new Promise(h=>{const D=new MutationObserver(b);D.observe(n,{childList:!0,subtree:!0});function b(){n.querySelector(t)||(D.disconnect(),h())}}):Promise.resolve()}function p(n,t=400){return new Promise(m=>{let h;const D=new MutationObserver(()=>{clearTimeout(h),b()});function b(){h=setTimeout(()=>{D.disconnect(),m()},t)}b(),D.observe(n,{childList:!0,subtree:!0})})}function d(n,t=250){let m;return(...h)=>{clearTimeout(m),m=setTimeout(()=>n(...h),t)}}function v(n,t){const m=new IntersectionObserver(h=>{h.forEach(D=>{D.isIntersecting&&(t(),i(n))})});n.intersectionObserver=m,m.observe(n)}function i(n){n.intersectionObserver&&(n.intersectionObserver.disconnect(),n.intersectionObserver=null)}},3829:(A,E,e)=>{e.d(E,{Ay:()=>f,JE:()=>d,iG:()=>v});var s=e(8355);function f(n,t){return!p(n,t)}function p(n,t){if(!t.value)return!0;const m=n.toLowerCase(),h=(0,s.R)(t),D=[],b=[];return h.forEach(P=>{if(P.startsWith("!")){const u=P.substring(1);u&&b.push(u)}else D.push(P)}),D.every(P=>m.includes(P))&&b.every(P=>!m.includes(P))}function d(n,t){return t.value!=null&&n<t.value}function v(n,t){return t.value!=null&&n>t.value}function i(n,t){return t.value&&n!==t.value}},4521:(A,E,e)=>{e.d(E,{z:()=>f});var s=e(3048);function f(p,d=null){return{createGlobalFilter(v,i=null,n=p){return s.V.create(v,i,n)},createSectionFilter(v,i=null,n=p){if(!d)throw new Error("sectionId must be provided to use createSectionFilter.");return s.V.createWithCompositeKey(d,v,i,n)}}}},5884:(A,E,e)=>{e.d(E,{Hw:()=>v,Nm:()=>p,nW:()=>d});var s=e(9928),f=e(5467);function p(i,n,t={},m={}){const h=(0,s.kU)(m,n.updateValueFromEvent,n.value);return(0,f.E2)(h,t,i)}function d(i,n,t,m,h,D={},b={}){const P=(0,s.o5)(b,n.updateValueFromEvent,n.value,t,m,h);return(0,f.E2)(P,D,i)}function v(i,n,t={},m={}){const h=(0,s.S)(m,n.updateValueFromEvent,n.value);return(0,f.E2)(h,t,i)}},7877:(A,E,e)=>{e.d(E,{Ch:()=>h,E9:()=>f,H1:()=>P,HX:()=>p,VD:()=>t,Zi:()=>D,pW:()=>S});var s=e(5884);function f(O,R={},g={}){return(0,s.Nm)("\u041F\u043E\u0438\u0441\u043A: ",O,R,g)}function p(O,R={},g={},N=.1,y=3){return(0,s.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,N,y,5,R,g)}function d(O,R={},g={},N=.1,y=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,N,y,5,R,g)}function v(O,R={},g={}){return n("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,R,g)}function i(O,R={},g={}){return n("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,R,g)}function n(O,R,g={},N={}){return createNumberFilterControl(O,R,"1","1","999999",g,N)}function t(O,R={},g={}){return m("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",O,R,g)}function m(O,R,g={},N={}){return(0,s.nW)(O,R,"5","0","100",g,N)}function h(O,R={},g={}){return(0,s.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",O,"5","0","100",R,g)}function D(O,R,g={},N={},y="250"){return(0,s.nW)(O,R,y,"0","1000000",g,N)}function b(O,R={},g={},N="25"){return D("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",O,R,g,N)}function P(O,R={},g={},N="25"){return D("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",O,R,g,N)}function u(O,R={},g={}){return a("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",O,R,g)}function a(O,R,g={},N={}){return createNumberFilterControl(O,R,"1","0","99999",g,N)}function c(O,R={},g={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",O,"1","2","7",R,g)}function o(O,R={},g={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",O,1,1,10,R,g)}function _(O,R={},g={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",O,R,g)}function C(O,R={},g={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",O,R,g)}function F(O,R={},g={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",O,R,g)}function w(O,R={},g={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",O,R,g)}function S(O,R={},g={}){return(0,s.Hw)("\u0412\u043A\u043B: ",O,R,g)}},8355:(A,E,e)=>{e.d(E,{R:()=>s});function s(p){return p.value.toLowerCase().split(",").map(d=>d.trim()).filter(d=>d!=="")}function f(p){return s(p).filter(d=>!d.startsWith("!"))}},5213:(A,E,e)=>{e.d(E,{b:()=>p});var s=e(9928),f=e(573);function p(d,v,i=!1,n="customFiltersContainer"){let t=(0,f.Fi)(`#${n}`,d);if(t)if(i)t.remove();else return;t=(0,s.Sw)(),t.id=n,v(t,d)}},4444:(A,E,e)=>{e.d(E,{s:()=>s});function s(f){let v=2166136261;for(let i=0;i<f.length;i+=1){const n=f.charCodeAt(i);v^=n,v=Math.imul(v,16777619)}return v>>>0}},5081:(A,E,e)=>{e.d(E,{B:()=>p});var s=e(4444);function f(d){return(0,s.s)(d).toString(16).padStart(8,"0")}function p(d,v="common"){return d?f(d):v}},8200:(A,E,e)=>{e.d(E,{s:()=>s});function s(f){const{target:p}=f,{type:d}=p;switch(d){case"text":return`"${p.value}"`;case"number":return p.value;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${d}`),null}}},157:(A,E,e)=>{e.d(E,{Fg:()=>s,vx:()=>p});const s=window.GM_setValue,f=window.GM.setValue,p=window.GM_getValue,d=window.GM_addValueChangeListener},4639:(A,E,e)=>{e.d(E,{a:()=>d});var s=e(1870),f=e(8200),p=e(3976);class d extends s.j{constructor(i=null,n=null){super(i,n)}updateValueFromEvent=i=>{const n=(0,p.$)((0,f.s)(i));this.value!==n&&(this.value=n,this.onChangeIfDefined())}}},1870:(A,E,e)=>{e.d(E,{j:()=>s});class s{constructor(p,d){this.value=p,this.onChange=d}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,E,e)=>{e.d(E,{V:()=>v});var s=e(1870),f=e(8200),p=e(3976),d=e(157);class v extends s.j{constructor(n,t=null,m=null){super((0,d.vx)(n,t),m),this.storageKey=n,this.defaultValue=t}static create(n,t=null,m=null){return new v(n,t,m)}static createWithCompositeKey(n,t,m=null,h=null){const D=`${n}-${t}`;return new v(D,m,h)}updateValueFromEvent=n=>{const t=(0,f.s)(n),m=(0,p.$)(t);this.updateValue(m)};updateValue(n,t=!0){this.value!==n&&((0,d.Fg)(this.storageKey,n),this.value=n,t&&this.onChangeIfDefined())}clearValue(n=!1){this.updateValue(null,n)}resetValue(n=!1){this.updateValue(this.defaultValue,n)}}},3976:(A,E,e)=>{e.d(E,{$:()=>s});function s(f){return f===""?null:JSON.parse(f)}},4214:(A,E,e)=>{e.d(E,{zr:()=>f});function s(i){return i.replace(/\D/g,"")}function f(i){return i.replace(/[^\d.,-]/g,"")}function p(i){return i.replace(/\s/g,"")}function d(i){return i.charAt(0).toUpperCase()+i.slice(1)}function v(i){return i.replace(/\s+/g," ").trim()}},5406:(A,E,e)=>{e.d(E,{C$:()=>p,Fc:()=>s,W2:()=>t});function s(u,a="common",c=!1){const{pathname:o}=window.location;return f(o,u,a,c)}function f(u,a,c,o=!1){const C=u.split("/")[a]||c;return o&&console.log(`Pathname element: ${C}`),C}function p(u,a="common",c=!1){const o=s(u,"",c);return d(o,a,c)}function d(u,a,c){if(!u)return a;const o=u.split("-").at(-1);return c&&console.log(`Pathname element ending: ${o}`),o}function v(u,a,c="common",o=!1){const _=f(u,a,"",o);return d(_,c,o)}function i(u){return new URLSearchParams(window.location.search).get(u)}function n(u){return u.split("?")[0]}function t(u){return window.location.pathname.includes(u)}function m(u){return u.some(a=>t(a))}function h(u){return window.location.pathname.split("/").some(c=>c===u)}function D(u){try{const a=new URL(window.location.href);Object.entries(u).forEach(([c,o])=>{a.searchParams.set(c,o)}),window.location.href=a.toString()}catch(a){console.error("Failed to redirect:",a)}}function b(u,a=[]){const c={pathname:window.location.pathname};a.forEach(C=>{c[C]=i(C)});function o(){const C={pathname:window.location.pathname};a.forEach(F=>{C[F]=i(F)}),Object.keys(c).some(F=>c[F]!==C[F])&&u()}let _=window.location.href;setInterval(()=>{window.location.href!==_&&(_=window.location.href,o())},200),window.addEventListener("popstate",o)}function P(u=[]){b(()=>window.location.reload(),u)}},4010:(A,E,e)=>{e.a(A,async(s,f)=>{try{let i=function(){return(0,v.W2)("details")};var p=e(1901),d=e(2344),v=e(5406);i()?await(0,p.K)():await(0,d.P)(),f()}catch(i){f(i)}},1)},1926:(A,E,e)=>{e.d(E,{i:()=>s});const s={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(A,E,e)=>{e.d(E,{Z:()=>p});var s=e(573),f=e(1926);function p(t,m,h,D){const b=(0,s.Fi)(m,t);return(d(b,D)||!b.hasAttribute(f.i.BALANCED_CASHBACK_PRICE))&&v(b,h,D),b}function d(t,m){if(t.hasAttribute(f.i.COUPON)){const h=+t.getAttribute(f.i.COUPON);return m!==h}return!!m}function v(t,m,h){let D=i(t);t.setAttribute(f.i.PRICE,D),h?(h<1?D=(D*(1-h)).toFixed():D-=h,t.setAttribute(f.i.COUPON,h)):t.removeAttribute(f.i.COUPON);const b=n(D,m),P=D-b;t.setAttribute(f.i.BALANCED_CASHBACK_PRICE,P);const u=`${D.toLocaleString()} (${P.toLocaleString()}) \u20BD`;t.innerText=u,t.title=`-${b.toLocaleString()}`}function i(t){return t.hasAttribute(f.i.PRICE)?+t.getAttribute(f.i.PRICE):(0,s.YA)(t,!0)}function n(t,m){const h=m/100;return(t*h/(1+h)).toFixed(0)}},4633:(A,E,e)=>{e.d(E,{r:()=>f});const s={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},f={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...s.INPUT,width:"180px"},NUMBER_INPUT:{...s.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(A,E,e)=>{e.d(E,{P:()=>R});var s=e(4921),f=e(5213),p=e(1319),d=e(5406),v=e(4639),i=e(3829),n=e(5884),t=e(5539),m=e(573),h=e(7877),D=e(1926),b=e(4633),P=e(4521),u=e(5081);const a={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"},c=(0,u.B)((0,d.Fc)(2)),{createSectionFilter:o}=(0,P.z)(y,c),_=o("name-filter"),C=o("min-cashback-filter"),F=o("max-price-filter"),w=o("min-discount-filter"),S=o("seller-name-filter"),O=new v.a(!1,y);async function R(){await g();const r=await(0,s.xk)(document,"#app");new MutationObserver((0,s.sg)(g)).observe(r,{childList:!0,subtree:!0})}async function g(){const r=await(0,s.xk)(document,a.PRODUCT_CARD_LIST_HEADER);(0,f.b)(r,N);const l=r.parentNode;if(l.hasAttribute(D.i.OBSERVED))return;new MutationObserver((0,s.sg)(y,50)).observe(l,{childList:!0,subtree:!0}),l.setAttribute(D.i.OBSERVED,"")}function N(r,l){(0,t.ZM)(r,b.r.CONTAINER);const T=(0,h.E9)(_,b.r.CONTROL,b.r.TEXT_INPUT),I=(0,h.Ch)(C,b.r.CONTROL,b.r.NUMBER_INPUT),U=(0,h.H1)(F,b.r.CONTROL,b.r.NUMBER_INPUT,"250"),L=(0,h.VD)(w,b.r.CONTROL,b.r.NUMBER_INPUT),M=(0,n.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",S,b.r.CONTROL,b.r.TEXT_INPUT),x=(0,h.pW)(O,b.r.CONTROL,b.r.CHECKBOX_INPUT);r.append(T,I,U,L,M,x),l.append(r)}function y(){(0,m.fI)(a.PRODUCT_CARD).forEach(k)}function k(r){if(!O.value){(0,t.kl)(r);return}const l=(0,m.Fi)(a.PRODUCT_CARD_TITLE,r),T=(0,m.Fi)(a.PRODUCT_CARD_CASHBACK,r),I=(0,m.Fi)(a.PRODUCT_CARD_DISCOUNT,r);if(!l){(0,t.Bt)(r);return}const U=l.innerText,L=(0,m.YA)(T,!0,!1,0),M=Math.abs((0,m.YA)(I,!0,!1,0)),W=+(0,p.Z)(r,a.PRODUCT_CARD_PRICE,L).getAttribute(D.i.BALANCED_CASHBACK_PRICE),K=(0,m.Fi)(a.PRODUCT_CARD_SELLER_NAME,r),V=K?(0,i.Ay)(K.innerText,S):!1,G=(0,i.Ay)(U,_)||(0,i.JE)(L,C)||(0,i.iG)(W,F)||(0,i.JE)(M,w)||V;(0,t.UC)(r,G)}},1901:(A,E,e)=>{e.d(E,{K:()=>g});var s=e(4921),f=e(5081),p=e(5406),d=e(5213),v=e(4639),i=e(3829),n=e(5539),t=e(573),m=e(7877),h=e(5884),D=e(1319),b=e(1926),P=e(4633),u=e(4521);const a={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"},c=(0,f.B)((0,p.C$)(3)),{createGlobalFilter:o,createSectionFilter:_}=(0,u.z)(k,c),C=_("min-cashback-filter"),F=_("max-price-filter"),w=_("max-discounted-price-filter"),S=o("min-seller-rating-filter"),O=new v.a(null,k),R=o("filter-enabled",!1);async function g(){await N();const l=await(0,s.xk)(document,a.APP);new MutationObserver((0,s.sg)(N)).observe(l,{childList:!0})}async function N(){const l=await(0,s.xk)(document,a.OFFERS_FILTER);(0,d.b)(l,y),k();const T=(0,t.Fi)(a.OFFERS_CONTAINER);if(T.hasAttribute(b.i.OBSERVED))return;new MutationObserver((0,s.sg)(k,50)).observe(T,{childList:!0,subtree:!0}),T.setAttribute(b.i.OBSERVED,"")}function y(l,T){(0,n.ZM)(l,P.r.CONTAINER);const I=(0,m.Ch)(C,P.r.CONTROL,P.r.NUMBER_INPUT),U=(0,m.H1)(F,P.r.CONTROL,P.r.NUMBER_INPUT,"250"),L=(0,m.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",w,P.r.CONTROL,P.r.NUMBER_INPUT),M=(0,m.HX)(S,P.r.CONTROL,P.r.NUMBER_INPUT),x=(0,h.nW)("\u041A\u0443\u043F\u043E\u043D: ",O,"500","0","100000",P.r.CONTROL,P.r.NUMBER_INPUT),W=(0,m.pW)(R,P.r.CONTROL,P.r.CHECKBOX_INPUT);l.append(I,U,L,M,x,W),T.append(l)}function k(){(0,t.fI)(a.OFFER).forEach(r)}function r(l){if(!R.value){(0,n.kl)(l);return}const T=(0,t.Fi)(a.PRICE,l),I=(0,t.Fi)(a.CASHBACK,l),U=(0,t.Fi)(a.SELLER_RATING,l);if(!T||!I||!U){(0,n.Bt)(l);return}const L=(0,t.YA)(I,!0),M=(0,D.Z)(l,a.PRICE,L,O.value),x=+M.getAttribute(b.i.PRICE),W=+M.getAttribute(b.i.BALANCED_CASHBACK_PRICE),K=(0,t.YA)(U,!0),V=(0,i.JE)(L,C)||(0,i.iG)(x,F)||(0,i.iG)(W,w)||(0,i.JE)(K,S);(0,n.UC)(l,V)}}},H={};function B(A){var E=H[A];if(E!==void 0)return E.exports;var e=H[A]={exports:{}};return $[A](e,e.exports,B),e.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=p=>{p&&p.d<1&&(p.d=1,p.forEach(d=>d.r--),p.forEach(d=>d.r--?d.r++:d()))},f=p=>p.map(d=>{if(d!==null&&typeof d=="object"){if(d[A])return d;if(d.then){var v=[];v.d=0,d.then(t=>{i[E]=t,s(v)},t=>{i[e]=t,s(v)});var i={};return i[A]=t=>t(v),i}}var n={};return n[A]=t=>{},n[E]=d,n});B.a=(p,d,v)=>{var i;v&&((i=[]).d=-1);var n=new Set,t=p.exports,m,h,D,b=new Promise((P,u)=>{D=u,h=P});b[E]=t,b[A]=P=>(i&&P(i),n.forEach(P),b.catch(u=>{})),p.exports=b,d(P=>{m=f(P);var u,a=()=>m.map(o=>{if(o[e])throw o[e];return o[E]}),c=new Promise(o=>{u=()=>o(a),u.r=0;var _=C=>C!==i&&!n.has(C)&&(n.add(C),C&&!C.d&&(u.r++,C.push(u)));m.map(C=>C[A](_))});return u.r?c:a()},P=>(P?D(b[e]=P):h(t),s(i))),i&&i.d<0&&(i.d=0)}})(),B.d=(A,E)=>{for(var e in E)B.o(E,e)&&!B.o(A,e)&&Object.defineProperty(A,e,{enumerable:!0,get:E[e]})},B.o=(A,E)=>Object.prototype.hasOwnProperty.call(A,E);var j=B(4010)})();})();
