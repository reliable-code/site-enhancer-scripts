// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.74673087
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var ee={5467:(_,h,e)=>{e.d(h,{E2:()=>o});var l=e(9928);function o(v,p={},t=null){const r=(0,l.Sw)(p,t);return r.append(v),r}function s(v,p=null,t={},r={}){const i=createActionLink(v,p,r);return o(i,t)}function a(v,p=null,t=null,r={},i={}){const E=createActionLinkWithIcon(v,t,p,i);return o(E,r)}},9928:(_,h,e)=>{e.d(h,{S:()=>v,Sw:()=>F,d:()=>r,kU:()=>s,o5:()=>a});var l=e(4921),o=e(5539);function s(d,c,R){const u=p(d,"text",c);return u.value=R,u}function a(d,c,R,u,b,O){const P=p(d,"number",c);return P.value=R,P.step=u,P.min=b,P.max=O,P}function v(d,c,R){const u=p(d,"checkbox",c);return u.checked=R,u}function p(d={},c=null,R=null){const u=m("input",d);return c&&(u.type=c),R&&(u.addEventListener("keyup",(0,l.sg)(R,200)),u.addEventListener("change",(0,l.sg)(R,100))),u}function t(d={},c=null){return m("span",d,c)}function r(d={},c=null,R=null){const u=m("a",d,c);return R&&(u.href=R),u}function i(d,c=null,R={}){R.cursor||="pointer";const u=r(R,c);return d&&u.addEventListener("click",d),u}function E(d,c,R=null,u={},b={}){u.display||="inline-flex",u.alignItems||="center",u.gap||="0.25em";const O=i(d,R,u);return O.prepend(n(c,b)),O}function C(d={},c=null,R=null){const u=m("button",d,c);return R&&u.addEventListener("click",R),u}function F(d={},c=null){return m("div",d,c)}function L(d={}){return m("i",d)}function n(d,c={}){c.width||="1em",c.height||="1em",c.paddingBottom||="1px";const R=L(c);return R.setAttribute("data-lucide",d),R}function m(d,c,R=null){if(typeof c!="object"||c===null)throw new TypeError("styles should be an object");const u=document.createElement(d);return(0,o.ZM)(u,c),R&&(u.innerHTML=R),u}},573:(_,h,e)=>{e.d(h,{Fi:()=>s,YA:()=>t,fI:()=>a});var l=e(4214);function o(n,m=document){return!!m.querySelector(n)}function s(n,m=document,d=!1){const c=m.querySelector(n);return d&&!c&&console.log(`No element found for selector: ${n}`),c}function a(n,m=document,d=!1){const c=m.querySelectorAll(n);return d&&!c.length&&console.log(`No elements found for selector: ${n}`),c}function v(n,m,d){return[...n.querySelectorAll(m)].find(c=>c.textContent.trim().includes(d))}function p(n,m,d=!1,c=!1,R=null){const u=s(m,n);return t(u,d,c,R)}function t(n,m=!1,d=!1,c=null){if(!n)return c===null?(console.log("No element found"),null):c;const R=n.innerText;return E(R,m,d)}function r(n,m,d=!1){const c=n[m];return t(c,d)}function i(n,m=!1,d=!1){const c=n.textContent;return E(c,m,d)}function E(n,m,d){m&&(n=(0,l.zr)(n)),d&&(n=n.replace(",","."));const c=Number(n);return Number.isNaN(c)?(console.log(`Invalid number: ${n}`),0):c}function C(n){return[...n.childNodes].find(m=>m.nodeType===Node.TEXT_NODE)}function F(n){const m=d=>d.nodeType===Node.TEXT_NODE&&d.textContent.trim()!==""?[d]:[...d.childNodes].flatMap(m);return m(n)}function L(n){return normalizeSpacing(n.textContent)}},5539:(_,h,e)=>{e.d(h,{Bt:()=>o,UC:()=>t,WH:()=>l,ZM:()=>w,kl:()=>v});function l(f,N){f.parentNode.insertBefore(N,f.nextSibling)}function o(f){f.style.display="none"}function s(f){E(f),o(f)}function a(f){f.intersectionObserver||runOnceOnIntersection(f,()=>o(f))}function v(f){f.style.display=""}function p(f){const N=i(f);f.style.display=N}function t(f,N){N?o(f):v(f)}function r(f,N){N?a(f):(clearIntersectionObserver(f),v(f))}function i(f){return E(f),f.defaultDisplay}function E(f){if(f.defaultDisplay)return;const{display:N}=getComputedStyle(f);f.defaultDisplay=N}function C(){return{show:[],hide:[]}}function F(f,N,D){f?N.hide.push(D):N.show.push(D)}function L(f){f.show.forEach(v),f.hide.forEach(o)}function n(f,N,D=.3){N?d(f,D):m(f)}function m(f){f.style.opacity=""}function d(f,N=.3){f.style.opacity=N}function c(f){f.style.order=""}function R(f,N){f.style.order=N}function u(f,N){f.style.background=N}function b(f,N){const D=getFirstElement(N);if(!D)return;const $=createLink();$.href=f,D.parentNode.append($),$.append(D)}function O(f,N){const D=getFirstElement(N);D&&P(f,D)}function P(f,N){const D=createLink();D.href=f,D.append(...N.childNodes),N.append(D)}function g(){const f=getURLQueryParam("scrollTo");if(!f)return;const N=document.getElementById(f);N?N.scrollIntoView():console.log(`Element with ID "${f}" was not found.`)}function I(f,N="custom-global-style"){let D=document.getElementById(N);D||(D=document.createElement("style"),D.id=N,D.type="text/css",document.head.appendChild(D)),D.textContent=f}function w(f,N){Object.assign(f.style,N)}function y(f){return Object.entries(f).map(([N,D])=>`${N.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${D};`).join(" ")}function U(f){return f?f.split(";").filter(N=>N.trim()!=="").reduce((N,D)=>{const[$,X]=D.split(":").map(M=>M.trim()),S=$.replace(/-([a-z])/g,(M,V)=>V.toUpperCase());return N[S]=X,N},{}):{}}function z(f,N,D="text/plain"){const $=new Blob([f],{type:D}),X=URL.createObjectURL($),S=document.createElement("a");S.href=X,S.download=N,document.body.appendChild(S),S.click(),document.body.removeChild(S),requestAnimationFrame(()=>URL.revokeObjectURL(X))}},4921:(_,h,e)=>{e.d(h,{sg:()=>a,xk:()=>l});function l(t,r,i=null){const E=t.querySelector(r);return E?Promise.resolve(E):new Promise(C=>{const F=new MutationObserver(n);F.observe(t,{childList:!0,subtree:!0});let L;i&&(L=setTimeout(()=>{F.disconnect(),console.log(`No element found for selector: ${r}`),C(null)},i));function n(){const m=t.querySelector(r);m&&(L&&clearTimeout(L),F.disconnect(),C(m))}})}function o(t,r){return t.querySelector(r)?new Promise(E=>{const C=new MutationObserver(F);C.observe(t,{childList:!0,subtree:!0});function F(){t.querySelector(r)||(C.disconnect(),E())}}):Promise.resolve()}function s(t,r=400){return new Promise(i=>{let E;const C=new MutationObserver(()=>{clearTimeout(E),F()});function F(){E=setTimeout(()=>{C.disconnect(),i()},r)}F(),C.observe(t,{childList:!0,subtree:!0})})}function a(t,r=250){let i;return(...E)=>{clearTimeout(i),i=setTimeout(()=>t(...E),r)}}function v(t,r){const i=new IntersectionObserver(E=>{E.forEach(C=>{C.isIntersecting&&(r(),p(t))})});t.intersectionObserver=i,i.observe(t)}function p(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(_,h,e)=>{e.d(h,{Ay:()=>o,JE:()=>a,iG:()=>v});var l=e(8355);function o(t,r){return!s(t,r)}function s(t,r){if(!r.value)return!0;const i=t.toLowerCase(),E=(0,l.R)(r),C=[],F=[];return E.forEach(L=>{if(L.startsWith("!")){const n=L.substring(1);n&&F.push(n)}else C.push(L)}),C.every(L=>i.includes(L))&&F.every(L=>!i.includes(L))}function a(t,r){return r.value!=null&&t<r.value}function v(t,r){return r.value!=null&&t>r.value}function p(t,r){return r.value&&t!==r.value}},4521:(_,h,e)=>{e.d(h,{z:()=>o});var l=e(3048);function o(s,a=null){return{createGlobalFilter(v,p=null,t=s){return l.V.create(v,p,t)},createSectionFilter(v,p=null,t=s){if(!a)throw new Error("sectionId must be provided to use createSectionFilter.");return l.V.createWithCompositeKey(a,v,p,t)}}}},5884:(_,h,e)=>{e.d(h,{Hw:()=>v,Nm:()=>s,nW:()=>a});var l=e(9928),o=e(5467);function s(p,t,r={},i={}){const E=(0,l.kU)(i,t.updateValueFromEvent,t.value);return(0,o.E2)(E,r,p)}function a(p,t,r,i,E,C={},F={}){const L=(0,l.o5)(F,t.updateValueFromEvent,t.value,r,i,E);return(0,o.E2)(L,C,p)}function v(p,t,r={},i={}){const E=(0,l.S)(i,t.updateValueFromEvent,t.value);return(0,o.E2)(E,r,p)}},7877:(_,h,e)=>{e.d(h,{E9:()=>o,FR:()=>a,HX:()=>s,X0:()=>v,pW:()=>P});var l=e(5884);function o(g,I={},w={}){return(0,l.Nm)("\u041F\u043E\u0438\u0441\u043A: ",g,I,w)}function s(g,I={},w={},y=.1,U=3){return(0,l.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",g,y,U,5,I,w)}function a(g,I={},w={},y=.1,U=3){return(0,l.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",g,y,U,5,I,w)}function v(g,I={},w={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",g,I,w)}function p(g,I={},w={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",g,I,w)}function t(g,I,w={},y={}){return(0,l.nW)(g,I,"1","1","999999",w,y)}function r(g,I={},w={}){return i("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",g,I,w)}function i(g,I,w={},y={}){return createNumberFilterControl(g,I,"5","0","100",w,y)}function E(g,I={},w={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",g,"5","0","100",I,w)}function C(g,I,w={},y={},U="250"){return createNumberFilterControl(g,I,U,"0","1000000",w,y)}function F(g,I={},w={},y="25"){return C("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",g,I,w,y)}function L(g,I={},w={},y="25"){return C("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",g,I,w,y)}function n(g,I={},w={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",g,I,w)}function m(g,I,w={},y={}){return createNumberFilterControl(g,I,"1","0","99999",w,y)}function d(g,I={},w={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",g,"1","2","7",I,w)}function c(g,I={},w={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",g,1,1,10,I,w)}function R(g,I={},w={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",g,I,w)}function u(g,I={},w={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",g,I,w)}function b(g,I={},w={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",g,I,w)}function O(g,I={},w={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",g,I,w)}function P(g,I={},w={}){return(0,l.Hw)("\u0412\u043A\u043B: ",g,I,w)}},8355:(_,h,e)=>{e.d(h,{R:()=>l,f:()=>o});function l(s){return s.value.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a!=="")}function o(s){return l(s).filter(a=>!a.startsWith("!"))}},5213:(_,h,e)=>{e.d(h,{b:()=>s});var l=e(9928),o=e(573);function s(a,v,p=!1,t="customFiltersContainer"){let r=(0,o.Fi)(`#${t}`,a);if(r)if(p)r.remove();else return;r=(0,l.Sw)(),r.id=t,v(r,a)}},8200:(_,h,e)=>{e.d(h,{s:()=>l});function l(o){const{target:s}=o,{type:a}=s;switch(a){case"text":return`"${s.value}"`;case"number":return s.value;case"checkbox":return s.checked;default:return console.log(`Unknown input type: ${a}`),null}}},157:(_,h,e)=>{e.d(h,{Fg:()=>l,IC:()=>a,vx:()=>s});const l=window.GM_setValue,o=window.GM.setValue,s=window.GM_getValue,a=window.GM_addValueChangeListener},1870:(_,h,e)=>{e.d(h,{j:()=>l});class l{constructor(s,a){this.value=s,this.onChange=a}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(_,h,e)=>{e.d(h,{V:()=>v});var l=e(1870),o=e(8200),s=e(3976),a=e(157);class v extends l.j{constructor(t,r=null,i=null){super((0,a.vx)(t,r),i),this.storageKey=t,this.defaultValue=r}static create(t,r=null,i=null){return new v(t,r,i)}static createWithCompositeKey(t,r,i=null,E=null){const C=`${t}-${r}`;return new v(C,i,E)}updateValueFromEvent=t=>{const r=(0,o.s)(t),i=(0,s.$)(r);this.updateValue(i)};updateValue(t,r=!0){this.value!==t&&((0,a.Fg)(this.storageKey,t),this.value=t,r&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(_,h,e)=>{e.d(h,{$:()=>l});function l(o){return o===""?null:JSON.parse(o)}},4214:(_,h,e)=>{e.d(h,{$z:()=>l,zr:()=>o});function l(p){return p.replace(/\D/g,"")}function o(p){return p.replace(/[^\d.,-]/g,"")}function s(p){return p.replace(/\s/g,"")}function a(p){return p.charAt(0).toUpperCase()+p.slice(1)}function v(p){return p.replace(/\s+/g," ").trim()}},5406:(_,h,e)=>{e.d(h,{$F:()=>p,Fc:()=>l,bn:()=>o,z2:()=>E});function l(n,m="common",d=!1){const{pathname:c}=window.location;return o(c,n,m,d)}function o(n,m,d,c=!1){const u=n.split("/")[m]||d;return c&&console.log(`Pathname element: ${u}`),u}function s(n,m="common",d=!1){const c=l(n,"",d);return a(c,m,d)}function a(n,m,d){if(!n)return m;const c=n.split("-").at(-1);return d&&console.log(`Pathname element ending: ${c}`),c}function v(n,m,d="common",c=!1){const R=o(n,m,"",c);return a(R,d,c)}function p(n){return new URLSearchParams(window.location.search).get(n)}function t(n){return n.split("?")[0]}function r(n){return window.location.pathname.includes(n)}function i(n){return n.some(m=>r(m))}function E(n){return window.location.pathname.split("/").some(d=>d===n)}function C(n){try{const m=new URL(window.location.href);Object.entries(n).forEach(([d,c])=>{m.searchParams.set(d,c)}),window.location.href=m.toString()}catch(m){console.error("Failed to redirect:",m)}}function F(n,m=[]){const d={pathname:window.location.pathname};m.forEach(u=>{d[u]=p(u)});function c(){const u={pathname:window.location.pathname};m.forEach(b=>{u[b]=p(b)}),Object.keys(d).some(b=>d[b]!==u[b])&&n()}let R=window.location.href;setInterval(()=>{window.location.href!==R&&(R=window.location.href,c())},200),window.addEventListener("popstate",c)}function L(n=[]){F(()=>window.location.reload(),n)}},2524:(_,h,e)=>{e.d(h,{d5:()=>s,vX:()=>t,ft:()=>a});var l=e(157);class o{constructor(E=Date.now(),C=[]){this.lastCheckDate=E,this.reviewsData=C}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(E){const{lastCheckDate:C,reviewsData:F}=E;return new o(C,F)}}const s={LAST_DOCTOR_UPDATE:"last-doctor-update"};function a(i,E){const C=v(i),F=(0,l.vx)(C),L=p(F);L.reviewsData=E,L.updateLastCheckDate(),(0,l.Fg)(C,L),(0,l.Fg)(s.LAST_DOCTOR_UPDATE,Date.now())}function v(i){return`doctor-${i}`}function p(i){return i?o.fromObject(i):new o}function t(i){return r(i)?.reviewsData??null}function r(i){const E=v(i);return(0,l.vx)(E)}},1753:(_,h,e)=>{e.a(_,async(l,o)=>{try{var s=e(573),a=e(7858),v=e(4231),p=e(5406),t=e(5072);const i=(0,s.Fi)(".appointments_page");i?(0,v.$)(i):(0,p.z2)("otzivi")?await(0,t.N)():(0,p.z2)("vrach")&&(0,a.O)(),o()}catch(r){o(r)}},1)},7653:(_,h,e)=>{e.d(h,{NI:()=>i,z1:()=>F,Np:()=>d,pR:()=>L,sp:()=>R,rd:()=>c});var l=e(9928),o=e(573);const s={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var a=e(8586),v=e(5406),p=e(4214);const t="additionalLinksAppended",r=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function i(u,b){b.classList.contains(t)||(r.forEach(O=>{E(u,b,O)}),b.classList.add(t))}function E(u,b,O){const P=C(u,O),g=(0,l.d)({},O,P),I=document.createElement("br");b.append(I,g)}function C(u,b){const O=`${u} ${b}`;return`https://www.google.com/search?q=${encodeURIComponent(O)}&btnI`}function F(){const u=(0,o.Fi)(s.DOCTOR_CARD_NAME,document,!0);if(!u)return;const b=u.innerText.trim(),O=(0,l.Sw)();O.style.textAlign="center",(0,o.Fi)(s.DOCTOR_INTRO_LEFT).append(O),i(b,O)}function L(u,b,O=!1){const P=(0,l.Sw)(a.r.REVIEWS_INFO);O&&(P.style.justifyContent="center"),P.classList.add("v-application");const g=(0,l.Sw)(a.r.REVIEWS_INFO_BLOCK);return g.style.height=O?"10px":"23px",g.append(P),u.slice(O?1:0).forEach(I=>{const{category:w,title:y,count:U,bgClassSuffix:z}=I,f=`${b}?rates_category=${w}`,N=O?U:`${y} ${U}`,D=(0,l.d)(a.r.REVIEW_INFO,N,f);D.classList=n(z),P.append(D),O&&m(D,y)}),g}function n(u){return`text-caption ui-kit-color-text px-2 py-1 rounded ui-kit-bg-bg-${u}`}function m(u,b){let O=null;u.addEventListener("mouseenter",()=>{O=(0,l.Sw)(a.r.REVIEW_INFO_TOOLTIP,b),document.body.appendChild(O);const P=u.getBoundingClientRect();O.style.left=`${(P.left+P.right)/2-O.offsetWidth/2+window.scrollX+2}px`,O.style.top=`${P.top+window.scrollY-O.offsetHeight-4}px`}),u.addEventListener("mouseleave",()=>{O&&(O.remove(),O=null)})}function d(u){const b=(0,o.Fi)(s.NAME_SPAN_HOLDER,document,!0);if(!b)return;const O=(0,o.Fi)(s.NAME_SPAN,b,!0);O&&O.append(u)}function c(){const u=(0,v.Fc)(3,"unknown");return(0,p.$z)(u)}function R(u){const b=(0,v.bn)(u,5,"");return(0,p.$z)(b)}},8586:(_,h,e)=>{e.d(h,{r:()=>o});const l={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},o={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...l.INPUT,width:"195px"},NUMBER_INPUT:{...l.INPUT,width:"70px"},CHECKBOX_INPUT:{...l.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(_,h,e)=>{e.d(h,{$:()=>w});var l=e(5406),o=e(573),s=e(5539),a=e(3829),v=e(7653),p=e(5213),t=e(5884),r=e(7877);const i={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .ui-text",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var E=e(4521),C=e(2524),F=e(4921),L=e(157),n=e(8586);const m=(0,l.Fc)(2),{createGlobalFilter:d,createSectionFilter:c}=(0,E.z)(z,m),R=c("spec-filter"),u=c("clinic-filter"),b=c("min-reviews-filter",10),O=c("min-experience-filter",5,X),P=c("max-experience-filter",40),g=d("filter-enabled",!0),I={doctorCardsCache:new WeakMap};function w(S){X(),y();const M=(0,o.Fi)(i.DOCTOR_FILTERS);(0,p.b)(M,U),z(),(0,L.IC)(C.d5.LAST_DOCTOR_UPDATE,z),new MutationObserver((0,F.sg)(z)).observe(S,{childList:!0})}function y(){const S=(0,o.Fi)(i.LIST_HEADER);S&&S.remove()}function U(S,M){(0,s.ZM)(S,n.r.FILTERS_CONTAINER),S.style.marginTop="6px";const V=(0,t.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",R,n.r.CONTROL,n.r.TEXT_INPUT),G=(0,t.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",u,n.r.CONTROL,n.r.TEXT_INPUT),T=(0,r.X0)(b,n.r.CONTROL,n.r.NUMBER_INPUT),A=(0,t.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",O,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),x=(0,t.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",P,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),W=(0,r.pW)(g,n.r.CONTROL,n.r.CHECKBOX_INPUT);S.append(V,G,T,A,x,W),M.append(S)}function z(){(0,o.fI)(i.DOCTOR_CARD).forEach(f)}function f(S){if(!g.value){(0,s.kl)(S);return}let M=I.doctorCardsCache.get(S);if(!M){const G=(0,o.Fi)(i.PROFILE_CARD,S),T=(0,o.Fi)(i.REVIEWS_LINK,G),A=(0,o.Fi)(i.EXPERIENCE_WRAP,S);if(!T||!A){(0,s.Bt)(S);return}const W=(0,o.Fi)(i.SPEC_WRAP,S,!0).innerText.trim(),B=(0,o.Fi)(i.CLINIC_CONTAINER,S,!0),k=(0,o.Fi)(i.CLINIC_WRAP,B,!0).innerText.trim(),K=(0,o.YA)(T,!0),j=(0,o.YA)(A,!0),Y=N(T);T.href=Y,(0,v.NI)(D(S),G),M={specInfo:W,clinicName:k,reviewsLinkNumber:K,experienceNumber:j,reviewsLink:T,reviewInfoAppended:!1},I.doctorCardsCache.set(S,M)}$(M);const V=(0,a.Ay)(M.specInfo,R)||(0,a.Ay)(M.clinicName,u)||(0,a.JE)(M.reviewsLinkNumber,b)||(0,a.JE)(M.experienceNumber,O)||(0,a.iG)(M.experienceNumber,P);(0,s.UC)(S,V)}function N(S){return S.href.replace(/\/#otzivi$/,"/otzivi/")}function D(S){return(0,o.Fi)(i.DOCTOR_CARD_NAME,S,!0).innerText}function $(S){if(S.reviewInfoAppended)return;const{reviewsLink:M}=S,V=M.href,G=(0,C.vX)((0,v.sp)(V));if(!G)return;const T=(0,v.pR)(G,V,!0);(0,s.WH)(M,T),S.reviewInfoAppended=!0}function X(){if(!O.value)return;const S=new URL(window.location.href);+S.searchParams.get("experience")!==O.value&&(S.searchParams.set("experience",O.value),window.location.href=S.toString())}},7858:(_,h,e)=>{e.d(h,{O:()=>p});var l=e(573),o=e(9928),s=e(7653);const a={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var v=e(2524);function p(){(0,s.z1)(),r();const E=t();i(E);const C=(0,v.vX)((0,s.rd)());if(!C)return;const F=(0,s.pR)(C,E);(0,s.Np)(F)}function t(){const{location:E}=window;return`${E.origin}${E.pathname}otzivi/`}function r(){if(!(0,l.Fi)(a.DOCTOR_CONTACTS))return;const C=[...(0,l.fI)(a.DOCTOR_DETAILS)].pop();if(!C)return;C.style.position="sticky",C.style.top="16px";const F=(0,o.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");F.classList.add("b-doctor-details__toc-title");const L=(0,o.d)({},null,"#doctor-contacts");L.classList.add("b-doctor-details__toc-item"),L.append(F),C.insertBefore(L,C.firstChild)}function i(E){const C=(0,l.Fi)(a.REVIEWS_LINK);C&&(C.href=E)}},5072:(_,h,e)=>{e.d(h,{N:()=>f});var l=e(7653);const o={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var s=e(573),a=e(4921),v=e(5406),p=e(2524),t=e(4521),r=e(5213),i=e(8586),E=e(7877),C=e(5539);function F(T,A){T.forEach(x=>L(A,x))}function L(T,A){if(!A)return;const x=new RegExp(`(${A})`,"gi"),W=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null);let B=W.nextNode();const H=[];for(;B;){const{textContent:k}=B;if(x.test(k)){const K=document.createDocumentFragment();let j=0;k.replace(x,(Y,ne,Z)=>{Z>j&&K.appendChild(document.createTextNode(k.slice(j,Z)));const J=document.createElement("span");J.className="highlightedSubstring",J.style.backgroundColor="yellow",J.textContent=Y,K.appendChild(J),j=Z+Y.length}),j<k.length&&K.appendChild(document.createTextNode(k.slice(j))),H.push({node:B,fragment:K})}B=W.nextNode()}H.forEach(({node:k,fragment:K})=>{k.parentNode.replaceChild(K,k)})}function n(T){(0,s.fI)(".highlightedSubstring",T).forEach(x=>{const{parentNode:W}=x;x.replaceWith(x.textContent),W.normalize()})}var m=e(8355);function d(T,A){const x=(0,m.f)(T);F(x,A)}function c(T,A){const x=getIncludedSearchStrings(T);A.forEach(W=>highlightSubstrings(x,W))}var R=e(3829),u=e(9928);function b(T={}){return(0,u.Sw)(T,"|")}function O(T={},A=75,x="customFiltersContainer"){const W=document.getElementById(x);if(!W)return console.log(`Element with id="${x}" not found.`),null;const B=createButton(T,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return B.addEventListener("mouseenter",()=>{B.style.filter="brightness(0.9)"}),B.addEventListener("mouseleave",()=>{B.style.filter="brightness(1)"}),B.addEventListener("click",()=>{const H=W.getBoundingClientRect();window.scrollTo({top:H.top+window.scrollY-A})}),new IntersectionObserver(([H])=>{B.style.display=H.isIntersecting?"none":"flex"},{threshold:.5}).observe(W),B}function P(T,A={}){const x=O(A);x&&T.appendChild(x)}const{createGlobalFilter:g}=(0,t.z)(D),I=g("reviews-text-filter"),w=g("reviews-min-rating-filter"),y=g("reviews-max-rating-filter"),U=g("reviews-filter-enabled",!0),z={reviewCardsCache:new Map};async function f(){(0,l.z1)();const T=await(0,a.xk)(document,o.CONTROLS_CONTAINER);(0,r.b)(T,N),D();const A=await S();(0,p.ft)((0,l.rd)(),A);const x=(0,l.pR)(A,V());(0,l.Np)(x),(0,v.$F)("rates_category")&&G()}function N(T,A){(0,C.ZM)(T,i.r.FILTERS_CONTAINER),T.style.marginTop="12px";const x=(0,E.E9)(I,i.r.CONTROL,i.r.TEXT_INPUT),W=(0,E.HX)(w,i.r.CONTROL,i.r.NUMBER_INPUT,1,1),B=(0,E.FR)(y,i.r.CONTROL,i.r.NUMBER_INPUT,1,1),H=b(i.r.CONTROL),k=(0,E.pW)(U,i.r.CONTROL,i.r.CHECKBOX_INPUT);T.append(x,W,B,H,k),A.append(T)}function D(){(0,s.fI)(o.REVIEWS).forEach($)}function $(T){if(!U.value){(0,C.kl)(T);return}n(T);let A=z.reviewCardsCache.get(T);if(!A){const W=(0,s.Fi)(o.REVIEW_TEXT_WRAP,T),B=(0,s.Fi)(o.REVIEW_RATING_WRAP,T);if(!W){(0,C.Bt)(T);return}A={reviewTextWrap:W,reviewText:W.innerText,rating:B&&(0,s.YA)(B)},z.reviewCardsCache.set(T,A)}I.value&&d(I,A.reviewTextWrap);const x=(0,R.Ay)(A.reviewText,I)||X(A.rating);(0,C.UC)(T,x)}function X(T){return T?(0,R.JE)(T,w)||(0,R.iG)(T,y):!1}async function S(){const T=(0,s.Fi)(o.FILTER_CHIP);T.click();const A=await(0,a.xk)(document,o.FILTER_LIST),x=[...(0,s.fI)(o.FILTER_LIST_ITEM,A)].map(W=>{const B=W.getAttribute("data-qa");if(!B)return null;const H=B.replace("reviews_filter_list_item_",""),k=(0,s.Fi)(o.FILTER_TITLE_WRAP,W).textContent.trim(),K=(0,s.Fi)(o.FILTER_COUNT_WRAP,W),j=(0,s.YA)(K,!0),Y=M(K.classList);return{category:H,title:k,count:j,bgClassSuffix:Y}});return T.click(),x}function M(T){const A=T.value.match(/ui-kit-bg-bg-(\w+)/);return A?A[1]:null}function V(){const{location:T}=window;return`${T.origin}${T.pathname}`}function G(){(0,s.Fi)(o.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},q={};function Q(_){var h=q[_];if(h!==void 0)return h.exports;var e=q[_]={exports:{}};return ee[_](e,e.exports,Q),e.exports}(()=>{var _=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",l=s=>{s&&s.d<1&&(s.d=1,s.forEach(a=>a.r--),s.forEach(a=>a.r--?a.r++:a()))},o=s=>s.map(a=>{if(a!==null&&typeof a=="object"){if(a[_])return a;if(a.then){var v=[];v.d=0,a.then(r=>{p[h]=r,l(v)},r=>{p[e]=r,l(v)});var p={};return p[_]=r=>r(v),p}}var t={};return t[_]=r=>{},t[h]=a,t});Q.a=(s,a,v)=>{var p;v&&((p=[]).d=-1);var t=new Set,r=s.exports,i,E,C,F=new Promise((L,n)=>{C=n,E=L});F[h]=r,F[_]=L=>(p&&L(p),t.forEach(L),F.catch(n=>{})),s.exports=F,a(L=>{i=o(L);var n,m=()=>i.map(c=>{if(c[e])throw c[e];return c[h]}),d=new Promise(c=>{n=()=>c(m),n.r=0;var R=u=>u!==p&&!t.has(u)&&(t.add(u),u&&!u.d&&(n.r++,u.push(n)));i.map(u=>u[_](R))});return n.r?d:m()},L=>(L?C(F[e]=L):E(r),l(p))),p&&p.d<0&&(p.d=0)}})(),Q.d=(_,h)=>{for(var e in h)Q.o(h,e)&&!Q.o(_,e)&&Object.defineProperty(_,e,{enumerable:!0,get:h[e]})},Q.o=(_,h)=>Object.prototype.hasOwnProperty.call(_,h);var te=Q(1753)})();})();
