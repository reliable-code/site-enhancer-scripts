// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.74558794
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var ee={5467:(S,E,e)=>{e.d(E,{E2:()=>i});var d=e(9928);function i(v,p={},t=null){const o=(0,d.Sw)(p,t);return o.append(v),o}function s(v,p=null,t={},o={}){const r=createActionLink(v,p,o);return i(r,t)}function a(v,p=null,t=null,o={},r={}){const h=createActionLinkWithIcon(v,t,p,r);return i(h,o)}},9928:(S,E,e)=>{e.d(E,{S:()=>v,Sw:()=>F,d:()=>o,kU:()=>s,o5:()=>a});var d=e(4921),i=e(5539);function s(l,c,I){const u=p(l,"text",c);return u.value=I,u}function a(l,c,I,u,b,O){const P=p(l,"number",c);return P.value=I,P.step=u,P.min=b,P.max=O,P}function v(l,c,I){const u=p(l,"checkbox",c);return u.checked=I,u}function p(l={},c=null,I=null){const u=m("input",l);return c&&(u.type=c),I&&(u.addEventListener("keyup",(0,d.sg)(I,200)),u.addEventListener("change",(0,d.sg)(I,100))),u}function t(l={},c=null){return m("span",l,c)}function o(l={},c=null,I=null){const u=m("a",l,c);return I&&(u.href=I),u}function r(l,c=null,I={}){I.cursor||="pointer";const u=o(I,c);return l&&u.addEventListener("click",l),u}function h(l,c,I=null,u={},b={}){u.display||="inline-flex",u.alignItems||="center",u.gap||="0.25em";const O=r(l,I,u);return O.prepend(n(c,b)),O}function w(l={},c=null,I=null){const u=m("button",l,c);return I&&u.addEventListener("click",I),u}function F(l={},c=null){return m("div",l,c)}function D(l={}){return m("i",l)}function n(l,c={}){c.width||="1em",c.height||="1em",c.paddingBottom||="1px";const I=D(c);return I.setAttribute("data-lucide",l),I}function m(l,c,I=null){if(typeof c!="object"||c===null)throw new TypeError("styles should be an object");const u=document.createElement(l);return(0,i.ZM)(u,c),I&&(u.innerHTML=I),u}},573:(S,E,e)=>{e.d(E,{Fi:()=>s,YA:()=>t,fI:()=>a});var d=e(4214);function i(n,m=document){return!!m.querySelector(n)}function s(n,m=document,l=!1){const c=m.querySelector(n);return l&&!c&&console.log(`No element found for selector: ${n}`),c}function a(n,m=document,l=!1){const c=m.querySelectorAll(n);return l&&!c.length&&console.log(`No elements found for selector: ${n}`),c}function v(n,m,l){return[...n.querySelectorAll(m)].find(c=>c.textContent.trim().includes(l))}function p(n,m,l=!1,c=!1,I=null){const u=s(m,n);return t(u,l,c,I)}function t(n,m=!1,l=!1,c=null){if(!n)return c===null?(console.log("No element found"),null):c;const I=n.innerText;return h(I,m,l)}function o(n,m,l=!1){const c=n[m];return t(c,l)}function r(n,m=!1,l=!1){const c=n.textContent;return h(c,m,l)}function h(n,m,l){m&&(n=(0,d.zr)(n)),l&&(n=n.replace(",","."));const c=Number(n);return Number.isNaN(c)?(console.log(`Invalid number: ${n}`),0):c}function w(n){return[...n.childNodes].find(m=>m.nodeType===Node.TEXT_NODE)}function F(n){const m=l=>l.nodeType===Node.TEXT_NODE&&l.textContent.trim()!==""?[l]:[...l.childNodes].flatMap(m);return m(n)}function D(n){return normalizeSpacing(n.textContent)}},5539:(S,E,e)=>{e.d(E,{Bt:()=>i,UC:()=>t,WH:()=>d,ZM:()=>R,kl:()=>v});function d(f,N){f.parentNode.insertBefore(N,f.nextSibling)}function i(f){f.style.display="none"}function s(f){h(f),i(f)}function a(f){f.intersectionObserver||runOnceOnIntersection(f,()=>i(f))}function v(f){f.style.display=""}function p(f){const N=r(f);f.style.display=N}function t(f,N){N?i(f):v(f)}function o(f,N){N?a(f):(clearIntersectionObserver(f),v(f))}function r(f){return h(f),f.defaultDisplay}function h(f){if(f.defaultDisplay)return;const{display:N}=getComputedStyle(f);f.defaultDisplay=N}function w(){return{show:[],hide:[]}}function F(f,N,_){f?N.hide.push(_):N.show.push(_)}function D(f){f.show.forEach(v),f.hide.forEach(i)}function n(f,N,_=.3){N?l(f,_):m(f)}function m(f){f.style.opacity=""}function l(f,N=.3){f.style.opacity=N}function c(f){f.style.order=""}function I(f,N){f.style.order=N}function u(f,N){f.style.background=N}function b(f,N){const _=getFirstElement(N);if(!_)return;const $=createLink();$.href=f,_.parentNode.append($),$.append(_)}function O(f,N){const _=getFirstElement(N);_&&P(f,_)}function P(f,N){const _=createLink();_.href=f,_.append(...N.childNodes),N.append(_)}function C(){const f=getURLQueryParam("scrollTo");if(!f)return;const N=document.getElementById(f);N?N.scrollIntoView():console.log(`Element with ID "${f}" was not found.`)}function T(f,N="custom-global-style"){let _=document.getElementById(N);_||(_=document.createElement("style"),_.id=N,_.type="text/css",document.head.appendChild(_)),_.textContent=f}function R(f,N){Object.assign(f.style,N)}function y(f){return Object.entries(f).map(([N,_])=>`${N.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${_};`).join(" ")}function U(f){return f?f.split(";").filter(N=>N.trim()!=="").reduce((N,_)=>{const[$,X]=_.split(":").map(M=>M.trim()),L=$.replace(/-([a-z])/g,(M,V)=>V.toUpperCase());return N[L]=X,N},{}):{}}function z(f,N,_="text/plain"){const $=new Blob([f],{type:_}),X=URL.createObjectURL($),L=document.createElement("a");L.href=X,L.download=N,document.body.appendChild(L),L.click(),document.body.removeChild(L),requestAnimationFrame(()=>URL.revokeObjectURL(X))}},4921:(S,E,e)=>{e.d(E,{sg:()=>a,xk:()=>d});function d(t,o,r=null){const h=t.querySelector(o);return h?Promise.resolve(h):new Promise(w=>{const F=new MutationObserver(n);F.observe(t,{childList:!0,subtree:!0});let D;r&&(D=setTimeout(()=>{F.disconnect(),console.log(`No element found for selector: ${o}`),w(null)},r));function n(){const m=t.querySelector(o);m&&(D&&clearTimeout(D),F.disconnect(),w(m))}})}function i(t,o){return t.querySelector(o)?new Promise(h=>{const w=new MutationObserver(F);w.observe(t,{childList:!0,subtree:!0});function F(){t.querySelector(o)||(w.disconnect(),h())}}):Promise.resolve()}function s(t,o=400){return new Promise(r=>{let h;const w=new MutationObserver(()=>{clearTimeout(h),F()});function F(){h=setTimeout(()=>{w.disconnect(),r()},o)}F(),w.observe(t,{childList:!0,subtree:!0})})}function a(t,o=250){let r;return(...h)=>{clearTimeout(r),r=setTimeout(()=>t(...h),o)}}function v(t,o){const r=new IntersectionObserver(h=>{h.forEach(w=>{w.isIntersecting&&(o(),p(t))})});t.intersectionObserver=r,r.observe(t)}function p(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(S,E,e)=>{e.d(E,{Ay:()=>i,JE:()=>a,iG:()=>v});var d=e(8355);function i(t,o){return!s(t,o)}function s(t,o){if(!o.value)return!0;const r=t.toLowerCase(),h=(0,d.R)(o),w=[],F=[];return h.forEach(D=>{if(D.startsWith("!")){const n=D.substring(1);n&&F.push(n)}else w.push(D)}),w.every(D=>r.includes(D))&&F.every(D=>!r.includes(D))}function a(t,o){return o.value!=null&&t<o.value}function v(t,o){return o.value!=null&&t>o.value}function p(t,o){return o.value&&t!==o.value}},4521:(S,E,e)=>{e.d(E,{z:()=>i});var d=e(3048);function i(s,a=null){return{createGlobalFilter(v,p=null,t=s){return d.V.create(v,p,t)},createSectionFilter(v,p=null,t=s){if(!a)throw new Error("sectionId must be provided to use createSectionFilter.");return d.V.createWithCompositeKey(a,v,p,t)}}}},5884:(S,E,e)=>{e.d(E,{Hw:()=>v,Nm:()=>s,nW:()=>a});var d=e(9928),i=e(5467);function s(p,t,o={},r={}){const h=(0,d.kU)(r,t.updateValueFromEvent,t.value);return(0,i.E2)(h,o,p)}function a(p,t,o,r,h,w={},F={}){const D=(0,d.o5)(F,t.updateValueFromEvent,t.value,o,r,h);return(0,i.E2)(D,w,p)}function v(p,t,o={},r={}){const h=(0,d.S)(r,t.updateValueFromEvent,t.value);return(0,i.E2)(h,o,p)}},7877:(S,E,e)=>{e.d(E,{E9:()=>i,FR:()=>a,HX:()=>s,X0:()=>v,pW:()=>P});var d=e(5884);function i(C,T={},R={}){return(0,d.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,T,R)}function s(C,T={},R={},y=.1,U=3){return(0,d.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,y,U,5,T,R)}function a(C,T={},R={},y=.1,U=3){return(0,d.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,y,U,5,T,R)}function v(C,T={},R={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,T,R)}function p(C,T={},R={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,T,R)}function t(C,T,R={},y={}){return(0,d.nW)(C,T,"1","1","999999",R,y)}function o(C,T={},R={}){return r("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,T,R)}function r(C,T,R={},y={}){return createNumberFilterControl(C,T,"5","0","100",R,y)}function h(C,T={},R={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",T,R)}function w(C,T,R={},y={},U="250"){return createNumberFilterControl(C,T,U,"0","1000000",R,y)}function F(C,T={},R={},y="25"){return w("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,T,R,y)}function D(C,T={},R={},y="25"){return w("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,T,R,y)}function n(C,T={},R={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,T,R)}function m(C,T,R={},y={}){return createNumberFilterControl(C,T,"1","0","99999",R,y)}function l(C,T={},R={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","7",T,R)}function c(C,T={},R={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,T,R)}function I(C,T={},R={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,T,R)}function u(C,T={},R={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,T,R)}function b(C,T={},R={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,T,R)}function O(C,T={},R={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",C,T,R)}function P(C,T={},R={}){return(0,d.Hw)("\u0412\u043A\u043B: ",C,T,R)}},8355:(S,E,e)=>{e.d(E,{R:()=>d,f:()=>i});function d(s){return s.value.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a!=="")}function i(s){return d(s).filter(a=>!a.startsWith("!"))}},5213:(S,E,e)=>{e.d(E,{b:()=>s});var d=e(9928),i=e(573);function s(a,v,p=!1,t="customFiltersContainer"){let o=(0,i.Fi)(`#${t}`,a);if(o)if(p)o.remove();else return;o=(0,d.Sw)(),o.id=t,v(o,a)}},8200:(S,E,e)=>{e.d(E,{s:()=>d});function d(i){const{target:s}=i,{type:a}=s;switch(a){case"text":return`"${s.value}"`;case"number":return s.value;case"checkbox":return s.checked;default:return console.log(`Unknown input type: ${a}`),null}}},157:(S,E,e)=>{e.d(E,{Fg:()=>d,IC:()=>a,vx:()=>s});const d=window.GM_setValue,i=window.GM.setValue,s=window.GM_getValue,a=window.GM_addValueChangeListener},1870:(S,E,e)=>{e.d(E,{j:()=>d});class d{constructor(s,a){this.value=s,this.onChange=a}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,E,e)=>{e.d(E,{V:()=>v});var d=e(1870),i=e(8200),s=e(3976),a=e(157);class v extends d.j{constructor(t,o=null,r=null){super((0,a.vx)(t,o),r),this.storageKey=t,this.defaultValue=o}static create(t,o=null,r=null){return new v(t,o,r)}static createWithCompositeKey(t,o,r=null,h=null){const w=`${t}-${o}`;return new v(w,r,h)}updateValueFromEvent=t=>{const o=(0,i.s)(t),r=(0,s.$)(o);this.updateValue(r)};updateValue(t,o=!0){this.value!==t&&((0,a.Fg)(this.storageKey,t),this.value=t,o&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(S,E,e)=>{e.d(E,{$:()=>d});function d(i){return i===""?null:JSON.parse(i)}},4214:(S,E,e)=>{e.d(E,{$z:()=>d,zr:()=>i});function d(p){return p.replace(/\D/g,"")}function i(p){return p.replace(/[^\d.,-]/g,"")}function s(p){return p.replace(/\s/g,"")}function a(p){return p.charAt(0).toUpperCase()+p.slice(1)}function v(p){return p.replace(/\s+/g," ").trim()}},5406:(S,E,e)=>{e.d(E,{$F:()=>p,Fc:()=>d,bn:()=>i,z2:()=>h});function d(n,m="common",l=!1){const{pathname:c}=window.location;return i(c,n,m,l)}function i(n,m,l,c=!1){const u=n.split("/")[m]||l;return c&&console.log(`Pathname element: ${u}`),u}function s(n,m="common",l=!1){const c=d(n,"",l);return a(c,m,l)}function a(n,m,l){if(!n)return m;const c=n.split("-").at(-1);return l&&console.log(`Pathname element ending: ${c}`),c}function v(n,m,l="common",c=!1){const I=i(n,m,"",c);return a(I,l,c)}function p(n){return new URLSearchParams(window.location.search).get(n)}function t(n){return n.split("?")[0]}function o(n){return window.location.pathname.includes(n)}function r(n){return n.some(m=>o(m))}function h(n){return window.location.pathname.split("/").some(l=>l===n)}function w(n){try{const m=new URL(window.location.href);Object.entries(n).forEach(([l,c])=>{m.searchParams.set(l,c)}),window.location.href=m.toString()}catch(m){console.error("Failed to redirect:",m)}}function F(n,m=[]){const l={pathname:window.location.pathname};m.forEach(u=>{l[u]=p(u)});function c(){const u={pathname:window.location.pathname};m.forEach(b=>{u[b]=p(b)}),Object.keys(l).some(b=>l[b]!==u[b])&&n()}let I=window.location.href;setInterval(()=>{window.location.href!==I&&(I=window.location.href,c())},200),window.addEventListener("popstate",c)}function D(n=[]){F(()=>window.location.reload(),n)}},2524:(S,E,e)=>{e.d(E,{d5:()=>s,vX:()=>t,ft:()=>a});var d=e(157);class i{constructor(h=Date.now(),w=[]){this.lastCheckDate=h,this.reviewsData=w}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(h){const{lastCheckDate:w,reviewsData:F}=h;return new i(w,F)}}const s={LAST_DOCTOR_UPDATE:"last-doctor-update"};function a(r,h){const w=v(r),F=(0,d.vx)(w),D=p(F);D.reviewsData=h,D.updateLastCheckDate(),(0,d.Fg)(w,D),(0,d.Fg)(s.LAST_DOCTOR_UPDATE,Date.now())}function v(r){return`doctor-${r}`}function p(r){return r?i.fromObject(r):new i}function t(r){return o(r)?.reviewsData??null}function o(r){const h=v(r);return(0,d.vx)(h)}},1753:(S,E,e)=>{e.a(S,async(d,i)=>{try{var s=e(573),a=e(7858),v=e(4231),p=e(5406),t=e(5072);const r=(0,s.Fi)(".appointments_page");r?(0,v.$)(r):(0,p.z2)("otzivi")?await(0,t.N)():(0,p.z2)("vrach")&&(0,a.O)(),i()}catch(o){i(o)}},1)},7653:(S,E,e)=>{e.d(E,{NI:()=>r,z1:()=>F,Np:()=>l,pR:()=>D,sp:()=>I,rd:()=>c});var d=e(9928),i=e(573);const s={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var a=e(8586),v=e(5406),p=e(4214);const t="additionalLinksAppended",o=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function r(u,b){b.classList.contains(t)||(o.forEach(O=>{h(u,b,O)}),b.classList.add(t))}function h(u,b,O){const P=w(u,O),C=(0,d.d)({},O,P),T=document.createElement("br");b.append(T,C)}function w(u,b){const O=`${u} ${b}`;return`https://www.google.com/search?q=${encodeURIComponent(O)}&btnI`}function F(){const u=(0,i.Fi)(s.DOCTOR_CARD_NAME,document,!0);if(!u)return;const b=u.innerText.trim(),O=(0,d.Sw)();O.style.textAlign="center",(0,i.Fi)(s.DOCTOR_INTRO_LEFT).append(O),r(b,O)}function D(u,b,O=!1){const P=(0,d.Sw)(a.r.REVIEWS_INFO);O&&(P.style.justifyContent="center"),P.classList.add("v-application");const C=(0,d.Sw)(a.r.REVIEWS_INFO_BLOCK);return C.style.height=O?"10px":"23px",C.append(P),u.slice(O?1:0).forEach(T=>{const{category:R,title:y,count:U,bgClassSuffix:z}=T,f=`${b}?rates_category=${R}`,N=O?U:`${y} ${U}`,_=(0,d.d)(a.r.REVIEW_INFO,N,f);_.classList=n(z),P.append(_),O&&m(_,y)}),C}function n(u){return`text-caption ui-kit-color-text px-2 py-1 rounded ui-kit-bg-bg-${u}`}function m(u,b){let O=null;u.addEventListener("mouseenter",()=>{O=(0,d.Sw)(a.r.REVIEW_INFO_TOOLTIP,b),document.body.appendChild(O);const P=u.getBoundingClientRect();O.style.left=`${(P.left+P.right)/2-O.offsetWidth/2+window.scrollX+2}px`,O.style.top=`${P.top+window.scrollY-O.offsetHeight-4}px`}),u.addEventListener("mouseleave",()=>{O&&(O.remove(),O=null)})}function l(u){const b=(0,i.Fi)(s.NAME_SPAN_HOLDER,document,!0);if(!b)return;const O=(0,i.Fi)(s.NAME_SPAN,b,!0);O&&O.append(u)}function c(){const u=(0,v.Fc)(3,"unknown");return(0,p.$z)(u)}function I(u){const b=(0,v.bn)(u,5,"");return(0,p.$z)(b)}},8586:(S,E,e)=>{e.d(E,{r:()=>i});const d={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},i={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...d.INPUT,width:"195px"},NUMBER_INPUT:{...d.INPUT,width:"70px"},CHECKBOX_INPUT:{...d.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(S,E,e)=>{e.d(E,{$:()=>R});var d=e(5406),i=e(573),s=e(5539),a=e(3829),v=e(7653),p=e(5213),t=e(5884),o=e(7877);const r={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .ui-text",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var h=e(4521),w=e(2524),F=e(4921),D=e(157),n=e(8586);const m=(0,d.Fc)(2),{createGlobalFilter:l,createSectionFilter:c}=(0,h.z)(z,m),I=c("spec-filter"),u=c("clinic-filter"),b=c("min-reviews-filter",10),O=c("min-experience-filter",5,X),P=c("max-experience-filter",40),C=l("filter-enabled",!0),T={doctorCardsCache:new WeakMap};function R(L){X(),y();const M=(0,i.Fi)(r.DOCTOR_FILTERS);(0,p.b)(M,U),z(),(0,D.IC)(w.d5.LAST_DOCTOR_UPDATE,z),new MutationObserver((0,F.sg)(z)).observe(L,{childList:!0})}function y(){const L=(0,i.Fi)(r.LIST_HEADER);L&&L.remove()}function U(L,M){(0,s.ZM)(L,n.r.FILTERS_CONTAINER),L.style.marginTop="6px";const V=(0,t.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",I,n.r.CONTROL,n.r.TEXT_INPUT),G=(0,t.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",u,n.r.CONTROL,n.r.TEXT_INPUT),g=(0,o.X0)(b,n.r.CONTROL,n.r.NUMBER_INPUT),A=(0,t.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",O,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),x=(0,t.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",P,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),W=(0,o.pW)(C,n.r.CONTROL,n.r.CHECKBOX_INPUT);L.append(V,G,g,A,x,W),M.append(L)}function z(){(0,i.fI)(r.DOCTOR_CARD).forEach(f)}function f(L){if(!C.value){(0,s.kl)(L);return}let M=T.doctorCardsCache.get(L);if(!M){const G=(0,i.Fi)(r.PROFILE_CARD,L),g=(0,i.Fi)(r.REVIEWS_LINK,G),A=(0,i.Fi)(r.EXPERIENCE_WRAP,L);if(!g||!A){(0,s.Bt)(L);return}const W=(0,i.Fi)(r.SPEC_WRAP,L,!0).innerText.trim(),B=(0,i.Fi)(r.CLINIC_CONTAINER,L,!0),k=(0,i.Fi)(r.CLINIC_WRAP,B,!0).innerText.trim(),K=(0,i.YA)(g,!0),j=(0,i.YA)(A,!0),Y=N(g);g.href=Y,(0,v.NI)(_(L),G),M={specInfo:W,clinicName:k,reviewsLinkNumber:K,experienceNumber:j,reviewsLink:g,reviewInfoAppended:!1},T.doctorCardsCache.set(L,M)}$(M);const V=(0,a.Ay)(M.specInfo,I)||(0,a.Ay)(M.clinicName,u)||(0,a.JE)(M.reviewsLinkNumber,b)||(0,a.JE)(M.experienceNumber,O)||(0,a.iG)(M.experienceNumber,P);(0,s.UC)(L,V)}function N(L){return L.href.replace(/\/#otzivi$/,"/otzivi/")}function _(L){return(0,i.Fi)(r.DOCTOR_CARD_NAME,L,!0).innerText}function $(L){if(L.reviewInfoAppended)return;const{reviewsLink:M}=L,V=M.href,G=(0,w.vX)((0,v.sp)(V));if(!G)return;const g=(0,v.pR)(G,V,!0);(0,s.WH)(M,g),L.reviewInfoAppended=!0}function X(){if(!O.value)return;const L=new URL(window.location.href);+L.searchParams.get("experience")!==O.value&&(L.searchParams.set("experience",O.value),window.location.href=L.toString())}},7858:(S,E,e)=>{e.d(E,{O:()=>p});var d=e(573),i=e(9928),s=e(7653);const a={DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var v=e(2524);function p(){(0,s.z1)(),o();const r=(0,v.vX)((0,s.rd)());if(!r)return;const h=(0,s.pR)(r,t());(0,s.Np)(h)}function t(){const{location:r}=window;return`${r.origin}${r.pathname}otzivi/`}function o(){if(!(0,d.Fi)(a.DOCTOR_CONTACTS))return;const h=[...(0,d.fI)(a.DOCTOR_DETAILS)].pop();if(!h)return;h.style.position="sticky",h.style.top="16px";const w=(0,i.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");w.classList.add("b-doctor-details__toc-title");const F=(0,i.d)({},null,"#doctor-contacts");F.classList.add("b-doctor-details__toc-item"),F.append(w),h.insertBefore(F,h.firstChild)}},5072:(S,E,e)=>{e.d(E,{N:()=>f});var d=e(7653);const i={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var s=e(573),a=e(4921),v=e(5406),p=e(2524),t=e(4521),o=e(5213),r=e(8586),h=e(7877),w=e(5539);function F(g,A){g.forEach(x=>D(A,x))}function D(g,A){if(!A)return;const x=new RegExp(`(${A})`,"gi"),W=document.createTreeWalker(g,NodeFilter.SHOW_TEXT,null);let B=W.nextNode();const H=[];for(;B;){const{textContent:k}=B;if(x.test(k)){const K=document.createDocumentFragment();let j=0;k.replace(x,(Y,ne,Z)=>{Z>j&&K.appendChild(document.createTextNode(k.slice(j,Z)));const J=document.createElement("span");J.className="highlightedSubstring",J.style.backgroundColor="yellow",J.textContent=Y,K.appendChild(J),j=Z+Y.length}),j<k.length&&K.appendChild(document.createTextNode(k.slice(j))),H.push({node:B,fragment:K})}B=W.nextNode()}H.forEach(({node:k,fragment:K})=>{k.parentNode.replaceChild(K,k)})}function n(g){(0,s.fI)(".highlightedSubstring",g).forEach(x=>{const{parentNode:W}=x;x.replaceWith(x.textContent),W.normalize()})}var m=e(8355);function l(g,A){const x=(0,m.f)(g);F(x,A)}function c(g,A){const x=getIncludedSearchStrings(g);A.forEach(W=>highlightSubstrings(x,W))}var I=e(3829),u=e(9928);function b(g={}){return(0,u.Sw)(g,"|")}function O(g={},A=75,x="customFiltersContainer"){const W=document.getElementById(x);if(!W)return console.log(`Element with id="${x}" not found.`),null;const B=createButton(g,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return B.addEventListener("mouseenter",()=>{B.style.filter="brightness(0.9)"}),B.addEventListener("mouseleave",()=>{B.style.filter="brightness(1)"}),B.addEventListener("click",()=>{const H=W.getBoundingClientRect();window.scrollTo({top:H.top+window.scrollY-A})}),new IntersectionObserver(([H])=>{B.style.display=H.isIntersecting?"none":"flex"},{threshold:.5}).observe(W),B}function P(g,A={}){const x=O(A);x&&g.appendChild(x)}const{createGlobalFilter:C}=(0,t.z)(_),T=C("reviews-text-filter"),R=C("reviews-min-rating-filter"),y=C("reviews-max-rating-filter"),U=C("reviews-filter-enabled",!0),z={reviewCardsCache:new Map};async function f(){(0,d.z1)();const g=await(0,a.xk)(document,i.CONTROLS_CONTAINER);(0,o.b)(g,N),_();const A=await L();(0,p.ft)((0,d.rd)(),A);const x=(0,d.pR)(A,V());(0,d.Np)(x),(0,v.$F)("rates_category")&&G()}function N(g,A){(0,w.ZM)(g,r.r.FILTERS_CONTAINER),g.style.marginTop="12px";const x=(0,h.E9)(T,r.r.CONTROL,r.r.TEXT_INPUT),W=(0,h.HX)(R,r.r.CONTROL,r.r.NUMBER_INPUT,1,1),B=(0,h.FR)(y,r.r.CONTROL,r.r.NUMBER_INPUT,1,1),H=b(r.r.CONTROL),k=(0,h.pW)(U,r.r.CONTROL,r.r.CHECKBOX_INPUT);g.append(x,W,B,H,k),A.append(g)}function _(){(0,s.fI)(i.REVIEWS).forEach($)}function $(g){if(!U.value){(0,w.kl)(g);return}n(g);let A=z.reviewCardsCache.get(g);if(!A){const W=(0,s.Fi)(i.REVIEW_TEXT_WRAP,g),B=(0,s.Fi)(i.REVIEW_RATING_WRAP,g);if(!W){(0,w.Bt)(g);return}A={reviewTextWrap:W,reviewText:W.innerText,rating:B&&(0,s.YA)(B)},z.reviewCardsCache.set(g,A)}T.value&&l(T,A.reviewTextWrap);const x=(0,I.Ay)(A.reviewText,T)||X(A.rating);(0,w.UC)(g,x)}function X(g){return g?(0,I.JE)(g,R)||(0,I.iG)(g,y):!1}async function L(){const g=(0,s.Fi)(i.FILTER_CHIP);g.click();const A=await(0,a.xk)(document,i.FILTER_LIST),x=[...(0,s.fI)(i.FILTER_LIST_ITEM,A)].map(W=>{const B=W.getAttribute("data-qa");if(!B)return null;const H=B.replace("reviews_filter_list_item_",""),k=(0,s.Fi)(i.FILTER_TITLE_WRAP,W).textContent.trim(),K=(0,s.Fi)(i.FILTER_COUNT_WRAP,W),j=(0,s.YA)(K,!0),Y=M(K.classList);return{category:H,title:k,count:j,bgClassSuffix:Y}});return g.click(),x}function M(g){const A=g.value.match(/ui-kit-bg-bg-(\w+)/);return A?A[1]:null}function V(){const{location:g}=window;return`${g.origin}${g.pathname}`}function G(){(0,s.Fi)(i.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},q={};function Q(S){var E=q[S];if(E!==void 0)return E.exports;var e=q[S]={exports:{}};return ee[S](e,e.exports,Q),e.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",d=s=>{s&&s.d<1&&(s.d=1,s.forEach(a=>a.r--),s.forEach(a=>a.r--?a.r++:a()))},i=s=>s.map(a=>{if(a!==null&&typeof a=="object"){if(a[S])return a;if(a.then){var v=[];v.d=0,a.then(o=>{p[E]=o,d(v)},o=>{p[e]=o,d(v)});var p={};return p[S]=o=>o(v),p}}var t={};return t[S]=o=>{},t[E]=a,t});Q.a=(s,a,v)=>{var p;v&&((p=[]).d=-1);var t=new Set,o=s.exports,r,h,w,F=new Promise((D,n)=>{w=n,h=D});F[E]=o,F[S]=D=>(p&&D(p),t.forEach(D),F.catch(n=>{})),s.exports=F,a(D=>{r=i(D);var n,m=()=>r.map(c=>{if(c[e])throw c[e];return c[E]}),l=new Promise(c=>{n=()=>c(m),n.r=0;var I=u=>u!==p&&!t.has(u)&&(t.add(u),u&&!u.d&&(n.r++,u.push(n)));r.map(u=>u[S](I))});return n.r?l:m()},D=>(D?w(F[e]=D):h(o),d(p))),p&&p.d<0&&(p.d=0)}})(),Q.d=(S,E)=>{for(var e in E)Q.o(E,e)&&!Q.o(S,e)&&Object.defineProperty(S,e,{enumerable:!0,get:E[e]})},Q.o=(S,E)=>Object.prototype.hasOwnProperty.call(S,E);var te=Q(1753)})();})();
