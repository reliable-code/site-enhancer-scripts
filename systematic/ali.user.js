// ==UserScript==
// @name         Aliexpress product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://aliexpress.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76927367
// @icon         https://www.google.com/s2/favicons?sz=64&domain=aliexpress.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/ali.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var G={9830:(L,m,t)=>{t.a(L,async(F,b)=>{try{let s=function(){if(!n.isFiltersInitialized){const N=h(),{createGlobalFilter:e,createSectionFilter:g}=(0,c.z)(U,N);n.filters.nameFilter=g("name-filter"),n.filters.minPurchasesFilter=g("min-purchases-filter"),n.filters.minRatingFilter=g("min-rating-filter",4.8),n.filters.maxNameLines=e("max-name-lines",4),n.filters.filterEnabled=g("filter-enabled",!0),n.isFiltersInitialized=!0}},h=function(){return(0,I.B)(T())},T=function(){return(0,p.z2)("store")?(0,p.Fc)(2):(0,p.z2)("category")?(0,p.Fc)(3):(0,p.z2)("wholesale")?(0,p.$F)("SearchText"):"common"},S=function(){n.productsListContainer=(0,u.Fi)(r.Z.PRODUCT_LIST_CONTAINER),n.productsListContainer&&(A(),n.containerObserver=new MutationObserver((0,a.sg)(A)),n.containerObserver.observe(n.productsListContainer,{childList:!0,subtree:!0}))},A=function(){const N=(0,u.Fi)(r.Z.PRODUCT_LIST_HEADER,n.productsListContainer);if(!N)return;const e=(0,u.Fi)(r.Z.PRODUCT_LIST,n.productsListContainer);e&&((0,y.b)(N,V),U(),n.productListObserver&&(0,a.wP)(n.productListObserver),n.productListObserver=new MutationObserver(U),n.productListObserver.observe(e,{childList:!0,subtree:!0}))},V=function(N,e){(0,v.ZM)(N,d.r.FILTERS_CONTAINER);const g={...d.r.TEXT_INPUT,width:(0,p.z2)("store")?"223px":"242px"},k=(0,i.E9)(n.filters.nameFilter,d.r.CONTROL,g),O=(0,o.nW)("\u041C\u0438\u043D. \u043F\u043E\u043A\u0443\u043F\u043E\u043A: ",n.filters.minPurchasesFilter,"1","1","999999",d.r.CONTROL,d.r.NUMBER_INPUT),D=(0,i.HX)(n.filters.minRatingFilter,d.r.CONTROL,d.r.NUMBER_INPUT),R=(0,i.sI)(n.filters.maxNameLines,d.r.CONTROL,d.r.NUMBER_INPUT),$=(0,i.pW)(n.filters.filterEnabled,d.r.CONTROL,d.r.CHECKBOX_INPUT);N.append(k,O,D,R,$),e.append(N)},U=function(){(0,u.fI)(r.Z.PRODUCT).forEach(E)},E=function(N){if(!n.filters.filterEnabled.value){(0,l.kl)(N);return}const e=(0,u.Fi)(r.Z.PRODUCT_NAME,N),g=(0,u.Fi)(r.Z.PRODUCT_RATING,N);if(!e||!g){(0,l.Bt)(N);return}w(e);const k=e.innerText,O=(0,u.q7)(g,"div:nth-child(2)",!0),D=(0,u.q7)(g,"div:nth-child(1) > span"),R=(0,C.Ay)(k,n.filters.nameFilter)||(0,C.JE)(O,n.filters.minPurchasesFilter)||(0,C.JE)(D,n.filters.minRatingFilter);(0,l.UC)(N,R)},w=function(N){const e=n.filters.maxNameLines.value,k=e*16;N.style.height=`${k}px`,N.style.maxHeight=`${k}px`,N.style.webkitLineClamp=e},x=function(){n.productsListContainer=null,n.isFiltersInitialized=!1,n.filters={nameFilter:null,minPurchasesFilter:null,minRatingFilter:null,maxNameLines:null,filterEnabled:null},(0,a.wP)(n.containerObserver),(0,a.wP)(n.productListObserver)};var y=t(5213),p=t(5406),C=t(3829),l=t(5539),u=t(573),i=t(7877),r=t(9820),d=t(3306),c=t(4521),a=t(4921),I=t(5081),v=t(6754),o=t(5884);const n={productsListContainer:null,productListObserver:null,containerObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minPurchasesFilter:null,minRatingFilter:null,maxNameLines:null,filterEnabled:null}};await(0,a.Un)(f),(0,p.k1)(async()=>{await f(!0)});async function f(N=!1){N&&x(),s(),S()}b()}catch(n){b(n)}},1)},9820:(L,m,t)=>{t.d(m,{Z:()=>F});const F={PRODUCT_LIST_CONTAINER:'[class^="SnowSearchWrap_SnowSearchWrap__content__"], [class^="ShopSearchWrap_ShopSearchWrap__content__"]',PRODUCT_LIST_HEADER:'[class*="RedFilter_FilterHeader__container__"], [class*="RedFilter_TopPanel__container__"], [class*="ShopFilter_TopPanel__container__"]',PRODUCT_LIST:'[class*="SnowSearchProductFeed_List__grid__"], [class*="red-snippet_RedSnippet__grid__"]',PRODUCT:'[class^="red-snippet_RedSnippet__container"]',PRODUCT_NAME:'[class^="red-snippet_RedSnippet__title"]',PRODUCT_RATING:'[class^="red-snippet_RedSnippet__trust"]'}},3306:(L,m,t)=>{t.d(m,{r:()=>b});const F={INPUT:{marginLeft:"6px",border:"1px solid #d9d9d9",borderRadius:"8px",padding:"7px 14px 6px",fontSize:"15px"}},b={FILTERS_CONTAINER:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"8px 0"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...F.INPUT,width:"223px"},NUMBER_INPUT:{...F.INPUT,width:"85px"},CHECKBOX_INPUT:{marginLeft:"6px",width:"21px",height:"21px",webkitAppearance:"auto"}}},5467:(L,m,t)=>{t.d(m,{E2:()=>b});var F=t(9928);function b(C,l={},u=null){const i=(0,F.Sw)(l,u);return i.append(C),i}function y(C,l=null,u={},i={}){const r=createActionLink(C,l,i);return b(r,u)}function p(C,l=null,u=null,i={},r={}){const d=createActionLinkWithIcon(C,u,l,r);return b(d,i)}},9928:(L,m,t)=>{t.d(m,{S:()=>l,Sw:()=>v,kU:()=>y,o5:()=>p});var F=t(4921),b=t(6754);function y(s,h,T){const S=u(s,"text",h);return S.value=T,S}function p(s,h,T,S,A,V){const U=u(s,"number",h);return U.value=T,U.step=S,U.min=A,U.max=V,U}function C(s,h,T){const S=u(s,"date",h);return S.value=T,S}function l(s,h,T){const S=u(s,"checkbox",h);return S.checked=T,S}function u(s={},h=null,T=null){const S=f("input",s);return h&&(S.type=h),T&&(S.addEventListener("keyup",(0,F.sg)(T,200)),S.addEventListener("change",(0,F.sg)(T,100))),S}function i(s,h,T){const S=f("select",s);return h&&S.addEventListener("change",h),S.value=T,S}function r(s={},h=null){return f("span",s,h)}function d(s={},h=null,T=null){const S=f("a",s,h);return T&&(S.href=T),S}function c(s,h=null,T={}){T.cursor||="pointer";const S=d(T,h);return s&&S.addEventListener("click",s),S}function a(s,h,T=null,S={},A={}){S.display||="inline-flex",S.alignItems||="center",S.gap||="0.25em";const V=c(s,T,S);return V.prepend(n(h,A)),V}function I(s={},h=null,T=null){const S=f("button",s,h);return T&&S.addEventListener("click",T),S}function v(s={},h=null){return f("div",s,h)}function o(s={},h=null){return f("i",s,h)}function n(s,h={}){h.width||="1em",h.height||="1em",h.paddingBottom||="1px";const T=o(h);return T.setAttribute("data-lucide",s),T}function f(s,h,T=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const S=document.createElement(s);return(0,b.ZM)(S,h),T&&(S.innerHTML=T),S}},573:(L,m,t)=>{t.d(m,{Fi:()=>y,fI:()=>p,q7:()=>u});var F=t(4214);function b(o,n=document){return!!n.querySelector(o)}function y(o,n=document,f=!1){const s=n.querySelector(o);return f&&!s&&console.log(`No element found for selector: ${o}`),s}function p(o,n=document,f=!1){const s=n.querySelectorAll(o);return f&&!s.length&&console.log(`No elements found for selector: ${o}`),s}function C(o,n=1){let f=o;for(let s=0;s<n;s++){if(!f.parentElement)return null;f=f.parentElement}return f}function l(o,n,f){return[...o.querySelectorAll(n)].find(s=>s.textContent.trim().includes(f))}function u(o,n,f=!1,s=!1,h=null){const T=y(n,o);return i(T,f,s,h)}function i(o,n=!1,f=!1,s=null){if(!o)return s===null?(console.log("No element found"),null):s;const h=o.innerText;return c(h,n,f)}function r(o,n,f=!1){const s=o[n];return i(s,f)}function d(o,n=!1,f=!1){const s=o.textContent;return c(s,n,f)}function c(o,n,f){n&&(o=(0,F.zr)(o)),f&&(o=o.replace(",","."));const s=Number(o);return Number.isNaN(s)?(console.log(`Invalid number: ${o}`),0):s}function a(o){return[...o.childNodes].find(n=>n.nodeType===Node.TEXT_NODE)}function I(o){const n=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(n);return n(o)}function v(o){return normalizeSpacing(o.textContent)}},5539:(L,m,t)=>{t.d(m,{Bt:()=>b,UC:()=>r,kl:()=>u});function F(e,g){e.parentNode.insertBefore(g,e.nextSibling)}function b(e){e.style.display="none"}function y(e,g=1){const k=document.querySelector(e);k&&p(k,g)}function p(e,g=1){const k=getElementAncestor(e,g);k&&b(k)}function C(e){a(e),b(e)}function l(e){e.intersectionObserver||runOnceOnIntersection(e,()=>b(e))}function u(e){e.style.display=""}function i(e){const g=c(e);e.style.display=g}function r(e,g){g?b(e):u(e)}function d(e,g){g?l(e):(clearIntersectionObserver(e),u(e))}function c(e){return a(e),e.defaultDisplay}function a(e){if(e.defaultDisplay)return;const{display:g}=getComputedStyle(e);e.defaultDisplay=g}function I(){return{show:[],hide:[]}}function v(e,g,k){e?g.hide.push(k):g.show.push(k)}function o(e){e.show.forEach(u),e.hide.forEach(b)}function n(e,g,k=.3){g?s(e,k):f(e)}function f(e){e.style.opacity=""}function s(e,g=.3){e.style.opacity=g}function h(e){e.style.order=""}function T(e,g){e.style.order=g}function S(e,g){e.style.background=g}function A(e,g){const k=getFirstElement(g);k&&V(e,k)}function V(e,g){const k=createLink();k.href=e,g.parentNode.append(k),k.append(g)}function U(e,g){const k=getFirstElement(g);k&&E(e,k)}function E(e,g,k={}){const O=createLink(k);O.href=e,O.append(...g.childNodes),g.append(O)}function w(){const e=getURLQueryParam("scrollTo");if(!e)return;const g=document.getElementById(e);g?g.scrollIntoView():console.log(`Element with ID "${e}" was not found.`)}function x(e,g,k=null){const O=`${g}-click-passed`,D=k?R=>findElementByText(R,e,k):R=>getFirstElement(e,R);return function(R){if(R.hasAttribute(O))return!1;const $=D(R);return $&&$.click(),R.setAttribute(O,""),!0}}function N(e,g,k="text/plain"){const O=new Blob([e],{type:k}),D=URL.createObjectURL(O),R=document.createElement("a");R.href=D,R.download=g,document.body.appendChild(R),R.click(),document.body.removeChild(R),requestAnimationFrame(()=>URL.revokeObjectURL(D))}},6754:(L,m,t)=>{t.d(m,{ZM:()=>F});function F(C,l){Object.assign(C.style,l)}function b(C,l="custom-global-style"){let u=document.getElementById(l);u||(u=document.createElement("style"),u.id=l,u.type="text/css",document.head.appendChild(u)),u.textContent=C}function y(C){return Object.entries(C).map(([l,u])=>`${l.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function p(C){return C?C.split(";").filter(l=>l.trim()!=="").reduce((l,u)=>{const[i,r]=u.split(":").map(c=>c.trim()),d=i.replace(/-([a-z])/g,(c,a)=>a.toUpperCase());return l[d]=r,l},{}):{}}},4921:(L,m,t)=>{t.d(m,{Un:()=>C,sg:()=>p,wP:()=>i});function F(r,d,c=null){const a=r.querySelector(d);return a?Promise.resolve(a):new Promise(I=>{const v=new MutationObserver(n);v.observe(r,{childList:!0,subtree:!0});let o;c&&(o=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${d}`),I(null)},c));function n(){const f=r.querySelector(d);f&&(o&&clearTimeout(o),v.disconnect(),I(f))}})}function b(r,d){return r.querySelector(d)?new Promise(a=>{const I=new MutationObserver(v);I.observe(r,{childList:!0,subtree:!0});function v(){r.querySelector(d)||(I.disconnect(),a())}}):Promise.resolve()}function y(r,d=400){return new Promise(c=>{let a;const I=new MutationObserver(()=>{clearTimeout(a),v()});function v(){a=setTimeout(()=>{I.disconnect(),c()},d)}v(),I.observe(r,{childList:!0,subtree:!0})})}function p(r,d=250){let c;return(...a)=>{clearTimeout(c),c=setTimeout(()=>r(...a),d)}}async function C(r){document.visibilityState==="visible"?await r():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await r()},{once:!0})}function l(r,d){const c=new IntersectionObserver(a=>{a.forEach(I=>{I.isIntersecting&&(d(),u(r))})});r.intersectionObserver=c,c.observe(r)}function u(r){r.intersectionObserver&&(r.intersectionObserver.disconnect(),r.intersectionObserver=null)}function i(r){r&&(r.disconnect(),r=null)}},3829:(L,m,t)=>{t.d(m,{Ay:()=>b,JE:()=>l});var F=t(8355);function b(c,a){return!y(c,a)}function y(c,a){if(!a||!a.value)return!0;const I=(0,F._7)(a.value);return p(c,I)}function p(c,a){if(!a||!a.length)return!0;const I=(c||"").toLowerCase();return a.every(v=>C(I,v))}function C(c,a){return a.some(({term:I,isNegative:v})=>{const o=c.includes(I);return v?!o:o})}function l(c,a){return a.value!=null&&c<a.value}function u(c,a){return a.value!=null&&c>a.value}function i(c,a){return a.value==null?!1:c<parseDateFromISO(a.value)}function r(c,a){return a.value==null?!1:c>parseDateFromISO(a.value)}function d(c,a){return a.value&&c!==a.value}},4521:(L,m,t)=>{t.d(m,{z:()=>b});var F=t(3048);function b(y,p=null){return{createGlobalFilter(C,l=null,u=y){return F.V.create(C,l,u)},createSectionFilter(C,l=null,u=y){if(!p)throw new Error("sectionId must be provided to use createSectionFilter.");return F.V.createWithCompositeKey(p,C,l,u)}}}},5884:(L,m,t)=>{t.d(m,{Hw:()=>u,Nm:()=>y,nW:()=>p});var F=t(9928),b=t(5467);function y(i,r,d={},c={}){const a=(0,F.kU)(c,r.updateValueFromEvent,r.value);return(0,b.E2)(a,d,i)}function p(i,r,d,c,a,I={},v={}){const o=(0,F.o5)(v,r.updateValueFromEvent,r.value,d,c,a);return(0,b.E2)(o,I,i)}function C(i,r,d={},c={}){const a=createSelect(c,r.updateValueFromEvent,r.value);return createControl(a,d,i)}function l(i,r,d={},c={}){const a=createDateInput(c,r.updateValueFromEvent,r.value);return createControl(a,d,i)}function u(i,r,d={},c={}){const a=(0,F.S)(c,r.updateValueFromEvent,r.value);return(0,b.E2)(a,d,i)}},7877:(L,m,t)=>{t.d(m,{E9:()=>b,HX:()=>y,pW:()=>V,sI:()=>s});var F=t(5884);function b(E,w={},x={}){return(0,F.Nm)("\u041F\u043E\u0438\u0441\u043A: ",E,w,x)}function y(E,w={},x={},N=.1,e=3){return(0,F.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",E,N,e,5,w,x)}function p(E,w={},x={},N=.1,e=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",E,N,e,5,w,x)}function C(E,w={},x={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",E,w,x)}function l(E,w={},x={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",E,w,x)}function u(E,w,x={},N={}){return createNumberFilterControl(E,w,"1","1","999999",x,N)}function i(E,w={},x={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",E,w,x)}function r(E,w={},x={}){return d("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",E,w,x)}function d(E,w,x={},N={}){return createNumberFilterControl(E,w,"5","0","100",x,N)}function c(E,w={},x={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",E,"5","0","100",w,x)}function a(E,w,x={},N={},e="250"){return createNumberFilterControl(E,w,e,"0","1000000",x,N)}function I(E,w={},x={},N="25"){return a("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",E,w,x,N)}function v(E,w={},x={},N="25"){return a("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",E,w,x,N)}function o(E,w={},x={}){return n("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",E,w,x)}function n(E,w,x={},N={}){return createNumberFilterControl(E,w,"1","0","99999",x,N)}function f(E,w={},x={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",E,"1","2","8",w,x)}function s(E,w={},x={}){return(0,F.nW)("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",E,1,1,10,w,x)}function h(E,w={},x={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",E,w,x)}function T(E,w={},x={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",E,w,x)}function S(E,w={},x={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",E,w,x)}function A(E,w={},x={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",E,w,x)}function V(E,w={},x={}){return(0,F.Hw)("\u0412\u043A\u043B: ",E,w,x)}function U(E,w,x={}){const N=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],e={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},g=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),k=[],O=()=>w?parseFloat(w.value)||0:E.value,D=()=>{const R=O();k.forEach(({button:$,value:H})=>{const j=H<=R?e.active:e.inactive;Object.assign($.style,j)})};return N.forEach(({value:R,emoji:$,tooltip:H})=>{const P=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...x},$);P.title=H,P.type="button",P.addEventListener("click",j=>{j.preventDefault(),E.updateValue(R),w&&(w.value=R),D()}),P.addEventListener("mouseenter",()=>{R<=O()||(P.style.background=e.hover.background)}),P.addEventListener("mouseleave",()=>{D()}),k.push({button:P,value:R}),g.appendChild(P)}),D(),w&&(w.addEventListener("input",D),w.addEventListener("change",D)),g}},8355:(L,m,t)=>{t.d(m,{_7:()=>b});function F(i){if(!i)return[];const d=b(i).flat().filter(c=>c&&!c.isNegative&&c.term).map(c=>c.term);return[...new Set(d)]}function b(i){return i?i.toLowerCase().split(",").map(y).filter(Boolean):[]}function y(i){const r=i.split("/").map(c=>c.trim()).filter(Boolean);if(r.length===0)return null;const d=r.map(p).filter(Boolean);return d.length>0?d:null}function p(i){const r=i.startsWith("!"),d=r?i.slice(1).trim():i;return d?{term:d,isNegative:r}:null}function C(i,r){u(i,d=>d.style.display!=="none",r)}function l(i,r){u(i,d=>d.style.opacity==="",r)}function u(i,r,d){const c=[...i].filter(r).length;d.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${c} \u0438\u0437 ${i.length}`}},5213:(L,m,t)=>{t.d(m,{b:()=>y});var F=t(9928),b=t(573);function y(p,C,l=!1,u="customFiltersContainer"){let i=(0,b.Fi)(`#${u}`,p);if(i)if(l)i.remove();else return;i=(0,F.Sw)(),i.id=u,C(i,p)}},4444:(L,m,t)=>{t.d(m,{s:()=>F});function F(b){let C=2166136261;for(let l=0;l<b.length;l+=1){const u=b.charCodeAt(l);C^=u,C=Math.imul(C,16777619)}return C>>>0}},5081:(L,m,t)=>{t.d(m,{B:()=>y});var F=t(4444);function b(p){return(0,F.s)(p).toString(16).padStart(8,"0")}function y(p,C="common"){return p?b(p):C}},8200:(L,m,t)=>{t.d(m,{s:()=>F});function F(b){const{target:y}=b,{type:p}=y;switch(p){case"text":return`"${y.value}"`;case"number":return y.value;case"select-one":return y.value;case"date":return`"${y.value}"`;case"checkbox":return y.checked;default:return console.log(`Unknown input type: ${p}`),null}}},157:(L,m,t)=>{t.d(m,{Fg:()=>F,vx:()=>y});const F=window.GM_setValue,b=window.GM.setValue,y=window.GM_getValue},1870:(L,m,t)=>{t.d(m,{j:()=>F});class F{constructor(y,p){this.value=y,this.onChange=p}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(L,m,t)=>{t.d(m,{V:()=>C});var F=t(1870),b=t(8200),y=t(3976),p=t(157);class C extends F.j{constructor(u,i=null,r=null){super((0,p.vx)(u,i),r),this.storageKey=u,this.defaultValue=i}static create(u,i=null,r=null){return new C(u,i,r)}static createWithCompositeKey(u,i,r=null,d=null){const c=`${u}-${i}`;return new C(c,r,d)}updateValueFromEvent=u=>{const i=(0,b.s)(u),r=(0,y.$)(i);this.updateValue(r)};updateValue(u,i=!0){this.value!==u&&((0,p.Fg)(this.storageKey,u),this.value=u,i&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(L,m,t)=>{t.d(m,{$:()=>F});function F(b){return b===""?null:JSON.parse(b)}},4214:(L,m,t)=>{t.d(m,{zr:()=>b});function F(l){return l.replace(/\D/g,"")}function b(l){return l.replace(/[^\d.,-]/g,"")}function y(l){return l.replace(/\s/g,"")}function p(l){return l.charAt(0).toUpperCase()+l.slice(1)}function C(l){return l.replace(/\s+/g," ").trim()}},5406:(L,m,t)=>{t.d(m,{$F:()=>l,Fc:()=>F,k1:()=>a,z2:()=>d});function F(v,o="common",n=!1){const{pathname:f}=window.location;return b(f,v,o,n)}function b(v,o,n,f=!1){const s=v.split("/");o=o<0?s.length+o:o;const h=s[o]||n;return f&&console.log(`Pathname element: ${h}`),h}function y(v,o="common",n=!1){const f=F(v,"",n);return p(f,o,n)}function p(v,o,n){if(!v)return o;const f=v.split("-").at(-1);return n&&console.log(`Pathname element ending: ${f}`),f}function C(v,o,n="common",f=!1){const s=b(v,o,"",f);return p(s,n,f)}function l(v){return new URLSearchParams(window.location.search).get(v)}function u(v){return v.split("?")[0]}function i(v){return window.location.pathname.includes(v)}function r(v){return v.some(o=>i(o))}function d(...v){return window.location.pathname.split("/").some(n=>v.includes(n))}function c(v){try{const o=new URL(window.location.href);Object.entries(v).forEach(([n,f])=>{o.searchParams.set(n,f)}),window.location.href=o.toString()}catch(o){console.error("Failed to redirect:",o)}}function a(v,o=[]){const n={pathname:window.location.pathname};o.forEach(S=>{n[S]=l(S)});let f=!1;async function s(){if(f)return;const S={pathname:window.location.pathname};if(o.forEach(A=>{S[A]=l(A)}),Object.keys(n).some(A=>n[A]!==S[A])){Object.assign(n,S),f=!0;try{await v()}catch(A){console.error("Error in URL observer callback:",A)}finally{f=!1}}}function h(){s().catch(S=>{console.error("Error in URL change handler:",S)})}let T=window.location.href;setInterval(()=>{window.location.href!==T&&(T=window.location.href,h())},200),window.addEventListener("popstate",h)}function I(v=[]){a(()=>window.location.reload(),v)}}},B={};function z(L){var m=B[L];if(m!==void 0)return m.exports;var t=B[L]={exports:{}};return G[L](t,t.exports,z),t.exports}(()=>{var L=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",F=y=>{y&&y.d<1&&(y.d=1,y.forEach(p=>p.r--),y.forEach(p=>p.r--?p.r++:p()))},b=y=>y.map(p=>{if(p!==null&&typeof p=="object"){if(p[L])return p;if(p.then){var C=[];C.d=0,p.then(i=>{l[m]=i,F(C)},i=>{l[t]=i,F(C)});var l={};return l[L]=i=>i(C),l}}var u={};return u[L]=i=>{},u[m]=p,u});z.a=(y,p,C)=>{var l;C&&((l=[]).d=-1);var u=new Set,i=y.exports,r,d,c,a=new Promise((I,v)=>{c=v,d=I});a[m]=i,a[L]=I=>(l&&I(l),u.forEach(I),a.catch(v=>{})),y.exports=a,p(I=>{r=b(I);var v,o=()=>r.map(f=>{if(f[t])throw f[t];return f[m]}),n=new Promise(f=>{v=()=>f(o),v.r=0;var s=h=>h!==l&&!u.has(h)&&(u.add(h),h&&!h.d&&(v.r++,h.push(v)));r.map(h=>h[L](s))});return v.r?n:o()},I=>(I?c(a[t]=I):d(i),F(l))),l&&l.d<0&&(l.d=0)}})(),z.d=(L,m)=>{for(var t in m)z.o(m,t)&&!z.o(L,t)&&Object.defineProperty(L,t,{enumerable:!0,get:m[t]})},z.o=(L,m)=>Object.prototype.hasOwnProperty.call(L,m);var Z=z(9830)})();})();
