// ==UserScript==
// @name         Aliexpress product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://aliexpress.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76944551
// @icon         https://www.google.com/s2/favicons?sz=64&domain=aliexpress.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/ali.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Z={9830:(N,v,t)=>{t.a(N,async(w,F)=>{try{let d=function(){if(!n.isFiltersInitialized){const s=b(),{createGlobalFilter:e,createSectionFilter:h}=(0,c.z)(O,s);n.filters.nameFilter=h("name-filter"),n.filters.minPurchasesFilter=h("min-purchases-filter"),n.filters.minRatingFilter=h("min-rating-filter",4.8),n.filters.maxNameLines=e("max-name-lines",4),n.filters.filterEnabled=h("filter-enabled",!0),n.isFiltersInitialized=!0}},b=function(){return(0,k.B)(L())},L=function(){return(0,m.z2)("store")?(0,m.Fc)(2):(0,m.z2)("category")?(0,m.Fc)(3):(0,m.z2)("wholesale")?(0,m.$F)("SearchText"):"common"},E=function(){n.productsListContainer=(0,u.Fi)(r.Z.PRODUCT_LIST_CONTAINER),n.productsListContainer&&(R(),n.containerObserver=new MutationObserver((0,a.sg)(R)),n.containerObserver.observe(n.productsListContainer,{childList:!0,subtree:!0}))},R=function(){const s=(0,u.Fi)(r.Z.PRODUCT_LIST_HEADER,n.productsListContainer);if(!s)return;const e=(0,u.Fi)(r.Z.PRODUCT_LIST,n.productsListContainer);e&&((0,S.b)(s,V),O(),n.productListObserver&&(0,a.wP)(n.productListObserver),n.productListObserver=new MutationObserver(O),n.productListObserver.observe(e,{childList:!0,subtree:!0}))},V=function(s,e){(0,g.ZM)(s,f.r.FILTERS_CONTAINER);const h={...f.r.TEXT_INPUT,width:(0,m.z2)("store")?"223px":"242px"},T=(0,i.E9)(n.filters.nameFilter,f.r.CONTROL,h),A=(0,o.nW)("\u041C\u0438\u043D. \u043F\u043E\u043A\u0443\u043F\u043E\u043A: ",n.filters.minPurchasesFilter,"1","1","999999",f.r.CONTROL,f.r.NUMBER_INPUT),D=(0,i.HX)(n.filters.minRatingFilter,f.r.CONTROL,f.r.NUMBER_INPUT),I=(0,i.sI)(n.filters.maxNameLines,f.r.CONTROL,f.r.NUMBER_INPUT),U=(0,i.pW)(n.filters.filterEnabled,f.r.CONTROL,f.r.CHECKBOX_INPUT);s.append(T,A,D,I,U),e.append(s)},O=function(){(0,u.fI)(r.Z.PRODUCT).forEach(z)},z=function(s){if(!n.filters.filterEnabled.value){(0,l.kl)(s);return}const e=(0,u.Fi)(r.Z.PRODUCT_NAME,s),h=(0,u.Fi)(r.Z.PRODUCT_RATING,s);if(!e||!h){(0,l.Bt)(s);return}x(e);const T=e.innerText,A=(0,u.q7)(h,"div:nth-child(2)",!0),D=(0,u.q7)(h,"div:nth-child(1) > span"),I=(0,y.Ay)(T,n.filters.nameFilter)||(0,y.JE)(A,n.filters.minPurchasesFilter)||(0,y.JE)(D,n.filters.minRatingFilter);(0,l.UC)(s,I)},x=function(s){const e=n.filters.maxNameLines.value,T=e*16;s.style.height=`${T}px`,s.style.maxHeight=`${T}px`,s.style.webkitLineClamp=e},C=function(){n.productsListContainer=null,n.isFiltersInitialized=!1,n.filters={nameFilter:null,minPurchasesFilter:null,minRatingFilter:null,maxNameLines:null,filterEnabled:null},(0,a.wP)(n.containerObserver),(0,a.wP)(n.productListObserver)};var S=t(5213),m=t(5406),y=t(3829),l=t(5539),u=t(573),i=t(7877),r=t(9820),f=t(3306),c=t(4521),a=t(4921),k=t(5081),g=t(6754),o=t(5884);const n={productsListContainer:null,productListObserver:null,containerObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minPurchasesFilter:null,minRatingFilter:null,maxNameLines:null,filterEnabled:null}};await(0,a.Un)(p),(0,m.k1)(async()=>{await p(!0)});async function p(s=!1){s&&C(),d(),E()}F()}catch(n){F(n)}},1)},9820:(N,v,t)=>{t.d(v,{Z:()=>w});const w={PRODUCT_LIST_CONTAINER:'[class^="SnowSearchWrap_SnowSearchWrap__content__"], [class^="ShopSearchWrap_ShopSearchWrap__content__"]',PRODUCT_LIST_HEADER:'[class*="RedFilter_FilterHeader__container__"], [class*="RedFilter_TopPanel__container__"], [class*="ShopFilter_TopPanel__container__"]',PRODUCT_LIST:'[class*="SnowSearchProductFeed_List__grid__"], [class*="red-snippet_RedSnippet__grid__"]',PRODUCT:'[class^="red-snippet_RedSnippet__container"]',PRODUCT_NAME:'[class^="red-snippet_RedSnippet__title"]',PRODUCT_RATING:'[class^="red-snippet_RedSnippet__trust"]'}},3306:(N,v,t)=>{t.d(v,{r:()=>F});const w={INPUT:{marginLeft:"6px",border:"1px solid #d9d9d9",borderRadius:"8px",padding:"7px 14px 6px",fontSize:"15px"}},F={FILTERS_CONTAINER:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"8px 0"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...w.INPUT,width:"223px"},NUMBER_INPUT:{...w.INPUT,width:"85px"},CHECKBOX_INPUT:{marginLeft:"6px",width:"21px",height:"21px",webkitAppearance:"auto"}}},5467:(N,v,t)=>{t.d(v,{E2:()=>F});var w=t(9928);function F(y,l={},u=null){const i=(0,w.Sw)(l,u);return i.append(y),i}function S(y,l=null,u={},i={}){const r=createActionLink(y,l,i);return F(r,u)}function m(y,l=null,u=null,i={},r={},f={}){const c=createActionLinkWithIcon(y,u,l,r,f);return F(c,i)}},9928:(N,v,t)=>{t.d(v,{S:()=>l,Sw:()=>g,kU:()=>S,o5:()=>m});var w=t(4921),F=t(6754);function S(d,b,L){const E=u(d,"text",b);return E.value=L,E}function m(d,b,L,E,R,V){const O=u(d,"number",b);return O.value=L,O.step=E,O.min=R,O.max=V,O}function y(d,b,L){const E=u(d,"date",b);return E.value=L,E}function l(d,b,L){const E=u(d,"checkbox",b);return E.checked=L,E}function u(d={},b=null,L=null){const E=p("input",d);return b&&(E.type=b),L&&(E.addEventListener("keyup",(0,w.sg)(L,200)),E.addEventListener("change",(0,w.sg)(L,100))),E}function i(d,b,L){const E=p("select",d);return b&&E.addEventListener("change",b),E.value=L,E}function r(d={},b=null){return p("span",d,b)}function f(d={},b=null,L=null){const E=p("a",d,b);return L&&(E.href=L),E}function c(d,b=null,L={}){L.cursor||="pointer";const E=f(L,b);return d&&E.addEventListener("click",d),E}function a(d,b,L=null,E={},R={}){E.display||="inline-flex",E.alignItems||="center",E.gap||="0.25em";const V=c(d,L,E);return V.prepend(n(b,R)),V}function k(d={},b=null,L=null){const E=p("button",d,b);return L&&E.addEventListener("click",L),E}function g(d={},b=null){return p("div",d,b)}function o(d={},b=null){return p("i",d,b)}function n(d,b={}){b.width||="1em",b.height||="1em";const L=createLucideSvg(d);return applyStyles(L,b),L}function p(d,b,L=null){if(typeof b!="object"||b===null)throw new TypeError("styles should be an object");const E=document.createElement(d);return(0,F.ZM)(E,b),L&&(E.innerHTML=L),E}},573:(N,v,t)=>{t.d(v,{Fi:()=>S,fI:()=>m,q7:()=>u});var w=t(4214);function F(o,n=document){return!!n.querySelector(o)}function S(o,n=document,p=!1){const d=n.querySelector(o);return p&&!d&&console.log(`No element found for selector: ${o}`),d}function m(o,n=document,p=!1){const d=n.querySelectorAll(o);return p&&!d.length&&console.log(`No elements found for selector: ${o}`),d}function y(o,n=1){let p=o;for(let d=0;d<n;d++){if(!p.parentElement)return null;p=p.parentElement}return p}function l(o,n,p){return[...o.querySelectorAll(n)].find(d=>d.textContent.trim().includes(p))}function u(o,n,p=!1,d=!1,b=null){const L=S(n,o);return i(L,p,d,b)}function i(o,n=!1,p=!1,d=null){if(!o)return d===null?(console.log("No element found"),null):d;const b=o.innerText;return c(b,n,p)}function r(o,n,p=!1){const d=o[n];return i(d,p)}function f(o,n=!1,p=!1){const d=o.textContent;return c(d,n,p)}function c(o,n,p){n&&(o=(0,w.zr)(o)),p&&(o=o.replace(",","."));const d=Number(o);return Number.isNaN(d)?(console.log(`Invalid number: ${o}`),0):d}function a(o){return[...o.childNodes].find(n=>n.nodeType===Node.TEXT_NODE)}function k(o){const n=p=>p.nodeType===Node.TEXT_NODE&&p.textContent.trim()!==""?[p]:[...p.childNodes].flatMap(n);return n(o)}function g(o){return normalizeSpacing(o.textContent)}},5539:(N,v,t)=>{t.d(v,{Bt:()=>F,UC:()=>r,kl:()=>u});function w(e,h){e.parentNode.insertBefore(h,e.nextSibling)}function F(e){e.style.display="none"}function S(e,h=1){const T=document.querySelector(e);T&&m(T,h)}function m(e,h=1){const T=getElementAncestor(e,h);T&&F(T)}function y(e){a(e),F(e)}function l(e){e.intersectionObserver||runOnceOnIntersection(e,()=>F(e))}function u(e){e.style.display=""}function i(e){const h=c(e);e.style.display=h}function r(e,h){h?F(e):u(e)}function f(e,h){h?l(e):(clearIntersectionObserver(e),u(e))}function c(e){return a(e),e.defaultDisplay}function a(e){if(e.defaultDisplay)return;const{display:h}=getComputedStyle(e);e.defaultDisplay=h}function k(){return{show:[],hide:[]}}function g(e,h,T){e?h.hide.push(T):h.show.push(T)}function o(e){e.show.forEach(u),e.hide.forEach(F)}function n(e,h,T=.3){h?d(e,T):p(e)}function p(e){e.style.opacity=""}function d(e,h=.3){e.style.opacity=h}function b(e){e.style.order=""}function L(e,h){e.style.order=h}function E(e,h){e.style.background=h}function R(e,h){const T=getFirstElement(h);T&&V(e,T)}function V(e,h){const T=createLink();T.href=e,h.parentNode.append(T),T.append(h)}function O(e,h){const T=getFirstElement(h);T&&z(e,T)}function z(e,h,T={}){const A=createLink(T);A.href=e,A.append(...h.childNodes),h.append(A)}function x(){const e=getURLQueryParam("scrollTo");if(!e)return;const h=document.getElementById(e);h?h.scrollIntoView():console.log(`Element with ID "${e}" was not found.`)}function C(e,h,T=null){const A=`${h}-click-passed`,D=T?I=>findElementByText(I,e,T):I=>getFirstElement(e,I);return function(I){if(I.hasAttribute(A))return!1;const U=D(I);return U&&U.click(),I.setAttribute(A,""),!0}}function s(e,h,T="text/plain"){const A=new Blob([e],{type:T}),D=URL.createObjectURL(A),I=document.createElement("a");I.href=D,I.download=h,document.body.appendChild(I),I.click(),document.body.removeChild(I),requestAnimationFrame(()=>URL.revokeObjectURL(D))}},6754:(N,v,t)=>{t.d(v,{ZM:()=>w});function w(y,l){Object.assign(y.style,l)}function F(y,l="custom-global-style"){let u=document.getElementById(l);u||(u=document.createElement("style"),u.id=l,u.type="text/css",document.head.appendChild(u)),u.textContent=y}function S(y){return Object.entries(y).map(([l,u])=>`${l.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function m(y){return y?y.split(";").filter(l=>l.trim()!=="").reduce((l,u)=>{const[i,r]=u.split(":").map(c=>c.trim()),f=i.replace(/-([a-z])/g,(c,a)=>a.toUpperCase());return l[f]=r,l},{}):{}}},4921:(N,v,t)=>{t.d(v,{Un:()=>y,sg:()=>m,wP:()=>i});function w(r,f,c=null){const a=r.querySelector(f);return a?Promise.resolve(a):new Promise(k=>{const g=new MutationObserver(n);g.observe(r,{childList:!0,subtree:!0});let o;c&&(o=setTimeout(()=>{g.disconnect(),console.log(`No element found for selector: ${f}`),k(null)},c));function n(){const p=r.querySelector(f);p&&(o&&clearTimeout(o),g.disconnect(),k(p))}})}function F(r,f){return r.querySelector(f)?new Promise(a=>{const k=new MutationObserver(g);k.observe(r,{childList:!0,subtree:!0});function g(){r.querySelector(f)||(k.disconnect(),a())}}):Promise.resolve()}function S(r,f=400){return new Promise(c=>{let a;const k=new MutationObserver(()=>{clearTimeout(a),g()});function g(){a=setTimeout(()=>{k.disconnect(),c()},f)}g(),k.observe(r,{childList:!0,subtree:!0})})}function m(r,f=250){let c;return(...a)=>{clearTimeout(c),c=setTimeout(()=>r(...a),f)}}async function y(r){document.visibilityState==="visible"?await r():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await r()},{once:!0})}function l(r,f){const c=new IntersectionObserver(a=>{a.forEach(k=>{k.isIntersecting&&(f(),u(r))})});r.intersectionObserver=c,c.observe(r)}function u(r){r.intersectionObserver&&(r.intersectionObserver.disconnect(),r.intersectionObserver=null)}function i(r){r&&(r.disconnect(),r=null)}},3829:(N,v,t)=>{t.d(v,{Ay:()=>F,JE:()=>l});var w=t(8355);function F(c,a){return!S(c,a)}function S(c,a){if(!a||!a.value)return!0;const k=(0,w._7)(a.value);return m(c,k)}function m(c,a){if(!a||!a.length)return!0;const k=(c||"").toLowerCase();return a.every(g=>y(k,g))}function y(c,a){return a.some(({term:k,isNegative:g})=>{const o=c.includes(k);return g?!o:o})}function l(c,a){return a.value!=null&&c<a.value}function u(c,a){return a.value!=null&&c>a.value}function i(c,a){return a.value==null?!1:c<parseDateFromISO(a.value)}function r(c,a){return a.value==null?!1:c>parseDateFromISO(a.value)}function f(c,a){return a.value&&c!==a.value}},4521:(N,v,t)=>{t.d(v,{z:()=>F});var w=t(3048);function F(S,m=null){return{createGlobalFilter(y,l=null,u=S){return w.V.create(y,l,u)},createSectionFilter(y,l=null,u=S){if(!m)throw new Error("sectionId must be provided to use createSectionFilter.");return w.V.createWithCompositeKey(m,y,l,u)}}}},5884:(N,v,t)=>{t.d(v,{Hw:()=>u,Nm:()=>S,nW:()=>m});var w=t(9928),F=t(5467);function S(i,r,f={},c={}){const a=(0,w.kU)(c,r.updateValueFromEvent,r.value);return(0,F.E2)(a,f,i)}function m(i,r,f,c,a,k={},g={}){const o=(0,w.o5)(g,r.updateValueFromEvent,r.value,f,c,a);return(0,F.E2)(o,k,i)}function y(i,r,f={},c={}){const a=createSelect(c,r.updateValueFromEvent,r.value);return createControl(a,f,i)}function l(i,r,f={},c={}){const a=createDateInput(c,r.updateValueFromEvent,r.value);return createControl(a,f,i)}function u(i,r,f={},c={}){const a=(0,w.S)(c,r.updateValueFromEvent,r.value);return(0,F.E2)(a,f,i)}},7877:(N,v,t)=>{t.d(v,{E9:()=>F,HX:()=>S,pW:()=>O,sI:()=>d});var w=t(5884);function F(x,C={},s={}){return(0,w.Nm)("\u041F\u043E\u0438\u0441\u043A: ",x,C,s)}function S(x,C={},s={},e=.1,h=3){return(0,w.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",x,e,h,5,C,s)}function m(x,C={},s={},e=.1,h=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",x,e,h,5,C,s)}function y(x,C={},s={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",x,C,s)}function l(x,C={},s={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",x,C,s)}function u(x,C,s={},e={}){return createNumberFilterControl(x,C,"1","1","999999",s,e)}function i(x,C={},s={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",x,C,s)}function r(x,C={},s={}){return f("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",x,C,s)}function f(x,C,s={},e={}){return createNumberFilterControl(x,C,"5","0","100",s,e)}function c(x,C={},s={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",x,"5","0","100",C,s)}function a(x,C,s={},e={},h="250"){return createNumberFilterControl(x,C,h,"0","1000000",s,e)}function k(x,C={},s={},e="25"){return a("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",x,C,s,e)}function g(x,C={},s={},e="25"){return a("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",x,C,s,e)}function o(x,C={},s={}){return n("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",x,C,s)}function n(x,C,s={},e={}){return createNumberFilterControl(x,C,"1","0","99999",s,e)}function p(x,C={},s={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",x,"1","2","8",C,s)}function d(x,C={},s={}){return(0,w.nW)("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",x,1,1,10,C,s)}function b(x,C={},s={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",x,C,s)}function L(x,C={},s={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",x,C,s)}function E(x,C={},s={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",x,C,s)}function R(x,C={},s={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",x,C,s)}function V(x,C={},s={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",x,C,s)}function O(x,C={},s={}){return(0,w.Hw)("\u0412\u043A\u043B: ",x,C,s)}function z(x,C,s={}){const e=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],h={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},T=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),A=[],D=()=>C?parseFloat(C.value)||0:x.value,I=()=>{const U=D();A.forEach(({button:H,value:B})=>{const j=B<=U?h.active:h.inactive;Object.assign(H.style,j)})};return e.forEach(({value:U,emoji:H,tooltip:B})=>{const P=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...s},H);P.title=B,P.type="button",P.addEventListener("click",j=>{j.preventDefault(),x.updateValue(U),C&&(C.value=U),I()}),P.addEventListener("mouseenter",()=>{U<=D()||(P.style.background=h.hover.background)}),P.addEventListener("mouseleave",()=>{I()}),A.push({button:P,value:U}),T.appendChild(P)}),I(),C&&(C.addEventListener("input",I),C.addEventListener("change",I)),T}},8355:(N,v,t)=>{t.d(v,{_7:()=>F});function w(i){if(!i)return[];const f=F(i).flat().filter(c=>c&&!c.isNegative&&c.term).map(c=>c.term);return[...new Set(f)]}function F(i){return i?i.toLowerCase().split(",").map(S).filter(Boolean):[]}function S(i){const r=i.split("/").map(c=>c.trim()).filter(Boolean);if(r.length===0)return null;const f=r.map(m).filter(Boolean);return f.length>0?f:null}function m(i){const r=i.startsWith("!"),f=r?i.slice(1).trim():i;return f?{term:f,isNegative:r}:null}function y(i,r){u(i,f=>f.style.display!=="none",r)}function l(i,r){u(i,f=>f.style.opacity==="",r)}function u(i,r,f){const c=[...i].filter(r).length;f.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${c} \u0438\u0437 ${i.length}`}},5213:(N,v,t)=>{t.d(v,{b:()=>S});var w=t(9928),F=t(573);function S(m,y,l=!1,u="customFiltersContainer"){let i=(0,F.Fi)(`#${u}`,m);if(i)if(l)i.remove();else return;i=(0,w.Sw)(),i.id=u,y(i,m)}},4444:(N,v,t)=>{t.d(v,{s:()=>w});function w(F){let y=2166136261;for(let l=0;l<F.length;l+=1){const u=F.charCodeAt(l);y^=u,y=Math.imul(y,16777619)}return y>>>0}},5081:(N,v,t)=>{t.d(v,{B:()=>S});var w=t(4444);function F(m){return(0,w.s)(m).toString(16).padStart(8,"0")}function S(m,y="common"){return m?F(m):y}},8200:(N,v,t)=>{t.d(v,{s:()=>w});function w(F){const{target:S}=F,{type:m}=S;switch(m){case"text":return`"${S.value}"`;case"number":return S.value;case"select-one":return S.value;case"date":return`"${S.value}"`;case"checkbox":return S.checked;default:return console.log(`Unknown input type: ${m}`),null}}},157:(N,v,t)=>{t.d(v,{Fg:()=>w,vx:()=>S});const w=window.GM_setValue,F=window.GM.setValue,S=window.GM_getValue},1870:(N,v,t)=>{t.d(v,{j:()=>w});class w{constructor(S,m){this.value=S,this.onChange=m}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(N,v,t)=>{t.d(v,{V:()=>y});var w=t(1870),F=t(8200),S=t(3976),m=t(157);class y extends w.j{constructor(u,i=null,r=null){super((0,m.vx)(u,i),r),this.storageKey=u,this.defaultValue=i}static create(u,i=null,r=null){return new y(u,i,r)}static createWithCompositeKey(u,i,r=null,f=null){const c=`${u}-${i}`;return new y(c,r,f)}updateValueFromEvent=u=>{const i=(0,F.s)(u),r=(0,S.$)(i);this.updateValue(r)};updateValue(u,i=!0){this.value!==u&&((0,m.Fg)(this.storageKey,u),this.value=u,i&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(N,v,t)=>{t.d(v,{$:()=>w});function w(F){return F===""?null:JSON.parse(F)}},4214:(N,v,t)=>{t.d(v,{zr:()=>F});function w(l){return l.replace(/\D/g,"")}function F(l){return l.replace(/[^\d.,-]/g,"")}function S(l){return l.replace(/\s/g,"")}function m(l){return l.charAt(0).toUpperCase()+l.slice(1)}function y(l){return l.replace(/\s+/g," ").trim()}},5406:(N,v,t)=>{t.d(v,{$F:()=>l,Fc:()=>w,k1:()=>a,z2:()=>f});function w(g,o="common",n=!1){const{pathname:p}=window.location;return F(p,g,o,n)}function F(g,o,n,p=!1){const d=g.split("/");o=o<0?d.length+o:o;const b=d[o]||n;return p&&console.log(`Pathname element: ${b}`),b}function S(g,o="common",n=!1){const p=w(g,"",n);return m(p,o,n)}function m(g,o,n){if(!g)return o;const p=g.split("-").at(-1);return n&&console.log(`Pathname element ending: ${p}`),p}function y(g,o,n="common",p=!1){const d=F(g,o,"",p);return m(d,n,p)}function l(g){return new URLSearchParams(window.location.search).get(g)}function u(g){return g.split("?")[0]}function i(g){return window.location.pathname.includes(g)}function r(g){return g.some(o=>i(o))}function f(...g){return window.location.pathname.split("/").some(n=>g.includes(n))}function c(g){try{const o=new URL(window.location.href);Object.entries(g).forEach(([n,p])=>{o.searchParams.set(n,p)}),window.location.href=o.toString()}catch(o){console.error("Failed to redirect:",o)}}function a(g,o=[]){const n={pathname:window.location.pathname};o.forEach(E=>{n[E]=l(E)});let p=!1;async function d(){if(p)return;const E={pathname:window.location.pathname};if(o.forEach(R=>{E[R]=l(R)}),Object.keys(n).some(R=>n[R]!==E[R])){Object.assign(n,E),p=!0;try{await g()}catch(R){console.error("Error in URL observer callback:",R)}finally{p=!1}}}function b(){d().catch(E=>{console.error("Error in URL change handler:",E)})}let L=window.location.href;setInterval(()=>{window.location.href!==L&&(L=window.location.href,b())},200),window.addEventListener("popstate",b)}function k(g=[]){a(()=>window.location.reload(),g)}}},G={};function $(N){var v=G[N];if(v!==void 0)return v.exports;var t=G[N]={exports:{}};return Z[N](t,t.exports,$),t.exports}(()=>{var N=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",v=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",w=S=>{S&&S.d<1&&(S.d=1,S.forEach(m=>m.r--),S.forEach(m=>m.r--?m.r++:m()))},F=S=>S.map(m=>{if(m!==null&&typeof m=="object"){if(m[N])return m;if(m.then){var y=[];y.d=0,m.then(i=>{l[v]=i,w(y)},i=>{l[t]=i,w(y)});var l={};return l[N]=i=>i(y),l}}var u={};return u[N]=i=>{},u[v]=m,u});$.a=(S,m,y)=>{var l;y&&((l=[]).d=-1);var u=new Set,i=S.exports,r,f,c,a=new Promise((k,g)=>{c=g,f=k});a[v]=i,a[N]=k=>(l&&k(l),u.forEach(k),a.catch(g=>{})),S.exports=a,m(k=>{r=F(k);var g,o=()=>r.map(p=>{if(p[t])throw p[t];return p[v]}),n=new Promise(p=>{g=()=>p(o),g.r=0;var d=b=>b!==l&&!u.has(b)&&(u.add(b),b&&!b.d&&(g.r++,b.push(g)));r.map(b=>b[N](d))});return g.r?n:o()},k=>(k?c(a[t]=k):f(i),w(l))),l&&l.d<0&&(l.d=0)}})(),$.d=(N,v)=>{for(var t in v)$.o(v,t)&&!$.o(N,t)&&Object.defineProperty(N,t,{enumerable:!0,get:v[t]})},$.o=(N,v)=>Object.prototype.hasOwnProperty.call(N,v);var Q=$(9830)})();})();
