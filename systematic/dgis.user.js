// ==UserScript==
// @name         2gis reviews filter
// @description  Hide reviews by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://2gis.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77032393
// @icon         https://www.google.com/s2/favicons?sz=64&domain=2gis.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/dgis.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var G={7273:(S,m,n)=>{n.d(m,{S:()=>v});var b=n(5558);function w(g={},s=null){return createElement("span",g,s)}function v(g={},s=null){return(0,b.n)("div",g,s)}},5467:(S,m,n)=>{n.d(m,{E2:()=>w});var b=n(7273);function w(s,a={},u=null){const c=(0,b.S)(a,u);return c.append(s),c}function v(s,a=null,u={},c={}){const e=createActionLink(s,a,c);return w(e,u)}function g(s,a=null,u=null,c={},e={},l={}){const r=createActionLinkWithIcon(s,u,a,e,l);return w(r,c)}},5558:(S,m,n)=>{n.d(m,{n:()=>w});var b=n(6754);function w(v,g,s=null){if(typeof g!="object"||g===null)throw new TypeError("styles should be an object");const a=document.createElement(v);return(0,b.ZM)(a,g),s&&(a.innerHTML=s),a}},740:(S,m,n)=>{n.d(m,{kU:()=>v});var b=n(5558),w=n(4921);function v(e,l,r){const t=u(e,"text",l);return t.value=r,t}function g(e,l,r,t,y,d){const i=u(e,"number",l);return i.value=r,i.step=t,i.min=y,i.max=d,i}function s(e,l,r){const t=u(e,"date",l);return t.value=r,t}function a(e,l,r){const t=u(e,"checkbox",l);return t.checked=r,t}function u(e={},l=null,r=null){const t=(0,b.n)("input",e);return l&&(t.type=l),r&&(t.addEventListener("keyup",(0,w.sg)(r,200)),t.addEventListener("change",(0,w.sg)(r,100))),t}function c(e,l,r){const t=createElement("select",e);return l&&t.addEventListener("change",l),t.value=r,t}},573:(S,m,n)=>{n.d(m,{Fi:()=>w,Yl:()=>s,fI:()=>v,s$:()=>g});function b(d,i=document){return!!i.querySelector(d)}function w(d,i=document,f=!1){const h=i.querySelector(d);return f&&!h&&console.log(`No element found for selector: ${d}`),h}function v(d,i=document,f=!1){const h=i.querySelectorAll(d);return f&&!h.length&&console.log(`No elements found for selector: ${d}`),h}function g(d,i=1){let f=d;for(let h=0;h<i;h++){if(!f.parentElement)return null;f=f.parentElement}return f}function s(d,i,f){return[...d.querySelectorAll(i)].find(h=>h.textContent.trim().includes(f))}function a(d,i,f=!1,h=!1,T=null){const x=w(i,d);return u(x,f,h,T)}function u(d,i=!1,f=!1,h=null){if(!d)return h===null?(console.log("No element found"),null):h;const T=d.innerText;return l(T,i,f)}function c(d,i,f=!1){const h=d[i];return u(h,f)}function e(d,i=!1,f=!1){const h=d.textContent;return l(h,i,f)}function l(d,i,f){i&&(d=removeNonNumber(d)),f&&(d=d.replace(",","."));const h=Number(d);return Number.isNaN(h)?(console.log(`Invalid number: ${d}`),0):h}function r(d){return[...d.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function t(d){const i=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(i);return i(d)}function y(d){return normalizeSpacing(d.textContent)}},8506:(S,m,n)=>{n.d(m,{hf:()=>w,kZ:()=>g});var b=n(573);function w(s,a){s.forEach(u=>v(a,u))}function v(s,a){if(!a)return;const u=new RegExp(`(${a})`,"gi"),c=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null);let e=c.nextNode();const l=[];for(;e;){const{textContent:r}=e;if(u.test(r)){const t=document.createDocumentFragment();let y=0;r.replace(u,(d,i,f)=>{f>y&&t.appendChild(document.createTextNode(r.slice(y,f)));const h=document.createElement("span");h.className="highlightedSubstring",h.style.backgroundColor="yellow",h.textContent=d,t.appendChild(h),y=f+d.length}),y<r.length&&t.appendChild(document.createTextNode(r.slice(y))),l.push({node:e,fragment:t})}e=c.nextNode()}l.forEach(({node:r,fragment:t})=>{r.parentNode.replaceChild(t,r)})}function g(s){(0,b.fI)(".highlightedSubstring",s).forEach(u=>{const{parentNode:c}=u;u.replaceWith(u.textContent),c.normalize()})}},5539:(S,m,n)=>{n.d(m,{Bt:()=>v,Bz:()=>d,GY:()=>i,L5:()=>I,pB:()=>f});var b=n(573);function w(o,F){o.parentNode.insertBefore(F,o.nextSibling)}function v(o){o.style.display="none"}function g(o,F=1){const L=document.querySelector(o);L&&s(L,F)}function s(o,F=1){const L=getElementAncestor(o,F);L&&v(L)}function a(o){y(o),v(o)}function u(o){o.intersectionObserver||runOnceOnIntersection(o,()=>v(o))}function c(o){o.style.display=""}function e(o){const F=t(o);o.style.display=F}function l(o,F){F?v(o):c(o)}function r(o,F){F?u(o):(clearIntersectionObserver(o),c(o))}function t(o){return y(o),o.dataset.defaultDisplay}function y(o){if(o.dataset.defaultDisplay)return;const{display:F}=getComputedStyle(o);o.dataset.defaultDisplay=F}function d(){return{show:[],hide:[]}}function i(o,F,L){o?F.hide.push(L):F.show.push(L)}function f(o){o.show.forEach(c),o.hide.forEach(v)}function h(o,F,L=.3){F?x(o,L):T(o)}function T(o){o.style.opacity=""}function x(o,F=.3){o.style.opacity=F}function B(o){o.style.order=""}function R(o,F){o.style.order=F}function A(o,F,L,k="inline-flex"){F.style.display=o?k:"none",L.style.display=o?"none":k}function D(o,F){o.style.background=F}function M(o,F){const L=getFirstElement(F);L&&$(o,L)}function $(o,F){const L=createLink();L.href=o,F.parentNode.append(L),L.append(F)}function C(o,F){const L=getFirstElement(F);L&&E(o,L)}function E(o,F,L={}){const k=createLink(L);k.href=o,k.append(...F.childNodes),F.append(k)}function p(){const o=getURLQueryParam("scrollTo");if(!o)return;const F=document.getElementById(o);F?F.scrollIntoView():console.log(`Element with ID "${o}" was not found.`)}function I(o,F,L=null){const k=`${F}-click-passed`,P=L?O=>(0,b.Yl)(O,o,L):O=>(0,b.Fi)(o,O);return function(O){if(O.hasAttribute(k))return!1;const W=P(O);return W&&W.click(),O.setAttribute(k,""),!0}}function N(o,F,L="text/plain"){const k=new Blob([o],{type:L}),P=URL.createObjectURL(k),O=document.createElement("a");O.href=P,O.download=F,document.body.appendChild(O),O.click(),document.body.removeChild(O),requestAnimationFrame(()=>URL.revokeObjectURL(P))}},6754:(S,m,n)=>{n.d(m,{ZM:()=>b});function b(s,a){Object.assign(s.style,a)}function w(s,a="custom-global-style"){let u=document.getElementById(a);u||(u=document.createElement("style"),u.id=a,u.type="text/css",document.head.appendChild(u)),u.textContent=s}function v(s){return Object.entries(s).map(([a,u])=>`${a.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function g(s){return s?s.split(";").filter(a=>a.trim()!=="").reduce((a,u)=>{const[c,e]=u.split(":").map(r=>r.trim()),l=c.replace(/-([a-z])/g,(r,t)=>t.toUpperCase());return a[l]=e,a},{}):{}}},4921:(S,m,n)=>{n.d(m,{XW:()=>v,sg:()=>g,wP:()=>c,xk:()=>b});function b(e,l,r=null){const t=e.querySelector(l);return t?Promise.resolve(t):new Promise(y=>{const d=new MutationObserver(f);d.observe(e,{childList:!0,subtree:!0});let i;r&&(i=setTimeout(()=>{d.disconnect(),console.log(`No element found for selector: ${l}`),y(null)},r));function f(){const h=e.querySelector(l);h&&(i&&clearTimeout(i),d.disconnect(),y(h))}})}function w(e,l){return e.querySelector(l)?new Promise(t=>{const y=new MutationObserver(d);y.observe(e,{childList:!0,subtree:!0});function d(){e.querySelector(l)||(y.disconnect(),t())}}):Promise.resolve()}function v(e,l=400){return new Promise(r=>{let t;const y=new MutationObserver(()=>{clearTimeout(t),d()});function d(){t=setTimeout(()=>{y.disconnect(),r()},l)}d(),y.observe(e,{childList:!0,subtree:!0})})}function g(e,l=250){let r;return function(...t){const y=this;clearTimeout(r),r=setTimeout(()=>e.apply(y,t),l)}}async function s(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function a(e,l){const r=new IntersectionObserver(t=>{t.forEach(y=>{y.isIntersecting&&(l(),u(e))})});e.intersectionObserver=r,r.observe(e)}function u(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function c(e){e&&(e.disconnect(),e=null)}},3829:(S,m,n)=>{n.d(m,{Ay:()=>w});var b=n(8355);function w(r,t){return!v(r,t)}function v(r,t){if(!t||!t.value)return!0;const y=(0,b._7)(t.value);return g(r,y)}function g(r,t){if(!t||!t.length)return!0;const y=(r||"").toLowerCase();return t.every(d=>s(y,d))}function s(r,t){return t.some(({term:y,isNegative:d})=>{const i=r.includes(y);return d?!i:i})}function a(r,t){return t.value!=null&&r<t.value}function u(r,t){return t.value!=null&&r>t.value}function c(r,t){return t.value==null?!1:r<parseDateFromISO(t.value)}function e(r,t){return t.value==null?!1:r>parseDateFromISO(t.value)}function l(r,t){return t.value&&r!==t.value}},4521:(S,m,n)=>{n.d(m,{z:()=>w});var b=n(3048);function w(v,g=null){return{createGlobalFilter(s,a=null,u=v){return b.V.create(s,a,u)},createSectionFilter(s,a=null,u=v){if(!g)throw new Error("sectionId must be provided to use createSectionFilter.");return b.V.createWithCompositeKey(g,s,a,u)}}}},5884:(S,m,n)=>{n.d(m,{Nm:()=>v});var b=n(5467),w=n(740);function v(c,e,l={},r={}){const t=(0,w.kU)(r,e.updateValueFromEvent,e.value);return(0,b.E2)(t,l,c)}function g(c,e,l,r,t,y={},d={}){const i=createNumberInput(d,e.updateValueFromEvent,e.value,l,r,t);return createControl(i,y,c)}function s(c,e,l={},r={}){const t=createSelect(r,e.updateValueFromEvent,e.value);return createControl(t,l,c)}function a(c,e,l={},r={}){const t=createDateInput(r,e.updateValueFromEvent,e.value);return createControl(t,l,c)}function u(c,e,l={},r={}){const t=createCheckboxInput(r,e.updateValueFromEvent,e.value);return createControl(t,l,c)}},7877:(S,m,n)=>{n.d(m,{E9:()=>w});var b=n(5884);function w(C,E={},p={}){return(0,b.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,E,p)}function v(C,E={},p={},I=.1,N=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,I,N,5,E,p)}function g(C,E={},p={},I=.1,N=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,I,N,5,E,p)}function s(C,E={},p={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,E,p)}function a(C,E={},p={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,E,p)}function u(C,E,p={},I={}){return createNumberFilterControl(C,E,"1","1","999999",p,I)}function c(C,E={},p={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",C,E,p)}function e(C,E={},p={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,E,p)}function l(C,E,p={},I={}){return createNumberFilterControl(C,E,"5","0","100",p,I)}function r(C,E={},p={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",E,p)}function t(C,E,p={},I={},N="250"){return createNumberFilterControl(C,E,N,"0","1000000",p,I)}function y(C,E={},p={},I="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,E,p,I)}function d(C,E={},p={},I="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,E,p,I)}function i(C,E={},p={}){return f("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,E,p)}function f(C,E,p={},I={}){return createNumberFilterControl(C,E,"1","0","99999",p,I)}function h(C,E={},p={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","8",E,p)}function T(C,E={},p={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,E,p)}function x(C,E={},p={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,E,p)}function B(C,E={},p={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,E,p)}function R(C,E={},p={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,E,p)}function A(C,E={},p={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",C,E,p)}function D(C,E={},p={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",C,E,p)}function M(C,E={},p={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",C,E,p)}function $(C,E,p={}){const I=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],N={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},o=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),F=[],L=()=>E?parseFloat(E.value)||0:C.value,k=()=>{const P=L();F.forEach(({button:O,value:W})=>{const z=W<=P?N.active:N.inactive;Object.assign(O.style,z)})};return I.forEach(({value:P,emoji:O,tooltip:W})=>{const V=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...p},O);V.title=W,V.type="button",V.addEventListener("click",z=>{z.preventDefault(),C.updateValue(P),E&&(E.value=P),k()}),V.addEventListener("mouseenter",()=>{P<=L()||(V.style.background=N.hover.background)}),V.addEventListener("mouseleave",()=>{k()}),F.push({button:V,value:P}),o.appendChild(V)}),k(),E&&(E.addEventListener("input",k),E.addEventListener("change",k)),o}},8355:(S,m,n)=>{n.d(m,{Vk:()=>c,_7:()=>w,fO:()=>b});function b(e){if(!e)return[];const r=w(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(r)]}function w(e){return e?e.toLowerCase().split(",").map(v).filter(Boolean):[]}function v(e){const l=e.split("/").map(t=>t.trim()).filter(Boolean);if(l.length===0)return null;const r=l.map(g).filter(Boolean);return r.length>0?r:null}function g(e){const l=e.startsWith("!"),r=l?e.slice(1).trim():e;return r?{term:r,isNegative:l}:null}function s(e,l){u(e,r=>r.style.display!=="none",l)}function a(e,l){u(e,r=>r.style.opacity==="",l)}function u(e,l,r){const t=[...e].filter(l).length,y=e.length;c(r,t,y)}function c(e,l,r){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${l} \u0438\u0437 ${r}`}},4292:(S,m,n)=>{n.d(m,{C:()=>v});var b=n(8355),w=n(8506);function v(s,a){const u=(0,b.fO)(s.value);(0,w.hf)(u,a)}function g(s,a){const u=getIncludedSearchStrings(s.value);a.forEach(c=>highlightSubstrings(u,c))}},5213:(S,m,n)=>{n.d(m,{b:()=>v});var b=n(573),w=n(7273);function v(g,s,a=!1,u="customFiltersContainer"){let c=(0,b.Fi)(`#${u}`,g);if(c)if(a)c.remove();else return;c=(0,w.S)(),c.id=u,s(c,g)}},8200:(S,m,n)=>{n.d(m,{s:()=>b});function b(w){const{target:v}=w,{type:g}=v;switch(g){case"text":return`"${v.value}"`;case"number":return v.value;case"select-one":return v.value;case"date":return`"${v.value}"`;case"checkbox":return v.checked;default:return console.log(`Unknown input type: ${g}`),null}}},157:(S,m,n)=>{n.d(m,{Fg:()=>b,vx:()=>v});const b=window.GM_setValue,w=window.GM.setValue,v=window.GM_getValue},1870:(S,m,n)=>{n.d(m,{j:()=>b});class b{constructor(v,g){this.value=v,this.onChange=g}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,m,n)=>{n.d(m,{V:()=>s});var b=n(1870),w=n(8200),v=n(3976),g=n(157);class s extends b.j{constructor(u,c=null,e=null){super((0,g.vx)(u,c),e),this.storageKey=u,this.defaultValue=c}static create(u,c=null,e=null){return new s(u,c,e)}static createWithCompositeKey(u,c,e=null,l=null){const r=`${u}-${c}`;return new s(r,e,l)}updateValueFromEvent=u=>{const c=(0,w.s)(u),e=(0,v.$)(c);this.updateValue(e)};updateValue(u,c=!0){this.value!==u&&((0,g.Fg)(this.storageKey,u),this.value=u,c&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(S,m,n)=>{n.d(m,{$:()=>b});function b(w){return w===""?null:JSON.parse(w)}},5406:(S,m,n)=>{n.d(m,{$G:()=>y,z2:()=>l});function b(i,f="common",h=!1){const{pathname:T}=window.location;return w(T,i,f,h)}function w(i,f,h,T=!1){const x=i.split("/");f=f<0?x.length+f:f;const B=x[f]||h;return T&&console.log(`Pathname element: ${B}`),B}function v(i,f="common",h=!1){const T=b(i,"",h);return g(T,f,h)}function g(i,f,h){if(!i)return f;const T=i.split("-").at(-1);return h&&console.log(`Pathname element ending: ${T}`),T}function s(i,f,h="common",T=!1){const x=w(i,f,"",T);return g(x,h,T)}function a(i){return new URLSearchParams(window.location.search).get(i)}function u(i){return i.split("?")[0]}function c(i){return window.location.pathname.includes(i)}function e(i){return i.some(f=>c(f))}function l(...i){return window.location.pathname.split("/").some(h=>i.includes(h))}function r(i){try{const f=new URL(window.location.href);Object.entries(i).forEach(([h,T])=>{f.searchParams.set(h,T)}),window.location.href=f.toString()}catch(f){console.error("Failed to redirect:",f)}}function t(i,f=[]){const h=new AbortController;let T=!1;const x=R=>{const A=new URL(R),D={pathname:A.pathname};return f.forEach(M=>{D[M]=A.searchParams.get(M)}),D};let B=x(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(T)return;const R=x(window.navigation.currentEntry.url);if(Object.keys(B).some(D=>B[D]!==R[D])){B=R,T=!0;try{await i(R)}catch(D){console.error("URL observer error:",D)}finally{T=!1}}},{signal:h.signal}),()=>h.abort()}function y(i,f=[]){const h={pathname:window.location.pathname};f.forEach(A=>{h[A]=a(A)});let T=!1;async function x(){if(T)return;const A={pathname:window.location.pathname};if(f.forEach(D=>{A[D]=a(D)}),Object.keys(h).some(D=>h[D]!==A[D])){Object.assign(h,A),T=!0;try{await i()}catch(D){console.error("Error in URL observer callback:",D)}finally{T=!1}}}function B(){x().catch(A=>{console.error("Error in URL change handler:",A)})}let R=window.location.href;setInterval(()=>{window.location.href!==R&&(console.log("URL changed:",window.location.href),R=window.location.href,B())},200),window.addEventListener("popstate",B)}function d(i=[]){y(()=>window.location.reload(),i)}},4615:(S,m,n)=>{n.a(S,async(b,w)=>{try{let A=function(p){const I=(0,a.Yl)(p,"p","\u041E\u0446\u0435\u043D\u0438\u0442\u0435 \u0438 \u043E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u043E\u0442\u0437\u044B\u0432");I&&(0,s.Bt)((0,a.s$)(I,2));const N=(0,a.Yl)(p,"h3","\u0412\u0441\u0435 \u043E\u0442\u0437\u044B\u0432\u044B");N&&(0,s.Bt)(N.parentElement)},D=function(){if(!x.isFiltersInitialized){const{createGlobalFilter:p}=(0,l.z)($);x.reviewTextFilter=p("review-text-filter"),x.isFiltersInitialized=!0}},M=function(p,I){(0,r.ZM)(p,e.r.FILTERS_CONTAINER);const N=(0,u.E9)(x.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);x.reviewsInfo=(0,h.S)(e.r.INFO),p.append(N,x.reviewsInfo),I.parentNode.insertBefore(p,I)},$=function(){x.isFiltersInitialized||D();const p=(0,a.fI)(x.reviewSelector),I=(0,s.Bz)();p.forEach(N=>{const o=C(N);(0,s.GY)(o,I,N)}),(0,s.pB)(I),(0,f.Vk)(x.reviewsInfo,I.show.length,p.length)},C=function(p){T(p),(0,d.kZ)(p);const I=(0,a.Fi)(c.Z.REVIEW_TEXT_WRAP,p);if(!I)return!0;x.reviewTextFilter.value&&(0,y.C)(x.reviewTextFilter,I);const N=I.innerText;return(0,g.Ay)(N,x.reviewTextFilter)},E=function(){x.reviewSelector=null,x.isFiltersInitialized=!1,x.reviewTextFilter=null,x.reviewsInfo=null,(0,t.wP)(x.reviewsObserver)};var v=n(5213),g=n(3829),s=n(5539),a=n(573),u=n(7877),c=n(281),e=n(8697),l=n(4521),r=n(6754),t=n(4921),y=n(4292),d=n(8506),i=n(5406),f=n(8355),h=n(7273);const T=(0,s.L5)("span","read-more","\u0427\u0438\u0442\u0430\u0442\u044C \u0446\u0435\u043B\u0438\u043A\u043E\u043C"),x={reviewSelector:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await B(),(0,i.$G)(async()=>{E(),await B()});async function B(){(0,i.z2)("firm","reviews")&&(await(0,t.XW)(document.body),await R())}async function R(){const p=await(0,t.xk)(document,c.Z.GOOD_REVIEWS_LABEL),I=(0,a.s$)(p,5);A(I);const N=(0,a.Yl)(I,"button","\u041F\u043E\u043B\u0435\u0437\u043D\u043E"),o=(0,a.s$)(N,7),F=o.classList;F.length<1||(x.reviewSelector=`.${F[0]}`,D(),(0,v.b)(o,M,!0),$(),x.reviewsObserver=new MutationObserver((0,t.sg)($)),x.reviewsObserver.observe(I,{childList:!0}))}w()}catch(T){w(T)}},1)},281:(S,m,n)=>{n.d(m,{Z:()=>b});const b={GOOD_REVIEWS_LABEL:'label[title="\u041F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435"]',REVIEW_TEXT_WRAP:"div > div > a"}},8697:(S,m,n)=>{n.d(m,{r:()=>w});const w={FILTERS_CONTAINER:{position:"sticky",top:"48px",display:"flex",flexDirection:"column",gap:"4px",padding:"12px 18px 8px 16px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},j={};function U(S){var m=j[S];if(m!==void 0)return m.exports;var n=j[S]={exports:{}};return G[S](n,n.exports,U),n.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",b=v=>{v&&v.d<1&&(v.d=1,v.forEach(g=>g.r--),v.forEach(g=>g.r--?g.r++:g()))},w=v=>v.map(g=>{if(g!==null&&typeof g=="object"){if(g[S])return g;if(g.then){var s=[];s.d=0,g.then(c=>{a[m]=c,b(s)},c=>{a[n]=c,b(s)});var a={};return a[S]=c=>c(s),a}}var u={};return u[S]=c=>{},u[m]=g,u});U.a=(v,g,s)=>{var a;s&&((a=[]).d=-1);var u=new Set,c=v.exports,e,l,r,t=new Promise((y,d)=>{r=d,l=y});t[m]=c,t[S]=y=>(a&&y(a),u.forEach(y),t.catch(d=>{})),v.exports=t,g(y=>{e=w(y);var d,i=()=>e.map(h=>{if(h[n])throw h[n];return h[m]}),f=new Promise(h=>{d=()=>h(i),d.r=0;var T=x=>x!==a&&!u.has(x)&&(u.add(x),x&&!x.d&&(d.r++,x.push(d)));e.map(x=>x[S](T))});return d.r?f:i()},y=>(y?r(t[n]=y):l(c),b(a))),a&&a.d<0&&(a.d=0)}})(),U.d=(S,m)=>{for(var n in m)U.o(m,n)&&!U.o(S,n)&&Object.defineProperty(S,n,{enumerable:!0,get:m[n]})},U.o=(S,m)=>Object.prototype.hasOwnProperty.call(S,m);var Y=U(4615)})();})();
