// ==UserScript==
// @name         2gis reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://2gis.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77136793
// @icon         https://www.google.com/s2/favicons?sz=64&domain=2gis.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/dgis.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Y={7273:(S,h,n)=>{n.d(h,{S:()=>m});var y=n(5558);function w(E={},a=null){return createElement("span",E,a)}function m(E={},a=null){return(0,y.n)("div",E,a)}},5467:(S,h,n)=>{n.d(h,{E2:()=>w});var y=n(7273);function w(a,d={},o=null){const p=(0,y.S)(d,o);return p.append(a),p}function m(a,d=null,o={},p={}){const e=createActionLink(a,d,p);return w(e,o)}function E(a,d=null,o=null,p={},e={},l={}){const u=createActionLinkWithIcon(a,o,d,e,l);return w(u,p)}},5558:(S,h,n)=>{n.d(h,{n:()=>w});var y=n(6754);function w(m,E,a=null){if(typeof E!="object"||E===null)throw new TypeError("styles should be an object");const d=document.createElement(m);return(0,y.ZM)(d,E),a&&(d.innerHTML=a),d}},740:(S,h,n)=>{n.d(h,{kU:()=>m});var y=n(5558),w=n(4921);function m(e,l,u){const t=o(e,"text",l);return t.value=u,t}function E(e,l,u,t,F,c){const i=o(e,"number",l);return i.value=u,i.step=t,i.min=F,i.max=c,i}function a(e,l,u){const t=o(e,"date",l);return t.value=u,t}function d(e,l,u){const t=o(e,"checkbox",l);return t.checked=u,t}function o(e={},l=null,u=null){const t=(0,y.n)("input",e);return l&&(t.type=l),u&&(t.addEventListener("keyup",(0,w.sg)(u,200)),t.addEventListener("change",(0,w.sg)(u,100))),t}function p(e,l,u){const t=createElement("select",e);return l&&t.addEventListener("change",l),t.value=u,t}},573:(S,h,n)=>{n.d(h,{Fi:()=>w,Yl:()=>a,fI:()=>m});function y(c,i=document){return!!i.querySelector(c)}function w(c,i=document,f=!1){const v=i.querySelector(c);return f&&!v&&console.log(`No element found for selector: ${c}`),v}function m(c,i=document,f=!1){const v=i.querySelectorAll(c);return f&&!v.length&&console.log(`No elements found for selector: ${c}`),v}function E(c,i=1){let f=c;for(let v=0;v<i;v++){if(!f.parentElement)return null;f=f.parentElement}return f}function a(c,i,f){return[...c.querySelectorAll(i)].find(v=>v.textContent.trim().includes(f))}function d(c,i,f=!1,v=!1,N=null){const x=w(i,c);return o(x,f,v,N)}function o(c,i=!1,f=!1,v=null){if(!c)return v===null?(console.log("No element found"),null):v;const N=c.innerText;return l(N,i,f)}function p(c,i,f=!1){const v=c[i];return o(v,f)}function e(c,i=!1,f=!1){const v=c.textContent;return l(v,i,f)}function l(c,i,f){i&&(c=removeNonNumber(c)),f&&(c=c.replace(",","."));const v=Number(c);return Number.isNaN(v)?(console.log(`Invalid number: ${c}`),0):v}function u(c){return[...c.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function t(c){const i=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(i);return i(c)}function F(c){return normalizeSpacing(c.textContent)}},8506:(S,h,n)=>{n.d(h,{hf:()=>w,kZ:()=>E});var y=n(573);function w(a,d){a.forEach(o=>m(d,o))}function m(a,d){if(!d)return;const o=new RegExp(`(${d})`,"gi"),p=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null);let e=p.nextNode();const l=[];for(;e;){const{textContent:u}=e;if(o.test(u)){const t=document.createDocumentFragment();let F=0;u.replace(o,(c,i,f)=>{f>F&&t.appendChild(document.createTextNode(u.slice(F,f)));const v=document.createElement("span");v.className="highlightedSubstring",v.style.backgroundColor="yellow",v.textContent=c,t.appendChild(v),F=f+c.length}),F<u.length&&t.appendChild(document.createTextNode(u.slice(F))),l.push({node:e,fragment:t})}e=p.nextNode()}l.forEach(({node:u,fragment:t})=>{u.parentNode.replaceChild(t,u)})}function E(a){(0,y.fI)(".highlightedSubstring",a).forEach(o=>{const{parentNode:p}=o;o.replaceWith(o.textContent),p.normalize()})}},5539:(S,h,n)=>{n.d(h,{Bz:()=>i,Fo:()=>d,GY:()=>f,L5:()=>R,pB:()=>v,sw:()=>g,vK:()=>C});var y=n(573);function w(r,b){r.parentNode.insertBefore(b,r.nextSibling)}function m(r){r.style.display="none"}function E(r,b=1){const I=document.querySelector(r);I&&a(I,b)}function a(r,b=1){const I=getElementAncestor(r,b);I&&m(I)}function d(r,b,I){const k=(0,y.Yl)(r,b,I);k&&m(k)}function o(r){c(r),m(r)}function p(r){r.intersectionObserver||runOnceOnIntersection(r,()=>m(r))}function e(r){r.style.display=""}function l(r){const b=F(r);r.style.display=b}function u(r,b){b?m(r):e(r)}function t(r,b){b?p(r):(clearIntersectionObserver(r),e(r))}function F(r){return c(r),r.dataset.defaultDisplay}function c(r){if(r.dataset.defaultDisplay)return;const{display:b}=getComputedStyle(r);r.dataset.defaultDisplay=b}function i(){return{show:[],hide:[]}}function f(r,b,I){r?b.hide.push(I):b.show.push(I)}function v(r){r.show.forEach(e),r.hide.forEach(m)}function N(r,b,I=.3){b?D(r,I):x(r)}function x(r){r.style.opacity=""}function D(r,b=.3){r.style.opacity=b}function B(r){r.style.order=""}function V(r,b){r.style.order=b}function O(r,b,I,k="inline-flex"){b.style.display=r?k:"none",I.style.display=r?"none":k}function M(r,b=.3){r.style.transition="opacity 0.3s",r.style.opacity=b,s(r)}function $(r){r.style.opacity="",T(r)}function C(r){r.style.animation="loading-pulse 2.5s ease-in-out infinite",s(r)}function g(r){r.style.animation="",T(r)}function s(r){r.style.pointerEvents="none",r.style.cursor="wait"}function T(r){r.style.pointerEvents="",r.style.cursor=""}function L(r,b){const I=getFirstElement(b);I&&W(r,I)}function W(r,b){const I=createLink();I.href=r,b.parentNode.append(I),I.append(b)}function Q(r,b){const I=getFirstElement(b);I&&z(r,I)}function z(r,b,I={}){const k=createLink(I);k.href=r,k.append(...b.childNodes),b.append(k)}function U(){const r=getURLQueryParam("scrollTo");if(!r)return;const b=document.getElementById(r);b?b.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function R(r,b,I=null){const k=`${b}-click-passed`,G=I?A=>(0,y.Yl)(A,r,I):A=>(0,y.Fi)(r,A);return function(A){if(A.hasAttribute(k))return!1;const X=G(A);return X&&X.click(),A.setAttribute(k,""),!0}}function j(r,b,I="text/plain"){const k=new Blob([r],{type:I}),G=URL.createObjectURL(k),A=document.createElement("a");A.href=G,A.download=b,document.body.appendChild(A),A.click(),document.body.removeChild(A),requestAnimationFrame(()=>URL.revokeObjectURL(G))}},6754:(S,h,n)=>{n.d(h,{ZM:()=>y});function y(a,d){Object.assign(a.style,d)}function w(a,d="custom-global-style"){let o=document.getElementById(d);o||(o=document.createElement("style"),o.id=d,o.type="text/css",document.head.appendChild(o)),o.textContent=a}function m(a){return Object.entries(a).map(([d,o])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o};`).join(" ")}function E(a){return a?a.split(";").filter(d=>d.trim()!=="").reduce((d,o)=>{const[p,e]=o.split(":").map(u=>u.trim()),l=p.replace(/-([a-z])/g,(u,t)=>t.toUpperCase());return d[l]=e,d},{}):{}}},4921:(S,h,n)=>{n.d(h,{XW:()=>m,sg:()=>E,wP:()=>p,xk:()=>y});function y(e,l,u=null){const t=e.querySelector(l);return t?Promise.resolve(t):new Promise(F=>{const c=new MutationObserver(f);c.observe(e,{childList:!0,subtree:!0});let i;u&&(i=setTimeout(()=>{c.disconnect(),console.log(`No element found for selector: ${l}`),F(null)},u));function f(){const v=e.querySelector(l);v&&(i&&clearTimeout(i),c.disconnect(),F(v))}})}function w(e,l){return e.querySelector(l)?new Promise(t=>{const F=new MutationObserver(c);F.observe(e,{childList:!0,subtree:!0});function c(){e.querySelector(l)||(F.disconnect(),t())}}):Promise.resolve()}function m(e,l=400){return new Promise(u=>{let t;const F=new MutationObserver(()=>{clearTimeout(t),c()});function c(){t=setTimeout(()=>{F.disconnect(),u()},l)}c(),F.observe(e,{childList:!0,subtree:!0})})}function E(e,l=250){let u;return function(...t){const F=this;clearTimeout(u),u=setTimeout(()=>e.apply(F,t),l)}}async function a(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function d(e,l){const u=new IntersectionObserver(t=>{t.forEach(F=>{F.isIntersecting&&(l(),o(e))})});e.intersectionObserver=u,u.observe(e)}function o(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function p(e){e&&(e.disconnect(),e=null)}},3829:(S,h,n)=>{n.d(h,{Ay:()=>w});var y=n(8355);function w(u,t){return!m(u,t)}function m(u,t){if(!t||!t.value)return!0;const F=(0,y._7)(t.value);return E(u,F)}function E(u,t){if(!t||!t.length)return!0;const F=(u||"").toLowerCase();return t.every(c=>a(F,c))}function a(u,t){return t.some(({term:F,isNegative:c})=>{const i=u.includes(F);return c?!i:i})}function d(u,t){return t.value!=null&&u<t.value}function o(u,t){return t.value!=null&&u>t.value}function p(u,t){return t.value==null?!1:u<parseDateFromISO(t.value)}function e(u,t){return t.value==null?!1:u>parseDateFromISO(t.value)}function l(u,t){return t.value&&u!==t.value}},4521:(S,h,n)=>{n.d(h,{z:()=>w});var y=n(3048);function w(m,E=null){return{createGlobalFilter(a,d=null,o=m){return y.V.create(a,d,o)},createSectionFilter(a,d=null,o=m){if(!E)throw new Error("sectionId must be provided to use createSectionFilter.");return y.V.createWithCompositeKey(E,a,d,o)}}}},5884:(S,h,n)=>{n.d(h,{Nm:()=>m});var y=n(5467),w=n(740);function m(p,e,l={},u={}){const t=(0,w.kU)(u,e.updateValueFromEvent,e.value);return(0,y.E2)(t,l,p)}function E(p,e,l,u,t,F={},c={}){const i=createNumberInput(c,e.updateValueFromEvent,e.value,l,u,t);return createControl(i,F,p)}function a(p,e,l={},u={}){const t=createSelect(u,e.updateValueFromEvent,e.value);return createControl(t,l,p)}function d(p,e,l={},u={}){const t=createDateInput(u,e.updateValueFromEvent,e.value);return createControl(t,l,p)}function o(p,e,l={},u={}){const t=createCheckboxInput(u,e.updateValueFromEvent,e.value);return createControl(t,l,p)}},7877:(S,h,n)=>{n.d(h,{E9:()=>w});var y=n(5884);function w(C,g={},s={}){return(0,y.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,g,s)}function m(C,g={},s={},T=.1,L=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,T,L,5,g,s)}function E(C,g={},s={},T=.1,L=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,T,L,5,g,s)}function a(C,g={},s={}){return o("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,s)}function d(C,g={},s={}){return o("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,s)}function o(C,g,s={},T={}){return createNumberFilterControl(C,g,"1","1","999999",s,T)}function p(C,g={},s={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",C,g,s)}function e(C,g={},s={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,g,s)}function l(C,g,s={},T={}){return createNumberFilterControl(C,g,"5","0","100",s,T)}function u(C,g={},s={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",g,s)}function t(C,g,s={},T={},L="250"){return createNumberFilterControl(C,g,L,"0","1000000",s,T)}function F(C,g={},s={},T="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,g,s,T)}function c(C,g={},s={},T="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,g,s,T)}function i(C,g={},s={}){return f("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,g,s)}function f(C,g,s={},T={}){return createNumberFilterControl(C,g,"1","0","99999",s,T)}function v(C,g={},s={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","8",g,s)}function N(C,g={},s={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,g,s)}function x(C,g={},s={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,g,s)}function D(C,g={},s={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,g,s)}function B(C,g={},s={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,g,s)}function V(C,g={},s={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",C,g,s)}function O(C,g={},s={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",C,g,s)}function M(C,g={},s={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",C,g,s)}function $(C,g,s={}){const T=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],L={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},W=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),Q=[],z=()=>g?parseFloat(g.value)||0:C.value,U=()=>{const R=z();Q.forEach(({button:j,value:r})=>{const I=r<=R?L.active:L.inactive;Object.assign(j.style,I)})};return T.forEach(({value:R,emoji:j,tooltip:r})=>{const b=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...s},j);b.title=r,b.type="button",b.addEventListener("click",I=>{I.preventDefault(),C.updateValue(R),g&&(g.value=R),U()}),b.addEventListener("mouseenter",()=>{R<=z()||(b.style.background=L.hover.background)}),b.addEventListener("mouseleave",()=>{U()}),Q.push({button:b,value:R}),W.appendChild(b)}),U(),g&&(g.addEventListener("input",U),g.addEventListener("change",U)),W}},8355:(S,h,n)=>{n.d(h,{Vk:()=>p,_7:()=>w,fO:()=>y});function y(e){if(!e)return[];const u=w(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(u)]}function w(e){return e?e.toLowerCase().split(",").map(m).filter(Boolean):[]}function m(e){const l=e.split("/").map(t=>t.trim()).filter(Boolean);if(l.length===0)return null;const u=l.map(E).filter(Boolean);return u.length>0?u:null}function E(e){const l=e.startsWith("!"),u=l?e.slice(1).trim():e;return u?{term:u,isNegative:l}:null}function a(e,l){o(e,u=>u.style.display!=="none",l)}function d(e,l){o(e,u=>u.style.opacity==="",l)}function o(e,l,u){const t=[...e].filter(l).length,F=e.length;p(u,t,F)}function p(e,l,u){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${l} \u0438\u0437 ${u}`}},4292:(S,h,n)=>{n.d(h,{C:()=>m});var y=n(8355),w=n(8506);function m(a,d){const o=(0,y.fO)(a.value);(0,w.hf)(o,d)}function E(a,d){const o=getIncludedSearchStrings(a.value);d.forEach(p=>highlightSubstrings(o,p))}},5213:(S,h,n)=>{n.d(h,{b:()=>w});var y=n(7273);function w(m,E,a=!1,d="customFiltersContainer"){let o=m.querySelector(`#${d}`);if(o){if(!a)return;o.replaceChildren()}else o=(0,y.S)(),o.id=d;E(o,m)}},8200:(S,h,n)=>{n.d(h,{s:()=>y});function y(w){const{target:m}=w,{type:E}=m;switch(E){case"text":return`"${m.value}"`;case"number":return m.value;case"select-one":return m.value;case"date":return`"${m.value}"`;case"checkbox":return m.checked;default:return console.log(`Unknown input type: ${E}`),null}}},157:(S,h,n)=>{n.d(h,{Fg:()=>y,vx:()=>m});const y=window.GM_setValue,w=window.GM.setValue,m=window.GM_getValue},1870:(S,h,n)=>{n.d(h,{j:()=>y});class y{constructor(m,E){this.value=m,this.onChange=E}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,h,n)=>{n.d(h,{V:()=>a});var y=n(1870),w=n(8200),m=n(3976),E=n(157);class a extends y.j{constructor(o,p=null,e=null){super((0,E.vx)(o,p),e),this.storageKey=o,this.defaultValue=p}static create(o,p=null,e=null){return new a(o,p,e)}static createWithCompositeKey(o,p,e=null,l=null){const u=`${o}-${p}`;return new a(u,e,l)}updateValueFromEvent=o=>{const p=(0,w.s)(o),e=(0,m.$)(p);this.updateValue(e)};updateValue(o,p=!0){this.value!==o&&((0,E.Fg)(this.storageKey,o),this.value=o,p&&this.onChangeIfDefined())}clearValue(o=!1){this.updateValue(null,o)}resetValue(o=!1){this.updateValue(this.defaultValue,o)}}},3976:(S,h,n)=>{n.d(h,{$:()=>y});function y(w){return w===""?null:JSON.parse(w)}},5406:(S,h,n)=>{n.d(h,{Fc:()=>y,k1:()=>F});function y(i,f="common",v=!1){const{pathname:N}=window.location;return w(N,i,f,v)}function w(i,f,v,N=!1){const x=i.split("/");f=f<0?x.length+f:f;const D=x[f]||v;return N&&console.log(`Pathname element: ${D}`),D}function m(i,f="common",v=!1){const N=y(i,"",v);return E(N,f,v)}function E(i,f,v){if(!i)return f;const N=i.split("-").at(-1);return v&&console.log(`Pathname element ending: ${N}`),N}function a(i,f,v="common",N=!1){const x=w(i,f,"",N);return E(x,v,N)}function d(i){return new URLSearchParams(window.location.search).get(i)}function o(i){return i.split("?")[0]}function p(i){return window.location.pathname.endsWith(i)}function e(i){return window.location.pathname.includes(i)}function l(i){return i.some(f=>e(f))}function u(...i){return window.location.pathname.split("/").some(v=>i.includes(v))}function t(i){try{const f=new URL(window.location.href);Object.entries(i).forEach(([v,N])=>{f.searchParams.set(v,N)}),window.location.href=f.toString()}catch(f){console.error("Failed to redirect:",f)}}function F(i,f=[]){const v=new AbortController;let N=!1;const x=B=>{const V=new URL(B),O={pathname:V.pathname};return f.forEach(M=>{O[M]=V.searchParams.get(M)}),O};let D=x(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(N)return;const B=x(window.navigation.currentEntry.url);if(Object.keys(D).some(O=>D[O]!==B[O])){D=B,N=!0;try{await i(B)}catch(O){console.error("URL observer error:",O)}finally{N=!1}}},{signal:v.signal}),()=>v.abort()}function c(i=[]){F(()=>window.location.reload(),i)}},4615:(S,h,n)=>{n.a(S,async(y,w)=>{try{let V=function(){["\u041E\u0446\u0435\u043D\u0438\u0442\u0435 \u0438 \u043E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u043E\u0442\u0437\u044B\u0432","\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u043C \u043E\u0442\u0437\u044B\u0432\u044B","\u0412\u0441\u0435 \u043E\u0442\u0437\u044B\u0432\u044B"].forEach(T=>(0,a.Fo)(x.reviewsContainer,":scope > div",T))},O=function(){if(!x.isFiltersInitialized){const{createGlobalFilter:s}=(0,l.z)($);x.reviewTextFilter=s("review-text-filter"),x.isFiltersInitialized=!0}},M=function(s,T){(0,u.ZM)(s,e.r.FILTERS_CONTAINER);const L=(0,o.E9)(x.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);x.reviewsInfo=(0,v.S)(e.r.INFO),s.append(L,x.reviewsInfo),T.parentNode.insertBefore(s,T)},$=function(){const s=(0,d.fI)(x.reviewSelector,x.reviewsContainer),T=(0,a.Bz)();s.forEach(L=>{const W=C(L);(0,a.GY)(W,T,L)}),(0,a.pB)(T),(0,f.Vk)(x.reviewsInfo,T.show.length,s.length)},C=function(s){N(s),(0,c.kZ)(s);const T=(0,d.Fi)(p.Z.REVIEW_TEXT_WRAP,s);if(!T)return!0;x.reviewTextFilter.value&&(0,F.C)(x.reviewTextFilter,T);const L=T.innerText;return(0,E.Ay)(L,x.reviewTextFilter)},g=function(){x.reviewsContainer=null,x.reviewSelector=null,x.isFiltersInitialized=!1,x.reviewTextFilter=null,x.reviewsInfo=null,(0,t.wP)(x.reviewsObserver)};var m=n(5213),E=n(3829),a=n(5539),d=n(573),o=n(7877),p=n(281),e=n(8697),l=n(4521),u=n(6754),t=n(4921),F=n(4292),c=n(8506),i=n(5406),f=n(8355),v=n(7273);const N=(0,a.L5)("span","read-more","\u0427\u0438\u0442\u0430\u0442\u044C \u0446\u0435\u043B\u0438\u043A\u043E\u043C");window.GM_addStyle(`
  @keyframes loading-pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 0.35; }
  }
`);const x={reviewsContainer:null,reviewSelector:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await D(),(0,i.k1)(async()=>{await D(!0)});async function D(s=!1){if(s&&g(),(0,i.Fc)(-1)!=="reviews")return;const T=await(0,t.xk)(document,p.Z.SIDE_PANEL);(0,a.vK)(T);try{await(0,t.XW)(document.body),await B(T),V()}finally{(0,a.sw)(T)}}async function B(s){x.reviewsContainer=await(0,t.xk)(s,p.Z.REVIEWS_CONTAINER);const T=await(0,t.xk)(x.reviewsContainer,p.Z.FIRST_REVIEW),L=T.querySelector("div").classList;L.length<1||(x.reviewSelector=`div:has(>div.${L[0]})`,O(),(0,m.b)(T,M,!0),$(),x.reviewsObserver=new MutationObserver((0,t.sg)($)),x.reviewsObserver.observe(x.reviewsContainer,{childList:!0}))}w()}catch(N){w(N)}},1)},281:(S,h,n)=>{n.d(h,{Z:()=>y});const y={SIDE_PANEL:'div[style^="position: relative"]:has(label[title="\u041F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435"])',REVIEWS_CONTAINER:'div:has(> div > div > ul > li > label[title="\u041F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435"])',FIRST_REVIEW:`div:has(${" > div".repeat(7)} > button)`,REVIEW_TEXT_WRAP:"div > div > div > a"}},8697:(S,h,n)=>{n.d(h,{r:()=>w});const w={FILTERS_CONTAINER:{position:"sticky",top:"48px",display:"flex",flexDirection:"column",gap:"4px",padding:"12px 18px 8px 16px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},Z={};function P(S){var h=Z[S];if(h!==void 0)return h.exports;var n=Z[S]={exports:{}};return Y[S](n,n.exports,P),n.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",y=m=>{m&&m.d<1&&(m.d=1,m.forEach(E=>E.r--),m.forEach(E=>E.r--?E.r++:E()))},w=m=>m.map(E=>{if(E!==null&&typeof E=="object"){if(E[S])return E;if(E.then){var a=[];a.d=0,E.then(p=>{d[h]=p,y(a)},p=>{d[n]=p,y(a)});var d={};return d[S]=p=>p(a),d}}var o={};return o[S]=p=>{},o[h]=E,o});P.a=(m,E,a)=>{var d;a&&((d=[]).d=-1);var o=new Set,p=m.exports,e,l,u,t=new Promise((F,c)=>{u=c,l=F});t[h]=p,t[S]=F=>(d&&F(d),o.forEach(F),t.catch(c=>{})),m.exports=t,E(F=>{e=w(F);var c,i=()=>e.map(v=>{if(v[n])throw v[n];return v[h]}),f=new Promise(v=>{c=()=>v(i),c.r=0;var N=x=>x!==d&&!o.has(x)&&(o.add(x),x&&!x.d&&(c.r++,x.push(c)));e.map(x=>x[S](N))});return c.r?f:i()},F=>(F?u(t[n]=F):l(p),y(d))),d&&d.d<0&&(d.d=0)}})(),P.d=(S,h)=>{for(var n in h)P.o(h,n)&&!P.o(S,n)&&Object.defineProperty(S,n,{enumerable:!0,get:h[n]})},P.o=(S,h)=>Object.prototype.hasOwnProperty.call(S,h);var K=P(4615)})();})();
