// ==UserScript==
// @name         2gis reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://2gis.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77101971
// @icon         https://www.google.com/s2/favicons?sz=64&domain=2gis.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/dgis.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Y={7273:(S,m,n)=>{n.d(m,{S:()=>v});var w=n(5558);function C(E={},a=null){return createElement("span",E,a)}function v(E={},a=null){return(0,w.n)("div",E,a)}},5467:(S,m,n)=>{n.d(m,{E2:()=>C});var w=n(7273);function C(a,d={},o=null){const p=(0,w.S)(d,o);return p.append(a),p}function v(a,d=null,o={},p={}){const e=createActionLink(a,d,p);return C(e,o)}function E(a,d=null,o=null,p={},e={},l={}){const u=createActionLinkWithIcon(a,o,d,e,l);return C(u,p)}},5558:(S,m,n)=>{n.d(m,{n:()=>C});var w=n(6754);function C(v,E,a=null){if(typeof E!="object"||E===null)throw new TypeError("styles should be an object");const d=document.createElement(v);return(0,w.ZM)(d,E),a&&(d.innerHTML=a),d}},740:(S,m,n)=>{n.d(m,{kU:()=>v});var w=n(5558),C=n(4921);function v(e,l,u){const t=o(e,"text",l);return t.value=u,t}function E(e,l,u,t,x,c){const i=o(e,"number",l);return i.value=u,i.step=t,i.min=x,i.max=c,i}function a(e,l,u){const t=o(e,"date",l);return t.value=u,t}function d(e,l,u){const t=o(e,"checkbox",l);return t.checked=u,t}function o(e={},l=null,u=null){const t=(0,w.n)("input",e);return l&&(t.type=l),u&&(t.addEventListener("keyup",(0,C.sg)(u,200)),t.addEventListener("change",(0,C.sg)(u,100))),t}function p(e,l,u){const t=createElement("select",e);return l&&t.addEventListener("change",l),t.value=u,t}},573:(S,m,n)=>{n.d(m,{Fi:()=>C,Yl:()=>a,fI:()=>v});function w(c,i=document){return!!i.querySelector(c)}function C(c,i=document,f=!1){const h=i.querySelector(c);return f&&!h&&console.log(`No element found for selector: ${c}`),h}function v(c,i=document,f=!1){const h=i.querySelectorAll(c);return f&&!h.length&&console.log(`No elements found for selector: ${c}`),h}function E(c,i=1){let f=c;for(let h=0;h<i;h++){if(!f.parentElement)return null;f=f.parentElement}return f}function a(c,i,f){return[...c.querySelectorAll(i)].find(h=>h.textContent.trim().includes(f))}function d(c,i,f=!1,h=!1,N=null){const F=C(i,c);return o(F,f,h,N)}function o(c,i=!1,f=!1,h=null){if(!c)return h===null?(console.log("No element found"),null):h;const N=c.innerText;return l(N,i,f)}function p(c,i,f=!1){const h=c[i];return o(h,f)}function e(c,i=!1,f=!1){const h=c.textContent;return l(h,i,f)}function l(c,i,f){i&&(c=removeNonNumber(c)),f&&(c=c.replace(",","."));const h=Number(c);return Number.isNaN(h)?(console.log(`Invalid number: ${c}`),0):h}function u(c){return[...c.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function t(c){const i=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(i);return i(c)}function x(c){return normalizeSpacing(c.textContent)}},8506:(S,m,n)=>{n.d(m,{hf:()=>C,kZ:()=>E});var w=n(573);function C(a,d){a.forEach(o=>v(d,o))}function v(a,d){if(!d)return;const o=new RegExp(`(${d})`,"gi"),p=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null);let e=p.nextNode();const l=[];for(;e;){const{textContent:u}=e;if(o.test(u)){const t=document.createDocumentFragment();let x=0;u.replace(o,(c,i,f)=>{f>x&&t.appendChild(document.createTextNode(u.slice(x,f)));const h=document.createElement("span");h.className="highlightedSubstring",h.style.backgroundColor="yellow",h.textContent=c,t.appendChild(h),x=f+c.length}),x<u.length&&t.appendChild(document.createTextNode(u.slice(x))),l.push({node:e,fragment:t})}e=p.nextNode()}l.forEach(({node:u,fragment:t})=>{u.parentNode.replaceChild(t,u)})}function E(a){(0,w.fI)(".highlightedSubstring",a).forEach(o=>{const{parentNode:p}=o;o.replaceWith(o.textContent),p.normalize()})}},5539:(S,m,n)=>{n.d(m,{Bz:()=>i,Fo:()=>d,GY:()=>f,L5:()=>P,pB:()=>h,sw:()=>g,vK:()=>y});var w=n(573);function C(r,b){r.parentNode.insertBefore(b,r.nextSibling)}function v(r){r.style.display="none"}function E(r,b=1){const T=document.querySelector(r);T&&a(T,b)}function a(r,b=1){const T=getElementAncestor(r,b);T&&v(T)}function d(r,b,T){const A=(0,w.Yl)(r,b,T);A&&v(A)}function o(r){c(r),v(r)}function p(r){r.intersectionObserver||runOnceOnIntersection(r,()=>v(r))}function e(r){r.style.display=""}function l(r){const b=x(r);r.style.display=b}function u(r,b){b?v(r):e(r)}function t(r,b){b?p(r):(clearIntersectionObserver(r),e(r))}function x(r){return c(r),r.dataset.defaultDisplay}function c(r){if(r.dataset.defaultDisplay)return;const{display:b}=getComputedStyle(r);r.dataset.defaultDisplay=b}function i(){return{show:[],hide:[]}}function f(r,b,T){r?b.hide.push(T):b.show.push(T)}function h(r){r.show.forEach(e),r.hide.forEach(v)}function N(r,b,T=.3){b?D(r,T):F(r)}function F(r){r.style.opacity=""}function D(r,b=.3){r.style.opacity=b}function B(r){r.style.order=""}function O(r,b){r.style.order=b}function k(r,b,T,A="inline-flex"){b.style.display=r?A:"none",T.style.display=r?"none":A}function U(r,b=.3){r.style.transition="opacity 0.3s",r.style.opacity=b,s(r)}function $(r){r.style.opacity="",I(r)}function y(r){r.style.animation="loading-pulse 2.5s ease-in-out infinite",s(r)}function g(r){r.style.animation="",I(r)}function s(r){r.style.pointerEvents="none",r.style.cursor="wait"}function I(r){r.style.pointerEvents="",r.style.cursor=""}function L(r,b){const T=getFirstElement(b);T&&M(r,T)}function M(r,b){const T=createLink();T.href=r,b.parentNode.append(T),T.append(b)}function Z(r,b){const T=getFirstElement(b);T&&j(r,T)}function j(r,b,T={}){const A=createLink(T);A.href=r,A.append(...b.childNodes),b.append(A)}function W(){const r=getURLQueryParam("scrollTo");if(!r)return;const b=document.getElementById(r);b?b.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function P(r,b,T=null){const A=`${b}-click-passed`,G=T?R=>(0,w.Yl)(R,r,T):R=>(0,w.Fi)(r,R);return function(R){if(R.hasAttribute(A))return!1;const X=G(R);return X&&X.click(),R.setAttribute(A,""),!0}}function z(r,b,T="text/plain"){const A=new Blob([r],{type:T}),G=URL.createObjectURL(A),R=document.createElement("a");R.href=G,R.download=b,document.body.appendChild(R),R.click(),document.body.removeChild(R),requestAnimationFrame(()=>URL.revokeObjectURL(G))}},6754:(S,m,n)=>{n.d(m,{ZM:()=>w});function w(a,d){Object.assign(a.style,d)}function C(a,d="custom-global-style"){let o=document.getElementById(d);o||(o=document.createElement("style"),o.id=d,o.type="text/css",document.head.appendChild(o)),o.textContent=a}function v(a){return Object.entries(a).map(([d,o])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o};`).join(" ")}function E(a){return a?a.split(";").filter(d=>d.trim()!=="").reduce((d,o)=>{const[p,e]=o.split(":").map(u=>u.trim()),l=p.replace(/-([a-z])/g,(u,t)=>t.toUpperCase());return d[l]=e,d},{}):{}}},4921:(S,m,n)=>{n.d(m,{XW:()=>v,sg:()=>E,wP:()=>p,xk:()=>w});function w(e,l,u=null){const t=e.querySelector(l);return t?Promise.resolve(t):new Promise(x=>{const c=new MutationObserver(f);c.observe(e,{childList:!0,subtree:!0});let i;u&&(i=setTimeout(()=>{c.disconnect(),console.log(`No element found for selector: ${l}`),x(null)},u));function f(){const h=e.querySelector(l);h&&(i&&clearTimeout(i),c.disconnect(),x(h))}})}function C(e,l){return e.querySelector(l)?new Promise(t=>{const x=new MutationObserver(c);x.observe(e,{childList:!0,subtree:!0});function c(){e.querySelector(l)||(x.disconnect(),t())}}):Promise.resolve()}function v(e,l=400){return new Promise(u=>{let t;const x=new MutationObserver(()=>{clearTimeout(t),c()});function c(){t=setTimeout(()=>{x.disconnect(),u()},l)}c(),x.observe(e,{childList:!0,subtree:!0})})}function E(e,l=250){let u;return function(...t){const x=this;clearTimeout(u),u=setTimeout(()=>e.apply(x,t),l)}}async function a(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function d(e,l){const u=new IntersectionObserver(t=>{t.forEach(x=>{x.isIntersecting&&(l(),o(e))})});e.intersectionObserver=u,u.observe(e)}function o(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function p(e){e&&(e.disconnect(),e=null)}},3829:(S,m,n)=>{n.d(m,{Ay:()=>C});var w=n(8355);function C(u,t){return!v(u,t)}function v(u,t){if(!t||!t.value)return!0;const x=(0,w._7)(t.value);return E(u,x)}function E(u,t){if(!t||!t.length)return!0;const x=(u||"").toLowerCase();return t.every(c=>a(x,c))}function a(u,t){return t.some(({term:x,isNegative:c})=>{const i=u.includes(x);return c?!i:i})}function d(u,t){return t.value!=null&&u<t.value}function o(u,t){return t.value!=null&&u>t.value}function p(u,t){return t.value==null?!1:u<parseDateFromISO(t.value)}function e(u,t){return t.value==null?!1:u>parseDateFromISO(t.value)}function l(u,t){return t.value&&u!==t.value}},4521:(S,m,n)=>{n.d(m,{z:()=>C});var w=n(3048);function C(v,E=null){return{createGlobalFilter(a,d=null,o=v){return w.V.create(a,d,o)},createSectionFilter(a,d=null,o=v){if(!E)throw new Error("sectionId must be provided to use createSectionFilter.");return w.V.createWithCompositeKey(E,a,d,o)}}}},5884:(S,m,n)=>{n.d(m,{Nm:()=>v});var w=n(5467),C=n(740);function v(p,e,l={},u={}){const t=(0,C.kU)(u,e.updateValueFromEvent,e.value);return(0,w.E2)(t,l,p)}function E(p,e,l,u,t,x={},c={}){const i=createNumberInput(c,e.updateValueFromEvent,e.value,l,u,t);return createControl(i,x,p)}function a(p,e,l={},u={}){const t=createSelect(u,e.updateValueFromEvent,e.value);return createControl(t,l,p)}function d(p,e,l={},u={}){const t=createDateInput(u,e.updateValueFromEvent,e.value);return createControl(t,l,p)}function o(p,e,l={},u={}){const t=createCheckboxInput(u,e.updateValueFromEvent,e.value);return createControl(t,l,p)}},7877:(S,m,n)=>{n.d(m,{E9:()=>C});var w=n(5884);function C(y,g={},s={}){return(0,w.Nm)("\u041F\u043E\u0438\u0441\u043A: ",y,g,s)}function v(y,g={},s={},I=.1,L=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",y,I,L,5,g,s)}function E(y,g={},s={},I=.1,L=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",y,I,L,5,g,s)}function a(y,g={},s={}){return o("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",y,g,s)}function d(y,g={},s={}){return o("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",y,g,s)}function o(y,g,s={},I={}){return createNumberFilterControl(y,g,"1","1","999999",s,I)}function p(y,g={},s={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",y,g,s)}function e(y,g={},s={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",y,g,s)}function l(y,g,s={},I={}){return createNumberFilterControl(y,g,"5","0","100",s,I)}function u(y,g={},s={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",y,"5","0","100",g,s)}function t(y,g,s={},I={},L="250"){return createNumberFilterControl(y,g,L,"0","1000000",s,I)}function x(y,g={},s={},I="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",y,g,s,I)}function c(y,g={},s={},I="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",y,g,s,I)}function i(y,g={},s={}){return f("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",y,g,s)}function f(y,g,s={},I={}){return createNumberFilterControl(y,g,"1","0","99999",s,I)}function h(y,g={},s={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",y,"1","2","8",g,s)}function N(y,g={},s={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",y,1,1,10,g,s)}function F(y,g={},s={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",y,g,s)}function D(y,g={},s={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",y,g,s)}function B(y,g={},s={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",y,g,s)}function O(y,g={},s={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",y,g,s)}function k(y,g={},s={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",y,g,s)}function U(y,g={},s={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",y,g,s)}function $(y,g,s={}){const I=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],L={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},M=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),Z=[],j=()=>g?parseFloat(g.value)||0:y.value,W=()=>{const P=j();Z.forEach(({button:z,value:r})=>{const T=r<=P?L.active:L.inactive;Object.assign(z.style,T)})};return I.forEach(({value:P,emoji:z,tooltip:r})=>{const b=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...s},z);b.title=r,b.type="button",b.addEventListener("click",T=>{T.preventDefault(),y.updateValue(P),g&&(g.value=P),W()}),b.addEventListener("mouseenter",()=>{P<=j()||(b.style.background=L.hover.background)}),b.addEventListener("mouseleave",()=>{W()}),Z.push({button:b,value:P}),M.appendChild(b)}),W(),g&&(g.addEventListener("input",W),g.addEventListener("change",W)),M}},8355:(S,m,n)=>{n.d(m,{Vk:()=>p,_7:()=>C,fO:()=>w});function w(e){if(!e)return[];const u=C(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(u)]}function C(e){return e?e.toLowerCase().split(",").map(v).filter(Boolean):[]}function v(e){const l=e.split("/").map(t=>t.trim()).filter(Boolean);if(l.length===0)return null;const u=l.map(E).filter(Boolean);return u.length>0?u:null}function E(e){const l=e.startsWith("!"),u=l?e.slice(1).trim():e;return u?{term:u,isNegative:l}:null}function a(e,l){o(e,u=>u.style.display!=="none",l)}function d(e,l){o(e,u=>u.style.opacity==="",l)}function o(e,l,u){const t=[...e].filter(l).length,x=e.length;p(u,t,x)}function p(e,l,u){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${l} \u0438\u0437 ${u}`}},4292:(S,m,n)=>{n.d(m,{C:()=>v});var w=n(8355),C=n(8506);function v(a,d){const o=(0,w.fO)(a.value);(0,C.hf)(o,d)}function E(a,d){const o=getIncludedSearchStrings(a.value);d.forEach(p=>highlightSubstrings(o,p))}},5213:(S,m,n)=>{n.d(m,{b:()=>C});var w=n(7273);function C(v,E,a=!1,d="customFiltersContainer"){let o=v.querySelector(`#${d}`);if(o){if(!a)return;o.replaceChildren()}else o=(0,w.S)(),o.id=d;E(o,v)}},8200:(S,m,n)=>{n.d(m,{s:()=>w});function w(C){const{target:v}=C,{type:E}=v;switch(E){case"text":return`"${v.value}"`;case"number":return v.value;case"select-one":return v.value;case"date":return`"${v.value}"`;case"checkbox":return v.checked;default:return console.log(`Unknown input type: ${E}`),null}}},157:(S,m,n)=>{n.d(m,{Fg:()=>w,vx:()=>v});const w=window.GM_setValue,C=window.GM.setValue,v=window.GM_getValue},1870:(S,m,n)=>{n.d(m,{j:()=>w});class w{constructor(v,E){this.value=v,this.onChange=E}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,m,n)=>{n.d(m,{V:()=>a});var w=n(1870),C=n(8200),v=n(3976),E=n(157);class a extends w.j{constructor(o,p=null,e=null){super((0,E.vx)(o,p),e),this.storageKey=o,this.defaultValue=p}static create(o,p=null,e=null){return new a(o,p,e)}static createWithCompositeKey(o,p,e=null,l=null){const u=`${o}-${p}`;return new a(u,e,l)}updateValueFromEvent=o=>{const p=(0,C.s)(o),e=(0,v.$)(p);this.updateValue(e)};updateValue(o,p=!0){this.value!==o&&((0,E.Fg)(this.storageKey,o),this.value=o,p&&this.onChangeIfDefined())}clearValue(o=!1){this.updateValue(null,o)}resetValue(o=!1){this.updateValue(this.defaultValue,o)}}},3976:(S,m,n)=>{n.d(m,{$:()=>w});function w(C){return C===""?null:JSON.parse(C)}},5406:(S,m,n)=>{n.d(m,{Fc:()=>w,k1:()=>t});function w(i,f="common",h=!1){const{pathname:N}=window.location;return C(N,i,f,h)}function C(i,f,h,N=!1){const F=i.split("/");f=f<0?F.length+f:f;const D=F[f]||h;return N&&console.log(`Pathname element: ${D}`),D}function v(i,f="common",h=!1){const N=w(i,"",h);return E(N,f,h)}function E(i,f,h){if(!i)return f;const N=i.split("-").at(-1);return h&&console.log(`Pathname element ending: ${N}`),N}function a(i,f,h="common",N=!1){const F=C(i,f,"",N);return E(F,h,N)}function d(i){return new URLSearchParams(window.location.search).get(i)}function o(i){return i.split("?")[0]}function p(i){return window.location.pathname.includes(i)}function e(i){return i.some(f=>p(f))}function l(...i){return window.location.pathname.split("/").some(h=>i.includes(h))}function u(i){try{const f=new URL(window.location.href);Object.entries(i).forEach(([h,N])=>{f.searchParams.set(h,N)}),window.location.href=f.toString()}catch(f){console.error("Failed to redirect:",f)}}function t(i,f=[]){const h=new AbortController;let N=!1;const F=B=>{const O=new URL(B),k={pathname:O.pathname};return f.forEach(U=>{k[U]=O.searchParams.get(U)}),k};let D=F(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(N)return;const B=F(window.navigation.currentEntry.url);if(Object.keys(D).some(k=>D[k]!==B[k])){D=B,N=!0;try{await i(B)}catch(k){console.error("URL observer error:",k)}finally{N=!1}}},{signal:h.signal}),()=>h.abort()}function x(i,f=[]){const h={pathname:window.location.pathname};f.forEach(O=>{h[O]=d(O)});let N=!1;async function F(){if(N)return;const O={pathname:window.location.pathname};if(f.forEach(k=>{O[k]=d(k)}),Object.keys(h).some(k=>h[k]!==O[k])){Object.assign(h,O),N=!0;try{await i()}catch(k){console.error("Error in URL observer callback:",k)}finally{N=!1}}}function D(){F().catch(O=>{console.error("Error in URL change handler:",O)})}let B=window.location.href;setInterval(()=>{window.location.href!==B&&(console.log("URL changed:",window.location.href),B=window.location.href,D())},200),window.addEventListener("popstate",D)}function c(i=[]){x(()=>window.location.reload(),i)}},4615:(S,m,n)=>{n.a(S,async(w,C)=>{try{let O=function(){["\u041E\u0446\u0435\u043D\u0438\u0442\u0435 \u0438 \u043E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u043E\u0442\u0437\u044B\u0432","\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u043C \u043E\u0442\u0437\u044B\u0432\u044B","\u0412\u0441\u0435 \u043E\u0442\u0437\u044B\u0432\u044B"].forEach(I=>(0,a.Fo)(F.reviewsContainer,":scope > div",I))},k=function(){if(!F.isFiltersInitialized){const{createGlobalFilter:s}=(0,l.z)($);F.reviewTextFilter=s("review-text-filter"),F.isFiltersInitialized=!0}},U=function(s,I){(0,u.ZM)(s,e.r.FILTERS_CONTAINER);const L=(0,o.E9)(F.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);F.reviewsInfo=(0,h.S)(e.r.INFO),s.append(L,F.reviewsInfo),I.parentNode.insertBefore(s,I)},$=function(){const s=(0,d.fI)(F.reviewSelector,F.reviewsContainer),I=(0,a.Bz)();s.forEach(L=>{const M=y(L);(0,a.GY)(M,I,L)}),(0,a.pB)(I),(0,f.Vk)(F.reviewsInfo,I.show.length,s.length)},y=function(s){N(s),(0,c.kZ)(s);const I=(0,d.Fi)(p.Z.REVIEW_TEXT_WRAP,s);if(!I)return!0;F.reviewTextFilter.value&&(0,x.C)(F.reviewTextFilter,I);const L=I.innerText;return(0,E.Ay)(L,F.reviewTextFilter)},g=function(){F.reviewsContainer=null,F.reviewSelector=null,F.isFiltersInitialized=!1,F.reviewTextFilter=null,F.reviewsInfo=null,(0,t.wP)(F.reviewsObserver)};var v=n(5213),E=n(3829),a=n(5539),d=n(573),o=n(7877),p=n(281),e=n(8697),l=n(4521),u=n(6754),t=n(4921),x=n(4292),c=n(8506),i=n(5406),f=n(8355),h=n(7273);const N=(0,a.L5)("span","read-more","\u0427\u0438\u0442\u0430\u0442\u044C \u0446\u0435\u043B\u0438\u043A\u043E\u043C");window.GM_addStyle(`
  @keyframes loading-pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 0.35; }
  }
`);const F={reviewsContainer:null,reviewSelector:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await D(),(0,i.k1)(async()=>{await D(!0)});async function D(s=!1){if(s&&g(),(0,i.Fc)(-1)!=="reviews")return;const I=await(0,t.xk)(document,p.Z.SIDE_PANEL);(0,a.vK)(I);try{await(0,t.XW)(document.body),await B(I),O()}finally{(0,a.sw)(I)}}async function B(s){F.reviewsContainer=await(0,t.xk)(s,p.Z.REVIEWS_CONTAINER);const I=await(0,t.xk)(F.reviewsContainer,p.Z.FIRST_REVIEW),L=I.querySelector("div").classList;L.length<1||(F.reviewSelector=`div:has(>div.${L[0]})`,k(),(0,v.b)(I,U,!0),$(),F.reviewsObserver=new MutationObserver((0,t.sg)($)),F.reviewsObserver.observe(F.reviewsContainer,{childList:!0}))}C()}catch(N){C(N)}},1)},281:(S,m,n)=>{n.d(m,{Z:()=>w});const w={SIDE_PANEL:'div[style^="position: relative"]:has(label[title="\u041F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435"])',REVIEWS_CONTAINER:'div:has(> div > div > ul > li > label[title="\u041F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435"])',FIRST_REVIEW:`div:has(${" > div".repeat(7)} > button)`,REVIEW_TEXT_WRAP:"div > div > div > a"}},8697:(S,m,n)=>{n.d(m,{r:()=>C});const C={FILTERS_CONTAINER:{position:"sticky",top:"48px",display:"flex",flexDirection:"column",gap:"4px",padding:"12px 18px 8px 16px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},Q={};function V(S){var m=Q[S];if(m!==void 0)return m.exports;var n=Q[S]={exports:{}};return Y[S](n,n.exports,V),n.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",w=v=>{v&&v.d<1&&(v.d=1,v.forEach(E=>E.r--),v.forEach(E=>E.r--?E.r++:E()))},C=v=>v.map(E=>{if(E!==null&&typeof E=="object"){if(E[S])return E;if(E.then){var a=[];a.d=0,E.then(p=>{d[m]=p,w(a)},p=>{d[n]=p,w(a)});var d={};return d[S]=p=>p(a),d}}var o={};return o[S]=p=>{},o[m]=E,o});V.a=(v,E,a)=>{var d;a&&((d=[]).d=-1);var o=new Set,p=v.exports,e,l,u,t=new Promise((x,c)=>{u=c,l=x});t[m]=p,t[S]=x=>(d&&x(d),o.forEach(x),t.catch(c=>{})),v.exports=t,E(x=>{e=C(x);var c,i=()=>e.map(h=>{if(h[n])throw h[n];return h[m]}),f=new Promise(h=>{c=()=>h(i),c.r=0;var N=F=>F!==d&&!o.has(F)&&(o.add(F),F&&!F.d&&(c.r++,F.push(c)));e.map(F=>F[S](N))});return c.r?f:i()},x=>(x?u(t[n]=x):l(p),w(d))),d&&d.d<0&&(d.d=0)}})(),V.d=(S,m)=>{for(var n in m)V.o(m,n)&&!V.o(S,n)&&Object.defineProperty(S,n,{enumerable:!0,get:m[n]})},V.o=(S,m)=>Object.prototype.hasOwnProperty.call(S,m);var K=V(4615)})();})();
