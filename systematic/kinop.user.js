// ==UserScript==
// @name         Kinopoisk navigator filter
// @description  Hide movies by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.kinopoisk.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76830129
// @icon         https://www.google.com/s2/favicons?sz=64&domain=kinopoisk.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/kinop.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var ie={9928:(_,C,d)=>{d.d(C,{S:()=>f,Sw:()=>y,d:()=>v,kU:()=>b,o5:()=>F});var O=d(4921),L=d(6754);function b(o,s,a){const p=E(o,"text",s);return p.value=a,p}function F(o,s,a,p,k,D){const V=E(o,"number",s);return V.value=a,V.step=p,V.min=k,V.max=D,V}function g(o,s,a){const p=E(o,"date",s);return p.value=a,p}function f(o,s,a){const p=E(o,"checkbox",s);return p.checked=a,p}function E(o={},s=null,a=null){const p=u("input",o);return s&&(p.type=s),a&&(p.addEventListener("keyup",(0,O.sg)(a,200)),p.addEventListener("change",(0,O.sg)(a,100))),p}function w(o={},s=null){return u("span",o,s)}function v(o={},s=null,a=null){const p=u("a",o,s);return a&&(p.href=a),p}function S(o,s=null,a={}){a.cursor||="pointer";const p=v(a,s);return o&&p.addEventListener("click",o),p}function I(o,s,a=null,p={},k={}){p.display||="inline-flex",p.alignItems||="center",p.gap||="0.25em";const D=S(o,a,p);return D.prepend(r(s,k)),D}function x(o={},s=null,a=null){const p=u("button",o,s);return a&&p.addEventListener("click",a),p}function y(o={},s=null){return u("div",o,s)}function i(o={}){return u("i",o)}function r(o,s={}){s.width||="1em",s.height||="1em",s.paddingBottom||="1px";const a=i(s);return a.setAttribute("data-lucide",o),a}function u(o,s,a=null){if(typeof s!="object"||s===null)throw new TypeError("styles should be an object");const p=document.createElement(o);return(0,L.ZM)(p,s),a&&(p.innerHTML=a),p}},573:(_,C,d)=>{d.d(C,{Fi:()=>b,YA:()=>w,fI:()=>F,s$:()=>g});var O=d(4214);function L(r,u=document){return!!u.querySelector(r)}function b(r,u=document,o=!1){const s=u.querySelector(r);return o&&!s&&console.log(`No element found for selector: ${r}`),s}function F(r,u=document,o=!1){const s=u.querySelectorAll(r);return o&&!s.length&&console.log(`No elements found for selector: ${r}`),s}function g(r,u=1){let o=r;for(let s=0;s<u;s++){if(!o.parentElement)return null;o=o.parentElement}return o}function f(r,u,o){return[...r.querySelectorAll(u)].find(s=>s.textContent.trim().includes(o))}function E(r,u,o=!1,s=!1,a=null){const p=b(u,r);return w(p,o,s,a)}function w(r,u=!1,o=!1,s=null){if(!r)return s===null?(console.log("No element found"),null):s;const a=r.innerText;return I(a,u,o)}function v(r,u,o=!1){const s=r[u];return w(s,o)}function S(r,u=!1,o=!1){const s=r.textContent;return I(s,u,o)}function I(r,u,o){u&&(r=(0,O.zr)(r)),o&&(r=r.replace(",","."));const s=Number(r);return Number.isNaN(s)?(console.log(`Invalid number: ${r}`),0):s}function x(r){return[...r.childNodes].find(u=>u.nodeType===Node.TEXT_NODE)}function y(r){const u=o=>o.nodeType===Node.TEXT_NODE&&o.textContent.trim()!==""?[o]:[...o.childNodes].flatMap(u);return u(r)}function i(r){return normalizeSpacing(r.textContent)}},5539:(_,C,d)=>{d.d(C,{Bt:()=>b,UC:()=>S,UE:()=>g,WH:()=>L,kl:()=>w});var O=d(573);function L(l,h){l.parentNode.insertBefore(h,l.nextSibling)}function b(l){l.style.display="none"}function F(l,h=1){const N=document.querySelector(l);N&&g(N,h)}function g(l,h=1){const N=(0,O.s$)(l,h);N&&b(N)}function f(l){y(l),b(l)}function E(l){l.intersectionObserver||runOnceOnIntersection(l,()=>b(l))}function w(l){l.style.display=""}function v(l){const h=x(l);l.style.display=h}function S(l,h){h?b(l):w(l)}function I(l,h){h?E(l):(clearIntersectionObserver(l),w(l))}function x(l){return y(l),l.defaultDisplay}function y(l){if(l.defaultDisplay)return;const{display:h}=getComputedStyle(l);l.defaultDisplay=h}function i(){return{show:[],hide:[]}}function r(l,h,N){l?h.hide.push(N):h.show.push(N)}function u(l){l.show.forEach(w),l.hide.forEach(b)}function o(l,h,N=.3){h?a(l,N):s(l)}function s(l){l.style.opacity=""}function a(l,h=.3){l.style.opacity=h}function p(l){l.style.order=""}function k(l,h){l.style.order=h}function D(l,h){l.style.background=h}function V(l,h){const N=getFirstElement(h);N&&H(l,N)}function H(l,h){const N=createLink();N.href=l,h.parentNode.append(N),N.append(h)}function ue(l,h){const N=getFirstElement(h);N&&te(l,N)}function te(l,h,N={}){const U=createLink(N);U.href=l,U.append(...h.childNodes),h.append(U)}function le(){const l=getURLQueryParam("scrollTo");if(!l)return;const h=document.getElementById(l);h?h.scrollIntoView():console.log(`Element with ID "${l}" was not found.`)}function q(l,h,N=null){const U=`${h}-click-passed`,Q=N?B=>findElementByText(B,l,N):B=>getFirstElement(l,B);return function(B){if(B.hasAttribute(U))return!1;const J=Q(B);return J&&J.click(),B.setAttribute(U,""),!0}}function se(l,h,N="text/plain"){const U=new Blob([l],{type:N}),Q=URL.createObjectURL(U),B=document.createElement("a");B.href=Q,B.download=h,document.body.appendChild(B),B.click(),document.body.removeChild(B),requestAnimationFrame(()=>URL.revokeObjectURL(Q))}},6754:(_,C,d)=>{d.d(C,{ZM:()=>O});function O(g,f){Object.assign(g.style,f)}function L(g,f="custom-global-style"){let E=document.getElementById(f);E||(E=document.createElement("style"),E.id=f,E.type="text/css",document.head.appendChild(E)),E.textContent=g}function b(g){return Object.entries(g).map(([f,E])=>`${f.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${E};`).join(" ")}function F(g){return g?g.split(";").filter(f=>f.trim()!=="").reduce((f,E)=>{const[w,v]=E.split(":").map(I=>I.trim()),S=w.replace(/-([a-z])/g,(I,x)=>x.toUpperCase());return f[S]=v,f},{}):{}}},4921:(_,C,d)=>{d.d(C,{XW:()=>b,sg:()=>F,wP:()=>w});function O(v,S,I=null){const x=v.querySelector(S);return x?Promise.resolve(x):new Promise(y=>{const i=new MutationObserver(u);i.observe(v,{childList:!0,subtree:!0});let r;I&&(r=setTimeout(()=>{i.disconnect(),console.log(`No element found for selector: ${S}`),y(null)},I));function u(){const o=v.querySelector(S);o&&(r&&clearTimeout(r),i.disconnect(),y(o))}})}function L(v,S){return v.querySelector(S)?new Promise(x=>{const y=new MutationObserver(i);y.observe(v,{childList:!0,subtree:!0});function i(){v.querySelector(S)||(y.disconnect(),x())}}):Promise.resolve()}function b(v,S=400){return new Promise(I=>{let x;const y=new MutationObserver(()=>{clearTimeout(x),i()});function i(){x=setTimeout(()=>{y.disconnect(),I()},S)}i(),y.observe(v,{childList:!0,subtree:!0})})}function F(v,S=250){let I;return(...x)=>{clearTimeout(I),I=setTimeout(()=>v(...x),S)}}async function g(v){document.visibilityState==="visible"?await v():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await v()},{once:!0})}function f(v,S){const I=new IntersectionObserver(x=>{x.forEach(y=>{y.isIntersecting&&(S(),E(v))})});v.intersectionObserver=I,I.observe(v)}function E(v){v.intersectionObserver&&(v.intersectionObserver.disconnect(),v.intersectionObserver=null)}function w(v){v&&(v.disconnect(),v=null)}},4214:(_,C,d)=>{d.d(C,{zr:()=>L});function O(f){return f.replace(/\D/g,"")}function L(f){return f.replace(/[^\d.,-]/g,"")}function b(f){return f.replace(/\s/g,"")}function F(f){return f.charAt(0).toUpperCase()+f.slice(1)}function g(f){return f.replace(/\s+/g," ").trim()}},5406:(_,C,d)=>{d.d(C,{k1:()=>x,z2:()=>S});function O(i,r="common",u=!1){const{pathname:o}=window.location;return L(o,i,r,u)}function L(i,r,u,o=!1){const s=i.split("/");r=r<0?s.length+r:r;const a=s[r]||u;return o&&console.log(`Pathname element: ${a}`),a}function b(i,r="common",u=!1){const o=O(i,"",u);return F(o,r,u)}function F(i,r,u){if(!i)return r;const o=i.split("-").at(-1);return u&&console.log(`Pathname element ending: ${o}`),o}function g(i,r,u="common",o=!1){const s=L(i,r,"",o);return F(s,u,o)}function f(i){return new URLSearchParams(window.location.search).get(i)}function E(i){return i.split("?")[0]}function w(i){return window.location.pathname.includes(i)}function v(i){return i.some(r=>w(r))}function S(...i){return window.location.pathname.split("/").some(u=>i.includes(u))}function I(i){try{const r=new URL(window.location.href);Object.entries(i).forEach(([u,o])=>{r.searchParams.set(u,o)}),window.location.href=r.toString()}catch(r){console.error("Failed to redirect:",r)}}function x(i,r=[]){const u={pathname:window.location.pathname};r.forEach(k=>{u[k]=f(k)});let o=!1;async function s(){if(o)return;const k={pathname:window.location.pathname};if(r.forEach(D=>{k[D]=f(D)}),Object.keys(u).some(D=>u[D]!==k[D])){Object.assign(u,k),o=!0;try{await i()}catch(D){console.error("Error in URL observer callback:",D)}finally{o=!1}}}function a(){s().catch(k=>{console.error("Error in URL change handler:",k)})}let p=window.location.href;setInterval(()=>{window.location.href!==p&&(p=window.location.href,a())},200),window.addEventListener("popstate",a)}function y(i=[]){x(()=>window.location.reload(),i)}},6275:(_,C,d)=>{d.a(_,async(O,L)=>{try{var b=d(5406),F=d(1333),g=d(8713);await f(),(0,b.k1)(async()=>{await f(!0)});async function f(E=!1){(0,b.z2)("navigator")?(0,F.R)(E):(0,b.z2)("film","series")&&await(0,g.g)(E)}L()}catch(f){L(f)}},1)},8713:(_,C,d)=>{d.d(C,{g:()=>f});const O={CONTAINER:{margin:"12px 0 -5px",display:"flex",gap:"8px",alignItems:"center"},BUTTON:{display:"inline-flex",alignItems:"center",padding:"6px 12px",background:"#1a1a1a",border:"1px solid #404040",borderRadius:"6px",color:"#e0e0e0",textDecoration:"none",fontSize:"13px",fontWeight:"500",transition:"all 0.2s ease",cursor:"pointer",transform:"scale(1)"},BUTTON_HOVER:{background:"#2a2a2a",borderColor:"#606060",transform:"scale(1.05)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}};var L=d(6754),b=d(4921),F=d(9928),g=d(5539);async function f(i){await(0,b.XW)(document.body),i&&void 0,E(),I()}function E(){window.GM_addStyle(`
        [class*="styles_socialArgument__"],
        div[class*="styles_header__"] div[class*="styles_topText__"] p {
            display: none !important;
        }
    `),w("film-media-posts"),w("today-in-cinema-block"),v(),document.querySelector('div[class^="styles_videoWrapper__"]')?.remove(),document.querySelector("div.ReactModalPortal")?.remove(),S()}function w(i){const r=document.querySelector(`span#${i}`);if(!r)return;(0,g.Bt)(r);const u=r.nextElementSibling;u?.tagName==="DIV"&&(0,g.Bt)(u)}function v(){const i=document.querySelector('p[class^="style_offerName___"]');i&&(0,g.UE)(i,4)}function S(){const i=document.querySelector('div[class^="styles_watchOnlineBlock__"]');if(!i)return;const r=i.querySelector('button[class*="styles_watchOnlineButton__"]');r&&r.innerText.trim().toLowerCase().includes("\u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C")&&i.remove()}function I(){const i=document.querySelector('h1[class^="styles_title__"] > span');if(!i)return;const r=i.textContent.trim(),u=document.querySelector('div[class^="styles_header__"]');if(!u||document.querySelector(".custom-torrent-buttons"))return;const o=(0,F.Sw)(O.CONTAINER);o.className="custom-torrent-buttons";const a=`https://kinozal.tv/browse.php?s=${encodeURIComponent(r).replace(/%20/g,"+")}&g=0&c=0&v=0&d=0&w=0&t=1&f=0`,k=`https://rutracker.org/forum/tracker.php?nm=${encodeURIComponent(r)}`,D=x("\u041A\u0438\u043D\u043E\u0437\u0430\u043B",a),V=x("\u0420\u0443\u0442\u0440\u0435\u043A\u0435\u0440",k);o.appendChild(D),o.appendChild(V);const H=u.querySelector('div[class^="styles_title__"]');H&&(0,g.WH)(H,o)}function x(i,r){const u=(0,F.d)(O.BUTTON,i,r);return u.target="_blank",u.addEventListener("mouseenter",()=>{(0,L.ZM)(u,O.BUTTON_HOVER)}),u.addEventListener("mouseleave",()=>{(0,L.ZM)(u,O.BUTTON)}),u}function y(){}},1333:(_,C,d)=>{d.d(C,{R:()=>ye});function O(t){return t.value.toLowerCase().split(",").map(e=>e.trim()).filter(e=>e!=="")}function L(t){return O(t).filter(e=>!e.startsWith("!"))}function b(t,e){g(t,n=>n.style.display!=="none",e)}function F(t,e){g(t,n=>n.style.opacity==="",e)}function g(t,e,n){const c=[...t].filter(e).length;n.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${c} \u0438\u0437 ${t.length}`}function f(t,e){return!E(t,e)}function E(t,e){if(!e.value)return!0;const n=t.toLowerCase(),c=O(e),m=[],R=[];return c.forEach(A=>{if(A.startsWith("!")){const W=A.substring(1);W&&R.push(W)}else m.push(A)}),m.every(A=>n.includes(A))&&R.every(A=>!n.includes(A))}function w(t,e){return e.value!=null&&t<e.value}function v(t,e){return e.value!=null&&t>e.value}function S(t,e){return e.value==null?!1:t<parseDateFromISO(e.value)}function I(t,e){return e.value==null?!1:t>parseDateFromISO(e.value)}function x(t,e){return e.value&&t!==e.value}var y=d(5539),i=d(573),r=d(9928);function u(t,e={},n=null){const c=(0,r.Sw)(e,n);return c.append(t),c}function o(t,e=null,n={},c={}){const m=createActionLink(t,e,c);return u(m,n)}function s(t,e=null,n=null,c={},m={}){const R=createActionLinkWithIcon(t,n,e,m);return u(R,c)}function a(t,e,n={},c={}){const m=(0,r.kU)(c,e.updateValueFromEvent,e.value);return u(m,n,t)}function p(t,e,n,c,m,R={},A={}){const W=(0,r.o5)(A,e.updateValueFromEvent,e.value,n,c,m);return u(W,R,t)}function k(t,e,n={},c={}){const m=createDateInput(c,e.updateValueFromEvent,e.value);return createControl(m,n,t)}function D(t,e,n={},c={}){const m=(0,r.S)(c,e.updateValueFromEvent,e.value);return u(m,n,t)}function V(t,e={},n={}){return createTextFilterControl("\u041F\u043E\u0438\u0441\u043A: ",t,e,n)}function H(t,e={},n={},c=.1,m=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,c,m,5,e,n)}function ue(t,e={},n={},c=.1,m=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,c,m,5,e,n)}function te(t,e={},n={}){return q("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function le(t,e={},n={}){return q("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function q(t,e,n={},c={}){return createNumberFilterControl(t,e,"1","1","999999",n,c)}function se(t,e={},n={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",t,e,n)}function l(t,e={},n={}){return h("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",t,e,n)}function h(t,e,n={},c={}){return createNumberFilterControl(t,e,"5","0","100",n,c)}function N(t,e={},n={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",t,"5","0","100",e,n)}function U(t,e,n={},c={},m="250"){return createNumberFilterControl(t,e,m,"0","1000000",n,c)}function Q(t,e={},n={},c="25"){return U("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",t,e,n,c)}function B(t,e={},n={},c="25"){return U("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",t,e,n,c)}function J(t,e={},n={}){return ce("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",t,e,n)}function ce(t,e,n={},c={}){return createNumberFilterControl(t,e,"1","0","99999",n,c)}function De(t,e={},n={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",t,"1","2","8",e,n)}function ke(t,e={},n={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",t,1,1,10,e,n)}function Ae(t,e={},n={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",t,e,n)}function Pe(t,e={},n={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",t,e,n)}function Be(t,e={},n={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",t,e,n)}function Ue(t,e={},n={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",t,e,n)}function ae(t,e={},n={}){return D("\u0412\u043A\u043B: ",t,e,n)}function Me(t,e,n={}){const c=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],m={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},R=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),A=[],W=()=>e?parseFloat(e.value)||0:t.value,$=()=>{const z=W();A.forEach(({button:Y,value:Z})=>{const G=Z<=z?m.active:m.inactive;Object.assign(Y.style,G)})};return c.forEach(({value:z,emoji:Y,tooltip:Z})=>{const M=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...n},Y);M.title=Z,M.type="button",M.addEventListener("click",G=>{G.preventDefault(),t.updateValue(z),e&&(e.value=z),$()}),M.addEventListener("mouseenter",()=>{z<=W()||(M.style.background=m.hover.background)}),M.addEventListener("mouseleave",()=>{$()}),A.push({button:M,value:z}),R.appendChild(M)}),$(),e&&(e.addEventListener("input",$),e.addEventListener("change",$)),R}const j={MOVIES_LIST:"#results",MOVIE_CARD:"#itemList > .item",MY_VOTE_WRAP:".myVote",GENRE_WRAP:".gray_text",KP_REVIEWS_WRAP:".numVote > span > span",IMDB_REVIEWS_WRAP:".imdb > span",NAME_WRAP:".name",LENGTH_WRAP:"nobr"},ne={INPUT:{marginLeft:"6px",padding:"4px 8px",fontSize:"12px"}},P={FILTERS_CONTAINER:{display:"flex",gridGap:"12px",marginTop:"10px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...ne.INPUT,width:"120px"},NUMBER_INPUT:{...ne.INPUT,width:"65px"},CHECKBOX_INPUT:{marginLeft:"6px",width:"17px",height:"17px"}};class fe{constructor(e,n){this.value=e,this.onChange=n}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}function de(t){const{target:e}=t,{type:n}=e;switch(n){case"text":return`"${e.value}"`;case"number":return e.value;case"date":return`"${e.value}"`;case"checkbox":return e.checked;default:return console.log(`Unknown input type: ${n}`),null}}function me(t){return t===""?null:JSON.parse(t)}const pe=window.GM_setValue,We=window.GM.setValue,he=window.GM_getValue;class X extends fe{constructor(e,n=null,c=null){super(he(e,n),c),this.storageKey=e,this.defaultValue=n}static create(e,n=null,c=null){return new X(e,n,c)}static createWithCompositeKey(e,n,c=null,m=null){const R=`${e}-${n}`;return new X(R,c,m)}updateValueFromEvent=e=>{const n=de(e),c=me(n);this.updateValue(c)};updateValue(e,n=!0){this.value!==e&&(pe(this.storageKey,e),this.value=e,n&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}function ve(t,e=null){return{createGlobalFilter(n,c=null,m=t){return X.create(n,c,m)},createSectionFilter(n,c=null,m=t){if(!e)throw new Error("sectionId must be provided to use createSectionFilter.");return X.createWithCompositeKey(e,n,c,m)}}}function Ee(t,e,n=!1,c="customFiltersContainer"){let m=(0,i.Fi)(`#${c}`,t);if(m)if(n)m.remove();else return;m=(0,r.Sw)(),m.id=c,e(m,t)}function be(t={}){return(0,r.Sw)(t,"|")}function ge(t={},e=75,n="customFiltersContainer"){const c=document.getElementById(n);if(!c)return console.log(`Element with id="${n}" not found.`),null;const m=createButton(t,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return m.addEventListener("mouseenter",()=>{m.style.filter="brightness(0.9)"}),m.addEventListener("mouseleave",()=>{m.style.filter="brightness(1)"}),m.addEventListener("click",()=>{const R=c.getBoundingClientRect();window.scrollTo({top:R.top+window.scrollY-e})}),new IntersectionObserver(([R])=>{m.style.display=R.isIntersecting?"none":"flex"},{threshold:.5}).observe(c),m}function Ve(t,e={}){const n=ge(e);n&&t.appendChild(n)}var Fe=d(6754),re=d(4921);const T={moviesObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,genreFilter:null,maxLengthFilter:null,minKpReviewsFilter:null,minImdbReviewsFilter:null,isFinishedFilter:null,filterEnabled:null}};function ye(t){t&&Ie(),Ce(),we()}function Ce(){if(!T.isFiltersInitialized){const{createGlobalFilter:t}=ve(oe);T.filters.nameFilter=t("navigator-name-filter"),T.filters.genreFilter=t("navigator-genre-filter"),T.filters.maxLengthFilter=t("navigator-max-length-filter"),T.filters.minKpReviewsFilter=t("navigator-min-kp-reviews-filter"),T.filters.minImdbReviewsFilter=t("navigator-min-imdb-reviews-filter"),T.filters.isFinishedFilter=t("navigator-is-finished-filter",!0),T.filters.filterEnabled=t("navigator-filter-enabled",!0),T.isFiltersInitialized=!0}}function we(){const t=(0,i.Fi)(j.MOVIES_LIST);t&&(T.moviesObserver&&(0,re.wP)(T.moviesObserver),T.moviesObserver=new MutationObserver(()=>xe(t)),T.moviesObserver.observe(t,{childList:!0,subtree:!0}))}function xe(t){const e=(0,i.Fi)("tr > td",t);Ee(e,Te),oe()}function Te(t,e){(0,Fe.ZM)(t,P.FILTERS_CONTAINER);const n=a("\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435:",T.filters.nameFilter,P.CONTROL,P.TEXT_INPUT),c=a("\u0416\u0430\u043D\u0440:",T.filters.genreFilter,P.CONTROL,P.TEXT_INPUT),m=p("\u041C\u0430\u043A\u0441. \u043C\u0438\u043D\u0443\u0442:",T.filters.maxLengthFilter,"10","0","500",P.CONTROL,P.NUMBER_INPUT),R=p("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u041A\u041F:",T.filters.minKpReviewsFilter,"100","0","1000000",P.CONTROL,P.NUMBER_INPUT),A=p("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432 IMDB:",T.filters.minImdbReviewsFilter,"100","0","1000000",P.CONTROL,P.NUMBER_INPUT),W=D("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D: ",T.filters.isFinishedFilter,P.CONTROL,P.CHECKBOX_INPUT),$=be(P.CONTROL),z=ae(T.filters.filterEnabled,P.CONTROL,P.CHECKBOX_INPUT);t.append(n,c,m,R,A,W,$,z),e.append(t)}function oe(){(0,i.fI)(j.MOVIE_CARD).forEach(Ne)}function Ne(t){if(!T.filters.filterEnabled.value){(0,y.kl)(t);return}const e=(0,i.Fi)(j.NAME_WRAP,t),n=(0,i.Fi)(j.MY_VOTE_WRAP,t),c=(0,i.Fi)(j.GENRE_WRAP,t),m=(0,i.Fi)(j.LENGTH_WRAP,e),R=(0,i.Fi)(j.KP_REVIEWS_WRAP,t),A=(0,i.Fi)(j.IMDB_REVIEWS_WRAP,t);if([e,n,c,m,R,A].some(Le=>!Le)){(0,y.Bt)(t);return}if(n.innerText){(0,y.Bt)(t);return}const $=(0,i.Fi)("a",e)?.innerText??"",Y=!((0,i.Fi)("span",e)?.innerText??"").includes("..."),Z=Se(c),M=(0,i.YA)(m,!0),G=(0,i.YA)(R,!0),_e=(0,i.YA)(A,!0),Oe=f($,T.filters.nameFilter)||f(Z,T.filters.genreFilter)||v(M,T.filters.maxLengthFilter)||w(G,T.filters.minKpReviewsFilter)||w(_e,T.filters.minImdbReviewsFilter)||x(Y,T.filters.isFinishedFilter);(0,y.UC)(t,Oe)}function Se(t){return Array.from(t.childNodes).filter(c=>c.nodeType===Node.TEXT_NODE).pop()?.textContent.trim()||""}function Ie(){T.isFiltersInitialized=!1,T.filters={nameFilter:null,genreFilter:null,maxLengthFilter:null,minKpReviewsFilter:null,minImdbReviewsFilter:null,isFinishedFilter:null,filterEnabled:null},(0,re.wP)(T.moviesObserver)}}},ee={};function K(_){var C=ee[_];if(C!==void 0)return C.exports;var d=ee[_]={exports:{}};return ie[_](d,d.exports,K),d.exports}(()=>{var _=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",C=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",d=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",O=b=>{b&&b.d<1&&(b.d=1,b.forEach(F=>F.r--),b.forEach(F=>F.r--?F.r++:F()))},L=b=>b.map(F=>{if(F!==null&&typeof F=="object"){if(F[_])return F;if(F.then){var g=[];g.d=0,F.then(w=>{f[C]=w,O(g)},w=>{f[d]=w,O(g)});var f={};return f[_]=w=>w(g),f}}var E={};return E[_]=w=>{},E[C]=F,E});K.a=(b,F,g)=>{var f;g&&((f=[]).d=-1);var E=new Set,w=b.exports,v,S,I,x=new Promise((y,i)=>{I=i,S=y});x[C]=w,x[_]=y=>(f&&y(f),E.forEach(y),x.catch(i=>{})),b.exports=x,F(y=>{v=L(y);var i,r=()=>v.map(o=>{if(o[d])throw o[d];return o[C]}),u=new Promise(o=>{i=()=>o(r),i.r=0;var s=a=>a!==f&&!E.has(a)&&(E.add(a),a&&!a.d&&(i.r++,a.push(i)));v.map(a=>a[_](s))});return i.r?u:r()},y=>(y?I(x[d]=y):S(w),O(f))),f&&f.d<0&&(f.d=0)}})(),K.d=(_,C)=>{for(var d in C)K.o(C,d)&&!K.o(_,d)&&Object.defineProperty(_,d,{enumerable:!0,get:C[d]})},K.o=(_,C)=>Object.prototype.hasOwnProperty.call(_,C);var Re=K(6275)})();})();
