// ==UserScript==
// @name         Kinopoisk navigator filter
// @description  Hide movies by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.kinopoisk.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76816607
// @icon         https://www.google.com/s2/favicons?sz=64&domain=kinopoisk.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/kinop.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var ue={9928:(I,T,d)=>{d.d(T,{S:()=>f,Sw:()=>C,d:()=>p,kU:()=>b,o5:()=>w});var L=d(4921),O=d(6754);function b(r,l,a){const E=F(r,"text",l);return E.value=a,E}function w(r,l,a,E,D,A){const W=F(r,"number",l);return W.value=a,W.step=E,W.min=D,W.max=A,W}function y(r,l,a){const E=F(r,"date",l);return E.value=a,E}function f(r,l,a){const E=F(r,"checkbox",l);return E.checked=a,E}function F(r={},l=null,a=null){const E=i("input",r);return l&&(E.type=l),a&&(E.addEventListener("keyup",(0,L.sg)(a,200)),E.addEventListener("change",(0,L.sg)(a,100))),E}function S(r={},l=null){return i("span",r,l)}function p(r={},l=null,a=null){const E=i("a",r,l);return a&&(E.href=a),E}function x(r,l=null,a={}){a.cursor||="pointer";const E=p(a,l);return r&&E.addEventListener("click",r),E}function v(r,l,a=null,E={},D={}){E.display||="inline-flex",E.alignItems||="center",E.gap||="0.25em";const A=x(r,a,E);return A.prepend(o(l,D)),A}function g(r={},l=null,a=null){const E=i("button",r,l);return a&&E.addEventListener("click",a),E}function C(r={},l=null){return i("div",r,l)}function s(r={}){return i("i",r)}function o(r,l={}){l.width||="1em",l.height||="1em",l.paddingBottom||="1px";const a=s(l);return a.setAttribute("data-lucide",r),a}function i(r,l,a=null){if(typeof l!="object"||l===null)throw new TypeError("styles should be an object");const E=document.createElement(r);return(0,O.ZM)(E,l),a&&(E.innerHTML=a),E}},573:(I,T,d)=>{d.d(T,{Fi:()=>b,YA:()=>S,fI:()=>w,s$:()=>y});var L=d(4214);function O(o,i=document){return!!i.querySelector(o)}function b(o,i=document,r=!1){const l=i.querySelector(o);return r&&!l&&console.log(`No element found for selector: ${o}`),l}function w(o,i=document,r=!1){const l=i.querySelectorAll(o);return r&&!l.length&&console.log(`No elements found for selector: ${o}`),l}function y(o,i=1){let r=o;for(let l=0;l<i;l++){if(!r.parentElement)return null;r=r.parentElement}return r}function f(o,i,r){return[...o.querySelectorAll(i)].find(l=>l.textContent.trim().includes(r))}function F(o,i,r=!1,l=!1,a=null){const E=b(i,o);return S(E,r,l,a)}function S(o,i=!1,r=!1,l=null){if(!o)return l===null?(console.log("No element found"),null):l;const a=o.innerText;return v(a,i,r)}function p(o,i,r=!1){const l=o[i];return S(l,r)}function x(o,i=!1,r=!1){const l=o.textContent;return v(l,i,r)}function v(o,i,r){i&&(o=(0,L.zr)(o)),r&&(o=o.replace(",","."));const l=Number(o);return Number.isNaN(l)?(console.log(`Invalid number: ${o}`),0):l}function g(o){return[...o.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function C(o){const i=r=>r.nodeType===Node.TEXT_NODE&&r.textContent.trim()!==""?[r]:[...r.childNodes].flatMap(i);return i(o)}function s(o){return normalizeSpacing(o.textContent)}},5539:(I,T,d)=>{d.d(T,{Bt:()=>b,UC:()=>x,UE:()=>y,WH:()=>O,kl:()=>S});var L=d(573);function O(u,h){u.parentNode.insertBefore(h,u.nextSibling)}function b(u){u.style.display="none"}function w(u,h=1){const _=document.querySelector(u);_&&y(_,h)}function y(u,h=1){const _=(0,L.s$)(u,h);_&&b(_)}function f(u){C(u),b(u)}function F(u){u.intersectionObserver||runOnceOnIntersection(u,()=>b(u))}function S(u){u.style.display=""}function p(u){const h=g(u);u.style.display=h}function x(u,h){h?b(u):S(u)}function v(u,h){h?F(u):(clearIntersectionObserver(u),S(u))}function g(u){return C(u),u.defaultDisplay}function C(u){if(u.defaultDisplay)return;const{display:h}=getComputedStyle(u);u.defaultDisplay=h}function s(){return{show:[],hide:[]}}function o(u,h,_){u?h.hide.push(_):h.show.push(_)}function i(u){u.show.forEach(S),u.hide.forEach(b)}function r(u,h,_=.3){h?a(u,_):l(u)}function l(u){u.style.opacity=""}function a(u,h=.3){u.style.opacity=h}function E(u){u.style.order=""}function D(u,h){u.style.order=h}function A(u,h){u.style.background=h}function W(u,h){const _=getFirstElement(h);_&&Q(u,_)}function Q(u,h){const _=createLink();_.href=u,h.parentNode.append(_),_.append(h)}function q(u,h){const _=getFirstElement(h);_&&te(u,_)}function te(u,h,_={}){const V=createLink(_);V.href=u,V.append(...h.childNodes),h.append(V)}function le(){const u=getURLQueryParam("scrollTo");if(!u)return;const h=document.getElementById(u);h?h.scrollIntoView():console.log(`Element with ID "${u}" was not found.`)}function ne(u,h,_=null){const V=`${h}-click-passed`,G=_?B=>findElementByText(B,u,_):B=>getFirstElement(u,B);return function(B){if(B.hasAttribute(V))return!1;const J=G(B);return J&&J.click(),B.setAttribute(V,""),!0}}function se(u,h,_="text/plain"){const V=new Blob([u],{type:_}),G=URL.createObjectURL(V),B=document.createElement("a");B.href=G,B.download=h,document.body.appendChild(B),B.click(),document.body.removeChild(B),requestAnimationFrame(()=>URL.revokeObjectURL(G))}},6754:(I,T,d)=>{d.d(T,{ZM:()=>L});function L(y,f){Object.assign(y.style,f)}function O(y,f="custom-global-style"){let F=document.getElementById(f);F||(F=document.createElement("style"),F.id=f,F.type="text/css",document.head.appendChild(F)),F.textContent=y}function b(y){return Object.entries(y).map(([f,F])=>`${f.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${F};`).join(" ")}function w(y){return y?y.split(";").filter(f=>f.trim()!=="").reduce((f,F)=>{const[S,p]=F.split(":").map(v=>v.trim()),x=S.replace(/-([a-z])/g,(v,g)=>g.toUpperCase());return f[x]=p,f},{}):{}}},4921:(I,T,d)=>{d.d(T,{XW:()=>b,sg:()=>w,wP:()=>S});function L(p,x,v=null){const g=p.querySelector(x);return g?Promise.resolve(g):new Promise(C=>{const s=new MutationObserver(i);s.observe(p,{childList:!0,subtree:!0});let o;v&&(o=setTimeout(()=>{s.disconnect(),console.log(`No element found for selector: ${x}`),C(null)},v));function i(){const r=p.querySelector(x);r&&(o&&clearTimeout(o),s.disconnect(),C(r))}})}function O(p,x){return p.querySelector(x)?new Promise(g=>{const C=new MutationObserver(s);C.observe(p,{childList:!0,subtree:!0});function s(){p.querySelector(x)||(C.disconnect(),g())}}):Promise.resolve()}function b(p,x=400){return new Promise(v=>{let g;const C=new MutationObserver(()=>{clearTimeout(g),s()});function s(){g=setTimeout(()=>{C.disconnect(),v()},x)}s(),C.observe(p,{childList:!0,subtree:!0})})}function w(p,x=250){let v;return(...g)=>{clearTimeout(v),v=setTimeout(()=>p(...g),x)}}async function y(p){document.visibilityState==="visible"?await p():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await p()},{once:!0})}function f(p,x){const v=new IntersectionObserver(g=>{g.forEach(C=>{C.isIntersecting&&(x(),F(p))})});p.intersectionObserver=v,v.observe(p)}function F(p){p.intersectionObserver&&(p.intersectionObserver.disconnect(),p.intersectionObserver=null)}function S(p){p&&(p.disconnect(),p=null)}},4214:(I,T,d)=>{d.d(T,{zr:()=>O});function L(f){return f.replace(/\D/g,"")}function O(f){return f.replace(/[^\d.,-]/g,"")}function b(f){return f.replace(/\s/g,"")}function w(f){return f.charAt(0).toUpperCase()+f.slice(1)}function y(f){return f.replace(/\s+/g," ").trim()}},5406:(I,T,d)=>{d.d(T,{k1:()=>g,z2:()=>x});function L(s,o="common",i=!1){const{pathname:r}=window.location;return O(r,s,o,i)}function O(s,o,i,r=!1){const l=s.split("/");o=o<0?l.length+o:o;const a=l[o]||i;return r&&console.log(`Pathname element: ${a}`),a}function b(s,o="common",i=!1){const r=L(s,"",i);return w(r,o,i)}function w(s,o,i){if(!s)return o;const r=s.split("-").at(-1);return i&&console.log(`Pathname element ending: ${r}`),r}function y(s,o,i="common",r=!1){const l=O(s,o,"",r);return w(l,i,r)}function f(s){return new URLSearchParams(window.location.search).get(s)}function F(s){return s.split("?")[0]}function S(s){return window.location.pathname.includes(s)}function p(s){return s.some(o=>S(o))}function x(...s){return window.location.pathname.split("/").some(i=>s.includes(i))}function v(s){try{const o=new URL(window.location.href);Object.entries(s).forEach(([i,r])=>{o.searchParams.set(i,r)}),window.location.href=o.toString()}catch(o){console.error("Failed to redirect:",o)}}function g(s,o=[]){const i={pathname:window.location.pathname};o.forEach(D=>{i[D]=f(D)});let r=!1;async function l(){if(r)return;const D={pathname:window.location.pathname};if(o.forEach(A=>{D[A]=f(A)}),Object.keys(i).some(A=>i[A]!==D[A])){Object.assign(i,D),r=!0;try{await s()}catch(A){console.error("Error in URL observer callback:",A)}finally{r=!1}}}function a(){l().catch(D=>{console.error("Error in URL change handler:",D)})}let E=window.location.href;setInterval(()=>{window.location.href!==E&&(E=window.location.href,a())},200),window.addEventListener("popstate",a)}function C(s=[]){g(()=>window.location.reload(),s)}},6275:(I,T,d)=>{d.a(I,async(L,O)=>{try{var b=d(5406),w=d(1333),y=d(8713);await f(),(0,b.k1)(async()=>{await f(!0)});async function f(F=!1){(0,b.z2)("navigator")?(0,w.R)(F):(0,b.z2)("film","series")&&await(0,y.g)(F)}O()}catch(f){O(f)}},1)},8713:(I,T,d)=>{d.d(T,{g:()=>f});const L={CONTAINER:{margin:"12px 0 -5px",display:"flex",gap:"8px",alignItems:"center"},BUTTON:{display:"inline-flex",alignItems:"center",padding:"6px 12px",background:"#1a1a1a",border:"1px solid #404040",borderRadius:"6px",color:"#e0e0e0",textDecoration:"none",fontSize:"13px",fontWeight:"500",transition:"all 0.2s ease",cursor:"pointer",transform:"scale(1)"},BUTTON_HOVER:{background:"#2a2a2a",borderColor:"#606060",transform:"scale(1.05)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}};var O=d(6754),b=d(4921),w=d(9928),y=d(5539);async function f(s){await(0,b.XW)(document.body),s&&void 0,F(),v()}function F(){window.GM_addStyle(`
        [class*="styles_socialArgument__"],
        div[class*="styles_header__"] div[class*="styles_topText__"] p {
            display: none !important;
        }
    `),S("film-media-posts"),S("today-in-cinema-block"),p(),document.querySelector('div[class^="styles_videoWrapper__"]')?.remove(),document.querySelector("div.ReactModalPortal")?.remove(),x()}function S(s){const o=document.querySelector(`span#${s}`);if(!o)return;(0,y.Bt)(o);const i=o.nextElementSibling;i?.tagName==="DIV"&&(0,y.Bt)(i)}function p(){const s=document.querySelector('p[class^="style_offerName___"]');s&&(0,y.UE)(s,4)}function x(){const s=document.querySelector('div[class^="styles_watchOnlineBlock__"]');if(!s)return;const o=s.querySelector('button[class*="styles_watchOnlineButton__"]');o&&o.innerText.trim().toLowerCase().includes("\u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C")&&s.remove()}function v(){const s=document.querySelector('h1[class^="styles_title__"] > span');if(!s)return;const o=s.textContent.trim(),i=document.querySelector('div[class^="styles_header__"]');if(!i||document.querySelector(".custom-torrent-buttons"))return;const r=(0,w.Sw)(L.CONTAINER);r.className="custom-torrent-buttons";const a=`https://kinozal.tv/browse.php?s=${encodeURIComponent(o).replace(/%20/g,"+")}&g=0&c=0&v=0&d=0&w=0&t=1&f=0`,D=`https://rutracker.org/forum/tracker.php?nm=${encodeURIComponent(o)}`,A=g("\u041A\u0438\u043D\u043E\u0437\u0430\u043B",a),W=g("\u0420\u0443\u0442\u0440\u0435\u043A\u0435\u0440",D);r.appendChild(A),r.appendChild(W);const Q=i.querySelector('div[class^="styles_title__"]');Q&&(0,y.WH)(Q,r)}function g(s,o){const i=(0,w.d)(L.BUTTON,s,o);return i.target="_blank",i.addEventListener("mouseenter",()=>{(0,O.ZM)(i,L.BUTTON_HOVER)}),i.addEventListener("mouseleave",()=>{(0,O.ZM)(i,L.BUTTON)}),i}function C(){}},1333:(I,T,d)=>{d.d(T,{R:()=>Fe});function L(t){return t.value.toLowerCase().split(",").map(e=>e.trim()).filter(e=>e!=="")}function O(t){return L(t).filter(e=>!e.startsWith("!"))}function b(t,e){return!w(t,e)}function w(t,e){if(!e.value)return!0;const n=t.toLowerCase(),c=L(e),m=[],R=[];return c.forEach(k=>{if(k.startsWith("!")){const M=k.substring(1);M&&R.push(M)}else m.push(k)}),m.every(k=>n.includes(k))&&R.every(k=>!n.includes(k))}function y(t,e){return e.value!=null&&t<e.value}function f(t,e){return e.value!=null&&t>e.value}function F(t,e){return e.value==null?!1:t<parseDateFromISO(e.value)}function S(t,e){return e.value==null?!1:t>parseDateFromISO(e.value)}function p(t,e){return e.value&&t!==e.value}var x=d(5539),v=d(573),g=d(9928);function C(t,e={},n=null){const c=(0,g.Sw)(e,n);return c.append(t),c}function s(t,e=null,n={},c={}){const m=createActionLink(t,e,c);return C(m,n)}function o(t,e=null,n=null,c={},m={}){const R=createActionLinkWithIcon(t,n,e,m);return C(R,c)}function i(t,e,n={},c={}){const m=(0,g.kU)(c,e.updateValueFromEvent,e.value);return C(m,n,t)}function r(t,e,n,c,m,R={},k={}){const M=(0,g.o5)(k,e.updateValueFromEvent,e.value,n,c,m);return C(M,R,t)}function l(t,e,n={},c={}){const m=createDateInput(c,e.updateValueFromEvent,e.value);return createControl(m,n,t)}function a(t,e,n={},c={}){const m=(0,g.S)(c,e.updateValueFromEvent,e.value);return C(m,n,t)}function E(t,e={},n={}){return createTextFilterControl("\u041F\u043E\u0438\u0441\u043A: ",t,e,n)}function D(t,e={},n={},c=.1,m=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,c,m,5,e,n)}function A(t,e={},n={},c=.1,m=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,c,m,5,e,n)}function W(t,e={},n={}){return q("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function Q(t,e={},n={}){return q("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function q(t,e,n={},c={}){return createNumberFilterControl(t,e,"1","1","999999",n,c)}function te(t,e={},n={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",t,e,n)}function le(t,e={},n={}){return ne("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",t,e,n)}function ne(t,e,n={},c={}){return createNumberFilterControl(t,e,"5","0","100",n,c)}function se(t,e={},n={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",t,"5","0","100",e,n)}function u(t,e,n={},c={},m="250"){return createNumberFilterControl(t,e,m,"0","1000000",n,c)}function h(t,e={},n={},c="25"){return u("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",t,e,n,c)}function _(t,e={},n={},c="25"){return u("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",t,e,n,c)}function V(t,e={},n={}){return G("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",t,e,n)}function G(t,e,n={},c={}){return createNumberFilterControl(t,e,"1","0","99999",n,c)}function B(t,e={},n={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",t,"1","2","7",e,n)}function J(t,e={},n={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",t,1,1,10,e,n)}function Re(t,e={},n={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",t,e,n)}function De(t,e={},n={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",t,e,n)}function ke(t,e={},n={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",t,e,n)}function Ae(t,e={},n={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",t,e,n)}function ce(t,e={},n={}){return a("\u0412\u043A\u043B: ",t,e,n)}function Pe(t,e,n={}){const c=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],m={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},R=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),k=[],M=()=>e?parseFloat(e.value)||0:t.value,$=()=>{const z=M();k.forEach(({button:Y,value:Z})=>{const H=Z<=z?m.active:m.inactive;Object.assign(Y.style,H)})};return c.forEach(({value:z,emoji:Y,tooltip:Z})=>{const U=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...n},Y);U.title=Z,U.type="button",U.addEventListener("click",H=>{H.preventDefault(),t.updateValue(z),e&&(e.value=z),$()}),U.addEventListener("mouseenter",()=>{z<=M()||(U.style.background=m.hover.background)}),U.addEventListener("mouseleave",()=>{$()}),k.push({button:U,value:z}),R.appendChild(U)}),$(),e&&(e.addEventListener("input",$),e.addEventListener("change",$)),R}const j={MOVIES_LIST:"#results",MOVIE_CARD:"#itemList > .item",MY_VOTE_WRAP:".myVote",GENRE_WRAP:".gray_text",KP_REVIEWS_WRAP:".numVote > span > span",IMDB_REVIEWS_WRAP:".imdb > span",NAME_WRAP:".name",LENGTH_WRAP:"nobr"},re={INPUT:{marginLeft:"6px",padding:"4px 8px",fontSize:"12px"}},P={FILTERS_CONTAINER:{display:"flex",gridGap:"12px",marginTop:"10px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...re.INPUT,width:"120px"},NUMBER_INPUT:{...re.INPUT,width:"65px"},CHECKBOX_INPUT:{marginLeft:"6px",width:"17px",height:"17px"}};class ae{constructor(e,n){this.value=e,this.onChange=n}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}function fe(t){const{target:e}=t,{type:n}=e;switch(n){case"text":return`"${e.value}"`;case"number":return e.value;case"date":return`"${e.value}"`;case"checkbox":return e.checked;default:return console.log(`Unknown input type: ${n}`),null}}function de(t){return t===""?null:JSON.parse(t)}const me=window.GM_setValue,Be=window.GM.setValue,pe=window.GM_getValue;class X extends ae{constructor(e,n=null,c=null){super(pe(e,n),c),this.storageKey=e,this.defaultValue=n}static create(e,n=null,c=null){return new X(e,n,c)}static createWithCompositeKey(e,n,c=null,m=null){const R=`${e}-${n}`;return new X(R,c,m)}updateValueFromEvent=e=>{const n=fe(e),c=de(n);this.updateValue(c)};updateValue(e,n=!0){this.value!==e&&(me(this.storageKey,e),this.value=e,n&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}function he(t,e=null){return{createGlobalFilter(n,c=null,m=t){return X.create(n,c,m)},createSectionFilter(n,c=null,m=t){if(!e)throw new Error("sectionId must be provided to use createSectionFilter.");return X.createWithCompositeKey(e,n,c,m)}}}function ve(t,e,n=!1,c="customFiltersContainer"){let m=(0,v.Fi)(`#${c}`,t);if(m)if(n)m.remove();else return;m=(0,g.Sw)(),m.id=c,e(m,t)}function Ee(t={}){return(0,g.Sw)(t,"|")}function be(t={},e=75,n="customFiltersContainer"){const c=document.getElementById(n);if(!c)return console.log(`Element with id="${n}" not found.`),null;const m=createButton(t,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return m.addEventListener("mouseenter",()=>{m.style.filter="brightness(0.9)"}),m.addEventListener("mouseleave",()=>{m.style.filter="brightness(1)"}),m.addEventListener("click",()=>{const R=c.getBoundingClientRect();window.scrollTo({top:R.top+window.scrollY-e})}),new IntersectionObserver(([R])=>{m.style.display=R.isIntersecting?"none":"flex"},{threshold:.5}).observe(c),m}function Ue(t,e={}){const n=be(e);n&&t.appendChild(n)}var ge=d(6754),oe=d(4921);const N={moviesObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,genreFilter:null,maxLengthFilter:null,minKpReviewsFilter:null,minImdbReviewsFilter:null,isFinishedFilter:null,filterEnabled:null}};function Fe(t){t&&Se(),we(),ye()}function we(){if(!N.isFiltersInitialized){const{createGlobalFilter:t}=he(ie);N.filters.nameFilter=t("navigator-name-filter"),N.filters.genreFilter=t("navigator-genre-filter"),N.filters.maxLengthFilter=t("navigator-max-length-filter"),N.filters.minKpReviewsFilter=t("navigator-min-kp-reviews-filter"),N.filters.minImdbReviewsFilter=t("navigator-min-imdb-reviews-filter"),N.filters.isFinishedFilter=t("navigator-is-finished-filter",!0),N.filters.filterEnabled=t("navigator-filter-enabled",!0),N.isFiltersInitialized=!0}}function ye(){const t=(0,v.Fi)(j.MOVIES_LIST);t&&(N.moviesObserver&&(0,oe.wP)(N.moviesObserver),N.moviesObserver=new MutationObserver(()=>Ce(t)),N.moviesObserver.observe(t,{childList:!0,subtree:!0}))}function Ce(t){const e=(0,v.Fi)("tr > td",t);ve(e,Te),ie()}function Te(t,e){(0,ge.ZM)(t,P.FILTERS_CONTAINER);const n=i("\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435:",N.filters.nameFilter,P.CONTROL,P.TEXT_INPUT),c=i("\u0416\u0430\u043D\u0440:",N.filters.genreFilter,P.CONTROL,P.TEXT_INPUT),m=r("\u041C\u0430\u043A\u0441. \u043C\u0438\u043D\u0443\u0442:",N.filters.maxLengthFilter,"10","0","500",P.CONTROL,P.NUMBER_INPUT),R=r("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u041A\u041F:",N.filters.minKpReviewsFilter,"100","0","1000000",P.CONTROL,P.NUMBER_INPUT),k=r("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432 IMDB:",N.filters.minImdbReviewsFilter,"100","0","1000000",P.CONTROL,P.NUMBER_INPUT),M=a("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D: ",N.filters.isFinishedFilter,P.CONTROL,P.CHECKBOX_INPUT),$=Ee(P.CONTROL),z=ce(N.filters.filterEnabled,P.CONTROL,P.CHECKBOX_INPUT);t.append(n,c,m,R,k,M,$,z),e.append(t)}function ie(){(0,v.fI)(j.MOVIE_CARD).forEach(xe)}function xe(t){if(!N.filters.filterEnabled.value){(0,x.kl)(t);return}const e=(0,v.Fi)(j.NAME_WRAP,t),n=(0,v.Fi)(j.MY_VOTE_WRAP,t),c=(0,v.Fi)(j.GENRE_WRAP,t),m=(0,v.Fi)(j.LENGTH_WRAP,e),R=(0,v.Fi)(j.KP_REVIEWS_WRAP,t),k=(0,v.Fi)(j.IMDB_REVIEWS_WRAP,t);if([e,n,c,m,R,k].some(Le=>!Le)){(0,x.Bt)(t);return}if(n.innerText){(0,x.Bt)(t);return}const $=(0,v.Fi)("a",e)?.innerText??"",Y=!((0,v.Fi)("span",e)?.innerText??"").includes("..."),Z=Ne(c),U=(0,v.YA)(m,!0),H=(0,v.YA)(R,!0),_e=(0,v.YA)(k,!0),Ie=b($,N.filters.nameFilter)||b(Z,N.filters.genreFilter)||f(U,N.filters.maxLengthFilter)||y(H,N.filters.minKpReviewsFilter)||y(_e,N.filters.minImdbReviewsFilter)||p(Y,N.filters.isFinishedFilter);(0,x.UC)(t,Ie)}function Ne(t){return Array.from(t.childNodes).filter(c=>c.nodeType===Node.TEXT_NODE).pop()?.textContent.trim()||""}function Se(){N.isFiltersInitialized=!1,N.filters={nameFilter:null,genreFilter:null,maxLengthFilter:null,minKpReviewsFilter:null,minImdbReviewsFilter:null,isFinishedFilter:null,filterEnabled:null},(0,oe.wP)(N.moviesObserver)}}},ee={};function K(I){var T=ee[I];if(T!==void 0)return T.exports;var d=ee[I]={exports:{}};return ue[I](d,d.exports,K),d.exports}(()=>{var I=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",T=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",d=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",L=b=>{b&&b.d<1&&(b.d=1,b.forEach(w=>w.r--),b.forEach(w=>w.r--?w.r++:w()))},O=b=>b.map(w=>{if(w!==null&&typeof w=="object"){if(w[I])return w;if(w.then){var y=[];y.d=0,w.then(S=>{f[T]=S,L(y)},S=>{f[d]=S,L(y)});var f={};return f[I]=S=>S(y),f}}var F={};return F[I]=S=>{},F[T]=w,F});K.a=(b,w,y)=>{var f;y&&((f=[]).d=-1);var F=new Set,S=b.exports,p,x,v,g=new Promise((C,s)=>{v=s,x=C});g[T]=S,g[I]=C=>(f&&C(f),F.forEach(C),g.catch(s=>{})),b.exports=g,w(C=>{p=O(C);var s,o=()=>p.map(r=>{if(r[d])throw r[d];return r[T]}),i=new Promise(r=>{s=()=>r(o),s.r=0;var l=a=>a!==f&&!F.has(a)&&(F.add(a),a&&!a.d&&(s.r++,a.push(s)));p.map(a=>a[I](l))});return s.r?i:o()},C=>(C?v(g[d]=C):x(S),L(f))),f&&f.d<0&&(f.d=0)}})(),K.d=(I,T)=>{for(var d in T)K.o(T,d)&&!K.o(I,d)&&Object.defineProperty(I,d,{enumerable:!0,get:T[d]})},K.o=(I,T)=>Object.prototype.hasOwnProperty.call(I,T);var Oe=K(6275)})();})();
