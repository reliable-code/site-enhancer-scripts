// ==UserScript==
// @name         Kinopoisk navigator filter
// @description  Hide movies by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.kinopoisk.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76927367
// @icon         https://www.google.com/s2/favicons?sz=64&domain=kinopoisk.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/kinop.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var ue={9928:(L,y,p)=>{p.d(y,{S:()=>f,Sw:()=>a,d:()=>T,kU:()=>g,o5:()=>F});var O=p(4921),R=p(6754);function g(o,s,v){const d=b(o,"text",s);return d.value=v,d}function F(o,s,v,d,A,W){const B=b(o,"number",s);return B.value=v,B.step=d,B.min=A,B.max=W,B}function C(o,s,v){const d=b(o,"date",s);return d.value=v,d}function f(o,s,v){const d=b(o,"checkbox",s);return d.checked=v,d}function b(o={},s=null,v=null){const d=u("input",o);return s&&(d.type=s),v&&(d.addEventListener("keyup",(0,O.sg)(v,200)),d.addEventListener("change",(0,O.sg)(v,100))),d}function x(o,s,v){const d=u("select",o);return s&&d.addEventListener("change",s),d.value=v,d}function E(o={},s=null){return u("span",o,s)}function T(o={},s=null,v=null){const d=u("a",o,s);return v&&(d.href=v),d}function I(o,s=null,v={}){v.cursor||="pointer";const d=T(v,s);return o&&d.addEventListener("click",o),d}function w(o,s,v=null,d={},A={}){d.display||="inline-flex",d.alignItems||="center",d.gap||="0.25em";const W=I(o,v,d);return W.prepend(c(s,A)),W}function S(o={},s=null,v=null){const d=u("button",o,s);return v&&d.addEventListener("click",v),d}function a(o={},s=null){return u("div",o,s)}function r(o={},s=null){return u("i",o,s)}function c(o,s={}){s.width||="1em",s.height||="1em",s.paddingBottom||="1px";const v=r(s);return v.setAttribute("data-lucide",o),v}function u(o,s,v=null){if(typeof s!="object"||s===null)throw new TypeError("styles should be an object");const d=document.createElement(o);return(0,R.ZM)(d,s),v&&(d.innerHTML=v),d}},573:(L,y,p)=>{p.d(y,{Fi:()=>g,YA:()=>x,fI:()=>F,s$:()=>C});var O=p(4214);function R(r,c=document){return!!c.querySelector(r)}function g(r,c=document,u=!1){const o=c.querySelector(r);return u&&!o&&console.log(`No element found for selector: ${r}`),o}function F(r,c=document,u=!1){const o=c.querySelectorAll(r);return u&&!o.length&&console.log(`No elements found for selector: ${r}`),o}function C(r,c=1){let u=r;for(let o=0;o<c;o++){if(!u.parentElement)return null;u=u.parentElement}return u}function f(r,c,u){return[...r.querySelectorAll(c)].find(o=>o.textContent.trim().includes(u))}function b(r,c,u=!1,o=!1,s=null){const v=g(c,r);return x(v,u,o,s)}function x(r,c=!1,u=!1,o=null){if(!r)return o===null?(console.log("No element found"),null):o;const s=r.innerText;return I(s,c,u)}function E(r,c,u=!1){const o=r[c];return x(o,u)}function T(r,c=!1,u=!1){const o=r.textContent;return I(o,c,u)}function I(r,c,u){c&&(r=(0,O.zr)(r)),u&&(r=r.replace(",","."));const o=Number(r);return Number.isNaN(o)?(console.log(`Invalid number: ${r}`),0):o}function w(r){return[...r.childNodes].find(c=>c.nodeType===Node.TEXT_NODE)}function S(r){const c=u=>u.nodeType===Node.TEXT_NODE&&u.textContent.trim()!==""?[u]:[...u.childNodes].flatMap(c);return c(r)}function a(r){return normalizeSpacing(r.textContent)}},5539:(L,y,p)=>{p.d(y,{Bt:()=>g,UC:()=>T,UE:()=>C,WH:()=>R,kl:()=>x});var O=p(573);function R(l,h){l.parentNode.insertBefore(h,l.nextSibling)}function g(l){l.style.display="none"}function F(l,h=1){const _=document.querySelector(l);_&&C(_,h)}function C(l,h=1){const _=(0,O.s$)(l,h);_&&g(_)}function f(l){S(l),g(l)}function b(l){l.intersectionObserver||runOnceOnIntersection(l,()=>g(l))}function x(l){l.style.display=""}function E(l){const h=w(l);l.style.display=h}function T(l,h){h?g(l):x(l)}function I(l,h){h?b(l):(clearIntersectionObserver(l),x(l))}function w(l){return S(l),l.defaultDisplay}function S(l){if(l.defaultDisplay)return;const{display:h}=getComputedStyle(l);l.defaultDisplay=h}function a(){return{show:[],hide:[]}}function r(l,h,_){l?h.hide.push(_):h.show.push(_)}function c(l){l.show.forEach(x),l.hide.forEach(g)}function u(l,h,_=.3){h?s(l,_):o(l)}function o(l){l.style.opacity=""}function s(l,h=.3){l.style.opacity=h}function v(l){l.style.order=""}function d(l,h){l.style.order=h}function A(l,h){l.style.background=h}function W(l,h){const _=getFirstElement(h);_&&B(l,_)}function B(l,h){const _=createLink();_.href=l,h.parentNode.append(_),_.append(h)}function le(l,h){const _=getFirstElement(h);_&&te(l,_)}function te(l,h,_={}){const U=createLink(_);U.href=l,U.append(...h.childNodes),h.append(U)}function J(){const l=getURLQueryParam("scrollTo");if(!l)return;const h=document.getElementById(l);h?h.scrollIntoView():console.log(`Element with ID "${l}" was not found.`)}function se(l,h,_=null){const U=`${h}-click-passed`,Q=_?P=>findElementByText(P,l,_):P=>getFirstElement(l,P);return function(P){if(P.hasAttribute(U))return!1;const q=Q(P);return q&&q.click(),P.setAttribute(U,""),!0}}function ce(l,h,_="text/plain"){const U=new Blob([l],{type:_}),Q=URL.createObjectURL(U),P=document.createElement("a");P.href=Q,P.download=h,document.body.appendChild(P),P.click(),document.body.removeChild(P),requestAnimationFrame(()=>URL.revokeObjectURL(Q))}},6754:(L,y,p)=>{p.d(y,{ZM:()=>O});function O(C,f){Object.assign(C.style,f)}function R(C,f="custom-global-style"){let b=document.getElementById(f);b||(b=document.createElement("style"),b.id=f,b.type="text/css",document.head.appendChild(b)),b.textContent=C}function g(C){return Object.entries(C).map(([f,b])=>`${f.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${b};`).join(" ")}function F(C){return C?C.split(";").filter(f=>f.trim()!=="").reduce((f,b)=>{const[x,E]=b.split(":").map(I=>I.trim()),T=x.replace(/-([a-z])/g,(I,w)=>w.toUpperCase());return f[T]=E,f},{}):{}}},4921:(L,y,p)=>{p.d(y,{XW:()=>g,sg:()=>F,wP:()=>x});function O(E,T,I=null){const w=E.querySelector(T);return w?Promise.resolve(w):new Promise(S=>{const a=new MutationObserver(c);a.observe(E,{childList:!0,subtree:!0});let r;I&&(r=setTimeout(()=>{a.disconnect(),console.log(`No element found for selector: ${T}`),S(null)},I));function c(){const u=E.querySelector(T);u&&(r&&clearTimeout(r),a.disconnect(),S(u))}})}function R(E,T){return E.querySelector(T)?new Promise(w=>{const S=new MutationObserver(a);S.observe(E,{childList:!0,subtree:!0});function a(){E.querySelector(T)||(S.disconnect(),w())}}):Promise.resolve()}function g(E,T=400){return new Promise(I=>{let w;const S=new MutationObserver(()=>{clearTimeout(w),a()});function a(){w=setTimeout(()=>{S.disconnect(),I()},T)}a(),S.observe(E,{childList:!0,subtree:!0})})}function F(E,T=250){let I;return(...w)=>{clearTimeout(I),I=setTimeout(()=>E(...w),T)}}async function C(E){document.visibilityState==="visible"?await E():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await E()},{once:!0})}function f(E,T){const I=new IntersectionObserver(w=>{w.forEach(S=>{S.isIntersecting&&(T(),b(E))})});E.intersectionObserver=I,I.observe(E)}function b(E){E.intersectionObserver&&(E.intersectionObserver.disconnect(),E.intersectionObserver=null)}function x(E){E&&(E.disconnect(),E=null)}},4214:(L,y,p)=>{p.d(y,{zr:()=>R});function O(f){return f.replace(/\D/g,"")}function R(f){return f.replace(/[^\d.,-]/g,"")}function g(f){return f.replace(/\s/g,"")}function F(f){return f.charAt(0).toUpperCase()+f.slice(1)}function C(f){return f.replace(/\s+/g," ").trim()}},5406:(L,y,p)=>{p.d(y,{k1:()=>w,z2:()=>T});function O(a,r="common",c=!1){const{pathname:u}=window.location;return R(u,a,r,c)}function R(a,r,c,u=!1){const o=a.split("/");r=r<0?o.length+r:r;const s=o[r]||c;return u&&console.log(`Pathname element: ${s}`),s}function g(a,r="common",c=!1){const u=O(a,"",c);return F(u,r,c)}function F(a,r,c){if(!a)return r;const u=a.split("-").at(-1);return c&&console.log(`Pathname element ending: ${u}`),u}function C(a,r,c="common",u=!1){const o=R(a,r,"",u);return F(o,c,u)}function f(a){return new URLSearchParams(window.location.search).get(a)}function b(a){return a.split("?")[0]}function x(a){return window.location.pathname.includes(a)}function E(a){return a.some(r=>x(r))}function T(...a){return window.location.pathname.split("/").some(c=>a.includes(c))}function I(a){try{const r=new URL(window.location.href);Object.entries(a).forEach(([c,u])=>{r.searchParams.set(c,u)}),window.location.href=r.toString()}catch(r){console.error("Failed to redirect:",r)}}function w(a,r=[]){const c={pathname:window.location.pathname};r.forEach(d=>{c[d]=f(d)});let u=!1;async function o(){if(u)return;const d={pathname:window.location.pathname};if(r.forEach(A=>{d[A]=f(A)}),Object.keys(c).some(A=>c[A]!==d[A])){Object.assign(c,d),u=!0;try{await a()}catch(A){console.error("Error in URL observer callback:",A)}finally{u=!1}}}function s(){o().catch(d=>{console.error("Error in URL change handler:",d)})}let v=window.location.href;setInterval(()=>{window.location.href!==v&&(v=window.location.href,s())},200),window.addEventListener("popstate",s)}function S(a=[]){w(()=>window.location.reload(),a)}},6275:(L,y,p)=>{p.a(L,async(O,R)=>{try{var g=p(5406),F=p(1333),C=p(8713);await f(),(0,g.k1)(async()=>{await f(!0)});async function f(b=!1){(0,g.z2)("navigator")?(0,F.R)(b):(0,g.z2)("film","series")&&await(0,C.g)(b)}R()}catch(f){R(f)}},1)},8713:(L,y,p)=>{p.d(y,{g:()=>f});const O={CONTAINER:{margin:"12px 0 -5px",display:"flex",gap:"8px",alignItems:"center"},BUTTON:{display:"inline-flex",alignItems:"center",padding:"6px 12px",background:"#1a1a1a",border:"1px solid #404040",borderRadius:"6px",color:"#e0e0e0",textDecoration:"none",fontSize:"13px",fontWeight:"500",transition:"all 0.2s ease",cursor:"pointer",transform:"scale(1)"},BUTTON_HOVER:{background:"#2a2a2a",borderColor:"#606060",transform:"scale(1.05)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}};var R=p(6754),g=p(4921),F=p(9928),C=p(5539);async function f(a){await(0,g.XW)(document.body),a&&void 0,b(),I()}function b(){window.GM_addStyle(`
        [class*="styles_socialArgument__"],
        div[class*="styles_header__"] div[class*="styles_topText__"] p {
            display: none !important;
        }
    `),x("film-media-posts"),x("today-in-cinema-block"),E(),document.querySelector('div[class^="styles_videoWrapper__"]')?.remove(),document.querySelector("div.ReactModalPortal")?.remove(),T()}function x(a){const r=document.querySelector(`span#${a}`);if(!r)return;(0,C.Bt)(r);const c=r.nextElementSibling;c?.tagName==="DIV"&&(0,C.Bt)(c)}function E(){const a=document.querySelector('p[class^="style_offerName___"]');a&&(0,C.UE)(a,4)}function T(){const a=document.querySelector('div[class^="styles_watchOnlineBlock__"]');if(!a)return;const r=a.querySelector('button[class*="styles_watchOnlineButton__"]');r&&r.innerText.trim().toLowerCase().includes("\u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C")&&a.remove()}function I(){const a=document.querySelector('h1[class^="styles_title__"] > span');if(!a)return;const r=a.textContent.trim(),c=document.querySelector('div[class^="styles_header__"]');if(!c||document.querySelector(".custom-torrent-buttons"))return;const u=(0,F.Sw)(O.CONTAINER);u.className="custom-torrent-buttons";const s=`https://kinozal.tv/browse.php?s=${encodeURIComponent(r).replace(/%20/g,"+")}&g=0&c=0&v=0&d=0&w=0&t=1&f=0`,d=`https://rutracker.org/forum/tracker.php?nm=${encodeURIComponent(r)}`,A=w("\u041A\u0438\u043D\u043E\u0437\u0430\u043B",s),W=w("\u0420\u0443\u0442\u0440\u0435\u043A\u0435\u0440",d);u.appendChild(A),u.appendChild(W);const B=c.querySelector('div[class^="styles_title__"]');B&&(0,C.WH)(B,u)}function w(a,r){const c=(0,F.d)(O.BUTTON,a,r);return c.target="_blank",c.addEventListener("mouseenter",()=>{(0,R.ZM)(c,O.BUTTON_HOVER)}),c.addEventListener("mouseleave",()=>{(0,R.ZM)(c,O.BUTTON)}),c}function S(){}},1333:(L,y,p)=>{p.d(y,{R:()=>Ce});function O(t){if(!t)return[];const n=R(t).flat().filter(i=>i&&!i.isNegative&&i.term).map(i=>i.term);return[...new Set(n)]}function R(t){return t?t.toLowerCase().split(",").map(g).filter(Boolean):[]}function g(t){const e=t.split("/").map(i=>i.trim()).filter(Boolean);if(e.length===0)return null;const n=e.map(F).filter(Boolean);return n.length>0?n:null}function F(t){const e=t.startsWith("!"),n=e?t.slice(1).trim():t;return n?{term:n,isNegative:e}:null}function C(t,e){b(t,n=>n.style.display!=="none",e)}function f(t,e){b(t,n=>n.style.opacity==="",e)}function b(t,e,n){const i=[...t].filter(e).length;n.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${i} \u0438\u0437 ${t.length}`}function x(t,e){return!E(t,e)}function E(t,e){if(!e||!e.value)return!0;const n=R(e.value);return T(t,n)}function T(t,e){if(!e||!e.length)return!0;const n=(t||"").toLowerCase();return e.every(i=>I(n,i))}function I(t,e){return e.some(({term:n,isNegative:i})=>{const m=t.includes(n);return i?!m:m})}function w(t,e){return e.value!=null&&t<e.value}function S(t,e){return e.value!=null&&t>e.value}function a(t,e){return e.value==null?!1:t<parseDateFromISO(e.value)}function r(t,e){return e.value==null?!1:t>parseDateFromISO(e.value)}function c(t,e){return e.value&&t!==e.value}var u=p(5539),o=p(573),s=p(9928);function v(t,e={},n=null){const i=(0,s.Sw)(e,n);return i.append(t),i}function d(t,e=null,n={},i={}){const m=createActionLink(t,e,i);return v(m,n)}function A(t,e=null,n=null,i={},m={}){const D=createActionLinkWithIcon(t,n,e,m);return v(D,i)}function W(t,e,n={},i={}){const m=(0,s.kU)(i,e.updateValueFromEvent,e.value);return v(m,n,t)}function B(t,e,n,i,m,D={},V={}){const K=(0,s.o5)(V,e.updateValueFromEvent,e.value,n,i,m);return v(K,D,t)}function le(t,e,n={},i={}){const m=createSelect(i,e.updateValueFromEvent,e.value);return createControl(m,n,t)}function te(t,e,n={},i={}){const m=createDateInput(i,e.updateValueFromEvent,e.value);return createControl(m,n,t)}function J(t,e,n={},i={}){const m=(0,s.S)(i,e.updateValueFromEvent,e.value);return v(m,n,t)}function se(t,e={},n={}){return createTextFilterControl("\u041F\u043E\u0438\u0441\u043A: ",t,e,n)}function ce(t,e={},n={},i=.1,m=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,i,m,5,e,n)}function l(t,e={},n={},i=.1,m=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,i,m,5,e,n)}function h(t,e={},n={}){return U("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function _(t,e={},n={}){return U("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function U(t,e,n={},i={}){return createNumberFilterControl(t,e,"1","1","999999",n,i)}function Q(t,e={},n={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",t,e,n)}function P(t,e={},n={}){return q("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",t,e,n)}function q(t,e,n={},i={}){return createNumberFilterControl(t,e,"5","0","100",n,i)}function ke(t,e={},n={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",t,"5","0","100",e,n)}function ne(t,e,n={},i={},m="250"){return createNumberFilterControl(t,e,m,"0","1000000",n,i)}function Ae(t,e={},n={},i="25"){return ne("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",t,e,n,i)}function Be(t,e={},n={},i="25"){return ne("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",t,e,n,i)}function Pe(t,e={},n={}){return ae("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",t,e,n)}function ae(t,e,n={},i={}){return createNumberFilterControl(t,e,"1","0","99999",n,i)}function Ue(t,e={},n={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",t,"1","2","8",e,n)}function Me(t,e={},n={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",t,1,1,10,e,n)}function We(t,e={},n={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",t,e,n)}function Ve(t,e={},n={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",t,e,n)}function $e(t,e={},n={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",t,e,n)}function ze(t,e={},n={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",t,e,n)}function fe(t,e={},n={}){return J("\u0412\u043A\u043B: ",t,e,n)}function je(t,e,n={}){const i=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],m={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},D=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),V=[],K=()=>e?parseFloat(e.value)||0:t.value,$=()=>{const z=K();V.forEach(({button:Y,value:Z})=>{const H=Z<=z?m.active:m.inactive;Object.assign(Y.style,H)})};return i.forEach(({value:z,emoji:Y,tooltip:Z})=>{const M=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...n},Y);M.title=Z,M.type="button",M.addEventListener("click",H=>{H.preventDefault(),t.updateValue(z),e&&(e.value=z),$()}),M.addEventListener("mouseenter",()=>{z<=K()||(M.style.background=m.hover.background)}),M.addEventListener("mouseleave",()=>{$()}),V.push({button:M,value:z}),D.appendChild(M)}),$(),e&&(e.addEventListener("input",$),e.addEventListener("change",$)),D}const j={MOVIES_LIST:"#results",MOVIE_CARD:"#itemList > .item",MY_VOTE_WRAP:".myVote",GENRE_WRAP:".gray_text",KP_REVIEWS_WRAP:".numVote > span > span",IMDB_REVIEWS_WRAP:".imdb > span",NAME_WRAP:".name",LENGTH_WRAP:"nobr"},re={INPUT:{marginLeft:"6px",padding:"4px 8px",fontSize:"12px"}},k={FILTERS_CONTAINER:{display:"flex",gridGap:"12px",marginTop:"10px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...re.INPUT,width:"120px"},NUMBER_INPUT:{...re.INPUT,width:"65px"},CHECKBOX_INPUT:{marginLeft:"6px",width:"17px",height:"17px"}};class de{constructor(e,n){this.value=e,this.onChange=n}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}function me(t){const{target:e}=t,{type:n}=e;switch(n){case"text":return`"${e.value}"`;case"number":return e.value;case"select-one":return e.value;case"date":return`"${e.value}"`;case"checkbox":return e.checked;default:return console.log(`Unknown input type: ${n}`),null}}function pe(t){return t===""?null:JSON.parse(t)}const ve=window.GM_setValue,Ge=window.GM.setValue,he=window.GM_getValue;class X extends de{constructor(e,n=null,i=null){super(he(e,n),i),this.storageKey=e,this.defaultValue=n}static create(e,n=null,i=null){return new X(e,n,i)}static createWithCompositeKey(e,n,i=null,m=null){const D=`${e}-${n}`;return new X(D,i,m)}updateValueFromEvent=e=>{const n=me(e),i=pe(n);this.updateValue(i)};updateValue(e,n=!0){this.value!==e&&(ve(this.storageKey,e),this.value=e,n&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}function Ee(t,e=null){return{createGlobalFilter(n,i=null,m=t){return X.create(n,i,m)},createSectionFilter(n,i=null,m=t){if(!e)throw new Error("sectionId must be provided to use createSectionFilter.");return X.createWithCompositeKey(e,n,i,m)}}}function be(t,e,n=!1,i="customFiltersContainer"){let m=(0,o.Fi)(`#${i}`,t);if(m)if(n)m.remove();else return;m=(0,s.Sw)(),m.id=i,e(m,t)}function ge(t={}){return(0,s.Sw)(t,"|")}function Fe(t={},e=75,n="customFiltersContainer"){const i=document.getElementById(n);if(!i)return console.log(`Element with id="${n}" not found.`),null;const m=createButton(t,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return m.addEventListener("mouseenter",()=>{m.style.filter="brightness(0.9)"}),m.addEventListener("mouseleave",()=>{m.style.filter="brightness(1)"}),m.addEventListener("click",()=>{const D=i.getBoundingClientRect();window.scrollTo({top:D.top+window.scrollY-e})}),new IntersectionObserver(([D])=>{m.style.display=D.isIntersecting?"none":"flex"},{threshold:.5}).observe(i),m}function Ke(t,e={}){const n=Fe(e);n&&t.appendChild(n)}var ye=p(6754),oe=p(4921);const N={moviesObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,genreFilter:null,maxLengthFilter:null,minKpReviewsFilter:null,minImdbReviewsFilter:null,isFinishedFilter:null,filterEnabled:null}};function Ce(t){t&&_e(),we(),xe()}function we(){if(!N.isFiltersInitialized){const{createGlobalFilter:t}=Ee(ie);N.filters.nameFilter=t("navigator-name-filter"),N.filters.genreFilter=t("navigator-genre-filter"),N.filters.maxLengthFilter=t("navigator-max-length-filter"),N.filters.minKpReviewsFilter=t("navigator-min-kp-reviews-filter"),N.filters.minImdbReviewsFilter=t("navigator-min-imdb-reviews-filter"),N.filters.isFinishedFilter=t("navigator-is-finished-filter",!0),N.filters.filterEnabled=t("navigator-filter-enabled",!0),N.isFiltersInitialized=!0}}function xe(){const t=(0,o.Fi)(j.MOVIES_LIST);t&&(N.moviesObserver&&(0,oe.wP)(N.moviesObserver),N.moviesObserver=new MutationObserver(()=>Ne(t)),N.moviesObserver.observe(t,{childList:!0,subtree:!0}))}function Ne(t){const e=(0,o.Fi)("tr > td",t);be(e,Te),ie()}function Te(t,e){(0,ye.ZM)(t,k.FILTERS_CONTAINER);const n=W("\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435:",N.filters.nameFilter,k.CONTROL,k.TEXT_INPUT),i=W("\u0416\u0430\u043D\u0440:",N.filters.genreFilter,k.CONTROL,k.TEXT_INPUT),m=B("\u041C\u0430\u043A\u0441. \u043C\u0438\u043D\u0443\u0442:",N.filters.maxLengthFilter,"10","0","500",k.CONTROL,k.NUMBER_INPUT),D=B("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u041A\u041F:",N.filters.minKpReviewsFilter,"100","0","1000000",k.CONTROL,k.NUMBER_INPUT),V=B("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432 IMDB:",N.filters.minImdbReviewsFilter,"100","0","1000000",k.CONTROL,k.NUMBER_INPUT),K=J("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D: ",N.filters.isFinishedFilter,k.CONTROL,k.CHECKBOX_INPUT),$=ge(k.CONTROL),z=fe(N.filters.filterEnabled,k.CONTROL,k.CHECKBOX_INPUT);t.append(n,i,m,D,V,K,$,z),e.append(t)}function ie(){(0,o.fI)(j.MOVIE_CARD).forEach(Se)}function Se(t){if(!N.filters.filterEnabled.value){(0,u.kl)(t);return}const e=(0,o.Fi)(j.NAME_WRAP,t),n=(0,o.Fi)(j.MY_VOTE_WRAP,t),i=(0,o.Fi)(j.GENRE_WRAP,t),m=(0,o.Fi)(j.LENGTH_WRAP,e),D=(0,o.Fi)(j.KP_REVIEWS_WRAP,t),V=(0,o.Fi)(j.IMDB_REVIEWS_WRAP,t);if([e,n,i,m,D,V].some(Re=>!Re)){(0,u.Bt)(t);return}if(n.innerText){(0,u.Bt)(t);return}const $=(0,o.Fi)("a",e)?.innerText??"",Y=!((0,o.Fi)("span",e)?.innerText??"").includes("..."),Z=Ie(i),M=(0,o.YA)(m,!0),H=(0,o.YA)(D,!0),Le=(0,o.YA)(V,!0),Oe=x($,N.filters.nameFilter)||x(Z,N.filters.genreFilter)||S(M,N.filters.maxLengthFilter)||w(H,N.filters.minKpReviewsFilter)||w(Le,N.filters.minImdbReviewsFilter)||c(Y,N.filters.isFinishedFilter);(0,u.UC)(t,Oe)}function Ie(t){return Array.from(t.childNodes).filter(i=>i.nodeType===Node.TEXT_NODE).pop()?.textContent.trim()||""}function _e(){N.isFiltersInitialized=!1,N.filters={nameFilter:null,genreFilter:null,maxLengthFilter:null,minKpReviewsFilter:null,minImdbReviewsFilter:null,isFinishedFilter:null,filterEnabled:null},(0,oe.wP)(N.moviesObserver)}}},ee={};function G(L){var y=ee[L];if(y!==void 0)return y.exports;var p=ee[L]={exports:{}};return ue[L](p,p.exports,G),p.exports}(()=>{var L=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",y=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",p=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",O=g=>{g&&g.d<1&&(g.d=1,g.forEach(F=>F.r--),g.forEach(F=>F.r--?F.r++:F()))},R=g=>g.map(F=>{if(F!==null&&typeof F=="object"){if(F[L])return F;if(F.then){var C=[];C.d=0,F.then(x=>{f[y]=x,O(C)},x=>{f[p]=x,O(C)});var f={};return f[L]=x=>x(C),f}}var b={};return b[L]=x=>{},b[y]=F,b});G.a=(g,F,C)=>{var f;C&&((f=[]).d=-1);var b=new Set,x=g.exports,E,T,I,w=new Promise((S,a)=>{I=a,T=S});w[y]=x,w[L]=S=>(f&&S(f),b.forEach(S),w.catch(a=>{})),g.exports=w,F(S=>{E=R(S);var a,r=()=>E.map(u=>{if(u[p])throw u[p];return u[y]}),c=new Promise(u=>{a=()=>u(r),a.r=0;var o=s=>s!==f&&!b.has(s)&&(b.add(s),s&&!s.d&&(a.r++,s.push(a)));E.map(s=>s[L](o))});return a.r?c:r()},S=>(S?I(w[p]=S):T(x),O(f))),f&&f.d<0&&(f.d=0)}})(),G.d=(L,y)=>{for(var p in y)G.o(y,p)&&!G.o(L,p)&&Object.defineProperty(L,p,{enumerable:!0,get:y[p]})},G.o=(L,y)=>Object.prototype.hasOwnProperty.call(L,y);var De=G(6275)})();})();
