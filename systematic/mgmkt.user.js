// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77136792
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var z={7273:(A,m,e)=>{e.d(m,{S:()=>E});var d=e(5558);function l(f={},p=null){return createElement("span",f,p)}function E(f={},p=null){return(0,d.n)("div",f,p)}},5467:(A,m,e)=>{e.d(m,{E2:()=>l});var d=e(7273);function l(p,i={},c=null){const s=(0,d.S)(i,c);return s.append(p),s}function E(p,i=null,c={},s={}){const t=createActionLink(p,i,s);return l(t,c)}function f(p,i=null,c=null,s={},t={},a={}){const o=createActionLinkWithIcon(p,c,i,t,a);return l(o,s)}},5558:(A,m,e)=>{e.d(m,{n:()=>l});var d=e(6754);function l(E,f,p=null){if(typeof f!="object"||f===null)throw new TypeError("styles should be an object");const i=document.createElement(E);return(0,d.ZM)(i,f),p&&(i.innerHTML=p),i}},740:(A,m,e)=>{e.d(m,{S:()=>i,kU:()=>E,o5:()=>f});var d=e(5558),l=e(4921);function E(t,a,o){const n=c(t,"text",a);return n.value=o,n}function f(t,a,o,n,C,y){const u=c(t,"number",a);return u.value=o,u.step=n,u.min=C,u.max=y,u}function p(t,a,o){const n=c(t,"date",a);return n.value=o,n}function i(t,a,o){const n=c(t,"checkbox",a);return n.checked=o,n}function c(t={},a=null,o=null){const n=(0,d.n)("input",t);return a&&(n.type=a),o&&(n.addEventListener("keyup",(0,l.sg)(o,200)),n.addEventListener("change",(0,l.sg)(o,100))),n}function s(t,a,o){const n=createElement("select",t);return a&&n.addEventListener("change",a),n.value=o,n}},573:(A,m,e)=>{e.d(m,{Fi:()=>E,YA:()=>s,fI:()=>f});var d=e(4214);function l(u,v=document){return!!v.querySelector(u)}function E(u,v=document,b=!1){const O=v.querySelector(u);return b&&!O&&console.log(`No element found for selector: ${u}`),O}function f(u,v=document,b=!1){const O=v.querySelectorAll(u);return b&&!O.length&&console.log(`No elements found for selector: ${u}`),O}function p(u,v=1){let b=u;for(let O=0;O<v;O++){if(!b.parentElement)return null;b=b.parentElement}return b}function i(u,v,b){return[...u.querySelectorAll(v)].find(O=>O.textContent.trim().includes(b))}function c(u,v,b=!1,O=!1,R=null){const x=E(v,u);return s(x,b,O,R)}function s(u,v=!1,b=!1,O=null){if(!u)return O===null?(console.log("No element found"),null):O;const R=u.innerText;return o(R,v,b)}function t(u,v,b=!1){const O=u[v];return s(O,b)}function a(u,v=!1,b=!1){const O=u.textContent;return o(O,v,b)}function o(u,v,b){v&&(u=(0,d.zr)(u)),b&&(u=u.replace(",","."));const O=Number(u);return Number.isNaN(O)?(console.log(`Invalid number: ${u}`),0):O}function n(u){return[...u.childNodes].find(v=>v.nodeType===Node.TEXT_NODE)}function C(u){const v=b=>b.nodeType===Node.TEXT_NODE&&b.textContent.trim()!==""?[b]:[...b.childNodes].flatMap(v);return v(u)}function y(u){return normalizeSpacing(u.textContent)}},5539:(A,m,e)=>{e.d(m,{Bt:()=>l,UC:()=>a,kl:()=>s});function d(r,D){r.parentNode.insertBefore(D,r.nextSibling)}function l(r){r.style.display="none"}function E(r,D=1){const P=document.querySelector(r);P&&f(P,D)}function f(r,D=1){const P=getElementAncestor(r,D);P&&l(P)}function p(r,D,P){const I=findElementByText(r,D,P);I&&l(I)}function i(r){C(r),l(r)}function c(r){r.intersectionObserver||runOnceOnIntersection(r,()=>l(r))}function s(r){r.style.display=""}function t(r){const D=n(r);r.style.display=D}function a(r,D){D?l(r):s(r)}function o(r,D){D?c(r):(clearIntersectionObserver(r),s(r))}function n(r){return C(r),r.dataset.defaultDisplay}function C(r){if(r.dataset.defaultDisplay)return;const{display:D}=getComputedStyle(r);r.dataset.defaultDisplay=D}function y(){return{show:[],hide:[]}}function u(r,D,P){r?D.hide.push(P):D.show.push(P)}function v(r){r.show.forEach(s),r.hide.forEach(l)}function b(r,D,P=.3){D?R(r,P):O(r)}function O(r){r.style.opacity=""}function R(r,D=.3){r.style.opacity=D}function x(r){r.style.order=""}function w(r,D){r.style.order=D}function W(r,D,P,I="inline-flex"){D.style.display=r?I:"none",P.style.display=r?"none":I}function B(r,D=.3){r.style.transition="opacity 0.3s",r.style.opacity=D,h(r)}function V(r){r.style.opacity="",g(r)}function $(r){r.style.animation="loading-pulse 2.5s ease-in-out infinite",h(r)}function _(r){r.style.animation="",g(r)}function h(r){r.style.pointerEvents="none",r.style.cursor="wait"}function g(r){r.style.pointerEvents="",r.style.cursor=""}function N(r,D){const P=getFirstElement(D);P&&F(r,P)}function F(r,D){const P=createLink();P.href=r,D.parentNode.append(P),P.append(D)}function T(r,D){const P=getFirstElement(D);P&&L(r,P)}function L(r,D,P={}){const I=createLink(P);I.href=r,I.append(...D.childNodes),D.append(I)}function k(){const r=getURLQueryParam("scrollTo");if(!r)return;const D=document.getElementById(r);D?D.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function U(r,D,P=null){const I=`${D}-click-passed`,K=P?M=>findElementByText(M,r,P):M=>getFirstElement(r,M);return function(M){if(M.hasAttribute(I))return!1;const G=K(M);return G&&G.click(),M.setAttribute(I,""),!0}}function S(r,D,P="text/plain"){const I=new Blob([r],{type:P}),K=URL.createObjectURL(I),M=document.createElement("a");M.href=K,M.download=D,document.body.appendChild(M),M.click(),document.body.removeChild(M),requestAnimationFrame(()=>URL.revokeObjectURL(K))}},6754:(A,m,e)=>{e.d(m,{ZM:()=>d});function d(p,i){Object.assign(p.style,i)}function l(p,i="custom-global-style"){let c=document.getElementById(i);c||(c=document.createElement("style"),c.id=i,c.type="text/css",document.head.appendChild(c)),c.textContent=p}function E(p){return Object.entries(p).map(([i,c])=>`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${c};`).join(" ")}function f(p){return p?p.split(";").filter(i=>i.trim()!=="").reduce((i,c)=>{const[s,t]=c.split(":").map(o=>o.trim()),a=s.replace(/-([a-z])/g,(o,n)=>n.toUpperCase());return i[a]=t,i},{}):{}}},4921:(A,m,e)=>{e.d(m,{sg:()=>f,xk:()=>d});function d(t,a,o=null){const n=t.querySelector(a);return n?Promise.resolve(n):new Promise(C=>{const y=new MutationObserver(v);y.observe(t,{childList:!0,subtree:!0});let u;o&&(u=setTimeout(()=>{y.disconnect(),console.log(`No element found for selector: ${a}`),C(null)},o));function v(){const b=t.querySelector(a);b&&(u&&clearTimeout(u),y.disconnect(),C(b))}})}function l(t,a){return t.querySelector(a)?new Promise(n=>{const C=new MutationObserver(y);C.observe(t,{childList:!0,subtree:!0});function y(){t.querySelector(a)||(C.disconnect(),n())}}):Promise.resolve()}function E(t,a=400){return new Promise(o=>{let n;const C=new MutationObserver(()=>{clearTimeout(n),y()});function y(){n=setTimeout(()=>{C.disconnect(),o()},a)}y(),C.observe(t,{childList:!0,subtree:!0})})}function f(t,a=250){let o;return function(...n){const C=this;clearTimeout(o),o=setTimeout(()=>t.apply(C,n),a)}}async function p(t){document.visibilityState==="visible"?await t():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await t()},{once:!0})}function i(t,a){const o=new IntersectionObserver(n=>{n.forEach(C=>{C.isIntersecting&&(a(),c(t))})});t.intersectionObserver=o,o.observe(t)}function c(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}function s(t){t&&(t.disconnect(),t=null)}},3829:(A,m,e)=>{e.d(m,{Ay:()=>l,JE:()=>i,iG:()=>c});var d=e(8355);function l(o,n){return!E(o,n)}function E(o,n){if(!n||!n.value)return!0;const C=(0,d._7)(n.value);return f(o,C)}function f(o,n){if(!n||!n.length)return!0;const C=(o||"").toLowerCase();return n.every(y=>p(C,y))}function p(o,n){return n.some(({term:C,isNegative:y})=>{const u=o.includes(C);return y?!u:u})}function i(o,n){return n.value!=null&&o<n.value}function c(o,n){return n.value!=null&&o>n.value}function s(o,n){return n.value==null?!1:o<parseDateFromISO(n.value)}function t(o,n){return n.value==null?!1:o>parseDateFromISO(n.value)}function a(o,n){return n.value&&o!==n.value}},4521:(A,m,e)=>{e.d(m,{z:()=>l});var d=e(3048);function l(E,f=null){return{createGlobalFilter(p,i=null,c=E){return d.V.create(p,i,c)},createSectionFilter(p,i=null,c=E){if(!f)throw new Error("sectionId must be provided to use createSectionFilter.");return d.V.createWithCompositeKey(f,p,i,c)}}}},5884:(A,m,e)=>{e.d(m,{Hw:()=>c,Nm:()=>E,nW:()=>f});var d=e(5467),l=e(740);function E(s,t,a={},o={}){const n=(0,l.kU)(o,t.updateValueFromEvent,t.value);return(0,d.E2)(n,a,s)}function f(s,t,a,o,n,C={},y={}){const u=(0,l.o5)(y,t.updateValueFromEvent,t.value,a,o,n);return(0,d.E2)(u,C,s)}function p(s,t,a={},o={}){const n=createSelect(o,t.updateValueFromEvent,t.value);return createControl(n,a,s)}function i(s,t,a={},o={}){const n=createDateInput(o,t.updateValueFromEvent,t.value);return createControl(n,a,s)}function c(s,t,a={},o={}){const n=(0,l.S)(o,t.updateValueFromEvent,t.value);return(0,d.E2)(n,a,s)}},7877:(A,m,e)=>{e.d(m,{Ch:()=>o,E9:()=>l,H1:()=>y,HX:()=>E,VD:()=>t,Zi:()=>n,pW:()=>V});var d=e(5884);function l(_,h={},g={}){return(0,d.Nm)("\u041F\u043E\u0438\u0441\u043A: ",_,h,g)}function E(_,h={},g={},N=.1,F=3){return(0,d.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,N,F,5,h,g)}function f(_,h={},g={},N=.1,F=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,N,F,5,h,g)}function p(_,h={},g={}){return c("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,h,g)}function i(_,h={},g={}){return c("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,h,g)}function c(_,h,g={},N={}){return createNumberFilterControl(_,h,"1","1","999999",g,N)}function s(_,h={},g={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",_,h,g)}function t(_,h={},g={}){return a("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",_,h,g)}function a(_,h,g={},N={}){return(0,d.nW)(_,h,"5","0","100",g,N)}function o(_,h={},g={}){return(0,d.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",_,"5","0","100",h,g)}function n(_,h,g={},N={},F="250"){return(0,d.nW)(_,h,F,"0","1000000",g,N)}function C(_,h={},g={},N="25"){return n("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",_,h,g,N)}function y(_,h={},g={},N="25"){return n("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",_,h,g,N)}function u(_,h={},g={}){return v("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",_,h,g)}function v(_,h,g={},N={}){return createNumberFilterControl(_,h,"1","0","99999",g,N)}function b(_,h={},g={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",_,"1","2","8",h,g)}function O(_,h={},g={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",_,1,1,10,h,g)}function R(_,h={},g={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",_,h,g)}function x(_,h={},g={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",_,h,g)}function w(_,h={},g={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",_,h,g)}function W(_,h={},g={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",_,h,g)}function B(_,h={},g={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",_,h,g)}function V(_,h={},g={}){return(0,d.Hw)("\u0412\u043A\u043B: ",_,h,g)}function $(_,h,g={}){const N=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],F={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},T=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),L=[],k=()=>h?parseFloat(h.value)||0:_.value,U=()=>{const S=k();L.forEach(({button:r,value:D})=>{const I=D<=S?F.active:F.inactive;Object.assign(r.style,I)})};return N.forEach(({value:S,emoji:r,tooltip:D})=>{const P=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...g},r);P.title=D,P.type="button",P.addEventListener("click",I=>{I.preventDefault(),_.updateValue(S),h&&(h.value=S),U()}),P.addEventListener("mouseenter",()=>{S<=k()||(P.style.background=F.hover.background)}),P.addEventListener("mouseleave",()=>{U()}),L.push({button:P,value:S}),T.appendChild(P)}),U(),h&&(h.addEventListener("input",U),h.addEventListener("change",U)),T}},8355:(A,m,e)=>{e.d(m,{_7:()=>l});function d(t){if(!t)return[];const o=l(t).flat().filter(n=>n&&!n.isNegative&&n.term).map(n=>n.term);return[...new Set(o)]}function l(t){return t?t.toLowerCase().split(",").map(E).filter(Boolean):[]}function E(t){const a=t.split("/").map(n=>n.trim()).filter(Boolean);if(a.length===0)return null;const o=a.map(f).filter(Boolean);return o.length>0?o:null}function f(t){const a=t.startsWith("!"),o=a?t.slice(1).trim():t;return o?{term:o,isNegative:a}:null}function p(t,a){c(t,o=>o.style.display!=="none",a)}function i(t,a){c(t,o=>o.style.opacity==="",a)}function c(t,a,o){const n=[...t].filter(a).length,C=t.length;s(o,n,C)}function s(t,a,o){t.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${o}`}},5213:(A,m,e)=>{e.d(m,{b:()=>l});var d=e(7273);function l(E,f,p=!1,i="customFiltersContainer"){let c=E.querySelector(`#${i}`);if(c){if(!p)return;c.replaceChildren()}else c=(0,d.S)(),c.id=i;f(c,E)}},4444:(A,m,e)=>{e.d(m,{s:()=>d});function d(l){let p=2166136261;for(let i=0;i<l.length;i+=1){const c=l.charCodeAt(i);p^=c,p=Math.imul(p,16777619)}return p>>>0}},5081:(A,m,e)=>{e.d(m,{B:()=>E});var d=e(4444);function l(f){return(0,d.s)(f).toString(16).padStart(8,"0")}function E(f,p="common"){return f?l(f):p}},8200:(A,m,e)=>{e.d(m,{s:()=>d});function d(l){const{target:E}=l,{type:f}=E;switch(f){case"text":return`"${E.value}"`;case"number":return E.value;case"select-one":return E.value;case"date":return`"${E.value}"`;case"checkbox":return E.checked;default:return console.log(`Unknown input type: ${f}`),null}}},157:(A,m,e)=>{e.d(m,{Fg:()=>d,vx:()=>E});const d=window.GM_setValue,l=window.GM.setValue,E=window.GM_getValue},4639:(A,m,e)=>{e.d(m,{a:()=>f});var d=e(1870),l=e(8200),E=e(3976);class f extends d.j{constructor(i=null,c=null){super(i,c)}updateValueFromEvent=i=>{const c=(0,E.$)((0,l.s)(i));this.value!==c&&(this.value=c,this.onChangeIfDefined())}}},1870:(A,m,e)=>{e.d(m,{j:()=>d});class d{constructor(E,f){this.value=E,this.onChange=f}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,m,e)=>{e.d(m,{V:()=>p});var d=e(1870),l=e(8200),E=e(3976),f=e(157);class p extends d.j{constructor(c,s=null,t=null){super((0,f.vx)(c,s),t),this.storageKey=c,this.defaultValue=s}static create(c,s=null,t=null){return new p(c,s,t)}static createWithCompositeKey(c,s,t=null,a=null){const o=`${c}-${s}`;return new p(o,t,a)}updateValueFromEvent=c=>{const s=(0,l.s)(c),t=(0,E.$)(s);this.updateValue(t)};updateValue(c,s=!0){this.value!==c&&((0,f.Fg)(this.storageKey,c),this.value=c,s&&this.onChangeIfDefined())}clearValue(c=!1){this.updateValue(null,c)}resetValue(c=!1){this.updateValue(this.defaultValue,c)}}},3976:(A,m,e)=>{e.d(m,{$:()=>d});function d(l){return l===""?null:JSON.parse(l)}},4214:(A,m,e)=>{e.d(m,{zr:()=>l});function d(i){return i.replace(/\D/g,"")}function l(i){return i.replace(/[^\d.,-]/g,"")}function E(i){return i.replace(/\s/g,"")}function f(i){return i.charAt(0).toUpperCase()+i.slice(1)}function p(i){return i.replace(/\s+/g," ").trim()}},5406:(A,m,e)=>{e.d(m,{C$:()=>E,Fc:()=>d,W2:()=>t});function d(u,v="common",b=!1){const{pathname:O}=window.location;return l(O,u,v,b)}function l(u,v,b,O=!1){const R=u.split("/");v=v<0?R.length+v:v;const x=R[v]||b;return O&&console.log(`Pathname element: ${x}`),x}function E(u,v="common",b=!1){const O=d(u,"",b);return f(O,v,b)}function f(u,v,b){if(!u)return v;const O=u.split("-").at(-1);return b&&console.log(`Pathname element ending: ${O}`),O}function p(u,v,b="common",O=!1){const R=l(u,v,"",O);return f(R,b,O)}function i(u){return new URLSearchParams(window.location.search).get(u)}function c(u){return u.split("?")[0]}function s(u){return window.location.pathname.endsWith(u)}function t(u){return window.location.pathname.includes(u)}function a(u){return u.some(v=>t(v))}function o(...u){return window.location.pathname.split("/").some(b=>u.includes(b))}function n(u){try{const v=new URL(window.location.href);Object.entries(u).forEach(([b,O])=>{v.searchParams.set(b,O)}),window.location.href=v.toString()}catch(v){console.error("Failed to redirect:",v)}}function C(u,v=[]){const b=new AbortController;let O=!1;const R=w=>{const W=new URL(w),B={pathname:W.pathname};return v.forEach(V=>{B[V]=W.searchParams.get(V)}),B};let x=R(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(O)return;const w=R(window.navigation.currentEntry.url);if(Object.keys(x).some(B=>x[B]!==w[B])){x=w,O=!0;try{await u(w)}catch(B){console.error("URL observer error:",B)}finally{O=!1}}},{signal:b.signal}),()=>b.abort()}function y(u=[]){C(()=>window.location.reload(),u)}},4010:(A,m,e)=>{e.a(A,async(d,l)=>{try{let i=function(){return(0,p.W2)("details")};var E=e(1901),f=e(2344),p=e(5406);i()?await(0,E.K)():await(0,f.P)(),l()}catch(i){l(i)}},1)},1926:(A,m,e)=>{e.d(m,{i:()=>d});const d={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(A,m,e)=>{e.d(m,{Z:()=>E});var d=e(573),l=e(1926);function E(s,t,a,o){const n=(0,d.Fi)(t,s);return(f(n,o)||!n.hasAttribute(l.i.BALANCED_CASHBACK_PRICE))&&p(n,a,o),n}function f(s,t){if(s.hasAttribute(l.i.COUPON)){const a=+s.getAttribute(l.i.COUPON);return t!==a}return!!t}function p(s,t,a){let o=i(s);s.setAttribute(l.i.PRICE,o),a?(a<1?o=(o*(1-a)).toFixed():o-=a,s.setAttribute(l.i.COUPON,a)):s.removeAttribute(l.i.COUPON);const n=c(o,t),C=o-n;s.setAttribute(l.i.BALANCED_CASHBACK_PRICE,C);const y=`${o.toLocaleString()} (${C.toLocaleString()}) \u20BD`;s.innerText=y,s.title=`-${n.toLocaleString()}`}function i(s){return s.hasAttribute(l.i.PRICE)?+s.getAttribute(l.i.PRICE):(0,d.YA)(s,!0)}function c(s,t){const a=t/100;return(s*a/(1+a)).toFixed(0)}},4633:(A,m,e)=>{e.d(m,{r:()=>l});const d={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},l={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...d.INPUT,width:"180px"},NUMBER_INPUT:{...d.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(A,m,e)=>{e.d(m,{P:()=>$});var d=e(4921),l=e(5213),E=e(1319),f=e(5406),p=e(4639),i=e(3829),c=e(5884),s=e(5539),t=e(573),a=e(7877),o=e(1926),n=e(4633),C=e(4521),y=e(5081);const u={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var v=e(6754);const b=(0,y.B)((0,f.Fc)(2)),{createSectionFilter:O}=(0,C.z)(g,b),R=O("name-filter"),x=O("min-cashback-filter"),w=O("max-price-filter"),W=O("min-discount-filter"),B=O("seller-name-filter"),V=new p.a(!1,g);async function $(){await _();const F=await(0,d.xk)(document,"#app");new MutationObserver((0,d.sg)(_)).observe(F,{childList:!0,subtree:!0})}async function _(){const F=await(0,d.xk)(document,u.PRODUCT_CARD_LIST_HEADER);(0,l.b)(F,h);const T=F.parentNode;if(T.hasAttribute(o.i.OBSERVED))return;new MutationObserver((0,d.sg)(g,50)).observe(T,{childList:!0,subtree:!0}),T.setAttribute(o.i.OBSERVED,"")}function h(F,T){(0,v.ZM)(F,n.r.CONTAINER);const L=(0,a.E9)(R,n.r.CONTROL,n.r.TEXT_INPUT),k=(0,a.Ch)(x,n.r.CONTROL,n.r.NUMBER_INPUT),U=(0,a.H1)(w,n.r.CONTROL,n.r.NUMBER_INPUT,"250"),S=(0,a.VD)(W,n.r.CONTROL,n.r.NUMBER_INPUT),r=(0,c.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",B,n.r.CONTROL,n.r.TEXT_INPUT),D=(0,a.pW)(V,n.r.CONTROL,n.r.CHECKBOX_INPUT);F.append(L,k,U,S,r,D),T.append(F)}function g(){(0,t.fI)(u.PRODUCT_CARD).forEach(N)}function N(F){if(!V.value){(0,s.kl)(F);return}const T=(0,t.Fi)(u.PRODUCT_CARD_TITLE,F),L=(0,t.Fi)(u.PRODUCT_CARD_CASHBACK,F),k=(0,t.Fi)(u.PRODUCT_CARD_DISCOUNT,F);if(!T){(0,s.Bt)(F);return}const U=T.innerText,S=(0,t.YA)(L,!0,!1,0),r=Math.abs((0,t.YA)(k,!0,!1,0)),P=+(0,E.Z)(F,u.PRODUCT_CARD_PRICE,S).getAttribute(o.i.BALANCED_CASHBACK_PRICE),I=(0,t.Fi)(u.PRODUCT_CARD_SELLER_NAME,F),K=I?(0,i.Ay)(I.innerText,B):!1,M=(0,i.Ay)(U,R)||(0,i.JE)(S,x)||(0,i.iG)(P,w)||(0,i.JE)(r,W)||K;(0,s.UC)(F,M)}},1901:(A,m,e)=>{e.d(m,{K:()=>_});var d=e(4921),l=e(5081),E=e(5406),f=e(5213),p=e(4639),i=e(3829),c=e(5539),s=e(573),t=e(7877),a=e(5884),o=e(1319),n=e(1926),C=e(4633),y=e(4521);const u={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var v=e(6754);const b=(0,l.B)((0,E.C$)(3)),{createGlobalFilter:O,createSectionFilter:R}=(0,y.z)(N,b),x=R("min-cashback-filter"),w=R("max-price-filter"),W=R("max-discounted-price-filter"),B=O("min-seller-rating-filter"),V=new p.a(null,N),$=O("filter-enabled",!1);async function _(){await h();const T=await(0,d.xk)(document,u.APP);new MutationObserver((0,d.sg)(h)).observe(T,{childList:!0})}async function h(){const T=await(0,d.xk)(document,u.OFFERS_FILTER);(0,f.b)(T,g),N();const L=(0,s.Fi)(u.OFFERS_CONTAINER);if(L.hasAttribute(n.i.OBSERVED))return;new MutationObserver((0,d.sg)(N,50)).observe(L,{childList:!0,subtree:!0}),L.setAttribute(n.i.OBSERVED,"")}function g(T,L){(0,v.ZM)(T,C.r.CONTAINER);const k=(0,t.Ch)(x,C.r.CONTROL,C.r.NUMBER_INPUT),U=(0,t.H1)(w,C.r.CONTROL,C.r.NUMBER_INPUT,"250"),S=(0,t.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",W,C.r.CONTROL,C.r.NUMBER_INPUT),r=(0,t.HX)(B,C.r.CONTROL,C.r.NUMBER_INPUT),D=(0,a.nW)("\u041A\u0443\u043F\u043E\u043D: ",V,"500","0","100000",C.r.CONTROL,C.r.NUMBER_INPUT),P=(0,t.pW)($,C.r.CONTROL,C.r.CHECKBOX_INPUT);T.append(k,U,S,r,D,P),L.append(T)}function N(){(0,s.fI)(u.OFFER).forEach(F)}function F(T){if(!$.value){(0,c.kl)(T);return}const L=(0,s.Fi)(u.PRICE,T),k=(0,s.Fi)(u.CASHBACK,T),U=(0,s.Fi)(u.SELLER_RATING,T);if(!L||!k||!U){(0,c.Bt)(T);return}const S=(0,s.YA)(k,!0),r=(0,o.Z)(T,u.PRICE,S,V.value),D=+r.getAttribute(n.i.PRICE),P=+r.getAttribute(n.i.BALANCED_CASHBACK_PRICE),I=(0,s.YA)(U,!0),K=(0,i.JE)(S,x)||(0,i.iG)(D,w)||(0,i.iG)(P,W)||(0,i.JE)(I,B);(0,c.UC)(T,K)}}},j={};function H(A){var m=j[A];if(m!==void 0)return m.exports;var e=j[A]={exports:{}};return z[A](e,e.exports,H),e.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",d=E=>{E&&E.d<1&&(E.d=1,E.forEach(f=>f.r--),E.forEach(f=>f.r--?f.r++:f()))},l=E=>E.map(f=>{if(f!==null&&typeof f=="object"){if(f[A])return f;if(f.then){var p=[];p.d=0,f.then(s=>{i[m]=s,d(p)},s=>{i[e]=s,d(p)});var i={};return i[A]=s=>s(p),i}}var c={};return c[A]=s=>{},c[m]=f,c});H.a=(E,f,p)=>{var i;p&&((i=[]).d=-1);var c=new Set,s=E.exports,t,a,o,n=new Promise((C,y)=>{o=y,a=C});n[m]=s,n[A]=C=>(i&&C(i),c.forEach(C),n.catch(y=>{})),E.exports=n,f(C=>{t=l(C);var y,u=()=>t.map(b=>{if(b[e])throw b[e];return b[m]}),v=new Promise(b=>{y=()=>b(u),y.r=0;var O=R=>R!==i&&!c.has(R)&&(c.add(R),R&&!R.d&&(y.r++,R.push(y)));t.map(R=>R[A](O))});return y.r?v:u()},C=>(C?o(n[e]=C):a(s),d(i))),i&&i.d<0&&(i.d=0)}})(),H.d=(A,m)=>{for(var e in m)H.o(m,e)&&!H.o(A,e)&&Object.defineProperty(A,e,{enumerable:!0,get:m[e]})},H.o=(A,m)=>Object.prototype.hasOwnProperty.call(A,m);var Q=H(4010)})();})();
