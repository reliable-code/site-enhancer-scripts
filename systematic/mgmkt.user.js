// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76538729
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(T,m,e)=>{e.d(m,{E2:()=>d});var s=e(9928);function d(g,i={},o=null){const r=(0,s.Sw)(i,o);return r.append(g),r}function C(g,i=null,o={},r={}){const t=createActionLink(g,i,r);return d(t,o)}function f(g,i=null,o=null,r={},t={}){const c=createActionLinkWithIcon(g,o,i,t);return d(c,r)}},9928:(T,m,e)=>{e.d(m,{S:()=>i,Sw:()=>R,kU:()=>C,o5:()=>f});var s=e(4921),d=e(6754);function C(u,l,D){const F=o(u,"text",l);return F.value=D,F}function f(u,l,D,F,L,y){const B=o(u,"number",l);return B.value=D,B.step=F,B.min=L,B.max=y,B}function g(u,l,D){const F=o(u,"date",l);return F.value=D,F}function i(u,l,D){const F=o(u,"checkbox",l);return F.checked=D,F}function o(u={},l=null,D=null){const F=E("input",u);return l&&(F.type=l),D&&(F.addEventListener("keyup",(0,s.sg)(D,200)),F.addEventListener("change",(0,s.sg)(D,100))),F}function r(u={},l=null){return E("span",u,l)}function t(u={},l=null,D=null){const F=E("a",u,l);return D&&(F.href=D),F}function c(u,l=null,D={}){D.cursor||="pointer";const F=t(D,l);return u&&F.addEventListener("click",u),F}function P(u,l,D=null,F={},L={}){F.display||="inline-flex",F.alignItems||="center",F.gap||="0.25em";const y=c(u,D,F);return y.prepend(n(l,L)),y}function h(u={},l=null,D=null){const F=E("button",u,l);return D&&F.addEventListener("click",D),F}function R(u={},l=null){return E("div",u,l)}function v(u={}){return E("i",u)}function n(u,l={}){l.width||="1em",l.height||="1em",l.paddingBottom||="1px";const D=v(l);return D.setAttribute("data-lucide",u),D}function E(u,l,D=null){if(typeof l!="object"||l===null)throw new TypeError("styles should be an object");const F=document.createElement(u);return(0,d.ZM)(F,l),D&&(F.innerHTML=D),F}},573:(T,m,e)=>{e.d(m,{Fi:()=>C,YA:()=>r,fI:()=>f});var s=e(4214);function d(n,E=document){return!!E.querySelector(n)}function C(n,E=document,u=!1){const l=E.querySelector(n);return u&&!l&&console.log(`No element found for selector: ${n}`),l}function f(n,E=document,u=!1){const l=E.querySelectorAll(n);return u&&!l.length&&console.log(`No elements found for selector: ${n}`),l}function g(n,E=1){let u=n;for(let l=0;l<E;l++){if(!u.parentElement)return null;u=u.parentElement}return u}function i(n,E,u){return[...n.querySelectorAll(E)].find(l=>l.textContent.trim().includes(u))}function o(n,E,u=!1,l=!1,D=null){const F=C(E,n);return r(F,u,l,D)}function r(n,E=!1,u=!1,l=null){if(!n)return l===null?(console.log("No element found"),null):l;const D=n.innerText;return P(D,E,u)}function t(n,E,u=!1){const l=n[E];return r(l,u)}function c(n,E=!1,u=!1){const l=n.textContent;return P(l,E,u)}function P(n,E,u){E&&(n=(0,s.zr)(n)),u&&(n=n.replace(",","."));const l=Number(n);return Number.isNaN(l)?(console.log(`Invalid number: ${n}`),0):l}function h(n){return[...n.childNodes].find(E=>E.nodeType===Node.TEXT_NODE)}function R(n){const E=u=>u.nodeType===Node.TEXT_NODE&&u.textContent.trim()!==""?[u]:[...u.childNodes].flatMap(E);return E(n)}function v(n){return normalizeSpacing(n.textContent)}},5539:(T,m,e)=>{e.d(m,{Bt:()=>d,UC:()=>t,kl:()=>o});function s(a,p){a.parentNode.insertBefore(p,a.nextSibling)}function d(a){a.style.display="none"}function C(a,p=1){const b=document.querySelector(a);b&&f(b,p)}function f(a,p=1){const b=getElementAncestor(a,p);b&&d(b)}function g(a){h(a),d(a)}function i(a){a.intersectionObserver||runOnceOnIntersection(a,()=>d(a))}function o(a){a.style.display=""}function r(a){const p=P(a);a.style.display=p}function t(a,p){p?d(a):o(a)}function c(a,p){p?i(a):(clearIntersectionObserver(a),o(a))}function P(a){return h(a),a.defaultDisplay}function h(a){if(a.defaultDisplay)return;const{display:p}=getComputedStyle(a);a.defaultDisplay=p}function R(){return{show:[],hide:[]}}function v(a,p,b){a?p.hide.push(b):p.show.push(b)}function n(a){a.show.forEach(o),a.hide.forEach(d)}function E(a,p,b=.3){p?l(a,b):u(a)}function u(a){a.style.opacity=""}function l(a,p=.3){a.style.opacity=p}function D(a){a.style.order=""}function F(a,p){a.style.order=p}function L(a,p){a.style.background=p}function y(a,p){const b=getFirstElement(p);b&&B(a,b)}function B(a,p){const b=createLink();b.href=a,p.parentNode.append(b),b.append(p)}function V(a,p){const b=getFirstElement(p);b&&A(a,b)}function A(a,p){const b=createLink();b.href=a,b.append(...p.childNodes),p.append(b)}function O(){const a=getURLQueryParam("scrollTo");if(!a)return;const p=document.getElementById(a);p?p.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function _(a,p,b=null){const S=`${p}-click-passed`,U=b?N=>findElementByText(N,a,b):N=>getFirstElement(a,N);return function(N){if(N.hasAttribute(S))return!1;const x=U(N);return x&&x.click(),N.setAttribute(S,""),!0}}function I(a,p,b="text/plain"){const S=new Blob([a],{type:b}),U=URL.createObjectURL(S),N=document.createElement("a");N.href=U,N.download=p,document.body.appendChild(N),N.click(),document.body.removeChild(N),requestAnimationFrame(()=>URL.revokeObjectURL(U))}},6754:(T,m,e)=>{e.d(m,{ZM:()=>s});function s(g,i){Object.assign(g.style,i)}function d(g,i="custom-global-style"){let o=document.getElementById(i);o||(o=document.createElement("style"),o.id=i,o.type="text/css",document.head.appendChild(o)),o.textContent=g}function C(g){return Object.entries(g).map(([i,o])=>`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o};`).join(" ")}function f(g){return g?g.split(";").filter(i=>i.trim()!=="").reduce((i,o)=>{const[r,t]=o.split(":").map(P=>P.trim()),c=r.replace(/-([a-z])/g,(P,h)=>h.toUpperCase());return i[c]=t,i},{}):{}}},4921:(T,m,e)=>{e.d(m,{sg:()=>f,xk:()=>s});function s(t,c,P=null){const h=t.querySelector(c);return h?Promise.resolve(h):new Promise(R=>{const v=new MutationObserver(E);v.observe(t,{childList:!0,subtree:!0});let n;P&&(n=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${c}`),R(null)},P));function E(){const u=t.querySelector(c);u&&(n&&clearTimeout(n),v.disconnect(),R(u))}})}function d(t,c){return t.querySelector(c)?new Promise(h=>{const R=new MutationObserver(v);R.observe(t,{childList:!0,subtree:!0});function v(){t.querySelector(c)||(R.disconnect(),h())}}):Promise.resolve()}function C(t,c=400){return new Promise(P=>{let h;const R=new MutationObserver(()=>{clearTimeout(h),v()});function v(){h=setTimeout(()=>{R.disconnect(),P()},c)}v(),R.observe(t,{childList:!0,subtree:!0})})}function f(t,c=250){let P;return(...h)=>{clearTimeout(P),P=setTimeout(()=>t(...h),c)}}async function g(t){document.visibilityState==="visible"?await t():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await t()},{once:!0})}function i(t,c){const P=new IntersectionObserver(h=>{h.forEach(R=>{R.isIntersecting&&(c(),o(t))})});t.intersectionObserver=P,P.observe(t)}function o(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}function r(t){t&&(t.disconnect(),t=null)}},3829:(T,m,e)=>{e.d(m,{Ay:()=>d,JE:()=>f,iG:()=>g});var s=e(8355);function d(t,c){return!C(t,c)}function C(t,c){if(!c.value)return!0;const P=t.toLowerCase(),h=(0,s.R)(c),R=[],v=[];return h.forEach(n=>{if(n.startsWith("!")){const E=n.substring(1);E&&v.push(E)}else R.push(n)}),R.every(n=>P.includes(n))&&v.every(n=>!P.includes(n))}function f(t,c){return c.value!=null&&t<c.value}function g(t,c){return c.value!=null&&t>c.value}function i(t,c){return c.value==null?!1:t<parseDateFromISO(c.value)}function o(t,c){return c.value==null?!1:t>parseDateFromISO(c.value)}function r(t,c){return c.value&&t!==c.value}},4521:(T,m,e)=>{e.d(m,{z:()=>d});var s=e(3048);function d(C,f=null){return{createGlobalFilter(g,i=null,o=C){return s.V.create(g,i,o)},createSectionFilter(g,i=null,o=C){if(!f)throw new Error("sectionId must be provided to use createSectionFilter.");return s.V.createWithCompositeKey(f,g,i,o)}}}},5884:(T,m,e)=>{e.d(m,{Hw:()=>i,Nm:()=>C,nW:()=>f});var s=e(9928),d=e(5467);function C(o,r,t={},c={}){const P=(0,s.kU)(c,r.updateValueFromEvent,r.value);return(0,d.E2)(P,t,o)}function f(o,r,t,c,P,h={},R={}){const v=(0,s.o5)(R,r.updateValueFromEvent,r.value,t,c,P);return(0,d.E2)(v,h,o)}function g(o,r,t={},c={}){const P=createDateInput(c,r.updateValueFromEvent,r.value);return createControl(P,t,o)}function i(o,r,t={},c={}){const P=(0,s.S)(c,r.updateValueFromEvent,r.value);return(0,d.E2)(P,t,o)}},7877:(T,m,e)=>{e.d(m,{Ch:()=>P,E9:()=>d,H1:()=>v,HX:()=>C,VD:()=>t,Zi:()=>h,pW:()=>B});var s=e(5884);function d(A,O={},_={}){return(0,s.Nm)("\u041F\u043E\u0438\u0441\u043A: ",A,O,_)}function C(A,O={},_={},I=.1,a=3){return(0,s.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",A,I,a,5,O,_)}function f(A,O={},_={},I=.1,a=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",A,I,a,5,O,_)}function g(A,O={},_={}){return o("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",A,O,_)}function i(A,O={},_={}){return o("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",A,O,_)}function o(A,O,_={},I={}){return createNumberFilterControl(A,O,"1","1","999999",_,I)}function r(A,O={},_={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",A,O,_)}function t(A,O={},_={}){return c("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",A,O,_)}function c(A,O,_={},I={}){return(0,s.nW)(A,O,"5","0","100",_,I)}function P(A,O={},_={}){return(0,s.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",A,"5","0","100",O,_)}function h(A,O,_={},I={},a="250"){return(0,s.nW)(A,O,a,"0","1000000",_,I)}function R(A,O={},_={},I="25"){return h("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",A,O,_,I)}function v(A,O={},_={},I="25"){return h("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",A,O,_,I)}function n(A,O={},_={}){return E("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",A,O,_)}function E(A,O,_={},I={}){return createNumberFilterControl(A,O,"1","0","99999",_,I)}function u(A,O={},_={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",A,"1","2","7",O,_)}function l(A,O={},_={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",A,1,1,10,O,_)}function D(A,O={},_={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",A,O,_)}function F(A,O={},_={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",A,O,_)}function L(A,O={},_={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",A,O,_)}function y(A,O={},_={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",A,O,_)}function B(A,O={},_={}){return(0,s.Hw)("\u0412\u043A\u043B: ",A,O,_)}function V(A,O,_={}){const I=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],a={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},p=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),b=[],S=()=>O?parseFloat(O.value)||0:A.value,U=()=>{const N=S();b.forEach(({button:x,value:M})=>{const k=M<=N?a.active:a.inactive;Object.assign(x.style,k)})};return I.forEach(({value:N,emoji:x,tooltip:M})=>{const w=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",..._},x);w.title=M,w.type="button",w.addEventListener("click",k=>{k.preventDefault(),A.updateValue(N),O&&(O.value=N),U()}),w.addEventListener("mouseenter",()=>{N<=S()||(w.style.background=a.hover.background)}),w.addEventListener("mouseleave",()=>{U()}),b.push({button:w,value:N}),p.appendChild(w)}),U(),O&&(O.addEventListener("input",U),O.addEventListener("change",U)),p}},8355:(T,m,e)=>{e.d(m,{R:()=>s});function s(C){return C.value.toLowerCase().split(",").map(f=>f.trim()).filter(f=>f!=="")}function d(C){return s(C).filter(f=>!f.startsWith("!"))}},5213:(T,m,e)=>{e.d(m,{b:()=>C});var s=e(9928),d=e(573);function C(f,g,i=!1,o="customFiltersContainer"){let r=(0,d.Fi)(`#${o}`,f);if(r)if(i)r.remove();else return;r=(0,s.Sw)(),r.id=o,g(r,f)}},4444:(T,m,e)=>{e.d(m,{s:()=>s});function s(d){let g=2166136261;for(let i=0;i<d.length;i+=1){const o=d.charCodeAt(i);g^=o,g=Math.imul(g,16777619)}return g>>>0}},5081:(T,m,e)=>{e.d(m,{B:()=>C});var s=e(4444);function d(f){return(0,s.s)(f).toString(16).padStart(8,"0")}function C(f,g="common"){return f?d(f):g}},8200:(T,m,e)=>{e.d(m,{s:()=>s});function s(d){const{target:C}=d,{type:f}=C;switch(f){case"text":return`"${C.value}"`;case"number":return C.value;case"date":return`"${C.value}"`;case"checkbox":return C.checked;default:return console.log(`Unknown input type: ${f}`),null}}},157:(T,m,e)=>{e.d(m,{Fg:()=>s,vx:()=>C});const s=window.GM_setValue,d=window.GM.setValue,C=window.GM_getValue},4639:(T,m,e)=>{e.d(m,{a:()=>f});var s=e(1870),d=e(8200),C=e(3976);class f extends s.j{constructor(i=null,o=null){super(i,o)}updateValueFromEvent=i=>{const o=(0,C.$)((0,d.s)(i));this.value!==o&&(this.value=o,this.onChangeIfDefined())}}},1870:(T,m,e)=>{e.d(m,{j:()=>s});class s{constructor(C,f){this.value=C,this.onChange=f}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,m,e)=>{e.d(m,{V:()=>g});var s=e(1870),d=e(8200),C=e(3976),f=e(157);class g extends s.j{constructor(o,r=null,t=null){super((0,f.vx)(o,r),t),this.storageKey=o,this.defaultValue=r}static create(o,r=null,t=null){return new g(o,r,t)}static createWithCompositeKey(o,r,t=null,c=null){const P=`${o}-${r}`;return new g(P,t,c)}updateValueFromEvent=o=>{const r=(0,d.s)(o),t=(0,C.$)(r);this.updateValue(t)};updateValue(o,r=!0){this.value!==o&&((0,f.Fg)(this.storageKey,o),this.value=o,r&&this.onChangeIfDefined())}clearValue(o=!1){this.updateValue(null,o)}resetValue(o=!1){this.updateValue(this.defaultValue,o)}}},3976:(T,m,e)=>{e.d(m,{$:()=>s});function s(d){return d===""?null:JSON.parse(d)}},4214:(T,m,e)=>{e.d(m,{zr:()=>d});function s(i){return i.replace(/\D/g,"")}function d(i){return i.replace(/[^\d.,-]/g,"")}function C(i){return i.replace(/\s/g,"")}function f(i){return i.charAt(0).toUpperCase()+i.slice(1)}function g(i){return i.replace(/\s+/g," ").trim()}},5406:(T,m,e)=>{e.d(m,{C$:()=>C,Fc:()=>s,W2:()=>r});function s(v,n="common",E=!1){const{pathname:u}=window.location;return d(u,v,n,E)}function d(v,n,E,u=!1){const l=v.split("/");n=n<0?l.length+n:n;const D=l[n]||E;return u&&console.log(`Pathname element: ${D}`),D}function C(v,n="common",E=!1){const u=s(v,"",E);return f(u,n,E)}function f(v,n,E){if(!v)return n;const u=v.split("-").at(-1);return E&&console.log(`Pathname element ending: ${u}`),u}function g(v,n,E="common",u=!1){const l=d(v,n,"",u);return f(l,E,u)}function i(v){return new URLSearchParams(window.location.search).get(v)}function o(v){return v.split("?")[0]}function r(v){return window.location.pathname.includes(v)}function t(v){return v.some(n=>r(n))}function c(v){return window.location.pathname.split("/").some(E=>E===v)}function P(v){try{const n=new URL(window.location.href);Object.entries(v).forEach(([E,u])=>{n.searchParams.set(E,u)}),window.location.href=n.toString()}catch(n){console.error("Failed to redirect:",n)}}function h(v,n=[]){const E={pathname:window.location.pathname};n.forEach(L=>{E[L]=i(L)});let u=!1;async function l(){if(u)return;const L={pathname:window.location.pathname};if(n.forEach(y=>{L[y]=i(y)}),Object.keys(E).some(y=>E[y]!==L[y])){Object.assign(E,L),u=!0;try{await v()}catch(y){console.error("Error in URL observer callback:",y)}finally{u=!1}}}function D(){l().catch(L=>{console.error("Error in URL change handler:",L)})}let F=window.location.href;setInterval(()=>{window.location.href!==F&&(F=window.location.href,D())},200),window.addEventListener("popstate",D)}function R(v=[]){h(()=>window.location.reload(),v)}},4010:(T,m,e)=>{e.a(T,async(s,d)=>{try{let i=function(){return(0,g.W2)("details")};var C=e(1901),f=e(2344),g=e(5406);i()?await(0,C.K)():await(0,f.P)(),d()}catch(i){d(i)}},1)},1926:(T,m,e)=>{e.d(m,{i:()=>s});const s={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,m,e)=>{e.d(m,{Z:()=>C});var s=e(573),d=e(1926);function C(r,t,c,P){const h=(0,s.Fi)(t,r);return(f(h,P)||!h.hasAttribute(d.i.BALANCED_CASHBACK_PRICE))&&g(h,c,P),h}function f(r,t){if(r.hasAttribute(d.i.COUPON)){const c=+r.getAttribute(d.i.COUPON);return t!==c}return!!t}function g(r,t,c){let P=i(r);r.setAttribute(d.i.PRICE,P),c?(c<1?P=(P*(1-c)).toFixed():P-=c,r.setAttribute(d.i.COUPON,c)):r.removeAttribute(d.i.COUPON);const h=o(P,t),R=P-h;r.setAttribute(d.i.BALANCED_CASHBACK_PRICE,R);const v=`${P.toLocaleString()} (${R.toLocaleString()}) \u20BD`;r.innerText=v,r.title=`-${h.toLocaleString()}`}function i(r){return r.hasAttribute(d.i.PRICE)?+r.getAttribute(d.i.PRICE):(0,s.YA)(r,!0)}function o(r,t){const c=t/100;return(r*c/(1+c)).toFixed(0)}},4633:(T,m,e)=>{e.d(m,{r:()=>d});const s={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},d={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...s.INPUT,width:"180px"},NUMBER_INPUT:{...s.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,m,e)=>{e.d(m,{P:()=>A});var s=e(4921),d=e(5213),C=e(1319),f=e(5406),g=e(4639),i=e(3829),o=e(5884),r=e(5539),t=e(573),c=e(7877),P=e(1926),h=e(4633),R=e(4521),v=e(5081);const n={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var E=e(6754);const u=(0,v.B)((0,f.Fc)(2)),{createSectionFilter:l}=(0,R.z)(I,u),D=l("name-filter"),F=l("min-cashback-filter"),L=l("max-price-filter"),y=l("min-discount-filter"),B=l("seller-name-filter"),V=new g.a(!1,I);async function A(){await O();const p=await(0,s.xk)(document,"#app");new MutationObserver((0,s.sg)(O)).observe(p,{childList:!0,subtree:!0})}async function O(){const p=await(0,s.xk)(document,n.PRODUCT_CARD_LIST_HEADER);(0,d.b)(p,_);const b=p.parentNode;if(b.hasAttribute(P.i.OBSERVED))return;new MutationObserver((0,s.sg)(I,50)).observe(b,{childList:!0,subtree:!0}),b.setAttribute(P.i.OBSERVED,"")}function _(p,b){(0,E.ZM)(p,h.r.CONTAINER);const S=(0,c.E9)(D,h.r.CONTROL,h.r.TEXT_INPUT),U=(0,c.Ch)(F,h.r.CONTROL,h.r.NUMBER_INPUT),N=(0,c.H1)(L,h.r.CONTROL,h.r.NUMBER_INPUT,"250"),x=(0,c.VD)(y,h.r.CONTROL,h.r.NUMBER_INPUT),M=(0,o.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",B,h.r.CONTROL,h.r.TEXT_INPUT),w=(0,c.pW)(V,h.r.CONTROL,h.r.CHECKBOX_INPUT);p.append(S,U,N,x,M,w),b.append(p)}function I(){(0,t.fI)(n.PRODUCT_CARD).forEach(a)}function a(p){if(!V.value){(0,r.kl)(p);return}const b=(0,t.Fi)(n.PRODUCT_CARD_TITLE,p),S=(0,t.Fi)(n.PRODUCT_CARD_CASHBACK,p),U=(0,t.Fi)(n.PRODUCT_CARD_DISCOUNT,p);if(!b){(0,r.Bt)(p);return}const N=b.innerText,x=(0,t.YA)(S,!0,!1,0),M=Math.abs((0,t.YA)(U,!0,!1,0)),k=+(0,C.Z)(p,n.PRODUCT_CARD_PRICE,x).getAttribute(P.i.BALANCED_CASHBACK_PRICE),K=(0,t.Fi)(n.PRODUCT_CARD_SELLER_NAME,p),H=K?(0,i.Ay)(K.innerText,B):!1,G=(0,i.Ay)(N,D)||(0,i.JE)(x,F)||(0,i.iG)(k,L)||(0,i.JE)(M,y)||H;(0,r.UC)(p,G)}},1901:(T,m,e)=>{e.d(m,{K:()=>O});var s=e(4921),d=e(5081),C=e(5406),f=e(5213),g=e(4639),i=e(3829),o=e(5539),r=e(573),t=e(7877),c=e(5884),P=e(1319),h=e(1926),R=e(4633),v=e(4521);const n={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var E=e(6754);const u=(0,d.B)((0,C.C$)(3)),{createGlobalFilter:l,createSectionFilter:D}=(0,v.z)(a,u),F=D("min-cashback-filter"),L=D("max-price-filter"),y=D("max-discounted-price-filter"),B=l("min-seller-rating-filter"),V=new g.a(null,a),A=l("filter-enabled",!1);async function O(){await _();const b=await(0,s.xk)(document,n.APP);new MutationObserver((0,s.sg)(_)).observe(b,{childList:!0})}async function _(){const b=await(0,s.xk)(document,n.OFFERS_FILTER);(0,f.b)(b,I),a();const S=(0,r.Fi)(n.OFFERS_CONTAINER);if(S.hasAttribute(h.i.OBSERVED))return;new MutationObserver((0,s.sg)(a,50)).observe(S,{childList:!0,subtree:!0}),S.setAttribute(h.i.OBSERVED,"")}function I(b,S){(0,E.ZM)(b,R.r.CONTAINER);const U=(0,t.Ch)(F,R.r.CONTROL,R.r.NUMBER_INPUT),N=(0,t.H1)(L,R.r.CONTROL,R.r.NUMBER_INPUT,"250"),x=(0,t.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",y,R.r.CONTROL,R.r.NUMBER_INPUT),M=(0,t.HX)(B,R.r.CONTROL,R.r.NUMBER_INPUT),w=(0,c.nW)("\u041A\u0443\u043F\u043E\u043D: ",V,"500","0","100000",R.r.CONTROL,R.r.NUMBER_INPUT),k=(0,t.pW)(A,R.r.CONTROL,R.r.CHECKBOX_INPUT);b.append(U,N,x,M,w,k),S.append(b)}function a(){(0,r.fI)(n.OFFER).forEach(p)}function p(b){if(!A.value){(0,o.kl)(b);return}const S=(0,r.Fi)(n.PRICE,b),U=(0,r.Fi)(n.CASHBACK,b),N=(0,r.Fi)(n.SELLER_RATING,b);if(!S||!U||!N){(0,o.Bt)(b);return}const x=(0,r.YA)(U,!0),M=(0,P.Z)(b,n.PRICE,x,V.value),w=+M.getAttribute(h.i.PRICE),k=+M.getAttribute(h.i.BALANCED_CASHBACK_PRICE),K=(0,r.YA)(N,!0),H=(0,i.JE)(x,F)||(0,i.iG)(w,L)||(0,i.iG)(k,y)||(0,i.JE)(K,B);(0,o.UC)(b,H)}}},$={};function W(T){var m=$[T];if(m!==void 0)return m.exports;var e=$[T]={exports:{}};return j[T](e,e.exports,W),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=C=>{C&&C.d<1&&(C.d=1,C.forEach(f=>f.r--),C.forEach(f=>f.r--?f.r++:f()))},d=C=>C.map(f=>{if(f!==null&&typeof f=="object"){if(f[T])return f;if(f.then){var g=[];g.d=0,f.then(r=>{i[m]=r,s(g)},r=>{i[e]=r,s(g)});var i={};return i[T]=r=>r(g),i}}var o={};return o[T]=r=>{},o[m]=f,o});W.a=(C,f,g)=>{var i;g&&((i=[]).d=-1);var o=new Set,r=C.exports,t,c,P,h=new Promise((R,v)=>{P=v,c=R});h[m]=r,h[T]=R=>(i&&R(i),o.forEach(R),h.catch(v=>{})),C.exports=h,f(R=>{t=d(R);var v,n=()=>t.map(u=>{if(u[e])throw u[e];return u[m]}),E=new Promise(u=>{v=()=>u(n),v.r=0;var l=D=>D!==i&&!o.has(D)&&(o.add(D),D&&!D.d&&(v.r++,D.push(v)));t.map(D=>D[T](l))});return v.r?E:n()},R=>(R?P(h[e]=R):c(r),s(i))),i&&i.d<0&&(i.d=0)}})(),W.d=(T,m)=>{for(var e in m)W.o(m,e)&&!W.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:m[e]})},W.o=(T,m)=>Object.prototype.hasOwnProperty.call(T,m);var z=W(4010)})();})();
