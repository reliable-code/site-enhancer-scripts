// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77032510
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={7273:(A,E,e)=>{e.d(E,{S:()=>C});var l=e(5558);function d(f={},p=null){return createElement("span",f,p)}function C(f={},p=null){return(0,l.n)("div",f,p)}},5467:(A,E,e)=>{e.d(E,{E2:()=>d});var l=e(7273);function d(p,i={},c=null){const a=(0,l.S)(i,c);return a.append(p),a}function C(p,i=null,c={},a={}){const t=createActionLink(p,i,a);return d(t,c)}function f(p,i=null,c=null,a={},t={},s={}){const r=createActionLinkWithIcon(p,c,i,t,s);return d(r,a)}},5558:(A,E,e)=>{e.d(E,{n:()=>d});var l=e(6754);function d(C,f,p=null){if(typeof f!="object"||f===null)throw new TypeError("styles should be an object");const i=document.createElement(C);return(0,l.ZM)(i,f),p&&(i.innerHTML=p),i}},740:(A,E,e)=>{e.d(E,{S:()=>i,kU:()=>C,o5:()=>f});var l=e(5558),d=e(4921);function C(t,s,r){const n=c(t,"text",s);return n.value=r,n}function f(t,s,r,n,b,R){const u=c(t,"number",s);return u.value=r,u.step=n,u.min=b,u.max=R,u}function p(t,s,r){const n=c(t,"date",s);return n.value=r,n}function i(t,s,r){const n=c(t,"checkbox",s);return n.checked=r,n}function c(t={},s=null,r=null){const n=(0,l.n)("input",t);return s&&(n.type=s),r&&(n.addEventListener("keyup",(0,d.sg)(r,200)),n.addEventListener("change",(0,d.sg)(r,100))),n}function a(t,s,r){const n=createElement("select",t);return s&&n.addEventListener("change",s),n.value=r,n}},573:(A,E,e)=>{e.d(E,{Fi:()=>C,YA:()=>a,fI:()=>f});var l=e(4214);function d(u,v=document){return!!v.querySelector(u)}function C(u,v=document,h=!1){const D=v.querySelector(u);return h&&!D&&console.log(`No element found for selector: ${u}`),D}function f(u,v=document,h=!1){const D=v.querySelectorAll(u);return h&&!D.length&&console.log(`No elements found for selector: ${u}`),D}function p(u,v=1){let h=u;for(let D=0;D<v;D++){if(!h.parentElement)return null;h=h.parentElement}return h}function i(u,v,h){return[...u.querySelectorAll(v)].find(D=>D.textContent.trim().includes(h))}function c(u,v,h=!1,D=!1,F=null){const S=C(v,u);return a(S,h,D,F)}function a(u,v=!1,h=!1,D=null){if(!u)return D===null?(console.log("No element found"),null):D;const F=u.innerText;return r(F,v,h)}function t(u,v,h=!1){const D=u[v];return a(D,h)}function s(u,v=!1,h=!1){const D=u.textContent;return r(D,v,h)}function r(u,v,h){v&&(u=(0,l.zr)(u)),h&&(u=u.replace(",","."));const D=Number(u);return Number.isNaN(D)?(console.log(`Invalid number: ${u}`),0):D}function n(u){return[...u.childNodes].find(v=>v.nodeType===Node.TEXT_NODE)}function b(u){const v=h=>h.nodeType===Node.TEXT_NODE&&h.textContent.trim()!==""?[h]:[...h.childNodes].flatMap(v);return v(u)}function R(u){return normalizeSpacing(u.textContent)}},5539:(A,E,e)=>{e.d(E,{Bt:()=>d,UC:()=>t,kl:()=>c});function l(o,m){o.parentNode.insertBefore(m,o.nextSibling)}function d(o){o.style.display="none"}function C(o,m=1){const P=document.querySelector(o);P&&f(P,m)}function f(o,m=1){const P=getElementAncestor(o,m);P&&d(P)}function p(o){n(o),d(o)}function i(o){o.intersectionObserver||runOnceOnIntersection(o,()=>d(o))}function c(o){o.style.display=""}function a(o){const m=r(o);o.style.display=m}function t(o,m){m?d(o):c(o)}function s(o,m){m?i(o):(clearIntersectionObserver(o),c(o))}function r(o){return n(o),o.dataset.defaultDisplay}function n(o){if(o.dataset.defaultDisplay)return;const{display:m}=getComputedStyle(o);o.dataset.defaultDisplay=m}function b(){return{show:[],hide:[]}}function R(o,m,P){o?m.hide.push(P):m.show.push(P)}function u(o){o.show.forEach(c),o.hide.forEach(d)}function v(o,m,P=.3){m?D(o,P):h(o)}function h(o){o.style.opacity=""}function D(o,m=.3){o.style.opacity=m}function F(o){o.style.order=""}function S(o,m){o.style.order=m}function x(o,m,P,N="inline-flex"){m.style.display=o?N:"none",P.style.display=o?"none":N}function L(o,m){o.style.background=m}function I(o,m){const P=getFirstElement(m);P&&M(o,P)}function M(o,m){const P=createLink();P.href=o,m.parentNode.append(P),P.append(m)}function K(o,m){const P=getFirstElement(m);P&&O(o,P)}function O(o,m,P={}){const N=createLink(P);N.href=o,N.append(...m.childNodes),m.append(N)}function g(){const o=getURLQueryParam("scrollTo");if(!o)return;const m=document.getElementById(o);m?m.scrollIntoView():console.log(`Element with ID "${o}" was not found.`)}function _(o,m,P=null){const N=`${m}-click-passed`,U=P?T=>findElementByText(T,o,P):T=>getFirstElement(o,T);return function(T){if(T.hasAttribute(N))return!1;const w=U(T);return w&&w.click(),T.setAttribute(N,""),!0}}function y(o,m,P="text/plain"){const N=new Blob([o],{type:P}),U=URL.createObjectURL(N),T=document.createElement("a");T.href=U,T.download=m,document.body.appendChild(T),T.click(),document.body.removeChild(T),requestAnimationFrame(()=>URL.revokeObjectURL(U))}},6754:(A,E,e)=>{e.d(E,{ZM:()=>l});function l(p,i){Object.assign(p.style,i)}function d(p,i="custom-global-style"){let c=document.getElementById(i);c||(c=document.createElement("style"),c.id=i,c.type="text/css",document.head.appendChild(c)),c.textContent=p}function C(p){return Object.entries(p).map(([i,c])=>`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${c};`).join(" ")}function f(p){return p?p.split(";").filter(i=>i.trim()!=="").reduce((i,c)=>{const[a,t]=c.split(":").map(r=>r.trim()),s=a.replace(/-([a-z])/g,(r,n)=>n.toUpperCase());return i[s]=t,i},{}):{}}},4921:(A,E,e)=>{e.d(E,{sg:()=>f,xk:()=>l});function l(t,s,r=null){const n=t.querySelector(s);return n?Promise.resolve(n):new Promise(b=>{const R=new MutationObserver(v);R.observe(t,{childList:!0,subtree:!0});let u;r&&(u=setTimeout(()=>{R.disconnect(),console.log(`No element found for selector: ${s}`),b(null)},r));function v(){const h=t.querySelector(s);h&&(u&&clearTimeout(u),R.disconnect(),b(h))}})}function d(t,s){return t.querySelector(s)?new Promise(n=>{const b=new MutationObserver(R);b.observe(t,{childList:!0,subtree:!0});function R(){t.querySelector(s)||(b.disconnect(),n())}}):Promise.resolve()}function C(t,s=400){return new Promise(r=>{let n;const b=new MutationObserver(()=>{clearTimeout(n),R()});function R(){n=setTimeout(()=>{b.disconnect(),r()},s)}R(),b.observe(t,{childList:!0,subtree:!0})})}function f(t,s=250){let r;return function(...n){const b=this;clearTimeout(r),r=setTimeout(()=>t.apply(b,n),s)}}async function p(t){document.visibilityState==="visible"?await t():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await t()},{once:!0})}function i(t,s){const r=new IntersectionObserver(n=>{n.forEach(b=>{b.isIntersecting&&(s(),c(t))})});t.intersectionObserver=r,r.observe(t)}function c(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}function a(t){t&&(t.disconnect(),t=null)}},3829:(A,E,e)=>{e.d(E,{Ay:()=>d,JE:()=>i,iG:()=>c});var l=e(8355);function d(r,n){return!C(r,n)}function C(r,n){if(!n||!n.value)return!0;const b=(0,l._7)(n.value);return f(r,b)}function f(r,n){if(!n||!n.length)return!0;const b=(r||"").toLowerCase();return n.every(R=>p(b,R))}function p(r,n){return n.some(({term:b,isNegative:R})=>{const u=r.includes(b);return R?!u:u})}function i(r,n){return n.value!=null&&r<n.value}function c(r,n){return n.value!=null&&r>n.value}function a(r,n){return n.value==null?!1:r<parseDateFromISO(n.value)}function t(r,n){return n.value==null?!1:r>parseDateFromISO(n.value)}function s(r,n){return n.value&&r!==n.value}},4521:(A,E,e)=>{e.d(E,{z:()=>d});var l=e(3048);function d(C,f=null){return{createGlobalFilter(p,i=null,c=C){return l.V.create(p,i,c)},createSectionFilter(p,i=null,c=C){if(!f)throw new Error("sectionId must be provided to use createSectionFilter.");return l.V.createWithCompositeKey(f,p,i,c)}}}},5884:(A,E,e)=>{e.d(E,{Hw:()=>c,Nm:()=>C,nW:()=>f});var l=e(5467),d=e(740);function C(a,t,s={},r={}){const n=(0,d.kU)(r,t.updateValueFromEvent,t.value);return(0,l.E2)(n,s,a)}function f(a,t,s,r,n,b={},R={}){const u=(0,d.o5)(R,t.updateValueFromEvent,t.value,s,r,n);return(0,l.E2)(u,b,a)}function p(a,t,s={},r={}){const n=createSelect(r,t.updateValueFromEvent,t.value);return createControl(n,s,a)}function i(a,t,s={},r={}){const n=createDateInput(r,t.updateValueFromEvent,t.value);return createControl(n,s,a)}function c(a,t,s={},r={}){const n=(0,d.S)(r,t.updateValueFromEvent,t.value);return(0,l.E2)(n,s,a)}},7877:(A,E,e)=>{e.d(E,{Ch:()=>r,E9:()=>d,H1:()=>R,HX:()=>C,VD:()=>t,Zi:()=>n,pW:()=>M});var l=e(5884);function d(O,g={},_={}){return(0,l.Nm)("\u041F\u043E\u0438\u0441\u043A: ",O,g,_)}function C(O,g={},_={},y=.1,o=3){return(0,l.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,y,o,5,g,_)}function f(O,g={},_={},y=.1,o=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,y,o,5,g,_)}function p(O,g={},_={}){return c("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,g,_)}function i(O,g={},_={}){return c("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,g,_)}function c(O,g,_={},y={}){return createNumberFilterControl(O,g,"1","1","999999",_,y)}function a(O,g={},_={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",O,g,_)}function t(O,g={},_={}){return s("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",O,g,_)}function s(O,g,_={},y={}){return(0,l.nW)(O,g,"5","0","100",_,y)}function r(O,g={},_={}){return(0,l.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",O,"5","0","100",g,_)}function n(O,g,_={},y={},o="250"){return(0,l.nW)(O,g,o,"0","1000000",_,y)}function b(O,g={},_={},y="25"){return n("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",O,g,_,y)}function R(O,g={},_={},y="25"){return n("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",O,g,_,y)}function u(O,g={},_={}){return v("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",O,g,_)}function v(O,g,_={},y={}){return createNumberFilterControl(O,g,"1","0","99999",_,y)}function h(O,g={},_={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",O,"1","2","8",g,_)}function D(O,g={},_={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",O,1,1,10,g,_)}function F(O,g={},_={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",O,g,_)}function S(O,g={},_={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",O,g,_)}function x(O,g={},_={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",O,g,_)}function L(O,g={},_={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",O,g,_)}function I(O,g={},_={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",O,g,_)}function M(O,g={},_={}){return(0,l.Hw)("\u0412\u043A\u043B: ",O,g,_)}function K(O,g,_={}){const y=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],o={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},m=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),P=[],N=()=>g?parseFloat(g.value)||0:O.value,U=()=>{const T=N();P.forEach(({button:w,value:k})=>{const W=k<=T?o.active:o.inactive;Object.assign(w.style,W)})};return y.forEach(({value:T,emoji:w,tooltip:k})=>{const B=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",..._},w);B.title=k,B.type="button",B.addEventListener("click",W=>{W.preventDefault(),O.updateValue(T),g&&(g.value=T),U()}),B.addEventListener("mouseenter",()=>{T<=N()||(B.style.background=o.hover.background)}),B.addEventListener("mouseleave",()=>{U()}),P.push({button:B,value:T}),m.appendChild(B)}),U(),g&&(g.addEventListener("input",U),g.addEventListener("change",U)),m}},8355:(A,E,e)=>{e.d(E,{_7:()=>d});function l(t){if(!t)return[];const r=d(t).flat().filter(n=>n&&!n.isNegative&&n.term).map(n=>n.term);return[...new Set(r)]}function d(t){return t?t.toLowerCase().split(",").map(C).filter(Boolean):[]}function C(t){const s=t.split("/").map(n=>n.trim()).filter(Boolean);if(s.length===0)return null;const r=s.map(f).filter(Boolean);return r.length>0?r:null}function f(t){const s=t.startsWith("!"),r=s?t.slice(1).trim():t;return r?{term:r,isNegative:s}:null}function p(t,s){c(t,r=>r.style.display!=="none",s)}function i(t,s){c(t,r=>r.style.opacity==="",s)}function c(t,s,r){const n=[...t].filter(s).length,b=t.length;a(r,n,b)}function a(t,s,r){t.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${s} \u0438\u0437 ${r}`}},5213:(A,E,e)=>{e.d(E,{b:()=>C});var l=e(573),d=e(7273);function C(f,p,i=!1,c="customFiltersContainer"){let a=(0,l.Fi)(`#${c}`,f);if(a)if(i)a.remove();else return;a=(0,d.S)(),a.id=c,p(a,f)}},4444:(A,E,e)=>{e.d(E,{s:()=>l});function l(d){let p=2166136261;for(let i=0;i<d.length;i+=1){const c=d.charCodeAt(i);p^=c,p=Math.imul(p,16777619)}return p>>>0}},5081:(A,E,e)=>{e.d(E,{B:()=>C});var l=e(4444);function d(f){return(0,l.s)(f).toString(16).padStart(8,"0")}function C(f,p="common"){return f?d(f):p}},8200:(A,E,e)=>{e.d(E,{s:()=>l});function l(d){const{target:C}=d,{type:f}=C;switch(f){case"text":return`"${C.value}"`;case"number":return C.value;case"select-one":return C.value;case"date":return`"${C.value}"`;case"checkbox":return C.checked;default:return console.log(`Unknown input type: ${f}`),null}}},157:(A,E,e)=>{e.d(E,{Fg:()=>l,vx:()=>C});const l=window.GM_setValue,d=window.GM.setValue,C=window.GM_getValue},4639:(A,E,e)=>{e.d(E,{a:()=>f});var l=e(1870),d=e(8200),C=e(3976);class f extends l.j{constructor(i=null,c=null){super(i,c)}updateValueFromEvent=i=>{const c=(0,C.$)((0,d.s)(i));this.value!==c&&(this.value=c,this.onChangeIfDefined())}}},1870:(A,E,e)=>{e.d(E,{j:()=>l});class l{constructor(C,f){this.value=C,this.onChange=f}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,E,e)=>{e.d(E,{V:()=>p});var l=e(1870),d=e(8200),C=e(3976),f=e(157);class p extends l.j{constructor(c,a=null,t=null){super((0,f.vx)(c,a),t),this.storageKey=c,this.defaultValue=a}static create(c,a=null,t=null){return new p(c,a,t)}static createWithCompositeKey(c,a,t=null,s=null){const r=`${c}-${a}`;return new p(r,t,s)}updateValueFromEvent=c=>{const a=(0,d.s)(c),t=(0,C.$)(a);this.updateValue(t)};updateValue(c,a=!0){this.value!==c&&((0,f.Fg)(this.storageKey,c),this.value=c,a&&this.onChangeIfDefined())}clearValue(c=!1){this.updateValue(null,c)}resetValue(c=!1){this.updateValue(this.defaultValue,c)}}},3976:(A,E,e)=>{e.d(E,{$:()=>l});function l(d){return d===""?null:JSON.parse(d)}},4214:(A,E,e)=>{e.d(E,{zr:()=>d});function l(i){return i.replace(/\D/g,"")}function d(i){return i.replace(/[^\d.,-]/g,"")}function C(i){return i.replace(/\s/g,"")}function f(i){return i.charAt(0).toUpperCase()+i.slice(1)}function p(i){return i.replace(/\s+/g," ").trim()}},5406:(A,E,e)=>{e.d(E,{C$:()=>C,Fc:()=>l,W2:()=>a});function l(u,v="common",h=!1){const{pathname:D}=window.location;return d(D,u,v,h)}function d(u,v,h,D=!1){const F=u.split("/");v=v<0?F.length+v:v;const S=F[v]||h;return D&&console.log(`Pathname element: ${S}`),S}function C(u,v="common",h=!1){const D=l(u,"",h);return f(D,v,h)}function f(u,v,h){if(!u)return v;const D=u.split("-").at(-1);return h&&console.log(`Pathname element ending: ${D}`),D}function p(u,v,h="common",D=!1){const F=d(u,v,"",D);return f(F,h,D)}function i(u){return new URLSearchParams(window.location.search).get(u)}function c(u){return u.split("?")[0]}function a(u){return window.location.pathname.includes(u)}function t(u){return u.some(v=>a(v))}function s(...u){return window.location.pathname.split("/").some(h=>u.includes(h))}function r(u){try{const v=new URL(window.location.href);Object.entries(u).forEach(([h,D])=>{v.searchParams.set(h,D)}),window.location.href=v.toString()}catch(v){console.error("Failed to redirect:",v)}}function n(u,v=[]){const h=new AbortController;let D=!1;const F=x=>{const L=new URL(x),I={pathname:L.pathname};return v.forEach(M=>{I[M]=L.searchParams.get(M)}),I};let S=F(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(D)return;const x=F(window.navigation.currentEntry.url);if(Object.keys(S).some(I=>S[I]!==x[I])){S=x,D=!0;try{await u(x)}catch(I){console.error("URL observer error:",I)}finally{D=!1}}},{signal:h.signal}),()=>h.abort()}function b(u,v=[]){const h={pathname:window.location.pathname};v.forEach(L=>{h[L]=i(L)});let D=!1;async function F(){if(D)return;const L={pathname:window.location.pathname};if(v.forEach(I=>{L[I]=i(I)}),Object.keys(h).some(I=>h[I]!==L[I])){Object.assign(h,L),D=!0;try{await u()}catch(I){console.error("Error in URL observer callback:",I)}finally{D=!1}}}function S(){F().catch(L=>{console.error("Error in URL change handler:",L)})}let x=window.location.href;setInterval(()=>{window.location.href!==x&&(console.log("URL changed:",window.location.href),x=window.location.href,S())},200),window.addEventListener("popstate",S)}function R(u=[]){b(()=>window.location.reload(),u)}},4010:(A,E,e)=>{e.a(A,async(l,d)=>{try{let i=function(){return(0,p.W2)("details")};var C=e(1901),f=e(2344),p=e(5406);i()?await(0,C.K)():await(0,f.P)(),d()}catch(i){d(i)}},1)},1926:(A,E,e)=>{e.d(E,{i:()=>l});const l={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(A,E,e)=>{e.d(E,{Z:()=>C});var l=e(573),d=e(1926);function C(a,t,s,r){const n=(0,l.Fi)(t,a);return(f(n,r)||!n.hasAttribute(d.i.BALANCED_CASHBACK_PRICE))&&p(n,s,r),n}function f(a,t){if(a.hasAttribute(d.i.COUPON)){const s=+a.getAttribute(d.i.COUPON);return t!==s}return!!t}function p(a,t,s){let r=i(a);a.setAttribute(d.i.PRICE,r),s?(s<1?r=(r*(1-s)).toFixed():r-=s,a.setAttribute(d.i.COUPON,s)):a.removeAttribute(d.i.COUPON);const n=c(r,t),b=r-n;a.setAttribute(d.i.BALANCED_CASHBACK_PRICE,b);const R=`${r.toLocaleString()} (${b.toLocaleString()}) \u20BD`;a.innerText=R,a.title=`-${n.toLocaleString()}`}function i(a){return a.hasAttribute(d.i.PRICE)?+a.getAttribute(d.i.PRICE):(0,l.YA)(a,!0)}function c(a,t){const s=t/100;return(a*s/(1+s)).toFixed(0)}},4633:(A,E,e)=>{e.d(E,{r:()=>d});const l={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},d={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...l.INPUT,width:"180px"},NUMBER_INPUT:{...l.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(A,E,e)=>{e.d(E,{P:()=>K});var l=e(4921),d=e(5213),C=e(1319),f=e(5406),p=e(4639),i=e(3829),c=e(5884),a=e(5539),t=e(573),s=e(7877),r=e(1926),n=e(4633),b=e(4521),R=e(5081);const u={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var v=e(6754);const h=(0,R.B)((0,f.Fc)(2)),{createSectionFilter:D}=(0,b.z)(_,h),F=D("name-filter"),S=D("min-cashback-filter"),x=D("max-price-filter"),L=D("min-discount-filter"),I=D("seller-name-filter"),M=new p.a(!1,_);async function K(){await O();const o=await(0,l.xk)(document,"#app");new MutationObserver((0,l.sg)(O)).observe(o,{childList:!0,subtree:!0})}async function O(){const o=await(0,l.xk)(document,u.PRODUCT_CARD_LIST_HEADER);(0,d.b)(o,g);const m=o.parentNode;if(m.hasAttribute(r.i.OBSERVED))return;new MutationObserver((0,l.sg)(_,50)).observe(m,{childList:!0,subtree:!0}),m.setAttribute(r.i.OBSERVED,"")}function g(o,m){(0,v.ZM)(o,n.r.CONTAINER);const P=(0,s.E9)(F,n.r.CONTROL,n.r.TEXT_INPUT),N=(0,s.Ch)(S,n.r.CONTROL,n.r.NUMBER_INPUT),U=(0,s.H1)(x,n.r.CONTROL,n.r.NUMBER_INPUT,"250"),T=(0,s.VD)(L,n.r.CONTROL,n.r.NUMBER_INPUT),w=(0,c.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",I,n.r.CONTROL,n.r.TEXT_INPUT),k=(0,s.pW)(M,n.r.CONTROL,n.r.CHECKBOX_INPUT);o.append(P,N,U,T,w,k),m.append(o)}function _(){(0,t.fI)(u.PRODUCT_CARD).forEach(y)}function y(o){if(!M.value){(0,a.kl)(o);return}const m=(0,t.Fi)(u.PRODUCT_CARD_TITLE,o),P=(0,t.Fi)(u.PRODUCT_CARD_CASHBACK,o),N=(0,t.Fi)(u.PRODUCT_CARD_DISCOUNT,o);if(!m){(0,a.Bt)(o);return}const U=m.innerText,T=(0,t.YA)(P,!0,!1,0),w=Math.abs((0,t.YA)(N,!0,!1,0)),B=+(0,C.Z)(o,u.PRODUCT_CARD_PRICE,T).getAttribute(r.i.BALANCED_CASHBACK_PRICE),W=(0,t.Fi)(u.PRODUCT_CARD_SELLER_NAME,o),H=W?(0,i.Ay)(W.innerText,I):!1,G=(0,i.Ay)(U,F)||(0,i.JE)(T,S)||(0,i.iG)(B,x)||(0,i.JE)(w,L)||H;(0,a.UC)(o,G)}},1901:(A,E,e)=>{e.d(E,{K:()=>O});var l=e(4921),d=e(5081),C=e(5406),f=e(5213),p=e(4639),i=e(3829),c=e(5539),a=e(573),t=e(7877),s=e(5884),r=e(1319),n=e(1926),b=e(4633),R=e(4521);const u={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var v=e(6754);const h=(0,d.B)((0,C.C$)(3)),{createGlobalFilter:D,createSectionFilter:F}=(0,R.z)(y,h),S=F("min-cashback-filter"),x=F("max-price-filter"),L=F("max-discounted-price-filter"),I=D("min-seller-rating-filter"),M=new p.a(null,y),K=D("filter-enabled",!1);async function O(){await g();const m=await(0,l.xk)(document,u.APP);new MutationObserver((0,l.sg)(g)).observe(m,{childList:!0})}async function g(){const m=await(0,l.xk)(document,u.OFFERS_FILTER);(0,f.b)(m,_),y();const P=(0,a.Fi)(u.OFFERS_CONTAINER);if(P.hasAttribute(n.i.OBSERVED))return;new MutationObserver((0,l.sg)(y,50)).observe(P,{childList:!0,subtree:!0}),P.setAttribute(n.i.OBSERVED,"")}function _(m,P){(0,v.ZM)(m,b.r.CONTAINER);const N=(0,t.Ch)(S,b.r.CONTROL,b.r.NUMBER_INPUT),U=(0,t.H1)(x,b.r.CONTROL,b.r.NUMBER_INPUT,"250"),T=(0,t.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",L,b.r.CONTROL,b.r.NUMBER_INPUT),w=(0,t.HX)(I,b.r.CONTROL,b.r.NUMBER_INPUT),k=(0,s.nW)("\u041A\u0443\u043F\u043E\u043D: ",M,"500","0","100000",b.r.CONTROL,b.r.NUMBER_INPUT),B=(0,t.pW)(K,b.r.CONTROL,b.r.CHECKBOX_INPUT);m.append(N,U,T,w,k,B),P.append(m)}function y(){(0,a.fI)(u.OFFER).forEach(o)}function o(m){if(!K.value){(0,c.kl)(m);return}const P=(0,a.Fi)(u.PRICE,m),N=(0,a.Fi)(u.CASHBACK,m),U=(0,a.Fi)(u.SELLER_RATING,m);if(!P||!N||!U){(0,c.Bt)(m);return}const T=(0,a.YA)(N,!0),w=(0,r.Z)(m,u.PRICE,T,M.value),k=+w.getAttribute(n.i.PRICE),B=+w.getAttribute(n.i.BALANCED_CASHBACK_PRICE),W=(0,a.YA)(U,!0),H=(0,i.JE)(T,S)||(0,i.iG)(k,x)||(0,i.iG)(B,L)||(0,i.JE)(W,I);(0,c.UC)(m,H)}}},$={};function V(A){var E=$[A];if(E!==void 0)return E.exports;var e=$[A]={exports:{}};return j[A](e,e.exports,V),e.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",l=C=>{C&&C.d<1&&(C.d=1,C.forEach(f=>f.r--),C.forEach(f=>f.r--?f.r++:f()))},d=C=>C.map(f=>{if(f!==null&&typeof f=="object"){if(f[A])return f;if(f.then){var p=[];p.d=0,f.then(a=>{i[E]=a,l(p)},a=>{i[e]=a,l(p)});var i={};return i[A]=a=>a(p),i}}var c={};return c[A]=a=>{},c[E]=f,c});V.a=(C,f,p)=>{var i;p&&((i=[]).d=-1);var c=new Set,a=C.exports,t,s,r,n=new Promise((b,R)=>{r=R,s=b});n[E]=a,n[A]=b=>(i&&b(i),c.forEach(b),n.catch(R=>{})),C.exports=n,f(b=>{t=d(b);var R,u=()=>t.map(h=>{if(h[e])throw h[e];return h[E]}),v=new Promise(h=>{R=()=>h(u),R.r=0;var D=F=>F!==i&&!c.has(F)&&(c.add(F),F&&!F.d&&(R.r++,F.push(R)));t.map(F=>F[A](D))});return R.r?v:u()},b=>(b?r(n[e]=b):s(a),l(i))),i&&i.d<0&&(i.d=0)}})(),V.d=(A,E)=>{for(var e in E)V.o(E,e)&&!V.o(A,e)&&Object.defineProperty(A,e,{enumerable:!0,get:E[e]})},V.o=(A,E)=>Object.prototype.hasOwnProperty.call(A,E);var z=V(4010)})();})();
