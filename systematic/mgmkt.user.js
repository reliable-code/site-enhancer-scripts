// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.75656429
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var G={5467:(T,m,e)=>{e.d(m,{E2:()=>d});var c=e(9928);function d(C,r={},t=null){const n=(0,c.Sw)(r,t);return n.append(C),n}function p(C,r=null,t={},n={}){const f=createActionLink(C,r,n);return d(f,t)}function s(C,r=null,t=null,n={},f={}){const v=createActionLinkWithIcon(C,t,r,f);return d(v,n)}},9928:(T,m,e)=>{e.d(m,{S:()=>C,Sw:()=>h,kU:()=>p,o5:()=>s});var c=e(4921),d=e(6754);function p(i,u,l){const E=r(i,"text",u);return E.value=l,E}function s(i,u,l,E,I,y){const U=r(i,"number",u);return U.value=l,U.step=E,U.min=I,U.max=y,U}function C(i,u,l){const E=r(i,"checkbox",u);return E.checked=l,E}function r(i={},u=null,l=null){const E=o("input",i);return u&&(E.type=u),l&&(E.addEventListener("keyup",(0,c.sg)(l,200)),E.addEventListener("change",(0,c.sg)(l,100))),E}function t(i={},u=null){return o("span",i,u)}function n(i={},u=null,l=null){const E=o("a",i,u);return l&&(E.href=l),E}function f(i,u=null,l={}){l.cursor||="pointer";const E=n(l,u);return i&&E.addEventListener("click",i),E}function v(i,u,l=null,E={},I={}){E.display||="inline-flex",E.alignItems||="center",E.gap||="0.25em";const y=f(i,l,E);return y.prepend(P(u,I)),y}function b(i={},u=null,l=null){const E=o("button",i,u);return l&&E.addEventListener("click",l),E}function h(i={},u=null){return o("div",i,u)}function g(i={}){return o("i",i)}function P(i,u={}){u.width||="1em",u.height||="1em",u.paddingBottom||="1px";const l=g(u);return l.setAttribute("data-lucide",i),l}function o(i,u,l=null){if(typeof u!="object"||u===null)throw new TypeError("styles should be an object");const E=document.createElement(i);return(0,d.ZM)(E,u),l&&(E.innerHTML=l),E}},573:(T,m,e)=>{e.d(m,{Fi:()=>p,YA:()=>n,fI:()=>s});var c=e(4214);function d(o,i=document){return!!i.querySelector(o)}function p(o,i=document,u=!1){const l=i.querySelector(o);return u&&!l&&console.log(`No element found for selector: ${o}`),l}function s(o,i=document,u=!1){const l=i.querySelectorAll(o);return u&&!l.length&&console.log(`No elements found for selector: ${o}`),l}function C(o,i=1){let u=o;for(let l=0;l<i;l++){if(!u.parentElement)return null;u=u.parentElement}return u}function r(o,i,u){return[...o.querySelectorAll(i)].find(l=>l.textContent.trim().includes(u))}function t(o,i,u=!1,l=!1,E=null){const I=p(i,o);return n(I,u,l,E)}function n(o,i=!1,u=!1,l=null){if(!o)return l===null?(console.log("No element found"),null):l;const E=o.innerText;return b(E,i,u)}function f(o,i,u=!1){const l=o[i];return n(l,u)}function v(o,i=!1,u=!1){const l=o.textContent;return b(l,i,u)}function b(o,i,u){i&&(o=(0,c.zr)(o)),u&&(o=o.replace(",","."));const l=Number(o);return Number.isNaN(l)?(console.log(`Invalid number: ${o}`),0):l}function h(o){return[...o.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function g(o){const i=u=>u.nodeType===Node.TEXT_NODE&&u.textContent.trim()!==""?[u]:[...u.childNodes].flatMap(i);return i(o)}function P(o){return normalizeSpacing(o.textContent)}},5539:(T,m,e)=>{e.d(m,{Bt:()=>d,UC:()=>f,kl:()=>t});function c(a,D){a.parentNode.insertBefore(D,a.nextSibling)}function d(a){a.style.display="none"}function p(a,D=1){const R=document.querySelector(a);R&&s(R,D)}function s(a,D=1){const R=getElementAncestor(a,D);R&&d(R)}function C(a){h(a),d(a)}function r(a){a.intersectionObserver||runOnceOnIntersection(a,()=>d(a))}function t(a){a.style.display=""}function n(a){const D=b(a);a.style.display=D}function f(a,D){D?d(a):t(a)}function v(a,D){D?r(a):(clearIntersectionObserver(a),t(a))}function b(a){return h(a),a.defaultDisplay}function h(a){if(a.defaultDisplay)return;const{display:D}=getComputedStyle(a);a.defaultDisplay=D}function g(){return{show:[],hide:[]}}function P(a,D,R){a?D.hide.push(R):D.show.push(R)}function o(a){a.show.forEach(t),a.hide.forEach(d)}function i(a,D,R=.3){D?l(a,R):u(a)}function u(a){a.style.opacity=""}function l(a,D=.3){a.style.opacity=D}function E(a){a.style.order=""}function I(a,D){a.style.order=D}function y(a,D){a.style.background=D}function U(a,D){const R=getFirstElement(D);R&&O(a,R)}function O(a,D){const R=createLink();R.href=a,D.parentNode.append(R),R.append(D)}function _(a,D){const R=getFirstElement(D);R&&A(a,R)}function A(a,D){const R=createLink();R.href=a,R.append(...D.childNodes),D.append(R)}function F(){const a=getURLQueryParam("scrollTo");if(!a)return;const D=document.getElementById(a);D?D.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function w(a,D,R="text/plain"){const N=new Blob([a],{type:R}),L=URL.createObjectURL(N),S=document.createElement("a");S.href=L,S.download=D,document.body.appendChild(S),S.click(),document.body.removeChild(S),requestAnimationFrame(()=>URL.revokeObjectURL(L))}},6754:(T,m,e)=>{e.d(m,{ZM:()=>c});function c(C,r){Object.assign(C.style,r)}function d(C,r="custom-global-style"){let t=document.getElementById(r);t||(t=document.createElement("style"),t.id=r,t.type="text/css",document.head.appendChild(t)),t.textContent=C}function p(C){return Object.entries(C).map(([r,t])=>`${r.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function s(C){return C?C.split(";").filter(r=>r.trim()!=="").reduce((r,t)=>{const[n,f]=t.split(":").map(b=>b.trim()),v=n.replace(/-([a-z])/g,(b,h)=>h.toUpperCase());return r[v]=f,r},{}):{}}},4921:(T,m,e)=>{e.d(m,{sg:()=>s,xk:()=>c});function c(t,n,f=null){const v=t.querySelector(n);return v?Promise.resolve(v):new Promise(b=>{const h=new MutationObserver(P);h.observe(t,{childList:!0,subtree:!0});let g;f&&(g=setTimeout(()=>{h.disconnect(),console.log(`No element found for selector: ${n}`),b(null)},f));function P(){const o=t.querySelector(n);o&&(g&&clearTimeout(g),h.disconnect(),b(o))}})}function d(t,n){return t.querySelector(n)?new Promise(v=>{const b=new MutationObserver(h);b.observe(t,{childList:!0,subtree:!0});function h(){t.querySelector(n)||(b.disconnect(),v())}}):Promise.resolve()}function p(t,n=400){return new Promise(f=>{let v;const b=new MutationObserver(()=>{clearTimeout(v),h()});function h(){v=setTimeout(()=>{b.disconnect(),f()},n)}h(),b.observe(t,{childList:!0,subtree:!0})})}function s(t,n=250){let f;return(...v)=>{clearTimeout(f),f=setTimeout(()=>t(...v),n)}}function C(t,n){const f=new IntersectionObserver(v=>{v.forEach(b=>{b.isIntersecting&&(n(),r(t))})});t.intersectionObserver=f,f.observe(t)}function r(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(T,m,e)=>{e.d(m,{Ay:()=>d,JE:()=>s,iG:()=>C});var c=e(8355);function d(t,n){return!p(t,n)}function p(t,n){if(!n.value)return!0;const f=t.toLowerCase(),v=(0,c.R)(n),b=[],h=[];return v.forEach(g=>{if(g.startsWith("!")){const P=g.substring(1);P&&h.push(P)}else b.push(g)}),b.every(g=>f.includes(g))&&h.every(g=>!f.includes(g))}function s(t,n){return n.value!=null&&t<n.value}function C(t,n){return n.value!=null&&t>n.value}function r(t,n){return n.value&&t!==n.value}},4521:(T,m,e)=>{e.d(m,{z:()=>d});var c=e(3048);function d(p,s=null){return{createGlobalFilter(C,r=null,t=p){return c.V.create(C,r,t)},createSectionFilter(C,r=null,t=p){if(!s)throw new Error("sectionId must be provided to use createSectionFilter.");return c.V.createWithCompositeKey(s,C,r,t)}}}},5884:(T,m,e)=>{e.d(m,{Hw:()=>C,Nm:()=>p,nW:()=>s});var c=e(9928),d=e(5467);function p(r,t,n={},f={}){const v=(0,c.kU)(f,t.updateValueFromEvent,t.value);return(0,d.E2)(v,n,r)}function s(r,t,n,f,v,b={},h={}){const g=(0,c.o5)(h,t.updateValueFromEvent,t.value,n,f,v);return(0,d.E2)(g,b,r)}function C(r,t,n={},f={}){const v=(0,c.S)(f,t.updateValueFromEvent,t.value);return(0,d.E2)(v,n,r)}},7877:(T,m,e)=>{e.d(m,{Ch:()=>v,E9:()=>d,H1:()=>g,HX:()=>p,VD:()=>n,Zi:()=>b,pW:()=>U});var c=e(5884);function d(O,_={},A={}){return(0,c.Nm)("\u041F\u043E\u0438\u0441\u043A: ",O,_,A)}function p(O,_={},A={},F=.1,w=3){return(0,c.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,F,w,5,_,A)}function s(O,_={},A={},F=.1,w=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,F,w,5,_,A)}function C(O,_={},A={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,_,A)}function r(O,_={},A={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,_,A)}function t(O,_,A={},F={}){return createNumberFilterControl(O,_,"1","1","999999",A,F)}function n(O,_={},A={}){return f("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",O,_,A)}function f(O,_,A={},F={}){return(0,c.nW)(O,_,"5","0","100",A,F)}function v(O,_={},A={}){return(0,c.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",O,"5","0","100",_,A)}function b(O,_,A={},F={},w="250"){return(0,c.nW)(O,_,w,"0","1000000",A,F)}function h(O,_={},A={},F="25"){return b("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",O,_,A,F)}function g(O,_={},A={},F="25"){return b("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",O,_,A,F)}function P(O,_={},A={}){return o("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",O,_,A)}function o(O,_,A={},F={}){return createNumberFilterControl(O,_,"1","0","99999",A,F)}function i(O,_={},A={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",O,"1","2","7",_,A)}function u(O,_={},A={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",O,1,1,10,_,A)}function l(O,_={},A={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",O,_,A)}function E(O,_={},A={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",O,_,A)}function I(O,_={},A={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",O,_,A)}function y(O,_={},A={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",O,_,A)}function U(O,_={},A={}){return(0,c.Hw)("\u0412\u043A\u043B: ",O,_,A)}},8355:(T,m,e)=>{e.d(m,{R:()=>c});function c(p){return p.value.toLowerCase().split(",").map(s=>s.trim()).filter(s=>s!=="")}function d(p){return c(p).filter(s=>!s.startsWith("!"))}},5213:(T,m,e)=>{e.d(m,{b:()=>p});var c=e(9928),d=e(573);function p(s,C,r=!1,t="customFiltersContainer"){let n=(0,d.Fi)(`#${t}`,s);if(n)if(r)n.remove();else return;n=(0,c.Sw)(),n.id=t,C(n,s)}},4444:(T,m,e)=>{e.d(m,{s:()=>c});function c(d){let C=2166136261;for(let r=0;r<d.length;r+=1){const t=d.charCodeAt(r);C^=t,C=Math.imul(C,16777619)}return C>>>0}},5081:(T,m,e)=>{e.d(m,{B:()=>p});var c=e(4444);function d(s){return(0,c.s)(s).toString(16).padStart(8,"0")}function p(s,C="common"){return s?d(s):C}},8200:(T,m,e)=>{e.d(m,{s:()=>c});function c(d){const{target:p}=d,{type:s}=p;switch(s){case"text":return`"${p.value}"`;case"number":return p.value;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${s}`),null}}},157:(T,m,e)=>{e.d(m,{Fg:()=>c,vx:()=>p});const c=window.GM_setValue,d=window.GM.setValue,p=window.GM_getValue,s=window.GM_addValueChangeListener},4639:(T,m,e)=>{e.d(m,{a:()=>s});var c=e(1870),d=e(8200),p=e(3976);class s extends c.j{constructor(r=null,t=null){super(r,t)}updateValueFromEvent=r=>{const t=(0,p.$)((0,d.s)(r));this.value!==t&&(this.value=t,this.onChangeIfDefined())}}},1870:(T,m,e)=>{e.d(m,{j:()=>c});class c{constructor(p,s){this.value=p,this.onChange=s}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,m,e)=>{e.d(m,{V:()=>C});var c=e(1870),d=e(8200),p=e(3976),s=e(157);class C extends c.j{constructor(t,n=null,f=null){super((0,s.vx)(t,n),f),this.storageKey=t,this.defaultValue=n}static create(t,n=null,f=null){return new C(t,n,f)}static createWithCompositeKey(t,n,f=null,v=null){const b=`${t}-${n}`;return new C(b,f,v)}updateValueFromEvent=t=>{const n=(0,d.s)(t),f=(0,p.$)(n);this.updateValue(f)};updateValue(t,n=!0){this.value!==t&&((0,s.Fg)(this.storageKey,t),this.value=t,n&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(T,m,e)=>{e.d(m,{$:()=>c});function c(d){return d===""?null:JSON.parse(d)}},4214:(T,m,e)=>{e.d(m,{zr:()=>d});function c(r){return r.replace(/\D/g,"")}function d(r){return r.replace(/[^\d.,-]/g,"")}function p(r){return r.replace(/\s/g,"")}function s(r){return r.charAt(0).toUpperCase()+r.slice(1)}function C(r){return r.replace(/\s+/g," ").trim()}},5406:(T,m,e)=>{e.d(m,{C$:()=>p,Fc:()=>c,W2:()=>n});function c(P,o="common",i=!1){const{pathname:u}=window.location;return d(u,P,o,i)}function d(P,o,i,u=!1){const l=P.split("/");o=o<0?l.length+o:o;const E=l[o]||i;return u&&console.log(`Pathname element: ${E}`),E}function p(P,o="common",i=!1){const u=c(P,"",i);return s(u,o,i)}function s(P,o,i){if(!P)return o;const u=P.split("-").at(-1);return i&&console.log(`Pathname element ending: ${u}`),u}function C(P,o,i="common",u=!1){const l=d(P,o,"",u);return s(l,i,u)}function r(P){return new URLSearchParams(window.location.search).get(P)}function t(P){return P.split("?")[0]}function n(P){return window.location.pathname.includes(P)}function f(P){return P.some(o=>n(o))}function v(P){return window.location.pathname.split("/").some(i=>i===P)}function b(P){try{const o=new URL(window.location.href);Object.entries(P).forEach(([i,u])=>{o.searchParams.set(i,u)}),window.location.href=o.toString()}catch(o){console.error("Failed to redirect:",o)}}function h(P,o=[]){const i={pathname:window.location.pathname};o.forEach(E=>{i[E]=r(E)});function u(){const E={pathname:window.location.pathname};o.forEach(I=>{E[I]=r(I)}),Object.keys(i).some(I=>i[I]!==E[I])&&P()}let l=window.location.href;setInterval(()=>{window.location.href!==l&&(l=window.location.href,u())},200),window.addEventListener("popstate",u)}function g(P=[]){h(()=>window.location.reload(),P)}},4010:(T,m,e)=>{e.a(T,async(c,d)=>{try{let r=function(){return(0,C.W2)("details")};var p=e(1901),s=e(2344),C=e(5406);r()?await(0,p.K)():await(0,s.P)(),d()}catch(r){d(r)}},1)},1926:(T,m,e)=>{e.d(m,{i:()=>c});const c={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,m,e)=>{e.d(m,{Z:()=>p});var c=e(573),d=e(1926);function p(n,f,v,b){const h=(0,c.Fi)(f,n);return(s(h,b)||!h.hasAttribute(d.i.BALANCED_CASHBACK_PRICE))&&C(h,v,b),h}function s(n,f){if(n.hasAttribute(d.i.COUPON)){const v=+n.getAttribute(d.i.COUPON);return f!==v}return!!f}function C(n,f,v){let b=r(n);n.setAttribute(d.i.PRICE,b),v?(v<1?b=(b*(1-v)).toFixed():b-=v,n.setAttribute(d.i.COUPON,v)):n.removeAttribute(d.i.COUPON);const h=t(b,f),g=b-h;n.setAttribute(d.i.BALANCED_CASHBACK_PRICE,g);const P=`${b.toLocaleString()} (${g.toLocaleString()}) \u20BD`;n.innerText=P,n.title=`-${h.toLocaleString()}`}function r(n){return n.hasAttribute(d.i.PRICE)?+n.getAttribute(d.i.PRICE):(0,c.YA)(n,!0)}function t(n,f){const v=f/100;return(n*v/(1+v)).toFixed(0)}},4633:(T,m,e)=>{e.d(m,{r:()=>d});const c={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},d={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...c.INPUT,width:"180px"},NUMBER_INPUT:{...c.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,m,e)=>{e.d(m,{P:()=>A});var c=e(4921),d=e(5213),p=e(1319),s=e(5406),C=e(4639),r=e(3829),t=e(5884),n=e(5539),f=e(573),v=e(7877),b=e(1926),h=e(4633),g=e(4521),P=e(5081);const o={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var i=e(6754);const u=(0,P.B)((0,s.Fc)(2)),{createSectionFilter:l}=(0,g.z)(a,u),E=l("name-filter"),I=l("min-cashback-filter"),y=l("max-price-filter"),U=l("min-discount-filter"),O=l("seller-name-filter"),_=new C.a(!1,a);async function A(){await F();const R=await(0,c.xk)(document,"#app");new MutationObserver((0,c.sg)(F)).observe(R,{childList:!0,subtree:!0})}async function F(){const R=await(0,c.xk)(document,o.PRODUCT_CARD_LIST_HEADER);(0,d.b)(R,w);const N=R.parentNode;if(N.hasAttribute(b.i.OBSERVED))return;new MutationObserver((0,c.sg)(a,50)).observe(N,{childList:!0,subtree:!0}),N.setAttribute(b.i.OBSERVED,"")}function w(R,N){(0,i.ZM)(R,h.r.CONTAINER);const L=(0,v.E9)(E,h.r.CONTROL,h.r.TEXT_INPUT),S=(0,v.Ch)(I,h.r.CONTROL,h.r.NUMBER_INPUT),x=(0,v.H1)(y,h.r.CONTROL,h.r.NUMBER_INPUT,"250"),M=(0,v.VD)(U,h.r.CONTROL,h.r.NUMBER_INPUT),B=(0,t.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",O,h.r.CONTROL,h.r.TEXT_INPUT),W=(0,v.pW)(_,h.r.CONTROL,h.r.CHECKBOX_INPUT);R.append(L,S,x,M,B,W),N.append(R)}function a(){(0,f.fI)(o.PRODUCT_CARD).forEach(D)}function D(R){if(!_.value){(0,n.kl)(R);return}const N=(0,f.Fi)(o.PRODUCT_CARD_TITLE,R),L=(0,f.Fi)(o.PRODUCT_CARD_CASHBACK,R),S=(0,f.Fi)(o.PRODUCT_CARD_DISCOUNT,R);if(!N){(0,n.Bt)(R);return}const x=N.innerText,M=(0,f.YA)(L,!0,!1,0),B=Math.abs((0,f.YA)(S,!0,!1,0)),K=+(0,p.Z)(R,o.PRODUCT_CARD_PRICE,M).getAttribute(b.i.BALANCED_CASHBACK_PRICE),V=(0,f.Fi)(o.PRODUCT_CARD_SELLER_NAME,R),H=V?(0,r.Ay)(V.innerText,O):!1,j=(0,r.Ay)(x,E)||(0,r.JE)(M,I)||(0,r.iG)(K,y)||(0,r.JE)(B,U)||H;(0,n.UC)(R,j)}},1901:(T,m,e)=>{e.d(m,{K:()=>F});var c=e(4921),d=e(5081),p=e(5406),s=e(5213),C=e(4639),r=e(3829),t=e(5539),n=e(573),f=e(7877),v=e(5884),b=e(1319),h=e(1926),g=e(4633),P=e(4521);const o={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var i=e(6754);const u=(0,d.B)((0,p.C$)(3)),{createGlobalFilter:l,createSectionFilter:E}=(0,P.z)(D,u),I=E("min-cashback-filter"),y=E("max-price-filter"),U=E("max-discounted-price-filter"),O=l("min-seller-rating-filter"),_=new C.a(null,D),A=l("filter-enabled",!1);async function F(){await w();const N=await(0,c.xk)(document,o.APP);new MutationObserver((0,c.sg)(w)).observe(N,{childList:!0})}async function w(){const N=await(0,c.xk)(document,o.OFFERS_FILTER);(0,s.b)(N,a),D();const L=(0,n.Fi)(o.OFFERS_CONTAINER);if(L.hasAttribute(h.i.OBSERVED))return;new MutationObserver((0,c.sg)(D,50)).observe(L,{childList:!0,subtree:!0}),L.setAttribute(h.i.OBSERVED,"")}function a(N,L){(0,i.ZM)(N,g.r.CONTAINER);const S=(0,f.Ch)(I,g.r.CONTROL,g.r.NUMBER_INPUT),x=(0,f.H1)(y,g.r.CONTROL,g.r.NUMBER_INPUT,"250"),M=(0,f.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",U,g.r.CONTROL,g.r.NUMBER_INPUT),B=(0,f.HX)(O,g.r.CONTROL,g.r.NUMBER_INPUT),W=(0,v.nW)("\u041A\u0443\u043F\u043E\u043D: ",_,"500","0","100000",g.r.CONTROL,g.r.NUMBER_INPUT),K=(0,f.pW)(A,g.r.CONTROL,g.r.CHECKBOX_INPUT);N.append(S,x,M,B,W,K),L.append(N)}function D(){(0,n.fI)(o.OFFER).forEach(R)}function R(N){if(!A.value){(0,t.kl)(N);return}const L=(0,n.Fi)(o.PRICE,N),S=(0,n.Fi)(o.CASHBACK,N),x=(0,n.Fi)(o.SELLER_RATING,N);if(!L||!S||!x){(0,t.Bt)(N);return}const M=(0,n.YA)(S,!0),B=(0,b.Z)(N,o.PRICE,M,_.value),W=+B.getAttribute(h.i.PRICE),K=+B.getAttribute(h.i.BALANCED_CASHBACK_PRICE),V=(0,n.YA)(x,!0),H=(0,r.JE)(M,I)||(0,r.iG)(W,y)||(0,r.iG)(K,U)||(0,r.JE)(V,O);(0,t.UC)(N,H)}}},$={};function k(T){var m=$[T];if(m!==void 0)return m.exports;var e=$[T]={exports:{}};return G[T](e,e.exports,k),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",c=p=>{p&&p.d<1&&(p.d=1,p.forEach(s=>s.r--),p.forEach(s=>s.r--?s.r++:s()))},d=p=>p.map(s=>{if(s!==null&&typeof s=="object"){if(s[T])return s;if(s.then){var C=[];C.d=0,s.then(n=>{r[m]=n,c(C)},n=>{r[e]=n,c(C)});var r={};return r[T]=n=>n(C),r}}var t={};return t[T]=n=>{},t[m]=s,t});k.a=(p,s,C)=>{var r;C&&((r=[]).d=-1);var t=new Set,n=p.exports,f,v,b,h=new Promise((g,P)=>{b=P,v=g});h[m]=n,h[T]=g=>(r&&g(r),t.forEach(g),h.catch(P=>{})),p.exports=h,s(g=>{f=d(g);var P,o=()=>f.map(u=>{if(u[e])throw u[e];return u[m]}),i=new Promise(u=>{P=()=>u(o),P.r=0;var l=E=>E!==r&&!t.has(E)&&(t.add(E),E&&!E.d&&(P.r++,E.push(P)));f.map(E=>E[T](l))});return P.r?i:o()},g=>(g?b(h[e]=g):v(n),c(r))),r&&r.d<0&&(r.d=0)}})(),k.d=(T,m)=>{for(var e in m)k.o(m,e)&&!k.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:m[e]})},k.o=(T,m)=>Object.prototype.hasOwnProperty.call(T,m);var z=k(4010)})();})();
