// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76943879
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(T,E,e)=>{e.d(E,{E2:()=>f});var d=e(9928);function f(g,i={},c=null){const t=(0,d.Sw)(i,c);return t.append(g),t}function b(g,i=null,c={},t={}){const n=createActionLink(g,i,t);return f(n,c)}function C(g,i=null,c=null,t={},n={},s={}){const a=createActionLinkWithIcon(g,c,i,n,s);return f(a,t)}},9928:(T,E,e)=>{e.d(E,{S:()=>i,Sw:()=>v,kU:()=>b,o5:()=>C});var d=e(4921),f=e(6754);function b(l,h,N){const A=c(l,"text",h);return A.value=N,A}function C(l,h,N,A,y,w){const B=c(l,"number",h);return B.value=N,B.step=A,B.min=y,B.max=w,B}function g(l,h,N){const A=c(l,"date",h);return A.value=N,A}function i(l,h,N){const A=c(l,"checkbox",h);return A.checked=N,A}function c(l={},h=null,N=null){const A=p("input",l);return h&&(A.type=h),N&&(A.addEventListener("keyup",(0,d.sg)(N,200)),A.addEventListener("change",(0,d.sg)(N,100))),A}function t(l,h,N){const A=p("select",l);return h&&A.addEventListener("change",h),A.value=N,A}function n(l={},h=null){return p("span",l,h)}function s(l={},h=null,N=null){const A=p("a",l,h);return N&&(A.href=N),A}function a(l,h=null,N={}){N.cursor||="pointer";const A=s(N,h);return l&&A.addEventListener("click",l),A}function r(l,h,N=null,A={},y={}){A.display||="inline-flex",A.alignItems||="center",A.gap||="0.25em";const w=a(l,N,A);return w.prepend(O(h,y)),w}function R(l={},h=null,N=null){const A=p("button",l,h);return N&&A.addEventListener("click",N),A}function v(l={},h=null){return p("div",l,h)}function u(l={},h=null){return p("i",l,h)}function O(l,h={}){h.width||="1em",h.height||="1em";const N=createLucideSvg(l);return applyStyles(N,h),N}function p(l,h,N=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const A=document.createElement(l);return(0,f.ZM)(A,h),N&&(A.innerHTML=N),A}},573:(T,E,e)=>{e.d(E,{Fi:()=>b,YA:()=>t,fI:()=>C});var d=e(4214);function f(u,O=document){return!!O.querySelector(u)}function b(u,O=document,p=!1){const l=O.querySelector(u);return p&&!l&&console.log(`No element found for selector: ${u}`),l}function C(u,O=document,p=!1){const l=O.querySelectorAll(u);return p&&!l.length&&console.log(`No elements found for selector: ${u}`),l}function g(u,O=1){let p=u;for(let l=0;l<O;l++){if(!p.parentElement)return null;p=p.parentElement}return p}function i(u,O,p){return[...u.querySelectorAll(O)].find(l=>l.textContent.trim().includes(p))}function c(u,O,p=!1,l=!1,h=null){const N=b(O,u);return t(N,p,l,h)}function t(u,O=!1,p=!1,l=null){if(!u)return l===null?(console.log("No element found"),null):l;const h=u.innerText;return a(h,O,p)}function n(u,O,p=!1){const l=u[O];return t(l,p)}function s(u,O=!1,p=!1){const l=u.textContent;return a(l,O,p)}function a(u,O,p){O&&(u=(0,d.zr)(u)),p&&(u=u.replace(",","."));const l=Number(u);return Number.isNaN(l)?(console.log(`Invalid number: ${u}`),0):l}function r(u){return[...u.childNodes].find(O=>O.nodeType===Node.TEXT_NODE)}function R(u){const O=p=>p.nodeType===Node.TEXT_NODE&&p.textContent.trim()!==""?[p]:[...p.childNodes].flatMap(O);return O(u)}function v(u){return normalizeSpacing(u.textContent)}},5539:(T,E,e)=>{e.d(E,{Bt:()=>f,UC:()=>n,kl:()=>c});function d(o,m){o.parentNode.insertBefore(m,o.nextSibling)}function f(o){o.style.display="none"}function b(o,m=1){const P=document.querySelector(o);P&&C(P,m)}function C(o,m=1){const P=getElementAncestor(o,m);P&&f(P)}function g(o){r(o),f(o)}function i(o){o.intersectionObserver||runOnceOnIntersection(o,()=>f(o))}function c(o){o.style.display=""}function t(o){const m=a(o);o.style.display=m}function n(o,m){m?f(o):c(o)}function s(o,m){m?i(o):(clearIntersectionObserver(o),c(o))}function a(o){return r(o),o.defaultDisplay}function r(o){if(o.defaultDisplay)return;const{display:m}=getComputedStyle(o);o.defaultDisplay=m}function R(){return{show:[],hide:[]}}function v(o,m,P){o?m.hide.push(P):m.show.push(P)}function u(o){o.show.forEach(c),o.hide.forEach(f)}function O(o,m,P=.3){m?l(o,P):p(o)}function p(o){o.style.opacity=""}function l(o,m=.3){o.style.opacity=m}function h(o){o.style.order=""}function N(o,m){o.style.order=m}function A(o,m){o.style.background=m}function y(o,m){const P=getFirstElement(m);P&&w(o,P)}function w(o,m){const P=createLink();P.href=o,m.parentNode.append(P),P.append(m)}function B(o,m){const P=getFirstElement(m);P&&K(o,P)}function K(o,m,P={}){const L=createLink(P);L.href=o,L.append(...m.childNodes),m.append(L)}function _(){const o=getURLQueryParam("scrollTo");if(!o)return;const m=document.getElementById(o);m?m.scrollIntoView():console.log(`Element with ID "${o}" was not found.`)}function D(o,m,P=null){const L=`${m}-click-passed`,x=P?I=>findElementByText(I,o,P):I=>getFirstElement(o,I);return function(I){if(I.hasAttribute(L))return!1;const S=x(I);return S&&S.click(),I.setAttribute(L,""),!0}}function F(o,m,P="text/plain"){const L=new Blob([o],{type:P}),x=URL.createObjectURL(L),I=document.createElement("a");I.href=x,I.download=m,document.body.appendChild(I),I.click(),document.body.removeChild(I),requestAnimationFrame(()=>URL.revokeObjectURL(x))}},6754:(T,E,e)=>{e.d(E,{ZM:()=>d});function d(g,i){Object.assign(g.style,i)}function f(g,i="custom-global-style"){let c=document.getElementById(i);c||(c=document.createElement("style"),c.id=i,c.type="text/css",document.head.appendChild(c)),c.textContent=g}function b(g){return Object.entries(g).map(([i,c])=>`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${c};`).join(" ")}function C(g){return g?g.split(";").filter(i=>i.trim()!=="").reduce((i,c)=>{const[t,n]=c.split(":").map(a=>a.trim()),s=t.replace(/-([a-z])/g,(a,r)=>r.toUpperCase());return i[s]=n,i},{}):{}}},4921:(T,E,e)=>{e.d(E,{sg:()=>C,xk:()=>d});function d(n,s,a=null){const r=n.querySelector(s);return r?Promise.resolve(r):new Promise(R=>{const v=new MutationObserver(O);v.observe(n,{childList:!0,subtree:!0});let u;a&&(u=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${s}`),R(null)},a));function O(){const p=n.querySelector(s);p&&(u&&clearTimeout(u),v.disconnect(),R(p))}})}function f(n,s){return n.querySelector(s)?new Promise(r=>{const R=new MutationObserver(v);R.observe(n,{childList:!0,subtree:!0});function v(){n.querySelector(s)||(R.disconnect(),r())}}):Promise.resolve()}function b(n,s=400){return new Promise(a=>{let r;const R=new MutationObserver(()=>{clearTimeout(r),v()});function v(){r=setTimeout(()=>{R.disconnect(),a()},s)}v(),R.observe(n,{childList:!0,subtree:!0})})}function C(n,s=250){let a;return(...r)=>{clearTimeout(a),a=setTimeout(()=>n(...r),s)}}async function g(n){document.visibilityState==="visible"?await n():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await n()},{once:!0})}function i(n,s){const a=new IntersectionObserver(r=>{r.forEach(R=>{R.isIntersecting&&(s(),c(n))})});n.intersectionObserver=a,a.observe(n)}function c(n){n.intersectionObserver&&(n.intersectionObserver.disconnect(),n.intersectionObserver=null)}function t(n){n&&(n.disconnect(),n=null)}},3829:(T,E,e)=>{e.d(E,{Ay:()=>f,JE:()=>i,iG:()=>c});var d=e(8355);function f(a,r){return!b(a,r)}function b(a,r){if(!r||!r.value)return!0;const R=(0,d._7)(r.value);return C(a,R)}function C(a,r){if(!r||!r.length)return!0;const R=(a||"").toLowerCase();return r.every(v=>g(R,v))}function g(a,r){return r.some(({term:R,isNegative:v})=>{const u=a.includes(R);return v?!u:u})}function i(a,r){return r.value!=null&&a<r.value}function c(a,r){return r.value!=null&&a>r.value}function t(a,r){return r.value==null?!1:a<parseDateFromISO(r.value)}function n(a,r){return r.value==null?!1:a>parseDateFromISO(r.value)}function s(a,r){return r.value&&a!==r.value}},4521:(T,E,e)=>{e.d(E,{z:()=>f});var d=e(3048);function f(b,C=null){return{createGlobalFilter(g,i=null,c=b){return d.V.create(g,i,c)},createSectionFilter(g,i=null,c=b){if(!C)throw new Error("sectionId must be provided to use createSectionFilter.");return d.V.createWithCompositeKey(C,g,i,c)}}}},5884:(T,E,e)=>{e.d(E,{Hw:()=>c,Nm:()=>b,nW:()=>C});var d=e(9928),f=e(5467);function b(t,n,s={},a={}){const r=(0,d.kU)(a,n.updateValueFromEvent,n.value);return(0,f.E2)(r,s,t)}function C(t,n,s,a,r,R={},v={}){const u=(0,d.o5)(v,n.updateValueFromEvent,n.value,s,a,r);return(0,f.E2)(u,R,t)}function g(t,n,s={},a={}){const r=createSelect(a,n.updateValueFromEvent,n.value);return createControl(r,s,t)}function i(t,n,s={},a={}){const r=createDateInput(a,n.updateValueFromEvent,n.value);return createControl(r,s,t)}function c(t,n,s={},a={}){const r=(0,d.S)(a,n.updateValueFromEvent,n.value);return(0,f.E2)(r,s,t)}},7877:(T,E,e)=>{e.d(E,{Ch:()=>a,E9:()=>f,H1:()=>v,HX:()=>b,VD:()=>n,Zi:()=>r,pW:()=>B});var d=e(5884);function f(_,D={},F={}){return(0,d.Nm)("\u041F\u043E\u0438\u0441\u043A: ",_,D,F)}function b(_,D={},F={},o=.1,m=3){return(0,d.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,o,m,5,D,F)}function C(_,D={},F={},o=.1,m=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,o,m,5,D,F)}function g(_,D={},F={}){return c("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,D,F)}function i(_,D={},F={}){return c("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,D,F)}function c(_,D,F={},o={}){return createNumberFilterControl(_,D,"1","1","999999",F,o)}function t(_,D={},F={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",_,D,F)}function n(_,D={},F={}){return s("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",_,D,F)}function s(_,D,F={},o={}){return(0,d.nW)(_,D,"5","0","100",F,o)}function a(_,D={},F={}){return(0,d.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",_,"5","0","100",D,F)}function r(_,D,F={},o={},m="250"){return(0,d.nW)(_,D,m,"0","1000000",F,o)}function R(_,D={},F={},o="25"){return r("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",_,D,F,o)}function v(_,D={},F={},o="25"){return r("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",_,D,F,o)}function u(_,D={},F={}){return O("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",_,D,F)}function O(_,D,F={},o={}){return createNumberFilterControl(_,D,"1","0","99999",F,o)}function p(_,D={},F={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",_,"1","2","8",D,F)}function l(_,D={},F={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",_,1,1,10,D,F)}function h(_,D={},F={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",_,D,F)}function N(_,D={},F={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",_,D,F)}function A(_,D={},F={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",_,D,F)}function y(_,D={},F={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",_,D,F)}function w(_,D={},F={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",_,D,F)}function B(_,D={},F={}){return(0,d.Hw)("\u0412\u043A\u043B: ",_,D,F)}function K(_,D,F={}){const o=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],m={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},P=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),L=[],x=()=>D?parseFloat(D.value)||0:_.value,I=()=>{const S=x();L.forEach(({button:M,value:k})=>{const W=k<=S?m.active:m.inactive;Object.assign(M.style,W)})};return o.forEach(({value:S,emoji:M,tooltip:k})=>{const U=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...F},M);U.title=k,U.type="button",U.addEventListener("click",W=>{W.preventDefault(),_.updateValue(S),D&&(D.value=S),I()}),U.addEventListener("mouseenter",()=>{S<=x()||(U.style.background=m.hover.background)}),U.addEventListener("mouseleave",()=>{I()}),L.push({button:U,value:S}),P.appendChild(U)}),I(),D&&(D.addEventListener("input",I),D.addEventListener("change",I)),P}},8355:(T,E,e)=>{e.d(E,{_7:()=>f});function d(t){if(!t)return[];const s=f(t).flat().filter(a=>a&&!a.isNegative&&a.term).map(a=>a.term);return[...new Set(s)]}function f(t){return t?t.toLowerCase().split(",").map(b).filter(Boolean):[]}function b(t){const n=t.split("/").map(a=>a.trim()).filter(Boolean);if(n.length===0)return null;const s=n.map(C).filter(Boolean);return s.length>0?s:null}function C(t){const n=t.startsWith("!"),s=n?t.slice(1).trim():t;return s?{term:s,isNegative:n}:null}function g(t,n){c(t,s=>s.style.display!=="none",n)}function i(t,n){c(t,s=>s.style.opacity==="",n)}function c(t,n,s){const a=[...t].filter(n).length;s.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${t.length}`}},5213:(T,E,e)=>{e.d(E,{b:()=>b});var d=e(9928),f=e(573);function b(C,g,i=!1,c="customFiltersContainer"){let t=(0,f.Fi)(`#${c}`,C);if(t)if(i)t.remove();else return;t=(0,d.Sw)(),t.id=c,g(t,C)}},4444:(T,E,e)=>{e.d(E,{s:()=>d});function d(f){let g=2166136261;for(let i=0;i<f.length;i+=1){const c=f.charCodeAt(i);g^=c,g=Math.imul(g,16777619)}return g>>>0}},5081:(T,E,e)=>{e.d(E,{B:()=>b});var d=e(4444);function f(C){return(0,d.s)(C).toString(16).padStart(8,"0")}function b(C,g="common"){return C?f(C):g}},8200:(T,E,e)=>{e.d(E,{s:()=>d});function d(f){const{target:b}=f,{type:C}=b;switch(C){case"text":return`"${b.value}"`;case"number":return b.value;case"select-one":return b.value;case"date":return`"${b.value}"`;case"checkbox":return b.checked;default:return console.log(`Unknown input type: ${C}`),null}}},157:(T,E,e)=>{e.d(E,{Fg:()=>d,vx:()=>b});const d=window.GM_setValue,f=window.GM.setValue,b=window.GM_getValue},4639:(T,E,e)=>{e.d(E,{a:()=>C});var d=e(1870),f=e(8200),b=e(3976);class C extends d.j{constructor(i=null,c=null){super(i,c)}updateValueFromEvent=i=>{const c=(0,b.$)((0,f.s)(i));this.value!==c&&(this.value=c,this.onChangeIfDefined())}}},1870:(T,E,e)=>{e.d(E,{j:()=>d});class d{constructor(b,C){this.value=b,this.onChange=C}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,E,e)=>{e.d(E,{V:()=>g});var d=e(1870),f=e(8200),b=e(3976),C=e(157);class g extends d.j{constructor(c,t=null,n=null){super((0,C.vx)(c,t),n),this.storageKey=c,this.defaultValue=t}static create(c,t=null,n=null){return new g(c,t,n)}static createWithCompositeKey(c,t,n=null,s=null){const a=`${c}-${t}`;return new g(a,n,s)}updateValueFromEvent=c=>{const t=(0,f.s)(c),n=(0,b.$)(t);this.updateValue(n)};updateValue(c,t=!0){this.value!==c&&((0,C.Fg)(this.storageKey,c),this.value=c,t&&this.onChangeIfDefined())}clearValue(c=!1){this.updateValue(null,c)}resetValue(c=!1){this.updateValue(this.defaultValue,c)}}},3976:(T,E,e)=>{e.d(E,{$:()=>d});function d(f){return f===""?null:JSON.parse(f)}},4214:(T,E,e)=>{e.d(E,{zr:()=>f});function d(i){return i.replace(/\D/g,"")}function f(i){return i.replace(/[^\d.,-]/g,"")}function b(i){return i.replace(/\s/g,"")}function C(i){return i.charAt(0).toUpperCase()+i.slice(1)}function g(i){return i.replace(/\s+/g," ").trim()}},5406:(T,E,e)=>{e.d(E,{C$:()=>b,Fc:()=>d,W2:()=>t});function d(v,u="common",O=!1){const{pathname:p}=window.location;return f(p,v,u,O)}function f(v,u,O,p=!1){const l=v.split("/");u=u<0?l.length+u:u;const h=l[u]||O;return p&&console.log(`Pathname element: ${h}`),h}function b(v,u="common",O=!1){const p=d(v,"",O);return C(p,u,O)}function C(v,u,O){if(!v)return u;const p=v.split("-").at(-1);return O&&console.log(`Pathname element ending: ${p}`),p}function g(v,u,O="common",p=!1){const l=f(v,u,"",p);return C(l,O,p)}function i(v){return new URLSearchParams(window.location.search).get(v)}function c(v){return v.split("?")[0]}function t(v){return window.location.pathname.includes(v)}function n(v){return v.some(u=>t(u))}function s(...v){return window.location.pathname.split("/").some(O=>v.includes(O))}function a(v){try{const u=new URL(window.location.href);Object.entries(v).forEach(([O,p])=>{u.searchParams.set(O,p)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function r(v,u=[]){const O={pathname:window.location.pathname};u.forEach(A=>{O[A]=i(A)});let p=!1;async function l(){if(p)return;const A={pathname:window.location.pathname};if(u.forEach(y=>{A[y]=i(y)}),Object.keys(O).some(y=>O[y]!==A[y])){Object.assign(O,A),p=!0;try{await v()}catch(y){console.error("Error in URL observer callback:",y)}finally{p=!1}}}function h(){l().catch(A=>{console.error("Error in URL change handler:",A)})}let N=window.location.href;setInterval(()=>{window.location.href!==N&&(N=window.location.href,h())},200),window.addEventListener("popstate",h)}function R(v=[]){r(()=>window.location.reload(),v)}},4010:(T,E,e)=>{e.a(T,async(d,f)=>{try{let i=function(){return(0,g.W2)("details")};var b=e(1901),C=e(2344),g=e(5406);i()?await(0,b.K)():await(0,C.P)(),f()}catch(i){f(i)}},1)},1926:(T,E,e)=>{e.d(E,{i:()=>d});const d={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,E,e)=>{e.d(E,{Z:()=>b});var d=e(573),f=e(1926);function b(t,n,s,a){const r=(0,d.Fi)(n,t);return(C(r,a)||!r.hasAttribute(f.i.BALANCED_CASHBACK_PRICE))&&g(r,s,a),r}function C(t,n){if(t.hasAttribute(f.i.COUPON)){const s=+t.getAttribute(f.i.COUPON);return n!==s}return!!n}function g(t,n,s){let a=i(t);t.setAttribute(f.i.PRICE,a),s?(s<1?a=(a*(1-s)).toFixed():a-=s,t.setAttribute(f.i.COUPON,s)):t.removeAttribute(f.i.COUPON);const r=c(a,n),R=a-r;t.setAttribute(f.i.BALANCED_CASHBACK_PRICE,R);const v=`${a.toLocaleString()} (${R.toLocaleString()}) \u20BD`;t.innerText=v,t.title=`-${r.toLocaleString()}`}function i(t){return t.hasAttribute(f.i.PRICE)?+t.getAttribute(f.i.PRICE):(0,d.YA)(t,!0)}function c(t,n){const s=n/100;return(t*s/(1+s)).toFixed(0)}},4633:(T,E,e)=>{e.d(E,{r:()=>f});const d={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},f={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...d.INPUT,width:"180px"},NUMBER_INPUT:{...d.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,E,e)=>{e.d(E,{P:()=>K});var d=e(4921),f=e(5213),b=e(1319),C=e(5406),g=e(4639),i=e(3829),c=e(5884),t=e(5539),n=e(573),s=e(7877),a=e(1926),r=e(4633),R=e(4521),v=e(5081);const u={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var O=e(6754);const p=(0,v.B)((0,C.Fc)(2)),{createSectionFilter:l}=(0,R.z)(F,p),h=l("name-filter"),N=l("min-cashback-filter"),A=l("max-price-filter"),y=l("min-discount-filter"),w=l("seller-name-filter"),B=new g.a(!1,F);async function K(){await _();const m=await(0,d.xk)(document,"#app");new MutationObserver((0,d.sg)(_)).observe(m,{childList:!0,subtree:!0})}async function _(){const m=await(0,d.xk)(document,u.PRODUCT_CARD_LIST_HEADER);(0,f.b)(m,D);const P=m.parentNode;if(P.hasAttribute(a.i.OBSERVED))return;new MutationObserver((0,d.sg)(F,50)).observe(P,{childList:!0,subtree:!0}),P.setAttribute(a.i.OBSERVED,"")}function D(m,P){(0,O.ZM)(m,r.r.CONTAINER);const L=(0,s.E9)(h,r.r.CONTROL,r.r.TEXT_INPUT),x=(0,s.Ch)(N,r.r.CONTROL,r.r.NUMBER_INPUT),I=(0,s.H1)(A,r.r.CONTROL,r.r.NUMBER_INPUT,"250"),S=(0,s.VD)(y,r.r.CONTROL,r.r.NUMBER_INPUT),M=(0,c.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",w,r.r.CONTROL,r.r.TEXT_INPUT),k=(0,s.pW)(B,r.r.CONTROL,r.r.CHECKBOX_INPUT);m.append(L,x,I,S,M,k),P.append(m)}function F(){(0,n.fI)(u.PRODUCT_CARD).forEach(o)}function o(m){if(!B.value){(0,t.kl)(m);return}const P=(0,n.Fi)(u.PRODUCT_CARD_TITLE,m),L=(0,n.Fi)(u.PRODUCT_CARD_CASHBACK,m),x=(0,n.Fi)(u.PRODUCT_CARD_DISCOUNT,m);if(!P){(0,t.Bt)(m);return}const I=P.innerText,S=(0,n.YA)(L,!0,!1,0),M=Math.abs((0,n.YA)(x,!0,!1,0)),U=+(0,b.Z)(m,u.PRODUCT_CARD_PRICE,S).getAttribute(a.i.BALANCED_CASHBACK_PRICE),W=(0,n.Fi)(u.PRODUCT_CARD_SELLER_NAME,m),H=W?(0,i.Ay)(W.innerText,w):!1,G=(0,i.Ay)(I,h)||(0,i.JE)(S,N)||(0,i.iG)(U,A)||(0,i.JE)(M,y)||H;(0,t.UC)(m,G)}},1901:(T,E,e)=>{e.d(E,{K:()=>_});var d=e(4921),f=e(5081),b=e(5406),C=e(5213),g=e(4639),i=e(3829),c=e(5539),t=e(573),n=e(7877),s=e(5884),a=e(1319),r=e(1926),R=e(4633),v=e(4521);const u={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var O=e(6754);const p=(0,f.B)((0,b.C$)(3)),{createGlobalFilter:l,createSectionFilter:h}=(0,v.z)(o,p),N=h("min-cashback-filter"),A=h("max-price-filter"),y=h("max-discounted-price-filter"),w=l("min-seller-rating-filter"),B=new g.a(null,o),K=l("filter-enabled",!1);async function _(){await D();const P=await(0,d.xk)(document,u.APP);new MutationObserver((0,d.sg)(D)).observe(P,{childList:!0})}async function D(){const P=await(0,d.xk)(document,u.OFFERS_FILTER);(0,C.b)(P,F),o();const L=(0,t.Fi)(u.OFFERS_CONTAINER);if(L.hasAttribute(r.i.OBSERVED))return;new MutationObserver((0,d.sg)(o,50)).observe(L,{childList:!0,subtree:!0}),L.setAttribute(r.i.OBSERVED,"")}function F(P,L){(0,O.ZM)(P,R.r.CONTAINER);const x=(0,n.Ch)(N,R.r.CONTROL,R.r.NUMBER_INPUT),I=(0,n.H1)(A,R.r.CONTROL,R.r.NUMBER_INPUT,"250"),S=(0,n.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",y,R.r.CONTROL,R.r.NUMBER_INPUT),M=(0,n.HX)(w,R.r.CONTROL,R.r.NUMBER_INPUT),k=(0,s.nW)("\u041A\u0443\u043F\u043E\u043D: ",B,"500","0","100000",R.r.CONTROL,R.r.NUMBER_INPUT),U=(0,n.pW)(K,R.r.CONTROL,R.r.CHECKBOX_INPUT);P.append(x,I,S,M,k,U),L.append(P)}function o(){(0,t.fI)(u.OFFER).forEach(m)}function m(P){if(!K.value){(0,c.kl)(P);return}const L=(0,t.Fi)(u.PRICE,P),x=(0,t.Fi)(u.CASHBACK,P),I=(0,t.Fi)(u.SELLER_RATING,P);if(!L||!x||!I){(0,c.Bt)(P);return}const S=(0,t.YA)(x,!0),M=(0,a.Z)(P,u.PRICE,S,B.value),k=+M.getAttribute(r.i.PRICE),U=+M.getAttribute(r.i.BALANCED_CASHBACK_PRICE),W=(0,t.YA)(I,!0),H=(0,i.JE)(S,N)||(0,i.iG)(k,A)||(0,i.iG)(U,y)||(0,i.JE)(W,w);(0,c.UC)(P,H)}}},$={};function V(T){var E=$[T];if(E!==void 0)return E.exports;var e=$[T]={exports:{}};return j[T](e,e.exports,V),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",d=b=>{b&&b.d<1&&(b.d=1,b.forEach(C=>C.r--),b.forEach(C=>C.r--?C.r++:C()))},f=b=>b.map(C=>{if(C!==null&&typeof C=="object"){if(C[T])return C;if(C.then){var g=[];g.d=0,C.then(t=>{i[E]=t,d(g)},t=>{i[e]=t,d(g)});var i={};return i[T]=t=>t(g),i}}var c={};return c[T]=t=>{},c[E]=C,c});V.a=(b,C,g)=>{var i;g&&((i=[]).d=-1);var c=new Set,t=b.exports,n,s,a,r=new Promise((R,v)=>{a=v,s=R});r[E]=t,r[T]=R=>(i&&R(i),c.forEach(R),r.catch(v=>{})),b.exports=r,C(R=>{n=f(R);var v,u=()=>n.map(p=>{if(p[e])throw p[e];return p[E]}),O=new Promise(p=>{v=()=>p(u),v.r=0;var l=h=>h!==i&&!c.has(h)&&(c.add(h),h&&!h.d&&(v.r++,h.push(v)));n.map(h=>h[T](l))});return v.r?O:u()},R=>(R?a(r[e]=R):s(t),d(i))),i&&i.d<0&&(i.d=0)}})(),V.d=(T,E)=>{for(var e in E)V.o(E,e)&&!V.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:E[e]})},V.o=(T,E)=>Object.prototype.hasOwnProperty.call(T,E);var z=V(4010)})();})();
