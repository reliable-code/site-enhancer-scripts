// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.75621094
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var G={5467:(A,m,e)=>{e.d(m,{E2:()=>d});var c=e(9928);function d(E,r={},t=null){const n=(0,c.Sw)(r,t);return n.append(E),n}function p(E,r=null,t={},n={}){const f=createActionLink(E,r,n);return d(f,t)}function l(E,r=null,t=null,n={},f={}){const C=createActionLinkWithIcon(E,t,r,f);return d(C,n)}},9928:(A,m,e)=>{e.d(m,{S:()=>E,Sw:()=>v,kU:()=>p,o5:()=>l});var c=e(4921),d=e(6754);function p(s,a,b){const h=r(s,"text",a);return h.value=b,h}function l(s,a,b,h,I,S){const L=r(s,"number",a);return L.value=b,L.step=h,L.min=I,L.max=S,L}function E(s,a,b){const h=r(s,"checkbox",a);return h.checked=b,h}function r(s={},a=null,b=null){const h=i("input",s);return a&&(h.type=a),b&&(h.addEventListener("keyup",(0,c.sg)(b,200)),h.addEventListener("change",(0,c.sg)(b,100))),h}function t(s={},a=null){return i("span",s,a)}function n(s={},a=null,b=null){const h=i("a",s,a);return b&&(h.href=b),h}function f(s,a=null,b={}){b.cursor||="pointer";const h=n(b,a);return s&&h.addEventListener("click",s),h}function C(s,a,b=null,h={},I={}){h.display||="inline-flex",h.alignItems||="center",h.gap||="0.25em";const S=f(s,b,h);return S.prepend(u(a,I)),S}function g(s={},a=null,b=null){const h=i("button",s,a);return b&&h.addEventListener("click",b),h}function v(s={},a=null){return i("div",s,a)}function P(s={}){return i("i",s)}function u(s,a={}){a.width||="1em",a.height||="1em",a.paddingBottom||="1px";const b=P(a);return b.setAttribute("data-lucide",s),b}function i(s,a,b=null){if(typeof a!="object"||a===null)throw new TypeError("styles should be an object");const h=document.createElement(s);return(0,d.ZM)(h,a),b&&(h.innerHTML=b),h}},573:(A,m,e)=>{e.d(m,{Fi:()=>p,YA:()=>t,fI:()=>l});var c=e(4214);function d(u,i=document){return!!i.querySelector(u)}function p(u,i=document,s=!1){const a=i.querySelector(u);return s&&!a&&console.log(`No element found for selector: ${u}`),a}function l(u,i=document,s=!1){const a=i.querySelectorAll(u);return s&&!a.length&&console.log(`No elements found for selector: ${u}`),a}function E(u,i,s){return[...u.querySelectorAll(i)].find(a=>a.textContent.trim().includes(s))}function r(u,i,s=!1,a=!1,b=null){const h=p(i,u);return t(h,s,a,b)}function t(u,i=!1,s=!1,a=null){if(!u)return a===null?(console.log("No element found"),null):a;const b=u.innerText;return C(b,i,s)}function n(u,i,s=!1){const a=u[i];return t(a,s)}function f(u,i=!1,s=!1){const a=u.textContent;return C(a,i,s)}function C(u,i,s){i&&(u=(0,c.zr)(u)),s&&(u=u.replace(",","."));const a=Number(u);return Number.isNaN(a)?(console.log(`Invalid number: ${u}`),0):a}function g(u){return[...u.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function v(u){const i=s=>s.nodeType===Node.TEXT_NODE&&s.textContent.trim()!==""?[s]:[...s.childNodes].flatMap(i);return i(u)}function P(u){return normalizeSpacing(u.textContent)}},5539:(A,m,e)=>{e.d(m,{Bt:()=>d,UC:()=>t,kl:()=>E});function c(o,D){o.parentNode.insertBefore(D,o.nextSibling)}function d(o){o.style.display="none"}function p(o){C(o),d(o)}function l(o){o.intersectionObserver||runOnceOnIntersection(o,()=>d(o))}function E(o){o.style.display=""}function r(o){const D=f(o);o.style.display=D}function t(o,D){D?d(o):E(o)}function n(o,D){D?l(o):(clearIntersectionObserver(o),E(o))}function f(o){return C(o),o.defaultDisplay}function C(o){if(o.defaultDisplay)return;const{display:D}=getComputedStyle(o);o.defaultDisplay=D}function g(){return{show:[],hide:[]}}function v(o,D,N){o?D.hide.push(N):D.show.push(N)}function P(o){o.show.forEach(E),o.hide.forEach(d)}function u(o,D,N=.3){D?s(o,N):i(o)}function i(o){o.style.opacity=""}function s(o,D=.3){o.style.opacity=D}function a(o){o.style.order=""}function b(o,D){o.style.order=D}function h(o,D){o.style.background=D}function I(o,D){const N=getFirstElement(D);N&&S(o,N)}function S(o,D){const N=createLink();N.href=o,D.parentNode.append(N),N.append(D)}function L(o,D){const N=getFirstElement(D);N&&O(o,N)}function O(o,D){const N=createLink();N.href=o,N.append(...D.childNodes),D.append(N)}function _(){const o=getURLQueryParam("scrollTo");if(!o)return;const D=document.getElementById(o);D?D.scrollIntoView():console.log(`Element with ID "${o}" was not found.`)}function R(o,D,N="text/plain"){const M=new Blob([o],{type:N}),F=URL.createObjectURL(M),T=document.createElement("a");T.href=F,T.download=D,document.body.appendChild(T),T.click(),document.body.removeChild(T),requestAnimationFrame(()=>URL.revokeObjectURL(F))}},6754:(A,m,e)=>{e.d(m,{ZM:()=>c});function c(E,r){Object.assign(E.style,r)}function d(E,r="custom-global-style"){let t=document.getElementById(r);t||(t=document.createElement("style"),t.id=r,t.type="text/css",document.head.appendChild(t)),t.textContent=E}function p(E){return Object.entries(E).map(([r,t])=>`${r.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function l(E){return E?E.split(";").filter(r=>r.trim()!=="").reduce((r,t)=>{const[n,f]=t.split(":").map(g=>g.trim()),C=n.replace(/-([a-z])/g,(g,v)=>v.toUpperCase());return r[C]=f,r},{}):{}}},4921:(A,m,e)=>{e.d(m,{sg:()=>l,xk:()=>c});function c(t,n,f=null){const C=t.querySelector(n);return C?Promise.resolve(C):new Promise(g=>{const v=new MutationObserver(u);v.observe(t,{childList:!0,subtree:!0});let P;f&&(P=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${n}`),g(null)},f));function u(){const i=t.querySelector(n);i&&(P&&clearTimeout(P),v.disconnect(),g(i))}})}function d(t,n){return t.querySelector(n)?new Promise(C=>{const g=new MutationObserver(v);g.observe(t,{childList:!0,subtree:!0});function v(){t.querySelector(n)||(g.disconnect(),C())}}):Promise.resolve()}function p(t,n=400){return new Promise(f=>{let C;const g=new MutationObserver(()=>{clearTimeout(C),v()});function v(){C=setTimeout(()=>{g.disconnect(),f()},n)}v(),g.observe(t,{childList:!0,subtree:!0})})}function l(t,n=250){let f;return(...C)=>{clearTimeout(f),f=setTimeout(()=>t(...C),n)}}function E(t,n){const f=new IntersectionObserver(C=>{C.forEach(g=>{g.isIntersecting&&(n(),r(t))})});t.intersectionObserver=f,f.observe(t)}function r(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(A,m,e)=>{e.d(m,{Ay:()=>d,JE:()=>l,iG:()=>E});var c=e(8355);function d(t,n){return!p(t,n)}function p(t,n){if(!n.value)return!0;const f=t.toLowerCase(),C=(0,c.R)(n),g=[],v=[];return C.forEach(P=>{if(P.startsWith("!")){const u=P.substring(1);u&&v.push(u)}else g.push(P)}),g.every(P=>f.includes(P))&&v.every(P=>!f.includes(P))}function l(t,n){return n.value!=null&&t<n.value}function E(t,n){return n.value!=null&&t>n.value}function r(t,n){return n.value&&t!==n.value}},4521:(A,m,e)=>{e.d(m,{z:()=>d});var c=e(3048);function d(p,l=null){return{createGlobalFilter(E,r=null,t=p){return c.V.create(E,r,t)},createSectionFilter(E,r=null,t=p){if(!l)throw new Error("sectionId must be provided to use createSectionFilter.");return c.V.createWithCompositeKey(l,E,r,t)}}}},5884:(A,m,e)=>{e.d(m,{Hw:()=>E,Nm:()=>p,nW:()=>l});var c=e(9928),d=e(5467);function p(r,t,n={},f={}){const C=(0,c.kU)(f,t.updateValueFromEvent,t.value);return(0,d.E2)(C,n,r)}function l(r,t,n,f,C,g={},v={}){const P=(0,c.o5)(v,t.updateValueFromEvent,t.value,n,f,C);return(0,d.E2)(P,g,r)}function E(r,t,n={},f={}){const C=(0,c.S)(f,t.updateValueFromEvent,t.value);return(0,d.E2)(C,n,r)}},7877:(A,m,e)=>{e.d(m,{Ch:()=>C,E9:()=>d,H1:()=>P,HX:()=>p,VD:()=>n,Zi:()=>g,pW:()=>L});var c=e(5884);function d(O,_={},R={}){return(0,c.Nm)("\u041F\u043E\u0438\u0441\u043A: ",O,_,R)}function p(O,_={},R={},o=.1,D=3){return(0,c.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,o,D,5,_,R)}function l(O,_={},R={},o=.1,D=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",O,o,D,5,_,R)}function E(O,_={},R={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,_,R)}function r(O,_={},R={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",O,_,R)}function t(O,_,R={},o={}){return createNumberFilterControl(O,_,"1","1","999999",R,o)}function n(O,_={},R={}){return f("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",O,_,R)}function f(O,_,R={},o={}){return(0,c.nW)(O,_,"5","0","100",R,o)}function C(O,_={},R={}){return(0,c.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",O,"5","0","100",_,R)}function g(O,_,R={},o={},D="250"){return(0,c.nW)(O,_,D,"0","1000000",R,o)}function v(O,_={},R={},o="25"){return g("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",O,_,R,o)}function P(O,_={},R={},o="25"){return g("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",O,_,R,o)}function u(O,_={},R={}){return i("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",O,_,R)}function i(O,_,R={},o={}){return createNumberFilterControl(O,_,"1","0","99999",R,o)}function s(O,_={},R={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",O,"1","2","7",_,R)}function a(O,_={},R={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",O,1,1,10,_,R)}function b(O,_={},R={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",O,_,R)}function h(O,_={},R={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",O,_,R)}function I(O,_={},R={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",O,_,R)}function S(O,_={},R={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",O,_,R)}function L(O,_={},R={}){return(0,c.Hw)("\u0412\u043A\u043B: ",O,_,R)}},8355:(A,m,e)=>{e.d(m,{R:()=>c});function c(p){return p.value.toLowerCase().split(",").map(l=>l.trim()).filter(l=>l!=="")}function d(p){return c(p).filter(l=>!l.startsWith("!"))}},5213:(A,m,e)=>{e.d(m,{b:()=>p});var c=e(9928),d=e(573);function p(l,E,r=!1,t="customFiltersContainer"){let n=(0,d.Fi)(`#${t}`,l);if(n)if(r)n.remove();else return;n=(0,c.Sw)(),n.id=t,E(n,l)}},4444:(A,m,e)=>{e.d(m,{s:()=>c});function c(d){let E=2166136261;for(let r=0;r<d.length;r+=1){const t=d.charCodeAt(r);E^=t,E=Math.imul(E,16777619)}return E>>>0}},5081:(A,m,e)=>{e.d(m,{B:()=>p});var c=e(4444);function d(l){return(0,c.s)(l).toString(16).padStart(8,"0")}function p(l,E="common"){return l?d(l):E}},8200:(A,m,e)=>{e.d(m,{s:()=>c});function c(d){const{target:p}=d,{type:l}=p;switch(l){case"text":return`"${p.value}"`;case"number":return p.value;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${l}`),null}}},157:(A,m,e)=>{e.d(m,{Fg:()=>c,vx:()=>p});const c=window.GM_setValue,d=window.GM.setValue,p=window.GM_getValue,l=window.GM_addValueChangeListener},4639:(A,m,e)=>{e.d(m,{a:()=>l});var c=e(1870),d=e(8200),p=e(3976);class l extends c.j{constructor(r=null,t=null){super(r,t)}updateValueFromEvent=r=>{const t=(0,p.$)((0,d.s)(r));this.value!==t&&(this.value=t,this.onChangeIfDefined())}}},1870:(A,m,e)=>{e.d(m,{j:()=>c});class c{constructor(p,l){this.value=p,this.onChange=l}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,m,e)=>{e.d(m,{V:()=>E});var c=e(1870),d=e(8200),p=e(3976),l=e(157);class E extends c.j{constructor(t,n=null,f=null){super((0,l.vx)(t,n),f),this.storageKey=t,this.defaultValue=n}static create(t,n=null,f=null){return new E(t,n,f)}static createWithCompositeKey(t,n,f=null,C=null){const g=`${t}-${n}`;return new E(g,f,C)}updateValueFromEvent=t=>{const n=(0,d.s)(t),f=(0,p.$)(n);this.updateValue(f)};updateValue(t,n=!0){this.value!==t&&((0,l.Fg)(this.storageKey,t),this.value=t,n&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(A,m,e)=>{e.d(m,{$:()=>c});function c(d){return d===""?null:JSON.parse(d)}},4214:(A,m,e)=>{e.d(m,{zr:()=>d});function c(r){return r.replace(/\D/g,"")}function d(r){return r.replace(/[^\d.,-]/g,"")}function p(r){return r.replace(/\s/g,"")}function l(r){return r.charAt(0).toUpperCase()+r.slice(1)}function E(r){return r.replace(/\s+/g," ").trim()}},5406:(A,m,e)=>{e.d(m,{C$:()=>p,Fc:()=>c,W2:()=>n});function c(u,i="common",s=!1){const{pathname:a}=window.location;return d(a,u,i,s)}function d(u,i,s,a=!1){const b=u.split("/");i=i<0?b.length+i:i;const h=b[i]||s;return a&&console.log(`Pathname element: ${h}`),h}function p(u,i="common",s=!1){const a=c(u,"",s);return l(a,i,s)}function l(u,i,s){if(!u)return i;const a=u.split("-").at(-1);return s&&console.log(`Pathname element ending: ${a}`),a}function E(u,i,s="common",a=!1){const b=d(u,i,"",a);return l(b,s,a)}function r(u){return new URLSearchParams(window.location.search).get(u)}function t(u){return u.split("?")[0]}function n(u){return window.location.pathname.includes(u)}function f(u){return u.some(i=>n(i))}function C(u){return window.location.pathname.split("/").some(s=>s===u)}function g(u){try{const i=new URL(window.location.href);Object.entries(u).forEach(([s,a])=>{i.searchParams.set(s,a)}),window.location.href=i.toString()}catch(i){console.error("Failed to redirect:",i)}}function v(u,i=[]){const s={pathname:window.location.pathname};i.forEach(h=>{s[h]=r(h)});function a(){const h={pathname:window.location.pathname};i.forEach(I=>{h[I]=r(I)}),Object.keys(s).some(I=>s[I]!==h[I])&&u()}let b=window.location.href;setInterval(()=>{window.location.href!==b&&(b=window.location.href,a())},200),window.addEventListener("popstate",a)}function P(u=[]){v(()=>window.location.reload(),u)}},4010:(A,m,e)=>{e.a(A,async(c,d)=>{try{let r=function(){return(0,E.W2)("details")};var p=e(1901),l=e(2344),E=e(5406);r()?await(0,p.K)():await(0,l.P)(),d()}catch(r){d(r)}},1)},1926:(A,m,e)=>{e.d(m,{i:()=>c});const c={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(A,m,e)=>{e.d(m,{Z:()=>p});var c=e(573),d=e(1926);function p(n,f,C,g){const v=(0,c.Fi)(f,n);return(l(v,g)||!v.hasAttribute(d.i.BALANCED_CASHBACK_PRICE))&&E(v,C,g),v}function l(n,f){if(n.hasAttribute(d.i.COUPON)){const C=+n.getAttribute(d.i.COUPON);return f!==C}return!!f}function E(n,f,C){let g=r(n);n.setAttribute(d.i.PRICE,g),C?(C<1?g=(g*(1-C)).toFixed():g-=C,n.setAttribute(d.i.COUPON,C)):n.removeAttribute(d.i.COUPON);const v=t(g,f),P=g-v;n.setAttribute(d.i.BALANCED_CASHBACK_PRICE,P);const u=`${g.toLocaleString()} (${P.toLocaleString()}) \u20BD`;n.innerText=u,n.title=`-${v.toLocaleString()}`}function r(n){return n.hasAttribute(d.i.PRICE)?+n.getAttribute(d.i.PRICE):(0,c.YA)(n,!0)}function t(n,f){const C=f/100;return(n*C/(1+C)).toFixed(0)}},4633:(A,m,e)=>{e.d(m,{r:()=>d});const c={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},d={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...c.INPUT,width:"180px"},NUMBER_INPUT:{...c.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(A,m,e)=>{e.d(m,{P:()=>R});var c=e(4921),d=e(5213),p=e(1319),l=e(5406),E=e(4639),r=e(3829),t=e(5884),n=e(5539),f=e(573),C=e(7877),g=e(1926),v=e(4633),P=e(4521),u=e(5081);const i={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var s=e(6754);const a=(0,u.B)((0,l.Fc)(2)),{createSectionFilter:b}=(0,P.z)(N,a),h=b("name-filter"),I=b("min-cashback-filter"),S=b("max-price-filter"),L=b("min-discount-filter"),O=b("seller-name-filter"),_=new E.a(!1,N);async function R(){await o();const F=await(0,c.xk)(document,"#app");new MutationObserver((0,c.sg)(o)).observe(F,{childList:!0,subtree:!0})}async function o(){const F=await(0,c.xk)(document,i.PRODUCT_CARD_LIST_HEADER);(0,d.b)(F,D);const T=F.parentNode;if(T.hasAttribute(g.i.OBSERVED))return;new MutationObserver((0,c.sg)(N,50)).observe(T,{childList:!0,subtree:!0}),T.setAttribute(g.i.OBSERVED,"")}function D(F,T){(0,s.ZM)(F,v.r.CONTAINER);const U=(0,C.E9)(h,v.r.CONTROL,v.r.TEXT_INPUT),y=(0,C.Ch)(I,v.r.CONTROL,v.r.NUMBER_INPUT),x=(0,C.H1)(S,v.r.CONTROL,v.r.NUMBER_INPUT,"250"),w=(0,C.VD)(L,v.r.CONTROL,v.r.NUMBER_INPUT),B=(0,t.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",O,v.r.CONTROL,v.r.TEXT_INPUT),W=(0,C.pW)(_,v.r.CONTROL,v.r.CHECKBOX_INPUT);F.append(U,y,x,w,B,W),T.append(F)}function N(){(0,f.fI)(i.PRODUCT_CARD).forEach(M)}function M(F){if(!_.value){(0,n.kl)(F);return}const T=(0,f.Fi)(i.PRODUCT_CARD_TITLE,F),U=(0,f.Fi)(i.PRODUCT_CARD_CASHBACK,F),y=(0,f.Fi)(i.PRODUCT_CARD_DISCOUNT,F);if(!T){(0,n.Bt)(F);return}const x=T.innerText,w=(0,f.YA)(U,!0,!1,0),B=Math.abs((0,f.YA)(y,!0,!1,0)),K=+(0,p.Z)(F,i.PRODUCT_CARD_PRICE,w).getAttribute(g.i.BALANCED_CASHBACK_PRICE),V=(0,f.Fi)(i.PRODUCT_CARD_SELLER_NAME,F),H=V?(0,r.Ay)(V.innerText,O):!1,j=(0,r.Ay)(x,h)||(0,r.JE)(w,I)||(0,r.iG)(K,S)||(0,r.JE)(B,L)||H;(0,n.UC)(F,j)}},1901:(A,m,e)=>{e.d(m,{K:()=>o});var c=e(4921),d=e(5081),p=e(5406),l=e(5213),E=e(4639),r=e(3829),t=e(5539),n=e(573),f=e(7877),C=e(5884),g=e(1319),v=e(1926),P=e(4633),u=e(4521);const i={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var s=e(6754);const a=(0,d.B)((0,p.C$)(3)),{createGlobalFilter:b,createSectionFilter:h}=(0,u.z)(M,a),I=h("min-cashback-filter"),S=h("max-price-filter"),L=h("max-discounted-price-filter"),O=b("min-seller-rating-filter"),_=new E.a(null,M),R=b("filter-enabled",!1);async function o(){await D();const T=await(0,c.xk)(document,i.APP);new MutationObserver((0,c.sg)(D)).observe(T,{childList:!0})}async function D(){const T=await(0,c.xk)(document,i.OFFERS_FILTER);(0,l.b)(T,N),M();const U=(0,n.Fi)(i.OFFERS_CONTAINER);if(U.hasAttribute(v.i.OBSERVED))return;new MutationObserver((0,c.sg)(M,50)).observe(U,{childList:!0,subtree:!0}),U.setAttribute(v.i.OBSERVED,"")}function N(T,U){(0,s.ZM)(T,P.r.CONTAINER);const y=(0,f.Ch)(I,P.r.CONTROL,P.r.NUMBER_INPUT),x=(0,f.H1)(S,P.r.CONTROL,P.r.NUMBER_INPUT,"250"),w=(0,f.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",L,P.r.CONTROL,P.r.NUMBER_INPUT),B=(0,f.HX)(O,P.r.CONTROL,P.r.NUMBER_INPUT),W=(0,C.nW)("\u041A\u0443\u043F\u043E\u043D: ",_,"500","0","100000",P.r.CONTROL,P.r.NUMBER_INPUT),K=(0,f.pW)(R,P.r.CONTROL,P.r.CHECKBOX_INPUT);T.append(y,x,w,B,W,K),U.append(T)}function M(){(0,n.fI)(i.OFFER).forEach(F)}function F(T){if(!R.value){(0,t.kl)(T);return}const U=(0,n.Fi)(i.PRICE,T),y=(0,n.Fi)(i.CASHBACK,T),x=(0,n.Fi)(i.SELLER_RATING,T);if(!U||!y||!x){(0,t.Bt)(T);return}const w=(0,n.YA)(y,!0),B=(0,g.Z)(T,i.PRICE,w,_.value),W=+B.getAttribute(v.i.PRICE),K=+B.getAttribute(v.i.BALANCED_CASHBACK_PRICE),V=(0,n.YA)(x,!0),H=(0,r.JE)(w,I)||(0,r.iG)(W,S)||(0,r.iG)(K,L)||(0,r.JE)(V,O);(0,t.UC)(T,H)}}},$={};function k(A){var m=$[A];if(m!==void 0)return m.exports;var e=$[A]={exports:{}};return G[A](e,e.exports,k),e.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",c=p=>{p&&p.d<1&&(p.d=1,p.forEach(l=>l.r--),p.forEach(l=>l.r--?l.r++:l()))},d=p=>p.map(l=>{if(l!==null&&typeof l=="object"){if(l[A])return l;if(l.then){var E=[];E.d=0,l.then(n=>{r[m]=n,c(E)},n=>{r[e]=n,c(E)});var r={};return r[A]=n=>n(E),r}}var t={};return t[A]=n=>{},t[m]=l,t});k.a=(p,l,E)=>{var r;E&&((r=[]).d=-1);var t=new Set,n=p.exports,f,C,g,v=new Promise((P,u)=>{g=u,C=P});v[m]=n,v[A]=P=>(r&&P(r),t.forEach(P),v.catch(u=>{})),p.exports=v,l(P=>{f=d(P);var u,i=()=>f.map(a=>{if(a[e])throw a[e];return a[m]}),s=new Promise(a=>{u=()=>a(i),u.r=0;var b=h=>h!==r&&!t.has(h)&&(t.add(h),h&&!h.d&&(u.r++,h.push(u)));f.map(h=>h[A](b))});return u.r?s:i()},P=>(P?g(v[e]=P):C(n),c(r))),r&&r.d<0&&(r.d=0)}})(),k.d=(A,m)=>{for(var e in m)k.o(m,e)&&!k.o(A,e)&&Object.defineProperty(A,e,{enumerable:!0,get:m[e]})},k.o=(A,m)=>Object.prototype.hasOwnProperty.call(A,m);var z=k(4010)})();})();
