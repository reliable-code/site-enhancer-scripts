// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.75750712
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var G={5467:(T,m,e)=>{e.d(m,{E2:()=>l});var c=e(9928);function l(C,r={},t=null){const n=(0,c.Sw)(r,t);return n.append(C),n}function p(C,r=null,t={},n={}){const f=createActionLink(C,r,n);return l(f,t)}function d(C,r=null,t=null,n={},f={}){const v=createActionLinkWithIcon(C,t,r,f);return l(v,n)}},9928:(T,m,e)=>{e.d(m,{S:()=>C,Sw:()=>h,kU:()=>p,o5:()=>d});var c=e(4921),l=e(6754);function p(i,u,s){const E=r(i,"text",u);return E.value=s,E}function d(i,u,s,E,I,y){const U=r(i,"number",u);return U.value=s,U.step=E,U.min=I,U.max=y,U}function C(i,u,s){const E=r(i,"checkbox",u);return E.checked=s,E}function r(i={},u=null,s=null){const E=o("input",i);return u&&(E.type=u),s&&(E.addEventListener("keyup",(0,c.sg)(s,200)),E.addEventListener("change",(0,c.sg)(s,100))),E}function t(i={},u=null){return o("span",i,u)}function n(i={},u=null,s=null){const E=o("a",i,u);return s&&(E.href=s),E}function f(i,u=null,s={}){s.cursor||="pointer";const E=n(s,u);return i&&E.addEventListener("click",i),E}function v(i,u,s=null,E={},I={}){E.display||="inline-flex",E.alignItems||="center",E.gap||="0.25em";const y=f(i,s,E);return y.prepend(P(u,I)),y}function b(i={},u=null,s=null){const E=o("button",i,u);return s&&E.addEventListener("click",s),E}function h(i={},u=null){return o("div",i,u)}function O(i={}){return o("i",i)}function P(i,u={}){u.width||="1em",u.height||="1em",u.paddingBottom||="1px";const s=O(u);return s.setAttribute("data-lucide",i),s}function o(i,u,s=null){if(typeof u!="object"||u===null)throw new TypeError("styles should be an object");const E=document.createElement(i);return(0,l.ZM)(E,u),s&&(E.innerHTML=s),E}},573:(T,m,e)=>{e.d(m,{Fi:()=>p,YA:()=>n,fI:()=>d});var c=e(4214);function l(o,i=document){return!!i.querySelector(o)}function p(o,i=document,u=!1){const s=i.querySelector(o);return u&&!s&&console.log(`No element found for selector: ${o}`),s}function d(o,i=document,u=!1){const s=i.querySelectorAll(o);return u&&!s.length&&console.log(`No elements found for selector: ${o}`),s}function C(o,i=1){let u=o;for(let s=0;s<i;s++){if(!u.parentElement)return null;u=u.parentElement}return u}function r(o,i,u){return[...o.querySelectorAll(i)].find(s=>s.textContent.trim().includes(u))}function t(o,i,u=!1,s=!1,E=null){const I=p(i,o);return n(I,u,s,E)}function n(o,i=!1,u=!1,s=null){if(!o)return s===null?(console.log("No element found"),null):s;const E=o.innerText;return b(E,i,u)}function f(o,i,u=!1){const s=o[i];return n(s,u)}function v(o,i=!1,u=!1){const s=o.textContent;return b(s,i,u)}function b(o,i,u){i&&(o=(0,c.zr)(o)),u&&(o=o.replace(",","."));const s=Number(o);return Number.isNaN(s)?(console.log(`Invalid number: ${o}`),0):s}function h(o){return[...o.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function O(o){const i=u=>u.nodeType===Node.TEXT_NODE&&u.textContent.trim()!==""?[u]:[...u.childNodes].flatMap(i);return i(o)}function P(o){return normalizeSpacing(o.textContent)}},5539:(T,m,e)=>{e.d(m,{Bt:()=>l,UC:()=>f,kl:()=>t});function c(a,D){a.parentNode.insertBefore(D,a.nextSibling)}function l(a){a.style.display="none"}function p(a,D=1){const R=document.querySelector(a);R&&d(R,D)}function d(a,D=1){const R=getElementAncestor(a,D);R&&l(R)}function C(a){h(a),l(a)}function r(a){a.intersectionObserver||runOnceOnIntersection(a,()=>l(a))}function t(a){a.style.display=""}function n(a){const D=b(a);a.style.display=D}function f(a,D){D?l(a):t(a)}function v(a,D){D?r(a):(clearIntersectionObserver(a),t(a))}function b(a){return h(a),a.defaultDisplay}function h(a){if(a.defaultDisplay)return;const{display:D}=getComputedStyle(a);a.defaultDisplay=D}function O(){return{show:[],hide:[]}}function P(a,D,R){a?D.hide.push(R):D.show.push(R)}function o(a){a.show.forEach(t),a.hide.forEach(l)}function i(a,D,R=.3){D?s(a,R):u(a)}function u(a){a.style.opacity=""}function s(a,D=.3){a.style.opacity=D}function E(a){a.style.order=""}function I(a,D){a.style.order=D}function y(a,D){a.style.background=D}function U(a,D){const R=getFirstElement(D);R&&g(a,R)}function g(a,D){const R=createLink();R.href=a,D.parentNode.append(R),R.append(D)}function _(a,D){const R=getFirstElement(D);R&&A(a,R)}function A(a,D){const R=createLink();R.href=a,R.append(...D.childNodes),D.append(R)}function F(){const a=getURLQueryParam("scrollTo");if(!a)return;const D=document.getElementById(a);D?D.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function M(a,D,R="text/plain"){const N=new Blob([a],{type:R}),L=URL.createObjectURL(N),S=document.createElement("a");S.href=L,S.download=D,document.body.appendChild(S),S.click(),document.body.removeChild(S),requestAnimationFrame(()=>URL.revokeObjectURL(L))}},6754:(T,m,e)=>{e.d(m,{ZM:()=>c});function c(C,r){Object.assign(C.style,r)}function l(C,r="custom-global-style"){let t=document.getElementById(r);t||(t=document.createElement("style"),t.id=r,t.type="text/css",document.head.appendChild(t)),t.textContent=C}function p(C){return Object.entries(C).map(([r,t])=>`${r.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function d(C){return C?C.split(";").filter(r=>r.trim()!=="").reduce((r,t)=>{const[n,f]=t.split(":").map(b=>b.trim()),v=n.replace(/-([a-z])/g,(b,h)=>h.toUpperCase());return r[v]=f,r},{}):{}}},4921:(T,m,e)=>{e.d(m,{sg:()=>d,xk:()=>c});function c(t,n,f=null){const v=t.querySelector(n);return v?Promise.resolve(v):new Promise(b=>{const h=new MutationObserver(P);h.observe(t,{childList:!0,subtree:!0});let O;f&&(O=setTimeout(()=>{h.disconnect(),console.log(`No element found for selector: ${n}`),b(null)},f));function P(){const o=t.querySelector(n);o&&(O&&clearTimeout(O),h.disconnect(),b(o))}})}function l(t,n){return t.querySelector(n)?new Promise(v=>{const b=new MutationObserver(h);b.observe(t,{childList:!0,subtree:!0});function h(){t.querySelector(n)||(b.disconnect(),v())}}):Promise.resolve()}function p(t,n=400){return new Promise(f=>{let v;const b=new MutationObserver(()=>{clearTimeout(v),h()});function h(){v=setTimeout(()=>{b.disconnect(),f()},n)}h(),b.observe(t,{childList:!0,subtree:!0})})}function d(t,n=250){let f;return(...v)=>{clearTimeout(f),f=setTimeout(()=>t(...v),n)}}function C(t,n){const f=new IntersectionObserver(v=>{v.forEach(b=>{b.isIntersecting&&(n(),r(t))})});t.intersectionObserver=f,f.observe(t)}function r(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(T,m,e)=>{e.d(m,{Ay:()=>l,JE:()=>d,iG:()=>C});var c=e(8355);function l(t,n){return!p(t,n)}function p(t,n){if(!n.value)return!0;const f=t.toLowerCase(),v=(0,c.R)(n),b=[],h=[];return v.forEach(O=>{if(O.startsWith("!")){const P=O.substring(1);P&&h.push(P)}else b.push(O)}),b.every(O=>f.includes(O))&&h.every(O=>!f.includes(O))}function d(t,n){return n.value!=null&&t<n.value}function C(t,n){return n.value!=null&&t>n.value}function r(t,n){return n.value&&t!==n.value}},4521:(T,m,e)=>{e.d(m,{z:()=>l});var c=e(3048);function l(p,d=null){return{createGlobalFilter(C,r=null,t=p){return c.V.create(C,r,t)},createSectionFilter(C,r=null,t=p){if(!d)throw new Error("sectionId must be provided to use createSectionFilter.");return c.V.createWithCompositeKey(d,C,r,t)}}}},5884:(T,m,e)=>{e.d(m,{Hw:()=>C,Nm:()=>p,nW:()=>d});var c=e(9928),l=e(5467);function p(r,t,n={},f={}){const v=(0,c.kU)(f,t.updateValueFromEvent,t.value);return(0,l.E2)(v,n,r)}function d(r,t,n,f,v,b={},h={}){const O=(0,c.o5)(h,t.updateValueFromEvent,t.value,n,f,v);return(0,l.E2)(O,b,r)}function C(r,t,n={},f={}){const v=(0,c.S)(f,t.updateValueFromEvent,t.value);return(0,l.E2)(v,n,r)}},7877:(T,m,e)=>{e.d(m,{Ch:()=>v,E9:()=>l,H1:()=>O,HX:()=>p,VD:()=>n,Zi:()=>b,pW:()=>U});var c=e(5884);function l(g,_={},A={}){return(0,c.Nm)("\u041F\u043E\u0438\u0441\u043A: ",g,_,A)}function p(g,_={},A={},F=.1,M=3){return(0,c.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",g,F,M,5,_,A)}function d(g,_={},A={},F=.1,M=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",g,F,M,5,_,A)}function C(g,_={},A={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",g,_,A)}function r(g,_={},A={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",g,_,A)}function t(g,_,A={},F={}){return createNumberFilterControl(g,_,"1","1","999999",A,F)}function n(g,_={},A={}){return f("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",g,_,A)}function f(g,_,A={},F={}){return(0,c.nW)(g,_,"5","0","100",A,F)}function v(g,_={},A={}){return(0,c.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",g,"5","0","100",_,A)}function b(g,_,A={},F={},M="250"){return(0,c.nW)(g,_,M,"0","1000000",A,F)}function h(g,_={},A={},F="25"){return b("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",g,_,A,F)}function O(g,_={},A={},F="25"){return b("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",g,_,A,F)}function P(g,_={},A={}){return o("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",g,_,A)}function o(g,_,A={},F={}){return createNumberFilterControl(g,_,"1","0","99999",A,F)}function i(g,_={},A={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",g,"1","2","7",_,A)}function u(g,_={},A={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",g,1,1,10,_,A)}function s(g,_={},A={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",g,_,A)}function E(g,_={},A={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",g,_,A)}function I(g,_={},A={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",g,_,A)}function y(g,_={},A={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",g,_,A)}function U(g,_={},A={}){return(0,c.Hw)("\u0412\u043A\u043B: ",g,_,A)}},8355:(T,m,e)=>{e.d(m,{R:()=>c});function c(p){return p.value.toLowerCase().split(",").map(d=>d.trim()).filter(d=>d!=="")}function l(p){return c(p).filter(d=>!d.startsWith("!"))}},5213:(T,m,e)=>{e.d(m,{b:()=>p});var c=e(9928),l=e(573);function p(d,C,r=!1,t="customFiltersContainer"){let n=(0,l.Fi)(`#${t}`,d);if(n)if(r)n.remove();else return;n=(0,c.Sw)(),n.id=t,C(n,d)}},4444:(T,m,e)=>{e.d(m,{s:()=>c});function c(l){let C=2166136261;for(let r=0;r<l.length;r+=1){const t=l.charCodeAt(r);C^=t,C=Math.imul(C,16777619)}return C>>>0}},5081:(T,m,e)=>{e.d(m,{B:()=>p});var c=e(4444);function l(d){return(0,c.s)(d).toString(16).padStart(8,"0")}function p(d,C="common"){return d?l(d):C}},8200:(T,m,e)=>{e.d(m,{s:()=>c});function c(l){const{target:p}=l,{type:d}=p;switch(d){case"text":return`"${p.value}"`;case"number":return p.value;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${d}`),null}}},157:(T,m,e)=>{e.d(m,{Fg:()=>c,vx:()=>p});const c=window.GM_setValue,l=window.GM.setValue,p=window.GM_getValue},4639:(T,m,e)=>{e.d(m,{a:()=>d});var c=e(1870),l=e(8200),p=e(3976);class d extends c.j{constructor(r=null,t=null){super(r,t)}updateValueFromEvent=r=>{const t=(0,p.$)((0,l.s)(r));this.value!==t&&(this.value=t,this.onChangeIfDefined())}}},1870:(T,m,e)=>{e.d(m,{j:()=>c});class c{constructor(p,d){this.value=p,this.onChange=d}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,m,e)=>{e.d(m,{V:()=>C});var c=e(1870),l=e(8200),p=e(3976),d=e(157);class C extends c.j{constructor(t,n=null,f=null){super((0,d.vx)(t,n),f),this.storageKey=t,this.defaultValue=n}static create(t,n=null,f=null){return new C(t,n,f)}static createWithCompositeKey(t,n,f=null,v=null){const b=`${t}-${n}`;return new C(b,f,v)}updateValueFromEvent=t=>{const n=(0,l.s)(t),f=(0,p.$)(n);this.updateValue(f)};updateValue(t,n=!0){this.value!==t&&((0,d.Fg)(this.storageKey,t),this.value=t,n&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(T,m,e)=>{e.d(m,{$:()=>c});function c(l){return l===""?null:JSON.parse(l)}},4214:(T,m,e)=>{e.d(m,{zr:()=>l});function c(r){return r.replace(/\D/g,"")}function l(r){return r.replace(/[^\d.,-]/g,"")}function p(r){return r.replace(/\s/g,"")}function d(r){return r.charAt(0).toUpperCase()+r.slice(1)}function C(r){return r.replace(/\s+/g," ").trim()}},5406:(T,m,e)=>{e.d(m,{C$:()=>p,Fc:()=>c,W2:()=>n});function c(P,o="common",i=!1){const{pathname:u}=window.location;return l(u,P,o,i)}function l(P,o,i,u=!1){const s=P.split("/");o=o<0?s.length+o:o;const E=s[o]||i;return u&&console.log(`Pathname element: ${E}`),E}function p(P,o="common",i=!1){const u=c(P,"",i);return d(u,o,i)}function d(P,o,i){if(!P)return o;const u=P.split("-").at(-1);return i&&console.log(`Pathname element ending: ${u}`),u}function C(P,o,i="common",u=!1){const s=l(P,o,"",u);return d(s,i,u)}function r(P){return new URLSearchParams(window.location.search).get(P)}function t(P){return P.split("?")[0]}function n(P){return window.location.pathname.includes(P)}function f(P){return P.some(o=>n(o))}function v(P){return window.location.pathname.split("/").some(i=>i===P)}function b(P){try{const o=new URL(window.location.href);Object.entries(P).forEach(([i,u])=>{o.searchParams.set(i,u)}),window.location.href=o.toString()}catch(o){console.error("Failed to redirect:",o)}}function h(P,o=[]){const i={pathname:window.location.pathname};o.forEach(E=>{i[E]=r(E)});function u(){const E={pathname:window.location.pathname};o.forEach(I=>{E[I]=r(I)}),Object.keys(i).some(I=>i[I]!==E[I])&&P()}let s=window.location.href;setInterval(()=>{window.location.href!==s&&(s=window.location.href,u())},200),window.addEventListener("popstate",u)}function O(P=[]){h(()=>window.location.reload(),P)}},4010:(T,m,e)=>{e.a(T,async(c,l)=>{try{let r=function(){return(0,C.W2)("details")};var p=e(1901),d=e(2344),C=e(5406);r()?await(0,p.K)():await(0,d.P)(),l()}catch(r){l(r)}},1)},1926:(T,m,e)=>{e.d(m,{i:()=>c});const c={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,m,e)=>{e.d(m,{Z:()=>p});var c=e(573),l=e(1926);function p(n,f,v,b){const h=(0,c.Fi)(f,n);return(d(h,b)||!h.hasAttribute(l.i.BALANCED_CASHBACK_PRICE))&&C(h,v,b),h}function d(n,f){if(n.hasAttribute(l.i.COUPON)){const v=+n.getAttribute(l.i.COUPON);return f!==v}return!!f}function C(n,f,v){let b=r(n);n.setAttribute(l.i.PRICE,b),v?(v<1?b=(b*(1-v)).toFixed():b-=v,n.setAttribute(l.i.COUPON,v)):n.removeAttribute(l.i.COUPON);const h=t(b,f),O=b-h;n.setAttribute(l.i.BALANCED_CASHBACK_PRICE,O);const P=`${b.toLocaleString()} (${O.toLocaleString()}) \u20BD`;n.innerText=P,n.title=`-${h.toLocaleString()}`}function r(n){return n.hasAttribute(l.i.PRICE)?+n.getAttribute(l.i.PRICE):(0,c.YA)(n,!0)}function t(n,f){const v=f/100;return(n*v/(1+v)).toFixed(0)}},4633:(T,m,e)=>{e.d(m,{r:()=>l});const c={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},l={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...c.INPUT,width:"180px"},NUMBER_INPUT:{...c.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,m,e)=>{e.d(m,{P:()=>A});var c=e(4921),l=e(5213),p=e(1319),d=e(5406),C=e(4639),r=e(3829),t=e(5884),n=e(5539),f=e(573),v=e(7877),b=e(1926),h=e(4633),O=e(4521),P=e(5081);const o={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var i=e(6754);const u=(0,P.B)((0,d.Fc)(2)),{createSectionFilter:s}=(0,O.z)(a,u),E=s("name-filter"),I=s("min-cashback-filter"),y=s("max-price-filter"),U=s("min-discount-filter"),g=s("seller-name-filter"),_=new C.a(!1,a);async function A(){await F();const R=await(0,c.xk)(document,"#app");new MutationObserver((0,c.sg)(F)).observe(R,{childList:!0,subtree:!0})}async function F(){const R=await(0,c.xk)(document,o.PRODUCT_CARD_LIST_HEADER);(0,l.b)(R,M);const N=R.parentNode;if(N.hasAttribute(b.i.OBSERVED))return;new MutationObserver((0,c.sg)(a,50)).observe(N,{childList:!0,subtree:!0}),N.setAttribute(b.i.OBSERVED,"")}function M(R,N){(0,i.ZM)(R,h.r.CONTAINER);const L=(0,v.E9)(E,h.r.CONTROL,h.r.TEXT_INPUT),S=(0,v.Ch)(I,h.r.CONTROL,h.r.NUMBER_INPUT),x=(0,v.H1)(y,h.r.CONTROL,h.r.NUMBER_INPUT,"250"),w=(0,v.VD)(U,h.r.CONTROL,h.r.NUMBER_INPUT),B=(0,t.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",g,h.r.CONTROL,h.r.TEXT_INPUT),W=(0,v.pW)(_,h.r.CONTROL,h.r.CHECKBOX_INPUT);R.append(L,S,x,w,B,W),N.append(R)}function a(){(0,f.fI)(o.PRODUCT_CARD).forEach(D)}function D(R){if(!_.value){(0,n.kl)(R);return}const N=(0,f.Fi)(o.PRODUCT_CARD_TITLE,R),L=(0,f.Fi)(o.PRODUCT_CARD_CASHBACK,R),S=(0,f.Fi)(o.PRODUCT_CARD_DISCOUNT,R);if(!N){(0,n.Bt)(R);return}const x=N.innerText,w=(0,f.YA)(L,!0,!1,0),B=Math.abs((0,f.YA)(S,!0,!1,0)),K=+(0,p.Z)(R,o.PRODUCT_CARD_PRICE,w).getAttribute(b.i.BALANCED_CASHBACK_PRICE),V=(0,f.Fi)(o.PRODUCT_CARD_SELLER_NAME,R),H=V?(0,r.Ay)(V.innerText,g):!1,j=(0,r.Ay)(x,E)||(0,r.JE)(w,I)||(0,r.iG)(K,y)||(0,r.JE)(B,U)||H;(0,n.UC)(R,j)}},1901:(T,m,e)=>{e.d(m,{K:()=>F});var c=e(4921),l=e(5081),p=e(5406),d=e(5213),C=e(4639),r=e(3829),t=e(5539),n=e(573),f=e(7877),v=e(5884),b=e(1319),h=e(1926),O=e(4633),P=e(4521);const o={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var i=e(6754);const u=(0,l.B)((0,p.C$)(3)),{createGlobalFilter:s,createSectionFilter:E}=(0,P.z)(D,u),I=E("min-cashback-filter"),y=E("max-price-filter"),U=E("max-discounted-price-filter"),g=s("min-seller-rating-filter"),_=new C.a(null,D),A=s("filter-enabled",!1);async function F(){await M();const N=await(0,c.xk)(document,o.APP);new MutationObserver((0,c.sg)(M)).observe(N,{childList:!0})}async function M(){const N=await(0,c.xk)(document,o.OFFERS_FILTER);(0,d.b)(N,a),D();const L=(0,n.Fi)(o.OFFERS_CONTAINER);if(L.hasAttribute(h.i.OBSERVED))return;new MutationObserver((0,c.sg)(D,50)).observe(L,{childList:!0,subtree:!0}),L.setAttribute(h.i.OBSERVED,"")}function a(N,L){(0,i.ZM)(N,O.r.CONTAINER);const S=(0,f.Ch)(I,O.r.CONTROL,O.r.NUMBER_INPUT),x=(0,f.H1)(y,O.r.CONTROL,O.r.NUMBER_INPUT,"250"),w=(0,f.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",U,O.r.CONTROL,O.r.NUMBER_INPUT),B=(0,f.HX)(g,O.r.CONTROL,O.r.NUMBER_INPUT),W=(0,v.nW)("\u041A\u0443\u043F\u043E\u043D: ",_,"500","0","100000",O.r.CONTROL,O.r.NUMBER_INPUT),K=(0,f.pW)(A,O.r.CONTROL,O.r.CHECKBOX_INPUT);N.append(S,x,w,B,W,K),L.append(N)}function D(){(0,n.fI)(o.OFFER).forEach(R)}function R(N){if(!A.value){(0,t.kl)(N);return}const L=(0,n.Fi)(o.PRICE,N),S=(0,n.Fi)(o.CASHBACK,N),x=(0,n.Fi)(o.SELLER_RATING,N);if(!L||!S||!x){(0,t.Bt)(N);return}const w=(0,n.YA)(S,!0),B=(0,b.Z)(N,o.PRICE,w,_.value),W=+B.getAttribute(h.i.PRICE),K=+B.getAttribute(h.i.BALANCED_CASHBACK_PRICE),V=(0,n.YA)(x,!0),H=(0,r.JE)(w,I)||(0,r.iG)(W,y)||(0,r.iG)(K,U)||(0,r.JE)(V,g);(0,t.UC)(N,H)}}},$={};function k(T){var m=$[T];if(m!==void 0)return m.exports;var e=$[T]={exports:{}};return G[T](e,e.exports,k),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",c=p=>{p&&p.d<1&&(p.d=1,p.forEach(d=>d.r--),p.forEach(d=>d.r--?d.r++:d()))},l=p=>p.map(d=>{if(d!==null&&typeof d=="object"){if(d[T])return d;if(d.then){var C=[];C.d=0,d.then(n=>{r[m]=n,c(C)},n=>{r[e]=n,c(C)});var r={};return r[T]=n=>n(C),r}}var t={};return t[T]=n=>{},t[m]=d,t});k.a=(p,d,C)=>{var r;C&&((r=[]).d=-1);var t=new Set,n=p.exports,f,v,b,h=new Promise((O,P)=>{b=P,v=O});h[m]=n,h[T]=O=>(r&&O(r),t.forEach(O),h.catch(P=>{})),p.exports=h,d(O=>{f=l(O);var P,o=()=>f.map(u=>{if(u[e])throw u[e];return u[m]}),i=new Promise(u=>{P=()=>u(o),P.r=0;var s=E=>E!==r&&!t.has(E)&&(t.add(E),E&&!E.d&&(P.r++,E.push(P)));f.map(E=>E[T](s))});return P.r?i:o()},O=>(O?b(h[e]=O):v(n),c(r))),r&&r.d<0&&(r.d=0)}})(),k.d=(T,m)=>{for(var e in m)k.o(m,e)&&!k.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:m[e]})},k.o=(T,m)=>Object.prototype.hasOwnProperty.call(T,m);var z=k(4010)})();})();
