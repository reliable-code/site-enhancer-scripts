// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76927367
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(T,m,e)=>{e.d(m,{E2:()=>f});var d=e(9928);function f(g,u={},i=null){const t=(0,d.Sw)(u,i);return t.append(g),t}function b(g,u=null,i={},t={}){const n=createActionLink(g,u,t);return f(n,i)}function p(g,u=null,i=null,t={},n={}){const s=createActionLinkWithIcon(g,i,u,n);return f(s,t)}},9928:(T,m,e)=>{e.d(m,{S:()=>u,Sw:()=>v,kU:()=>b,o5:()=>p});var d=e(4921),f=e(6754);function b(l,C,N){const A=i(l,"text",C);return A.value=N,A}function p(l,C,N,A,x,w){const M=i(l,"number",C);return M.value=N,M.step=A,M.min=x,M.max=w,M}function g(l,C,N){const A=i(l,"date",C);return A.value=N,A}function u(l,C,N){const A=i(l,"checkbox",C);return A.checked=N,A}function i(l={},C=null,N=null){const A=E("input",l);return C&&(A.type=C),N&&(A.addEventListener("keyup",(0,d.sg)(N,200)),A.addEventListener("change",(0,d.sg)(N,100))),A}function t(l,C,N){const A=E("select",l);return C&&A.addEventListener("change",C),A.value=N,A}function n(l={},C=null){return E("span",l,C)}function s(l={},C=null,N=null){const A=E("a",l,C);return N&&(A.href=N),A}function c(l,C=null,N={}){N.cursor||="pointer";const A=s(N,C);return l&&A.addEventListener("click",l),A}function r(l,C,N=null,A={},x={}){A.display||="inline-flex",A.alignItems||="center",A.gap||="0.25em";const w=c(l,N,A);return w.prepend(D(C,x)),w}function _(l={},C=null,N=null){const A=E("button",l,C);return N&&A.addEventListener("click",N),A}function v(l={},C=null){return E("div",l,C)}function o(l={},C=null){return E("i",l,C)}function D(l,C={}){C.width||="1em",C.height||="1em",C.paddingBottom||="1px";const N=o(C);return N.setAttribute("data-lucide",l),N}function E(l,C,N=null){if(typeof C!="object"||C===null)throw new TypeError("styles should be an object");const A=document.createElement(l);return(0,f.ZM)(A,C),N&&(A.innerHTML=N),A}},573:(T,m,e)=>{e.d(m,{Fi:()=>b,YA:()=>t,fI:()=>p});var d=e(4214);function f(o,D=document){return!!D.querySelector(o)}function b(o,D=document,E=!1){const l=D.querySelector(o);return E&&!l&&console.log(`No element found for selector: ${o}`),l}function p(o,D=document,E=!1){const l=D.querySelectorAll(o);return E&&!l.length&&console.log(`No elements found for selector: ${o}`),l}function g(o,D=1){let E=o;for(let l=0;l<D;l++){if(!E.parentElement)return null;E=E.parentElement}return E}function u(o,D,E){return[...o.querySelectorAll(D)].find(l=>l.textContent.trim().includes(E))}function i(o,D,E=!1,l=!1,C=null){const N=b(D,o);return t(N,E,l,C)}function t(o,D=!1,E=!1,l=null){if(!o)return l===null?(console.log("No element found"),null):l;const C=o.innerText;return c(C,D,E)}function n(o,D,E=!1){const l=o[D];return t(l,E)}function s(o,D=!1,E=!1){const l=o.textContent;return c(l,D,E)}function c(o,D,E){D&&(o=(0,d.zr)(o)),E&&(o=o.replace(",","."));const l=Number(o);return Number.isNaN(l)?(console.log(`Invalid number: ${o}`),0):l}function r(o){return[...o.childNodes].find(D=>D.nodeType===Node.TEXT_NODE)}function _(o){const D=E=>E.nodeType===Node.TEXT_NODE&&E.textContent.trim()!==""?[E]:[...E.childNodes].flatMap(D);return D(o)}function v(o){return normalizeSpacing(o.textContent)}},5539:(T,m,e)=>{e.d(m,{Bt:()=>f,UC:()=>n,kl:()=>i});function d(a,h){a.parentNode.insertBefore(h,a.nextSibling)}function f(a){a.style.display="none"}function b(a,h=1){const P=document.querySelector(a);P&&p(P,h)}function p(a,h=1){const P=getElementAncestor(a,h);P&&f(P)}function g(a){r(a),f(a)}function u(a){a.intersectionObserver||runOnceOnIntersection(a,()=>f(a))}function i(a){a.style.display=""}function t(a){const h=c(a);a.style.display=h}function n(a,h){h?f(a):i(a)}function s(a,h){h?u(a):(clearIntersectionObserver(a),i(a))}function c(a){return r(a),a.defaultDisplay}function r(a){if(a.defaultDisplay)return;const{display:h}=getComputedStyle(a);a.defaultDisplay=h}function _(){return{show:[],hide:[]}}function v(a,h,P){a?h.hide.push(P):h.show.push(P)}function o(a){a.show.forEach(i),a.hide.forEach(f)}function D(a,h,P=.3){h?l(a,P):E(a)}function E(a){a.style.opacity=""}function l(a,h=.3){a.style.opacity=h}function C(a){a.style.order=""}function N(a,h){a.style.order=h}function A(a,h){a.style.background=h}function x(a,h){const P=getFirstElement(h);P&&w(a,P)}function w(a,h){const P=createLink();P.href=a,h.parentNode.append(P),P.append(h)}function M(a,h){const P=getFirstElement(h);P&&R(a,P)}function R(a,h,P={}){const L=createLink(P);L.href=a,L.append(...h.childNodes),h.append(L)}function O(){const a=getURLQueryParam("scrollTo");if(!a)return;const h=document.getElementById(a);h?h.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function F(a,h,P=null){const L=`${h}-click-passed`,S=P?I=>findElementByText(I,a,P):I=>getFirstElement(a,I);return function(I){if(I.hasAttribute(L))return!1;const U=S(I);return U&&U.click(),I.setAttribute(L,""),!0}}function y(a,h,P="text/plain"){const L=new Blob([a],{type:P}),S=URL.createObjectURL(L),I=document.createElement("a");I.href=S,I.download=h,document.body.appendChild(I),I.click(),document.body.removeChild(I),requestAnimationFrame(()=>URL.revokeObjectURL(S))}},6754:(T,m,e)=>{e.d(m,{ZM:()=>d});function d(g,u){Object.assign(g.style,u)}function f(g,u="custom-global-style"){let i=document.getElementById(u);i||(i=document.createElement("style"),i.id=u,i.type="text/css",document.head.appendChild(i)),i.textContent=g}function b(g){return Object.entries(g).map(([u,i])=>`${u.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${i};`).join(" ")}function p(g){return g?g.split(";").filter(u=>u.trim()!=="").reduce((u,i)=>{const[t,n]=i.split(":").map(c=>c.trim()),s=t.replace(/-([a-z])/g,(c,r)=>r.toUpperCase());return u[s]=n,u},{}):{}}},4921:(T,m,e)=>{e.d(m,{sg:()=>p,xk:()=>d});function d(n,s,c=null){const r=n.querySelector(s);return r?Promise.resolve(r):new Promise(_=>{const v=new MutationObserver(D);v.observe(n,{childList:!0,subtree:!0});let o;c&&(o=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${s}`),_(null)},c));function D(){const E=n.querySelector(s);E&&(o&&clearTimeout(o),v.disconnect(),_(E))}})}function f(n,s){return n.querySelector(s)?new Promise(r=>{const _=new MutationObserver(v);_.observe(n,{childList:!0,subtree:!0});function v(){n.querySelector(s)||(_.disconnect(),r())}}):Promise.resolve()}function b(n,s=400){return new Promise(c=>{let r;const _=new MutationObserver(()=>{clearTimeout(r),v()});function v(){r=setTimeout(()=>{_.disconnect(),c()},s)}v(),_.observe(n,{childList:!0,subtree:!0})})}function p(n,s=250){let c;return(...r)=>{clearTimeout(c),c=setTimeout(()=>n(...r),s)}}async function g(n){document.visibilityState==="visible"?await n():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await n()},{once:!0})}function u(n,s){const c=new IntersectionObserver(r=>{r.forEach(_=>{_.isIntersecting&&(s(),i(n))})});n.intersectionObserver=c,c.observe(n)}function i(n){n.intersectionObserver&&(n.intersectionObserver.disconnect(),n.intersectionObserver=null)}function t(n){n&&(n.disconnect(),n=null)}},3829:(T,m,e)=>{e.d(m,{Ay:()=>f,JE:()=>u,iG:()=>i});var d=e(8355);function f(c,r){return!b(c,r)}function b(c,r){if(!r||!r.value)return!0;const _=(0,d._7)(r.value);return p(c,_)}function p(c,r){if(!r||!r.length)return!0;const _=(c||"").toLowerCase();return r.every(v=>g(_,v))}function g(c,r){return r.some(({term:_,isNegative:v})=>{const o=c.includes(_);return v?!o:o})}function u(c,r){return r.value!=null&&c<r.value}function i(c,r){return r.value!=null&&c>r.value}function t(c,r){return r.value==null?!1:c<parseDateFromISO(r.value)}function n(c,r){return r.value==null?!1:c>parseDateFromISO(r.value)}function s(c,r){return r.value&&c!==r.value}},4521:(T,m,e)=>{e.d(m,{z:()=>f});var d=e(3048);function f(b,p=null){return{createGlobalFilter(g,u=null,i=b){return d.V.create(g,u,i)},createSectionFilter(g,u=null,i=b){if(!p)throw new Error("sectionId must be provided to use createSectionFilter.");return d.V.createWithCompositeKey(p,g,u,i)}}}},5884:(T,m,e)=>{e.d(m,{Hw:()=>i,Nm:()=>b,nW:()=>p});var d=e(9928),f=e(5467);function b(t,n,s={},c={}){const r=(0,d.kU)(c,n.updateValueFromEvent,n.value);return(0,f.E2)(r,s,t)}function p(t,n,s,c,r,_={},v={}){const o=(0,d.o5)(v,n.updateValueFromEvent,n.value,s,c,r);return(0,f.E2)(o,_,t)}function g(t,n,s={},c={}){const r=createSelect(c,n.updateValueFromEvent,n.value);return createControl(r,s,t)}function u(t,n,s={},c={}){const r=createDateInput(c,n.updateValueFromEvent,n.value);return createControl(r,s,t)}function i(t,n,s={},c={}){const r=(0,d.S)(c,n.updateValueFromEvent,n.value);return(0,f.E2)(r,s,t)}},7877:(T,m,e)=>{e.d(m,{Ch:()=>c,E9:()=>f,H1:()=>v,HX:()=>b,VD:()=>n,Zi:()=>r,pW:()=>w});var d=e(5884);function f(R,O={},F={}){return(0,d.Nm)("\u041F\u043E\u0438\u0441\u043A: ",R,O,F)}function b(R,O={},F={},y=.1,a=3){return(0,d.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",R,y,a,5,O,F)}function p(R,O={},F={},y=.1,a=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",R,y,a,5,O,F)}function g(R,O={},F={}){return i("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",R,O,F)}function u(R,O={},F={}){return i("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",R,O,F)}function i(R,O,F={},y={}){return createNumberFilterControl(R,O,"1","1","999999",F,y)}function t(R,O={},F={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",R,O,F)}function n(R,O={},F={}){return s("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",R,O,F)}function s(R,O,F={},y={}){return(0,d.nW)(R,O,"5","0","100",F,y)}function c(R,O={},F={}){return(0,d.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",R,"5","0","100",O,F)}function r(R,O,F={},y={},a="250"){return(0,d.nW)(R,O,a,"0","1000000",F,y)}function _(R,O={},F={},y="25"){return r("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",R,O,F,y)}function v(R,O={},F={},y="25"){return r("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",R,O,F,y)}function o(R,O={},F={}){return D("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",R,O,F)}function D(R,O,F={},y={}){return createNumberFilterControl(R,O,"1","0","99999",F,y)}function E(R,O={},F={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",R,"1","2","8",O,F)}function l(R,O={},F={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",R,1,1,10,O,F)}function C(R,O={},F={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",R,O,F)}function N(R,O={},F={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",R,O,F)}function A(R,O={},F={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",R,O,F)}function x(R,O={},F={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",R,O,F)}function w(R,O={},F={}){return(0,d.Hw)("\u0412\u043A\u043B: ",R,O,F)}function M(R,O,F={}){const y=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],a={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},h=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),P=[],L=()=>O?parseFloat(O.value)||0:R.value,S=()=>{const I=L();P.forEach(({button:U,value:k})=>{const W=k<=I?a.active:a.inactive;Object.assign(U.style,W)})};return y.forEach(({value:I,emoji:U,tooltip:k})=>{const B=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...F},U);B.title=k,B.type="button",B.addEventListener("click",W=>{W.preventDefault(),R.updateValue(I),O&&(O.value=I),S()}),B.addEventListener("mouseenter",()=>{I<=L()||(B.style.background=a.hover.background)}),B.addEventListener("mouseleave",()=>{S()}),P.push({button:B,value:I}),h.appendChild(B)}),S(),O&&(O.addEventListener("input",S),O.addEventListener("change",S)),h}},8355:(T,m,e)=>{e.d(m,{_7:()=>f});function d(t){if(!t)return[];const s=f(t).flat().filter(c=>c&&!c.isNegative&&c.term).map(c=>c.term);return[...new Set(s)]}function f(t){return t?t.toLowerCase().split(",").map(b).filter(Boolean):[]}function b(t){const n=t.split("/").map(c=>c.trim()).filter(Boolean);if(n.length===0)return null;const s=n.map(p).filter(Boolean);return s.length>0?s:null}function p(t){const n=t.startsWith("!"),s=n?t.slice(1).trim():t;return s?{term:s,isNegative:n}:null}function g(t,n){i(t,s=>s.style.display!=="none",n)}function u(t,n){i(t,s=>s.style.opacity==="",n)}function i(t,n,s){const c=[...t].filter(n).length;s.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${c} \u0438\u0437 ${t.length}`}},5213:(T,m,e)=>{e.d(m,{b:()=>b});var d=e(9928),f=e(573);function b(p,g,u=!1,i="customFiltersContainer"){let t=(0,f.Fi)(`#${i}`,p);if(t)if(u)t.remove();else return;t=(0,d.Sw)(),t.id=i,g(t,p)}},4444:(T,m,e)=>{e.d(m,{s:()=>d});function d(f){let g=2166136261;for(let u=0;u<f.length;u+=1){const i=f.charCodeAt(u);g^=i,g=Math.imul(g,16777619)}return g>>>0}},5081:(T,m,e)=>{e.d(m,{B:()=>b});var d=e(4444);function f(p){return(0,d.s)(p).toString(16).padStart(8,"0")}function b(p,g="common"){return p?f(p):g}},8200:(T,m,e)=>{e.d(m,{s:()=>d});function d(f){const{target:b}=f,{type:p}=b;switch(p){case"text":return`"${b.value}"`;case"number":return b.value;case"select-one":return b.value;case"date":return`"${b.value}"`;case"checkbox":return b.checked;default:return console.log(`Unknown input type: ${p}`),null}}},157:(T,m,e)=>{e.d(m,{Fg:()=>d,vx:()=>b});const d=window.GM_setValue,f=window.GM.setValue,b=window.GM_getValue},4639:(T,m,e)=>{e.d(m,{a:()=>p});var d=e(1870),f=e(8200),b=e(3976);class p extends d.j{constructor(u=null,i=null){super(u,i)}updateValueFromEvent=u=>{const i=(0,b.$)((0,f.s)(u));this.value!==i&&(this.value=i,this.onChangeIfDefined())}}},1870:(T,m,e)=>{e.d(m,{j:()=>d});class d{constructor(b,p){this.value=b,this.onChange=p}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,m,e)=>{e.d(m,{V:()=>g});var d=e(1870),f=e(8200),b=e(3976),p=e(157);class g extends d.j{constructor(i,t=null,n=null){super((0,p.vx)(i,t),n),this.storageKey=i,this.defaultValue=t}static create(i,t=null,n=null){return new g(i,t,n)}static createWithCompositeKey(i,t,n=null,s=null){const c=`${i}-${t}`;return new g(c,n,s)}updateValueFromEvent=i=>{const t=(0,f.s)(i),n=(0,b.$)(t);this.updateValue(n)};updateValue(i,t=!0){this.value!==i&&((0,p.Fg)(this.storageKey,i),this.value=i,t&&this.onChangeIfDefined())}clearValue(i=!1){this.updateValue(null,i)}resetValue(i=!1){this.updateValue(this.defaultValue,i)}}},3976:(T,m,e)=>{e.d(m,{$:()=>d});function d(f){return f===""?null:JSON.parse(f)}},4214:(T,m,e)=>{e.d(m,{zr:()=>f});function d(u){return u.replace(/\D/g,"")}function f(u){return u.replace(/[^\d.,-]/g,"")}function b(u){return u.replace(/\s/g,"")}function p(u){return u.charAt(0).toUpperCase()+u.slice(1)}function g(u){return u.replace(/\s+/g," ").trim()}},5406:(T,m,e)=>{e.d(m,{C$:()=>b,Fc:()=>d,W2:()=>t});function d(v,o="common",D=!1){const{pathname:E}=window.location;return f(E,v,o,D)}function f(v,o,D,E=!1){const l=v.split("/");o=o<0?l.length+o:o;const C=l[o]||D;return E&&console.log(`Pathname element: ${C}`),C}function b(v,o="common",D=!1){const E=d(v,"",D);return p(E,o,D)}function p(v,o,D){if(!v)return o;const E=v.split("-").at(-1);return D&&console.log(`Pathname element ending: ${E}`),E}function g(v,o,D="common",E=!1){const l=f(v,o,"",E);return p(l,D,E)}function u(v){return new URLSearchParams(window.location.search).get(v)}function i(v){return v.split("?")[0]}function t(v){return window.location.pathname.includes(v)}function n(v){return v.some(o=>t(o))}function s(...v){return window.location.pathname.split("/").some(D=>v.includes(D))}function c(v){try{const o=new URL(window.location.href);Object.entries(v).forEach(([D,E])=>{o.searchParams.set(D,E)}),window.location.href=o.toString()}catch(o){console.error("Failed to redirect:",o)}}function r(v,o=[]){const D={pathname:window.location.pathname};o.forEach(A=>{D[A]=u(A)});let E=!1;async function l(){if(E)return;const A={pathname:window.location.pathname};if(o.forEach(x=>{A[x]=u(x)}),Object.keys(D).some(x=>D[x]!==A[x])){Object.assign(D,A),E=!0;try{await v()}catch(x){console.error("Error in URL observer callback:",x)}finally{E=!1}}}function C(){l().catch(A=>{console.error("Error in URL change handler:",A)})}let N=window.location.href;setInterval(()=>{window.location.href!==N&&(N=window.location.href,C())},200),window.addEventListener("popstate",C)}function _(v=[]){r(()=>window.location.reload(),v)}},4010:(T,m,e)=>{e.a(T,async(d,f)=>{try{let u=function(){return(0,g.W2)("details")};var b=e(1901),p=e(2344),g=e(5406);u()?await(0,b.K)():await(0,p.P)(),f()}catch(u){f(u)}},1)},1926:(T,m,e)=>{e.d(m,{i:()=>d});const d={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,m,e)=>{e.d(m,{Z:()=>b});var d=e(573),f=e(1926);function b(t,n,s,c){const r=(0,d.Fi)(n,t);return(p(r,c)||!r.hasAttribute(f.i.BALANCED_CASHBACK_PRICE))&&g(r,s,c),r}function p(t,n){if(t.hasAttribute(f.i.COUPON)){const s=+t.getAttribute(f.i.COUPON);return n!==s}return!!n}function g(t,n,s){let c=u(t);t.setAttribute(f.i.PRICE,c),s?(s<1?c=(c*(1-s)).toFixed():c-=s,t.setAttribute(f.i.COUPON,s)):t.removeAttribute(f.i.COUPON);const r=i(c,n),_=c-r;t.setAttribute(f.i.BALANCED_CASHBACK_PRICE,_);const v=`${c.toLocaleString()} (${_.toLocaleString()}) \u20BD`;t.innerText=v,t.title=`-${r.toLocaleString()}`}function u(t){return t.hasAttribute(f.i.PRICE)?+t.getAttribute(f.i.PRICE):(0,d.YA)(t,!0)}function i(t,n){const s=n/100;return(t*s/(1+s)).toFixed(0)}},4633:(T,m,e)=>{e.d(m,{r:()=>f});const d={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},f={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...d.INPUT,width:"180px"},NUMBER_INPUT:{...d.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,m,e)=>{e.d(m,{P:()=>R});var d=e(4921),f=e(5213),b=e(1319),p=e(5406),g=e(4639),u=e(3829),i=e(5884),t=e(5539),n=e(573),s=e(7877),c=e(1926),r=e(4633),_=e(4521),v=e(5081);const o={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var D=e(6754);const E=(0,v.B)((0,p.Fc)(2)),{createSectionFilter:l}=(0,_.z)(y,E),C=l("name-filter"),N=l("min-cashback-filter"),A=l("max-price-filter"),x=l("min-discount-filter"),w=l("seller-name-filter"),M=new g.a(!1,y);async function R(){await O();const h=await(0,d.xk)(document,"#app");new MutationObserver((0,d.sg)(O)).observe(h,{childList:!0,subtree:!0})}async function O(){const h=await(0,d.xk)(document,o.PRODUCT_CARD_LIST_HEADER);(0,f.b)(h,F);const P=h.parentNode;if(P.hasAttribute(c.i.OBSERVED))return;new MutationObserver((0,d.sg)(y,50)).observe(P,{childList:!0,subtree:!0}),P.setAttribute(c.i.OBSERVED,"")}function F(h,P){(0,D.ZM)(h,r.r.CONTAINER);const L=(0,s.E9)(C,r.r.CONTROL,r.r.TEXT_INPUT),S=(0,s.Ch)(N,r.r.CONTROL,r.r.NUMBER_INPUT),I=(0,s.H1)(A,r.r.CONTROL,r.r.NUMBER_INPUT,"250"),U=(0,s.VD)(x,r.r.CONTROL,r.r.NUMBER_INPUT),k=(0,i.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",w,r.r.CONTROL,r.r.TEXT_INPUT),B=(0,s.pW)(M,r.r.CONTROL,r.r.CHECKBOX_INPUT);h.append(L,S,I,U,k,B),P.append(h)}function y(){(0,n.fI)(o.PRODUCT_CARD).forEach(a)}function a(h){if(!M.value){(0,t.kl)(h);return}const P=(0,n.Fi)(o.PRODUCT_CARD_TITLE,h),L=(0,n.Fi)(o.PRODUCT_CARD_CASHBACK,h),S=(0,n.Fi)(o.PRODUCT_CARD_DISCOUNT,h);if(!P){(0,t.Bt)(h);return}const I=P.innerText,U=(0,n.YA)(L,!0,!1,0),k=Math.abs((0,n.YA)(S,!0,!1,0)),W=+(0,b.Z)(h,o.PRODUCT_CARD_PRICE,U).getAttribute(c.i.BALANCED_CASHBACK_PRICE),K=(0,n.Fi)(o.PRODUCT_CARD_SELLER_NAME,h),H=K?(0,u.Ay)(K.innerText,w):!1,G=(0,u.Ay)(I,C)||(0,u.JE)(U,N)||(0,u.iG)(W,A)||(0,u.JE)(k,x)||H;(0,t.UC)(h,G)}},1901:(T,m,e)=>{e.d(m,{K:()=>O});var d=e(4921),f=e(5081),b=e(5406),p=e(5213),g=e(4639),u=e(3829),i=e(5539),t=e(573),n=e(7877),s=e(5884),c=e(1319),r=e(1926),_=e(4633),v=e(4521);const o={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var D=e(6754);const E=(0,f.B)((0,b.C$)(3)),{createGlobalFilter:l,createSectionFilter:C}=(0,v.z)(a,E),N=C("min-cashback-filter"),A=C("max-price-filter"),x=C("max-discounted-price-filter"),w=l("min-seller-rating-filter"),M=new g.a(null,a),R=l("filter-enabled",!1);async function O(){await F();const P=await(0,d.xk)(document,o.APP);new MutationObserver((0,d.sg)(F)).observe(P,{childList:!0})}async function F(){const P=await(0,d.xk)(document,o.OFFERS_FILTER);(0,p.b)(P,y),a();const L=(0,t.Fi)(o.OFFERS_CONTAINER);if(L.hasAttribute(r.i.OBSERVED))return;new MutationObserver((0,d.sg)(a,50)).observe(L,{childList:!0,subtree:!0}),L.setAttribute(r.i.OBSERVED,"")}function y(P,L){(0,D.ZM)(P,_.r.CONTAINER);const S=(0,n.Ch)(N,_.r.CONTROL,_.r.NUMBER_INPUT),I=(0,n.H1)(A,_.r.CONTROL,_.r.NUMBER_INPUT,"250"),U=(0,n.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",x,_.r.CONTROL,_.r.NUMBER_INPUT),k=(0,n.HX)(w,_.r.CONTROL,_.r.NUMBER_INPUT),B=(0,s.nW)("\u041A\u0443\u043F\u043E\u043D: ",M,"500","0","100000",_.r.CONTROL,_.r.NUMBER_INPUT),W=(0,n.pW)(R,_.r.CONTROL,_.r.CHECKBOX_INPUT);P.append(S,I,U,k,B,W),L.append(P)}function a(){(0,t.fI)(o.OFFER).forEach(h)}function h(P){if(!R.value){(0,i.kl)(P);return}const L=(0,t.Fi)(o.PRICE,P),S=(0,t.Fi)(o.CASHBACK,P),I=(0,t.Fi)(o.SELLER_RATING,P);if(!L||!S||!I){(0,i.Bt)(P);return}const U=(0,t.YA)(S,!0),k=(0,c.Z)(P,o.PRICE,U,M.value),B=+k.getAttribute(r.i.PRICE),W=+k.getAttribute(r.i.BALANCED_CASHBACK_PRICE),K=(0,t.YA)(I,!0),H=(0,u.JE)(U,N)||(0,u.iG)(B,A)||(0,u.iG)(W,x)||(0,u.JE)(K,w);(0,i.UC)(P,H)}}},$={};function V(T){var m=$[T];if(m!==void 0)return m.exports;var e=$[T]={exports:{}};return j[T](e,e.exports,V),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",d=b=>{b&&b.d<1&&(b.d=1,b.forEach(p=>p.r--),b.forEach(p=>p.r--?p.r++:p()))},f=b=>b.map(p=>{if(p!==null&&typeof p=="object"){if(p[T])return p;if(p.then){var g=[];g.d=0,p.then(t=>{u[m]=t,d(g)},t=>{u[e]=t,d(g)});var u={};return u[T]=t=>t(g),u}}var i={};return i[T]=t=>{},i[m]=p,i});V.a=(b,p,g)=>{var u;g&&((u=[]).d=-1);var i=new Set,t=b.exports,n,s,c,r=new Promise((_,v)=>{c=v,s=_});r[m]=t,r[T]=_=>(u&&_(u),i.forEach(_),r.catch(v=>{})),b.exports=r,p(_=>{n=f(_);var v,o=()=>n.map(E=>{if(E[e])throw E[e];return E[m]}),D=new Promise(E=>{v=()=>E(o),v.r=0;var l=C=>C!==u&&!i.has(C)&&(i.add(C),C&&!C.d&&(v.r++,C.push(v)));n.map(C=>C[T](l))});return v.r?D:o()},_=>(_?c(r[e]=_):s(t),d(u))),u&&u.d<0&&(u.d=0)}})(),V.d=(T,m)=>{for(var e in m)V.o(m,e)&&!V.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:m[e]})},V.o=(T,m)=>Object.prototype.hasOwnProperty.call(T,m);var z=V(4010)})();})();
