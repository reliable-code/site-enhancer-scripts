// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76970372
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={7273:(A,m,e)=>{e.d(m,{S:()=>C});var l=e(5558);function d(f={},p=null){return createElement("span",f,p)}function C(f={},p=null){return(0,l.n)("div",f,p)}},5467:(A,m,e)=>{e.d(m,{E2:()=>d});var l=e(7273);function d(p,a={},c=null){const r=(0,l.S)(a,c);return r.append(p),r}function C(p,a=null,c={},r={}){const t=createActionLink(p,a,r);return d(t,c)}function f(p,a=null,c=null,r={},t={},s={}){const o=createActionLinkWithIcon(p,c,a,t,s);return d(o,r)}},5558:(A,m,e)=>{e.d(m,{n:()=>d});var l=e(6754);function d(C,f,p=null){if(typeof f!="object"||f===null)throw new TypeError("styles should be an object");const a=document.createElement(C);return(0,l.ZM)(a,f),p&&(a.innerHTML=p),a}},740:(A,m,e)=>{e.d(m,{S:()=>a,kU:()=>C,o5:()=>f});var l=e(5558),d=e(4921);function C(t,s,o){const n=c(t,"text",s);return n.value=o,n}function f(t,s,o,n,O,h){const u=c(t,"number",s);return u.value=o,u.step=n,u.min=O,u.max=h,u}function p(t,s,o){const n=c(t,"date",s);return n.value=o,n}function a(t,s,o){const n=c(t,"checkbox",s);return n.checked=o,n}function c(t={},s=null,o=null){const n=(0,l.n)("input",t);return s&&(n.type=s),o&&(n.addEventListener("keyup",(0,d.sg)(o,200)),n.addEventListener("change",(0,d.sg)(o,100))),n}function r(t,s,o){const n=createElement("select",t);return s&&n.addEventListener("change",s),n.value=o,n}},573:(A,m,e)=>{e.d(m,{Fi:()=>C,YA:()=>r,fI:()=>f});var l=e(4214);function d(u,g=document){return!!g.querySelector(u)}function C(u,g=document,v=!1){const R=g.querySelector(u);return v&&!R&&console.log(`No element found for selector: ${u}`),R}function f(u,g=document,v=!1){const R=g.querySelectorAll(u);return v&&!R.length&&console.log(`No elements found for selector: ${u}`),R}function p(u,g=1){let v=u;for(let R=0;R<g;R++){if(!v.parentElement)return null;v=v.parentElement}return v}function a(u,g,v){return[...u.querySelectorAll(g)].find(R=>R.textContent.trim().includes(v))}function c(u,g,v=!1,R=!1,F=null){const x=C(g,u);return r(x,v,R,F)}function r(u,g=!1,v=!1,R=null){if(!u)return R===null?(console.log("No element found"),null):R;const F=u.innerText;return o(F,g,v)}function t(u,g,v=!1){const R=u[g];return r(R,v)}function s(u,g=!1,v=!1){const R=u.textContent;return o(R,g,v)}function o(u,g,v){g&&(u=(0,l.zr)(u)),v&&(u=u.replace(",","."));const R=Number(u);return Number.isNaN(R)?(console.log(`Invalid number: ${u}`),0):R}function n(u){return[...u.childNodes].find(g=>g.nodeType===Node.TEXT_NODE)}function O(u){const g=v=>v.nodeType===Node.TEXT_NODE&&v.textContent.trim()!==""?[v]:[...v.childNodes].flatMap(g);return g(u)}function h(u){return normalizeSpacing(u.textContent)}},5539:(A,m,e)=>{e.d(m,{Bt:()=>d,UC:()=>t,kl:()=>c});function l(i,E){i.parentNode.insertBefore(E,i.nextSibling)}function d(i){i.style.display="none"}function C(i,E=1){const D=document.querySelector(i);D&&f(D,E)}function f(i,E=1){const D=getElementAncestor(i,E);D&&d(D)}function p(i){n(i),d(i)}function a(i){i.intersectionObserver||runOnceOnIntersection(i,()=>d(i))}function c(i){i.style.display=""}function r(i){const E=o(i);i.style.display=E}function t(i,E){E?d(i):c(i)}function s(i,E){E?a(i):(clearIntersectionObserver(i),c(i))}function o(i){return n(i),i.dataset.defaultDisplay}function n(i){if(i.dataset.defaultDisplay)return;const{display:E}=getComputedStyle(i);i.dataset.defaultDisplay=E}function O(){return{show:[],hide:[]}}function h(i,E,D){i?E.hide.push(D):E.show.push(D)}function u(i){i.show.forEach(c),i.hide.forEach(d)}function g(i,E,D=.3){E?R(i,D):v(i)}function v(i){i.style.opacity=""}function R(i,E=.3){i.style.opacity=E}function F(i){i.style.order=""}function x(i,E){i.style.order=E}function I(i,E){i.style.background=E}function S(i,E){const D=getFirstElement(E);D&&k(i,D)}function k(i,E){const D=createLink();D.href=i,E.parentNode.append(D),D.append(E)}function W(i,E){const D=getFirstElement(E);D&&K(i,D)}function K(i,E,D={}){const N=createLink(D);N.href=i,N.append(...E.childNodes),E.append(N)}function _(){const i=getURLQueryParam("scrollTo");if(!i)return;const E=document.getElementById(i);E?E.scrollIntoView():console.log(`Element with ID "${i}" was not found.`)}function b(i,E,D=null){const N=`${E}-click-passed`,L=D?T=>findElementByText(T,i,D):T=>getFirstElement(i,T);return function(T){if(T.hasAttribute(N))return!1;const y=L(T);return y&&y.click(),T.setAttribute(N,""),!0}}function P(i,E,D="text/plain"){const N=new Blob([i],{type:D}),L=URL.createObjectURL(N),T=document.createElement("a");T.href=L,T.download=E,document.body.appendChild(T),T.click(),document.body.removeChild(T),requestAnimationFrame(()=>URL.revokeObjectURL(L))}},6754:(A,m,e)=>{e.d(m,{ZM:()=>l});function l(p,a){Object.assign(p.style,a)}function d(p,a="custom-global-style"){let c=document.getElementById(a);c||(c=document.createElement("style"),c.id=a,c.type="text/css",document.head.appendChild(c)),c.textContent=p}function C(p){return Object.entries(p).map(([a,c])=>`${a.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${c};`).join(" ")}function f(p){return p?p.split(";").filter(a=>a.trim()!=="").reduce((a,c)=>{const[r,t]=c.split(":").map(o=>o.trim()),s=r.replace(/-([a-z])/g,(o,n)=>n.toUpperCase());return a[s]=t,a},{}):{}}},4921:(A,m,e)=>{e.d(m,{sg:()=>f,xk:()=>l});function l(t,s,o=null){const n=t.querySelector(s);return n?Promise.resolve(n):new Promise(O=>{const h=new MutationObserver(g);h.observe(t,{childList:!0,subtree:!0});let u;o&&(u=setTimeout(()=>{h.disconnect(),console.log(`No element found for selector: ${s}`),O(null)},o));function g(){const v=t.querySelector(s);v&&(u&&clearTimeout(u),h.disconnect(),O(v))}})}function d(t,s){return t.querySelector(s)?new Promise(n=>{const O=new MutationObserver(h);O.observe(t,{childList:!0,subtree:!0});function h(){t.querySelector(s)||(O.disconnect(),n())}}):Promise.resolve()}function C(t,s=400){return new Promise(o=>{let n;const O=new MutationObserver(()=>{clearTimeout(n),h()});function h(){n=setTimeout(()=>{O.disconnect(),o()},s)}h(),O.observe(t,{childList:!0,subtree:!0})})}function f(t,s=250){let o;return function(...n){const O=this;clearTimeout(o),o=setTimeout(()=>t.apply(O,n),s)}}async function p(t){document.visibilityState==="visible"?await t():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await t()},{once:!0})}function a(t,s){const o=new IntersectionObserver(n=>{n.forEach(O=>{O.isIntersecting&&(s(),c(t))})});t.intersectionObserver=o,o.observe(t)}function c(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}function r(t){t&&(t.disconnect(),t=null)}},3829:(A,m,e)=>{e.d(m,{Ay:()=>d,JE:()=>a,iG:()=>c});var l=e(8355);function d(o,n){return!C(o,n)}function C(o,n){if(!n||!n.value)return!0;const O=(0,l._7)(n.value);return f(o,O)}function f(o,n){if(!n||!n.length)return!0;const O=(o||"").toLowerCase();return n.every(h=>p(O,h))}function p(o,n){return n.some(({term:O,isNegative:h})=>{const u=o.includes(O);return h?!u:u})}function a(o,n){return n.value!=null&&o<n.value}function c(o,n){return n.value!=null&&o>n.value}function r(o,n){return n.value==null?!1:o<parseDateFromISO(n.value)}function t(o,n){return n.value==null?!1:o>parseDateFromISO(n.value)}function s(o,n){return n.value&&o!==n.value}},4521:(A,m,e)=>{e.d(m,{z:()=>d});var l=e(3048);function d(C,f=null){return{createGlobalFilter(p,a=null,c=C){return l.V.create(p,a,c)},createSectionFilter(p,a=null,c=C){if(!f)throw new Error("sectionId must be provided to use createSectionFilter.");return l.V.createWithCompositeKey(f,p,a,c)}}}},5884:(A,m,e)=>{e.d(m,{Hw:()=>c,Nm:()=>C,nW:()=>f});var l=e(5467),d=e(740);function C(r,t,s={},o={}){const n=(0,d.kU)(o,t.updateValueFromEvent,t.value);return(0,l.E2)(n,s,r)}function f(r,t,s,o,n,O={},h={}){const u=(0,d.o5)(h,t.updateValueFromEvent,t.value,s,o,n);return(0,l.E2)(u,O,r)}function p(r,t,s={},o={}){const n=createSelect(o,t.updateValueFromEvent,t.value);return createControl(n,s,r)}function a(r,t,s={},o={}){const n=createDateInput(o,t.updateValueFromEvent,t.value);return createControl(n,s,r)}function c(r,t,s={},o={}){const n=(0,d.S)(o,t.updateValueFromEvent,t.value);return(0,l.E2)(n,s,r)}},7877:(A,m,e)=>{e.d(m,{Ch:()=>o,E9:()=>d,H1:()=>h,HX:()=>C,VD:()=>t,Zi:()=>n,pW:()=>W});var l=e(5884);function d(_,b={},P={}){return(0,l.Nm)("\u041F\u043E\u0438\u0441\u043A: ",_,b,P)}function C(_,b={},P={},i=.1,E=3){return(0,l.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,i,E,5,b,P)}function f(_,b={},P={},i=.1,E=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,i,E,5,b,P)}function p(_,b={},P={}){return c("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,b,P)}function a(_,b={},P={}){return c("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,b,P)}function c(_,b,P={},i={}){return createNumberFilterControl(_,b,"1","1","999999",P,i)}function r(_,b={},P={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",_,b,P)}function t(_,b={},P={}){return s("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",_,b,P)}function s(_,b,P={},i={}){return(0,l.nW)(_,b,"5","0","100",P,i)}function o(_,b={},P={}){return(0,l.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",_,"5","0","100",b,P)}function n(_,b,P={},i={},E="250"){return(0,l.nW)(_,b,E,"0","1000000",P,i)}function O(_,b={},P={},i="25"){return n("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",_,b,P,i)}function h(_,b={},P={},i="25"){return n("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",_,b,P,i)}function u(_,b={},P={}){return g("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",_,b,P)}function g(_,b,P={},i={}){return createNumberFilterControl(_,b,"1","0","99999",P,i)}function v(_,b={},P={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",_,"1","2","8",b,P)}function R(_,b={},P={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",_,1,1,10,b,P)}function F(_,b={},P={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",_,b,P)}function x(_,b={},P={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",_,b,P)}function I(_,b={},P={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",_,b,P)}function S(_,b={},P={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",_,b,P)}function k(_,b={},P={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",_,b,P)}function W(_,b={},P={}){return(0,l.Hw)("\u0412\u043A\u043B: ",_,b,P)}function K(_,b,P={}){const i=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],E={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},D=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),N=[],L=()=>b?parseFloat(b.value)||0:_.value,T=()=>{const y=L();N.forEach(({button:B,value:M})=>{const w=M<=y?E.active:E.inactive;Object.assign(B.style,w)})};return i.forEach(({value:y,emoji:B,tooltip:M})=>{const U=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...P},B);U.title=M,U.type="button",U.addEventListener("click",w=>{w.preventDefault(),_.updateValue(y),b&&(b.value=y),T()}),U.addEventListener("mouseenter",()=>{y<=L()||(U.style.background=E.hover.background)}),U.addEventListener("mouseleave",()=>{T()}),N.push({button:U,value:y}),D.appendChild(U)}),T(),b&&(b.addEventListener("input",T),b.addEventListener("change",T)),D}},8355:(A,m,e)=>{e.d(m,{_7:()=>d});function l(r){if(!r)return[];const s=d(r).flat().filter(o=>o&&!o.isNegative&&o.term).map(o=>o.term);return[...new Set(s)]}function d(r){return r?r.toLowerCase().split(",").map(C).filter(Boolean):[]}function C(r){const t=r.split("/").map(o=>o.trim()).filter(Boolean);if(t.length===0)return null;const s=t.map(f).filter(Boolean);return s.length>0?s:null}function f(r){const t=r.startsWith("!"),s=t?r.slice(1).trim():r;return s?{term:s,isNegative:t}:null}function p(r,t){c(r,s=>s.style.display!=="none",t)}function a(r,t){c(r,s=>s.style.opacity==="",t)}function c(r,t,s){const o=[...r].filter(t).length;s.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${o} \u0438\u0437 ${r.length}`}},5213:(A,m,e)=>{e.d(m,{b:()=>C});var l=e(573),d=e(7273);function C(f,p,a=!1,c="customFiltersContainer"){let r=(0,l.Fi)(`#${c}`,f);if(r)if(a)r.remove();else return;r=(0,d.S)(),r.id=c,p(r,f)}},4444:(A,m,e)=>{e.d(m,{s:()=>l});function l(d){let p=2166136261;for(let a=0;a<d.length;a+=1){const c=d.charCodeAt(a);p^=c,p=Math.imul(p,16777619)}return p>>>0}},5081:(A,m,e)=>{e.d(m,{B:()=>C});var l=e(4444);function d(f){return(0,l.s)(f).toString(16).padStart(8,"0")}function C(f,p="common"){return f?d(f):p}},8200:(A,m,e)=>{e.d(m,{s:()=>l});function l(d){const{target:C}=d,{type:f}=C;switch(f){case"text":return`"${C.value}"`;case"number":return C.value;case"select-one":return C.value;case"date":return`"${C.value}"`;case"checkbox":return C.checked;default:return console.log(`Unknown input type: ${f}`),null}}},157:(A,m,e)=>{e.d(m,{Fg:()=>l,vx:()=>C});const l=window.GM_setValue,d=window.GM.setValue,C=window.GM_getValue},4639:(A,m,e)=>{e.d(m,{a:()=>f});var l=e(1870),d=e(8200),C=e(3976);class f extends l.j{constructor(a=null,c=null){super(a,c)}updateValueFromEvent=a=>{const c=(0,C.$)((0,d.s)(a));this.value!==c&&(this.value=c,this.onChangeIfDefined())}}},1870:(A,m,e)=>{e.d(m,{j:()=>l});class l{constructor(C,f){this.value=C,this.onChange=f}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,m,e)=>{e.d(m,{V:()=>p});var l=e(1870),d=e(8200),C=e(3976),f=e(157);class p extends l.j{constructor(c,r=null,t=null){super((0,f.vx)(c,r),t),this.storageKey=c,this.defaultValue=r}static create(c,r=null,t=null){return new p(c,r,t)}static createWithCompositeKey(c,r,t=null,s=null){const o=`${c}-${r}`;return new p(o,t,s)}updateValueFromEvent=c=>{const r=(0,d.s)(c),t=(0,C.$)(r);this.updateValue(t)};updateValue(c,r=!0){this.value!==c&&((0,f.Fg)(this.storageKey,c),this.value=c,r&&this.onChangeIfDefined())}clearValue(c=!1){this.updateValue(null,c)}resetValue(c=!1){this.updateValue(this.defaultValue,c)}}},3976:(A,m,e)=>{e.d(m,{$:()=>l});function l(d){return d===""?null:JSON.parse(d)}},4214:(A,m,e)=>{e.d(m,{zr:()=>d});function l(a){return a.replace(/\D/g,"")}function d(a){return a.replace(/[^\d.,-]/g,"")}function C(a){return a.replace(/\s/g,"")}function f(a){return a.charAt(0).toUpperCase()+a.slice(1)}function p(a){return a.replace(/\s+/g," ").trim()}},5406:(A,m,e)=>{e.d(m,{C$:()=>C,Fc:()=>l,W2:()=>r});function l(h,u="common",g=!1){const{pathname:v}=window.location;return d(v,h,u,g)}function d(h,u,g,v=!1){const R=h.split("/");u=u<0?R.length+u:u;const F=R[u]||g;return v&&console.log(`Pathname element: ${F}`),F}function C(h,u="common",g=!1){const v=l(h,"",g);return f(v,u,g)}function f(h,u,g){if(!h)return u;const v=h.split("-").at(-1);return g&&console.log(`Pathname element ending: ${v}`),v}function p(h,u,g="common",v=!1){const R=d(h,u,"",v);return f(R,g,v)}function a(h){return new URLSearchParams(window.location.search).get(h)}function c(h){return h.split("?")[0]}function r(h){return window.location.pathname.includes(h)}function t(h){return h.some(u=>r(u))}function s(...h){return window.location.pathname.split("/").some(g=>h.includes(g))}function o(h){try{const u=new URL(window.location.href);Object.entries(h).forEach(([g,v])=>{u.searchParams.set(g,v)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function n(h,u=[]){const g={pathname:window.location.pathname};u.forEach(I=>{g[I]=a(I)});let v=!1;async function R(){if(v)return;const I={pathname:window.location.pathname};if(u.forEach(S=>{I[S]=a(S)}),Object.keys(g).some(S=>g[S]!==I[S])){Object.assign(g,I),v=!0;try{await h()}catch(S){console.error("Error in URL observer callback:",S)}finally{v=!1}}}function F(){R().catch(I=>{console.error("Error in URL change handler:",I)})}let x=window.location.href;setInterval(()=>{window.location.href!==x&&(x=window.location.href,F())},200),window.addEventListener("popstate",F)}function O(h=[]){n(()=>window.location.reload(),h)}},4010:(A,m,e)=>{e.a(A,async(l,d)=>{try{let a=function(){return(0,p.W2)("details")};var C=e(1901),f=e(2344),p=e(5406);a()?await(0,C.K)():await(0,f.P)(),d()}catch(a){d(a)}},1)},1926:(A,m,e)=>{e.d(m,{i:()=>l});const l={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(A,m,e)=>{e.d(m,{Z:()=>C});var l=e(573),d=e(1926);function C(r,t,s,o){const n=(0,l.Fi)(t,r);return(f(n,o)||!n.hasAttribute(d.i.BALANCED_CASHBACK_PRICE))&&p(n,s,o),n}function f(r,t){if(r.hasAttribute(d.i.COUPON)){const s=+r.getAttribute(d.i.COUPON);return t!==s}return!!t}function p(r,t,s){let o=a(r);r.setAttribute(d.i.PRICE,o),s?(s<1?o=(o*(1-s)).toFixed():o-=s,r.setAttribute(d.i.COUPON,s)):r.removeAttribute(d.i.COUPON);const n=c(o,t),O=o-n;r.setAttribute(d.i.BALANCED_CASHBACK_PRICE,O);const h=`${o.toLocaleString()} (${O.toLocaleString()}) \u20BD`;r.innerText=h,r.title=`-${n.toLocaleString()}`}function a(r){return r.hasAttribute(d.i.PRICE)?+r.getAttribute(d.i.PRICE):(0,l.YA)(r,!0)}function c(r,t){const s=t/100;return(r*s/(1+s)).toFixed(0)}},4633:(A,m,e)=>{e.d(m,{r:()=>d});const l={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},d={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...l.INPUT,width:"180px"},NUMBER_INPUT:{...l.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(A,m,e)=>{e.d(m,{P:()=>K});var l=e(4921),d=e(5213),C=e(1319),f=e(5406),p=e(4639),a=e(3829),c=e(5884),r=e(5539),t=e(573),s=e(7877),o=e(1926),n=e(4633),O=e(4521),h=e(5081);const u={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var g=e(6754);const v=(0,h.B)((0,f.Fc)(2)),{createSectionFilter:R}=(0,O.z)(P,v),F=R("name-filter"),x=R("min-cashback-filter"),I=R("max-price-filter"),S=R("min-discount-filter"),k=R("seller-name-filter"),W=new p.a(!1,P);async function K(){await _();const E=await(0,l.xk)(document,"#app");new MutationObserver((0,l.sg)(_)).observe(E,{childList:!0,subtree:!0})}async function _(){const E=await(0,l.xk)(document,u.PRODUCT_CARD_LIST_HEADER);(0,d.b)(E,b);const D=E.parentNode;if(D.hasAttribute(o.i.OBSERVED))return;new MutationObserver((0,l.sg)(P,50)).observe(D,{childList:!0,subtree:!0}),D.setAttribute(o.i.OBSERVED,"")}function b(E,D){(0,g.ZM)(E,n.r.CONTAINER);const N=(0,s.E9)(F,n.r.CONTROL,n.r.TEXT_INPUT),L=(0,s.Ch)(x,n.r.CONTROL,n.r.NUMBER_INPUT),T=(0,s.H1)(I,n.r.CONTROL,n.r.NUMBER_INPUT,"250"),y=(0,s.VD)(S,n.r.CONTROL,n.r.NUMBER_INPUT),B=(0,c.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",k,n.r.CONTROL,n.r.TEXT_INPUT),M=(0,s.pW)(W,n.r.CONTROL,n.r.CHECKBOX_INPUT);E.append(N,L,T,y,B,M),D.append(E)}function P(){(0,t.fI)(u.PRODUCT_CARD).forEach(i)}function i(E){if(!W.value){(0,r.kl)(E);return}const D=(0,t.Fi)(u.PRODUCT_CARD_TITLE,E),N=(0,t.Fi)(u.PRODUCT_CARD_CASHBACK,E),L=(0,t.Fi)(u.PRODUCT_CARD_DISCOUNT,E);if(!D){(0,r.Bt)(E);return}const T=D.innerText,y=(0,t.YA)(N,!0,!1,0),B=Math.abs((0,t.YA)(L,!0,!1,0)),U=+(0,C.Z)(E,u.PRODUCT_CARD_PRICE,y).getAttribute(o.i.BALANCED_CASHBACK_PRICE),w=(0,t.Fi)(u.PRODUCT_CARD_SELLER_NAME,E),H=w?(0,a.Ay)(w.innerText,k):!1,G=(0,a.Ay)(T,F)||(0,a.JE)(y,x)||(0,a.iG)(U,I)||(0,a.JE)(B,S)||H;(0,r.UC)(E,G)}},1901:(A,m,e)=>{e.d(m,{K:()=>_});var l=e(4921),d=e(5081),C=e(5406),f=e(5213),p=e(4639),a=e(3829),c=e(5539),r=e(573),t=e(7877),s=e(5884),o=e(1319),n=e(1926),O=e(4633),h=e(4521);const u={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var g=e(6754);const v=(0,d.B)((0,C.C$)(3)),{createGlobalFilter:R,createSectionFilter:F}=(0,h.z)(i,v),x=F("min-cashback-filter"),I=F("max-price-filter"),S=F("max-discounted-price-filter"),k=R("min-seller-rating-filter"),W=new p.a(null,i),K=R("filter-enabled",!1);async function _(){await b();const D=await(0,l.xk)(document,u.APP);new MutationObserver((0,l.sg)(b)).observe(D,{childList:!0})}async function b(){const D=await(0,l.xk)(document,u.OFFERS_FILTER);(0,f.b)(D,P),i();const N=(0,r.Fi)(u.OFFERS_CONTAINER);if(N.hasAttribute(n.i.OBSERVED))return;new MutationObserver((0,l.sg)(i,50)).observe(N,{childList:!0,subtree:!0}),N.setAttribute(n.i.OBSERVED,"")}function P(D,N){(0,g.ZM)(D,O.r.CONTAINER);const L=(0,t.Ch)(x,O.r.CONTROL,O.r.NUMBER_INPUT),T=(0,t.H1)(I,O.r.CONTROL,O.r.NUMBER_INPUT,"250"),y=(0,t.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",S,O.r.CONTROL,O.r.NUMBER_INPUT),B=(0,t.HX)(k,O.r.CONTROL,O.r.NUMBER_INPUT),M=(0,s.nW)("\u041A\u0443\u043F\u043E\u043D: ",W,"500","0","100000",O.r.CONTROL,O.r.NUMBER_INPUT),U=(0,t.pW)(K,O.r.CONTROL,O.r.CHECKBOX_INPUT);D.append(L,T,y,B,M,U),N.append(D)}function i(){(0,r.fI)(u.OFFER).forEach(E)}function E(D){if(!K.value){(0,c.kl)(D);return}const N=(0,r.Fi)(u.PRICE,D),L=(0,r.Fi)(u.CASHBACK,D),T=(0,r.Fi)(u.SELLER_RATING,D);if(!N||!L||!T){(0,c.Bt)(D);return}const y=(0,r.YA)(L,!0),B=(0,o.Z)(D,u.PRICE,y,W.value),M=+B.getAttribute(n.i.PRICE),U=+B.getAttribute(n.i.BALANCED_CASHBACK_PRICE),w=(0,r.YA)(T,!0),H=(0,a.JE)(y,x)||(0,a.iG)(M,I)||(0,a.iG)(U,S)||(0,a.JE)(w,k);(0,c.UC)(D,H)}}},$={};function V(A){var m=$[A];if(m!==void 0)return m.exports;var e=$[A]={exports:{}};return j[A](e,e.exports,V),e.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",l=C=>{C&&C.d<1&&(C.d=1,C.forEach(f=>f.r--),C.forEach(f=>f.r--?f.r++:f()))},d=C=>C.map(f=>{if(f!==null&&typeof f=="object"){if(f[A])return f;if(f.then){var p=[];p.d=0,f.then(r=>{a[m]=r,l(p)},r=>{a[e]=r,l(p)});var a={};return a[A]=r=>r(p),a}}var c={};return c[A]=r=>{},c[m]=f,c});V.a=(C,f,p)=>{var a;p&&((a=[]).d=-1);var c=new Set,r=C.exports,t,s,o,n=new Promise((O,h)=>{o=h,s=O});n[m]=r,n[A]=O=>(a&&O(a),c.forEach(O),n.catch(h=>{})),C.exports=n,f(O=>{t=d(O);var h,u=()=>t.map(v=>{if(v[e])throw v[e];return v[m]}),g=new Promise(v=>{h=()=>v(u),h.r=0;var R=F=>F!==a&&!c.has(F)&&(c.add(F),F&&!F.d&&(h.r++,F.push(h)));t.map(F=>F[A](R))});return h.r?g:u()},O=>(O?o(n[e]=O):s(r),l(a))),a&&a.d<0&&(a.d=0)}})(),V.d=(A,m)=>{for(var e in m)V.o(m,e)&&!V.o(A,e)&&Object.defineProperty(A,e,{enumerable:!0,get:m[e]})},V.o=(A,m)=>Object.prototype.hasOwnProperty.call(A,m);var z=V(4010)})();})();
