// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76830129
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(T,f,e)=>{e.d(f,{E2:()=>d});var s=e(9928);function d(C,r={},t=null){const o=(0,s.Sw)(r,t);return o.append(C),o}function b(C,r=null,t={},o={}){const n=createActionLink(C,r,o);return d(n,t)}function m(C,r=null,t=null,o={},n={}){const c=createActionLinkWithIcon(C,t,r,n);return d(c,o)}},9928:(T,f,e)=>{e.d(f,{S:()=>r,Sw:()=>R,kU:()=>b,o5:()=>m});var s=e(4921),d=e(6754);function b(i,l,g){const F=t(i,"text",l);return F.value=g,F}function m(i,l,g,F,y,S){const B=t(i,"number",l);return B.value=g,B.step=F,B.min=y,B.max=S,B}function C(i,l,g){const F=t(i,"date",l);return F.value=g,F}function r(i,l,g){const F=t(i,"checkbox",l);return F.checked=g,F}function t(i={},l=null,g=null){const F=E("input",i);return l&&(F.type=l),g&&(F.addEventListener("keyup",(0,s.sg)(g,200)),F.addEventListener("change",(0,s.sg)(g,100))),F}function o(i={},l=null){return E("span",i,l)}function n(i={},l=null,g=null){const F=E("a",i,l);return g&&(F.href=g),F}function c(i,l=null,g={}){g.cursor||="pointer";const F=n(g,l);return i&&F.addEventListener("click",i),F}function P(i,l,g=null,F={},y={}){F.display||="inline-flex",F.alignItems||="center",F.gap||="0.25em";const S=c(i,g,F);return S.prepend(u(l,y)),S}function h(i={},l=null,g=null){const F=E("button",i,l);return g&&F.addEventListener("click",g),F}function R(i={},l=null){return E("div",i,l)}function v(i={}){return E("i",i)}function u(i,l={}){l.width||="1em",l.height||="1em",l.paddingBottom||="1px";const g=v(l);return g.setAttribute("data-lucide",i),g}function E(i,l,g=null){if(typeof l!="object"||l===null)throw new TypeError("styles should be an object");const F=document.createElement(i);return(0,d.ZM)(F,l),g&&(F.innerHTML=g),F}},573:(T,f,e)=>{e.d(f,{Fi:()=>b,YA:()=>o,fI:()=>m});var s=e(4214);function d(u,E=document){return!!E.querySelector(u)}function b(u,E=document,i=!1){const l=E.querySelector(u);return i&&!l&&console.log(`No element found for selector: ${u}`),l}function m(u,E=document,i=!1){const l=E.querySelectorAll(u);return i&&!l.length&&console.log(`No elements found for selector: ${u}`),l}function C(u,E=1){let i=u;for(let l=0;l<E;l++){if(!i.parentElement)return null;i=i.parentElement}return i}function r(u,E,i){return[...u.querySelectorAll(E)].find(l=>l.textContent.trim().includes(i))}function t(u,E,i=!1,l=!1,g=null){const F=b(E,u);return o(F,i,l,g)}function o(u,E=!1,i=!1,l=null){if(!u)return l===null?(console.log("No element found"),null):l;const g=u.innerText;return P(g,E,i)}function n(u,E,i=!1){const l=u[E];return o(l,i)}function c(u,E=!1,i=!1){const l=u.textContent;return P(l,E,i)}function P(u,E,i){E&&(u=(0,s.zr)(u)),i&&(u=u.replace(",","."));const l=Number(u);return Number.isNaN(l)?(console.log(`Invalid number: ${u}`),0):l}function h(u){return[...u.childNodes].find(E=>E.nodeType===Node.TEXT_NODE)}function R(u){const E=i=>i.nodeType===Node.TEXT_NODE&&i.textContent.trim()!==""?[i]:[...i.childNodes].flatMap(E);return E(u)}function v(u){return normalizeSpacing(u.textContent)}},5539:(T,f,e)=>{e.d(f,{Bt:()=>d,UC:()=>n,kl:()=>t});function s(a,p){a.parentNode.insertBefore(p,a.nextSibling)}function d(a){a.style.display="none"}function b(a,p=1){const O=document.querySelector(a);O&&m(O,p)}function m(a,p=1){const O=getElementAncestor(a,p);O&&d(O)}function C(a){h(a),d(a)}function r(a){a.intersectionObserver||runOnceOnIntersection(a,()=>d(a))}function t(a){a.style.display=""}function o(a){const p=P(a);a.style.display=p}function n(a,p){p?d(a):t(a)}function c(a,p){p?r(a):(clearIntersectionObserver(a),t(a))}function P(a){return h(a),a.defaultDisplay}function h(a){if(a.defaultDisplay)return;const{display:p}=getComputedStyle(a);a.defaultDisplay=p}function R(){return{show:[],hide:[]}}function v(a,p,O){a?p.hide.push(O):p.show.push(O)}function u(a){a.show.forEach(t),a.hide.forEach(d)}function E(a,p,O=.3){p?l(a,O):i(a)}function i(a){a.style.opacity=""}function l(a,p=.3){a.style.opacity=p}function g(a){a.style.order=""}function F(a,p){a.style.order=p}function y(a,p){a.style.background=p}function S(a,p){const O=getFirstElement(p);O&&B(a,O)}function B(a,p){const O=createLink();O.href=a,p.parentNode.append(O),O.append(p)}function V(a,p){const O=getFirstElement(p);O&&A(a,O)}function A(a,p,O={}){const N=createLink(O);N.href=a,N.append(...p.childNodes),p.append(N)}function D(){const a=getURLQueryParam("scrollTo");if(!a)return;const p=document.getElementById(a);p?p.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function _(a,p,O=null){const N=`${p}-click-passed`,U=O?I=>findElementByText(I,a,O):I=>getFirstElement(a,I);return function(I){if(I.hasAttribute(N))return!1;const x=U(I);return x&&x.click(),I.setAttribute(N,""),!0}}function L(a,p,O="text/plain"){const N=new Blob([a],{type:O}),U=URL.createObjectURL(N),I=document.createElement("a");I.href=U,I.download=p,document.body.appendChild(I),I.click(),document.body.removeChild(I),requestAnimationFrame(()=>URL.revokeObjectURL(U))}},6754:(T,f,e)=>{e.d(f,{ZM:()=>s});function s(C,r){Object.assign(C.style,r)}function d(C,r="custom-global-style"){let t=document.getElementById(r);t||(t=document.createElement("style"),t.id=r,t.type="text/css",document.head.appendChild(t)),t.textContent=C}function b(C){return Object.entries(C).map(([r,t])=>`${r.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function m(C){return C?C.split(";").filter(r=>r.trim()!=="").reduce((r,t)=>{const[o,n]=t.split(":").map(P=>P.trim()),c=o.replace(/-([a-z])/g,(P,h)=>h.toUpperCase());return r[c]=n,r},{}):{}}},4921:(T,f,e)=>{e.d(f,{sg:()=>m,xk:()=>s});function s(n,c,P=null){const h=n.querySelector(c);return h?Promise.resolve(h):new Promise(R=>{const v=new MutationObserver(E);v.observe(n,{childList:!0,subtree:!0});let u;P&&(u=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${c}`),R(null)},P));function E(){const i=n.querySelector(c);i&&(u&&clearTimeout(u),v.disconnect(),R(i))}})}function d(n,c){return n.querySelector(c)?new Promise(h=>{const R=new MutationObserver(v);R.observe(n,{childList:!0,subtree:!0});function v(){n.querySelector(c)||(R.disconnect(),h())}}):Promise.resolve()}function b(n,c=400){return new Promise(P=>{let h;const R=new MutationObserver(()=>{clearTimeout(h),v()});function v(){h=setTimeout(()=>{R.disconnect(),P()},c)}v(),R.observe(n,{childList:!0,subtree:!0})})}function m(n,c=250){let P;return(...h)=>{clearTimeout(P),P=setTimeout(()=>n(...h),c)}}async function C(n){document.visibilityState==="visible"?await n():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await n()},{once:!0})}function r(n,c){const P=new IntersectionObserver(h=>{h.forEach(R=>{R.isIntersecting&&(c(),t(n))})});n.intersectionObserver=P,P.observe(n)}function t(n){n.intersectionObserver&&(n.intersectionObserver.disconnect(),n.intersectionObserver=null)}function o(n){n&&(n.disconnect(),n=null)}},3829:(T,f,e)=>{e.d(f,{Ay:()=>d,JE:()=>m,iG:()=>C});var s=e(8355);function d(n,c){return!b(n,c)}function b(n,c){if(!c.value)return!0;const P=n.toLowerCase(),h=(0,s.Rn)(c),R=[],v=[];return h.forEach(u=>{if(u.startsWith("!")){const E=u.substring(1);E&&v.push(E)}else R.push(u)}),R.every(u=>P.includes(u))&&v.every(u=>!P.includes(u))}function m(n,c){return c.value!=null&&n<c.value}function C(n,c){return c.value!=null&&n>c.value}function r(n,c){return c.value==null?!1:n<parseDateFromISO(c.value)}function t(n,c){return c.value==null?!1:n>parseDateFromISO(c.value)}function o(n,c){return c.value&&n!==c.value}},4521:(T,f,e)=>{e.d(f,{z:()=>d});var s=e(3048);function d(b,m=null){return{createGlobalFilter(C,r=null,t=b){return s.V.create(C,r,t)},createSectionFilter(C,r=null,t=b){if(!m)throw new Error("sectionId must be provided to use createSectionFilter.");return s.V.createWithCompositeKey(m,C,r,t)}}}},5884:(T,f,e)=>{e.d(f,{Hw:()=>r,Nm:()=>b,nW:()=>m});var s=e(9928),d=e(5467);function b(t,o,n={},c={}){const P=(0,s.kU)(c,o.updateValueFromEvent,o.value);return(0,d.E2)(P,n,t)}function m(t,o,n,c,P,h={},R={}){const v=(0,s.o5)(R,o.updateValueFromEvent,o.value,n,c,P);return(0,d.E2)(v,h,t)}function C(t,o,n={},c={}){const P=createDateInput(c,o.updateValueFromEvent,o.value);return createControl(P,n,t)}function r(t,o,n={},c={}){const P=(0,s.S)(c,o.updateValueFromEvent,o.value);return(0,d.E2)(P,n,t)}},7877:(T,f,e)=>{e.d(f,{Ch:()=>P,E9:()=>d,H1:()=>v,HX:()=>b,VD:()=>n,Zi:()=>h,pW:()=>B});var s=e(5884);function d(A,D={},_={}){return(0,s.Nm)("\u041F\u043E\u0438\u0441\u043A: ",A,D,_)}function b(A,D={},_={},L=.1,a=3){return(0,s.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",A,L,a,5,D,_)}function m(A,D={},_={},L=.1,a=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",A,L,a,5,D,_)}function C(A,D={},_={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",A,D,_)}function r(A,D={},_={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",A,D,_)}function t(A,D,_={},L={}){return createNumberFilterControl(A,D,"1","1","999999",_,L)}function o(A,D={},_={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",A,D,_)}function n(A,D={},_={}){return c("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",A,D,_)}function c(A,D,_={},L={}){return(0,s.nW)(A,D,"5","0","100",_,L)}function P(A,D={},_={}){return(0,s.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",A,"5","0","100",D,_)}function h(A,D,_={},L={},a="250"){return(0,s.nW)(A,D,a,"0","1000000",_,L)}function R(A,D={},_={},L="25"){return h("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",A,D,_,L)}function v(A,D={},_={},L="25"){return h("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",A,D,_,L)}function u(A,D={},_={}){return E("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",A,D,_)}function E(A,D,_={},L={}){return createNumberFilterControl(A,D,"1","0","99999",_,L)}function i(A,D={},_={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",A,"1","2","8",D,_)}function l(A,D={},_={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",A,1,1,10,D,_)}function g(A,D={},_={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",A,D,_)}function F(A,D={},_={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",A,D,_)}function y(A,D={},_={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",A,D,_)}function S(A,D={},_={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",A,D,_)}function B(A,D={},_={}){return(0,s.Hw)("\u0412\u043A\u043B: ",A,D,_)}function V(A,D,_={}){const L=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],a={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},p=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),O=[],N=()=>D?parseFloat(D.value)||0:A.value,U=()=>{const I=N();O.forEach(({button:x,value:M})=>{const k=M<=I?a.active:a.inactive;Object.assign(x.style,k)})};return L.forEach(({value:I,emoji:x,tooltip:M})=>{const w=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",..._},x);w.title=M,w.type="button",w.addEventListener("click",k=>{k.preventDefault(),A.updateValue(I),D&&(D.value=I),U()}),w.addEventListener("mouseenter",()=>{I<=N()||(w.style.background=a.hover.background)}),w.addEventListener("mouseleave",()=>{U()}),O.push({button:w,value:I}),p.appendChild(w)}),U(),D&&(D.addEventListener("input",U),D.addEventListener("change",U)),p}},8355:(T,f,e)=>{e.d(f,{Rn:()=>s});function s(r){return r.value.toLowerCase().split(",").map(t=>t.trim()).filter(t=>t!=="")}function d(r){return s(r).filter(t=>!t.startsWith("!"))}function b(r,t){C(r,o=>o.style.display!=="none",t)}function m(r,t){C(r,o=>o.style.opacity==="",t)}function C(r,t,o){const n=[...r].filter(t).length;o.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${n} \u0438\u0437 ${r.length}`}},5213:(T,f,e)=>{e.d(f,{b:()=>b});var s=e(9928),d=e(573);function b(m,C,r=!1,t="customFiltersContainer"){let o=(0,d.Fi)(`#${t}`,m);if(o)if(r)o.remove();else return;o=(0,s.Sw)(),o.id=t,C(o,m)}},4444:(T,f,e)=>{e.d(f,{s:()=>s});function s(d){let C=2166136261;for(let r=0;r<d.length;r+=1){const t=d.charCodeAt(r);C^=t,C=Math.imul(C,16777619)}return C>>>0}},5081:(T,f,e)=>{e.d(f,{B:()=>b});var s=e(4444);function d(m){return(0,s.s)(m).toString(16).padStart(8,"0")}function b(m,C="common"){return m?d(m):C}},8200:(T,f,e)=>{e.d(f,{s:()=>s});function s(d){const{target:b}=d,{type:m}=b;switch(m){case"text":return`"${b.value}"`;case"number":return b.value;case"date":return`"${b.value}"`;case"checkbox":return b.checked;default:return console.log(`Unknown input type: ${m}`),null}}},157:(T,f,e)=>{e.d(f,{Fg:()=>s,vx:()=>b});const s=window.GM_setValue,d=window.GM.setValue,b=window.GM_getValue},4639:(T,f,e)=>{e.d(f,{a:()=>m});var s=e(1870),d=e(8200),b=e(3976);class m extends s.j{constructor(r=null,t=null){super(r,t)}updateValueFromEvent=r=>{const t=(0,b.$)((0,d.s)(r));this.value!==t&&(this.value=t,this.onChangeIfDefined())}}},1870:(T,f,e)=>{e.d(f,{j:()=>s});class s{constructor(b,m){this.value=b,this.onChange=m}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,f,e)=>{e.d(f,{V:()=>C});var s=e(1870),d=e(8200),b=e(3976),m=e(157);class C extends s.j{constructor(t,o=null,n=null){super((0,m.vx)(t,o),n),this.storageKey=t,this.defaultValue=o}static create(t,o=null,n=null){return new C(t,o,n)}static createWithCompositeKey(t,o,n=null,c=null){const P=`${t}-${o}`;return new C(P,n,c)}updateValueFromEvent=t=>{const o=(0,d.s)(t),n=(0,b.$)(o);this.updateValue(n)};updateValue(t,o=!0){this.value!==t&&((0,m.Fg)(this.storageKey,t),this.value=t,o&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(T,f,e)=>{e.d(f,{$:()=>s});function s(d){return d===""?null:JSON.parse(d)}},4214:(T,f,e)=>{e.d(f,{zr:()=>d});function s(r){return r.replace(/\D/g,"")}function d(r){return r.replace(/[^\d.,-]/g,"")}function b(r){return r.replace(/\s/g,"")}function m(r){return r.charAt(0).toUpperCase()+r.slice(1)}function C(r){return r.replace(/\s+/g," ").trim()}},5406:(T,f,e)=>{e.d(f,{C$:()=>b,Fc:()=>s,W2:()=>o});function s(v,u="common",E=!1){const{pathname:i}=window.location;return d(i,v,u,E)}function d(v,u,E,i=!1){const l=v.split("/");u=u<0?l.length+u:u;const g=l[u]||E;return i&&console.log(`Pathname element: ${g}`),g}function b(v,u="common",E=!1){const i=s(v,"",E);return m(i,u,E)}function m(v,u,E){if(!v)return u;const i=v.split("-").at(-1);return E&&console.log(`Pathname element ending: ${i}`),i}function C(v,u,E="common",i=!1){const l=d(v,u,"",i);return m(l,E,i)}function r(v){return new URLSearchParams(window.location.search).get(v)}function t(v){return v.split("?")[0]}function o(v){return window.location.pathname.includes(v)}function n(v){return v.some(u=>o(u))}function c(...v){return window.location.pathname.split("/").some(E=>v.includes(E))}function P(v){try{const u=new URL(window.location.href);Object.entries(v).forEach(([E,i])=>{u.searchParams.set(E,i)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function h(v,u=[]){const E={pathname:window.location.pathname};u.forEach(y=>{E[y]=r(y)});let i=!1;async function l(){if(i)return;const y={pathname:window.location.pathname};if(u.forEach(S=>{y[S]=r(S)}),Object.keys(E).some(S=>E[S]!==y[S])){Object.assign(E,y),i=!0;try{await v()}catch(S){console.error("Error in URL observer callback:",S)}finally{i=!1}}}function g(){l().catch(y=>{console.error("Error in URL change handler:",y)})}let F=window.location.href;setInterval(()=>{window.location.href!==F&&(F=window.location.href,g())},200),window.addEventListener("popstate",g)}function R(v=[]){h(()=>window.location.reload(),v)}},4010:(T,f,e)=>{e.a(T,async(s,d)=>{try{let r=function(){return(0,C.W2)("details")};var b=e(1901),m=e(2344),C=e(5406);r()?await(0,b.K)():await(0,m.P)(),d()}catch(r){d(r)}},1)},1926:(T,f,e)=>{e.d(f,{i:()=>s});const s={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,f,e)=>{e.d(f,{Z:()=>b});var s=e(573),d=e(1926);function b(o,n,c,P){const h=(0,s.Fi)(n,o);return(m(h,P)||!h.hasAttribute(d.i.BALANCED_CASHBACK_PRICE))&&C(h,c,P),h}function m(o,n){if(o.hasAttribute(d.i.COUPON)){const c=+o.getAttribute(d.i.COUPON);return n!==c}return!!n}function C(o,n,c){let P=r(o);o.setAttribute(d.i.PRICE,P),c?(c<1?P=(P*(1-c)).toFixed():P-=c,o.setAttribute(d.i.COUPON,c)):o.removeAttribute(d.i.COUPON);const h=t(P,n),R=P-h;o.setAttribute(d.i.BALANCED_CASHBACK_PRICE,R);const v=`${P.toLocaleString()} (${R.toLocaleString()}) \u20BD`;o.innerText=v,o.title=`-${h.toLocaleString()}`}function r(o){return o.hasAttribute(d.i.PRICE)?+o.getAttribute(d.i.PRICE):(0,s.YA)(o,!0)}function t(o,n){const c=n/100;return(o*c/(1+c)).toFixed(0)}},4633:(T,f,e)=>{e.d(f,{r:()=>d});const s={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},d={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...s.INPUT,width:"180px"},NUMBER_INPUT:{...s.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,f,e)=>{e.d(f,{P:()=>A});var s=e(4921),d=e(5213),b=e(1319),m=e(5406),C=e(4639),r=e(3829),t=e(5884),o=e(5539),n=e(573),c=e(7877),P=e(1926),h=e(4633),R=e(4521),v=e(5081);const u={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var E=e(6754);const i=(0,v.B)((0,m.Fc)(2)),{createSectionFilter:l}=(0,R.z)(L,i),g=l("name-filter"),F=l("min-cashback-filter"),y=l("max-price-filter"),S=l("min-discount-filter"),B=l("seller-name-filter"),V=new C.a(!1,L);async function A(){await D();const p=await(0,s.xk)(document,"#app");new MutationObserver((0,s.sg)(D)).observe(p,{childList:!0,subtree:!0})}async function D(){const p=await(0,s.xk)(document,u.PRODUCT_CARD_LIST_HEADER);(0,d.b)(p,_);const O=p.parentNode;if(O.hasAttribute(P.i.OBSERVED))return;new MutationObserver((0,s.sg)(L,50)).observe(O,{childList:!0,subtree:!0}),O.setAttribute(P.i.OBSERVED,"")}function _(p,O){(0,E.ZM)(p,h.r.CONTAINER);const N=(0,c.E9)(g,h.r.CONTROL,h.r.TEXT_INPUT),U=(0,c.Ch)(F,h.r.CONTROL,h.r.NUMBER_INPUT),I=(0,c.H1)(y,h.r.CONTROL,h.r.NUMBER_INPUT,"250"),x=(0,c.VD)(S,h.r.CONTROL,h.r.NUMBER_INPUT),M=(0,t.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",B,h.r.CONTROL,h.r.TEXT_INPUT),w=(0,c.pW)(V,h.r.CONTROL,h.r.CHECKBOX_INPUT);p.append(N,U,I,x,M,w),O.append(p)}function L(){(0,n.fI)(u.PRODUCT_CARD).forEach(a)}function a(p){if(!V.value){(0,o.kl)(p);return}const O=(0,n.Fi)(u.PRODUCT_CARD_TITLE,p),N=(0,n.Fi)(u.PRODUCT_CARD_CASHBACK,p),U=(0,n.Fi)(u.PRODUCT_CARD_DISCOUNT,p);if(!O){(0,o.Bt)(p);return}const I=O.innerText,x=(0,n.YA)(N,!0,!1,0),M=Math.abs((0,n.YA)(U,!0,!1,0)),k=+(0,b.Z)(p,u.PRODUCT_CARD_PRICE,x).getAttribute(P.i.BALANCED_CASHBACK_PRICE),K=(0,n.Fi)(u.PRODUCT_CARD_SELLER_NAME,p),H=K?(0,r.Ay)(K.innerText,B):!1,G=(0,r.Ay)(I,g)||(0,r.JE)(x,F)||(0,r.iG)(k,y)||(0,r.JE)(M,S)||H;(0,o.UC)(p,G)}},1901:(T,f,e)=>{e.d(f,{K:()=>D});var s=e(4921),d=e(5081),b=e(5406),m=e(5213),C=e(4639),r=e(3829),t=e(5539),o=e(573),n=e(7877),c=e(5884),P=e(1319),h=e(1926),R=e(4633),v=e(4521);const u={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var E=e(6754);const i=(0,d.B)((0,b.C$)(3)),{createGlobalFilter:l,createSectionFilter:g}=(0,v.z)(a,i),F=g("min-cashback-filter"),y=g("max-price-filter"),S=g("max-discounted-price-filter"),B=l("min-seller-rating-filter"),V=new C.a(null,a),A=l("filter-enabled",!1);async function D(){await _();const O=await(0,s.xk)(document,u.APP);new MutationObserver((0,s.sg)(_)).observe(O,{childList:!0})}async function _(){const O=await(0,s.xk)(document,u.OFFERS_FILTER);(0,m.b)(O,L),a();const N=(0,o.Fi)(u.OFFERS_CONTAINER);if(N.hasAttribute(h.i.OBSERVED))return;new MutationObserver((0,s.sg)(a,50)).observe(N,{childList:!0,subtree:!0}),N.setAttribute(h.i.OBSERVED,"")}function L(O,N){(0,E.ZM)(O,R.r.CONTAINER);const U=(0,n.Ch)(F,R.r.CONTROL,R.r.NUMBER_INPUT),I=(0,n.H1)(y,R.r.CONTROL,R.r.NUMBER_INPUT,"250"),x=(0,n.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",S,R.r.CONTROL,R.r.NUMBER_INPUT),M=(0,n.HX)(B,R.r.CONTROL,R.r.NUMBER_INPUT),w=(0,c.nW)("\u041A\u0443\u043F\u043E\u043D: ",V,"500","0","100000",R.r.CONTROL,R.r.NUMBER_INPUT),k=(0,n.pW)(A,R.r.CONTROL,R.r.CHECKBOX_INPUT);O.append(U,I,x,M,w,k),N.append(O)}function a(){(0,o.fI)(u.OFFER).forEach(p)}function p(O){if(!A.value){(0,t.kl)(O);return}const N=(0,o.Fi)(u.PRICE,O),U=(0,o.Fi)(u.CASHBACK,O),I=(0,o.Fi)(u.SELLER_RATING,O);if(!N||!U||!I){(0,t.Bt)(O);return}const x=(0,o.YA)(U,!0),M=(0,P.Z)(O,u.PRICE,x,V.value),w=+M.getAttribute(h.i.PRICE),k=+M.getAttribute(h.i.BALANCED_CASHBACK_PRICE),K=(0,o.YA)(I,!0),H=(0,r.JE)(x,F)||(0,r.iG)(w,y)||(0,r.iG)(k,S)||(0,r.JE)(K,B);(0,t.UC)(O,H)}}},$={};function W(T){var f=$[T];if(f!==void 0)return f.exports;var e=$[T]={exports:{}};return j[T](e,e.exports,W),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",f=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=b=>{b&&b.d<1&&(b.d=1,b.forEach(m=>m.r--),b.forEach(m=>m.r--?m.r++:m()))},d=b=>b.map(m=>{if(m!==null&&typeof m=="object"){if(m[T])return m;if(m.then){var C=[];C.d=0,m.then(o=>{r[f]=o,s(C)},o=>{r[e]=o,s(C)});var r={};return r[T]=o=>o(C),r}}var t={};return t[T]=o=>{},t[f]=m,t});W.a=(b,m,C)=>{var r;C&&((r=[]).d=-1);var t=new Set,o=b.exports,n,c,P,h=new Promise((R,v)=>{P=v,c=R});h[f]=o,h[T]=R=>(r&&R(r),t.forEach(R),h.catch(v=>{})),b.exports=h,m(R=>{n=d(R);var v,u=()=>n.map(i=>{if(i[e])throw i[e];return i[f]}),E=new Promise(i=>{v=()=>i(u),v.r=0;var l=g=>g!==r&&!t.has(g)&&(t.add(g),g&&!g.d&&(v.r++,g.push(v)));n.map(g=>g[T](l))});return v.r?E:u()},R=>(R?P(h[e]=R):c(o),s(r))),r&&r.d<0&&(r.d=0)}})(),W.d=(T,f)=>{for(var e in f)W.o(f,e)&&!W.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:f[e]})},W.o=(T,f)=>Object.prototype.hasOwnProperty.call(T,f);var z=W(4010)})();})();
