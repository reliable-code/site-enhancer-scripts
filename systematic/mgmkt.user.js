// ==UserScript==
// @name         MegaMarket product cards & offers filter
// @description  Hide product cards & offers by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://megamarket.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.75794270
// @icon         https://www.google.com/s2/favicons?sz=64&domain=megamarket.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/mgmkt.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(T,m,e)=>{e.d(m,{E2:()=>l});var s=e(9928);function l(C,o={},n=null){const t=(0,s.Sw)(o,n);return t.append(C),t}function p(C,o=null,n={},t={}){const i=createActionLink(C,o,t);return l(i,n)}function d(C,o=null,n=null,t={},i={}){const O=createActionLinkWithIcon(C,n,o,i);return l(O,t)}},9928:(T,m,e)=>{e.d(m,{S:()=>C,Sw:()=>h,kU:()=>p,o5:()=>d});var s=e(4921),l=e(6754);function p(c,u,f){const v=o(c,"text",u);return v.value=f,v}function d(c,u,f,v,y,N){const F=o(c,"number",u);return F.value=f,F.step=v,F.min=y,F.max=N,F}function C(c,u,f){const v=o(c,"checkbox",u);return v.checked=f,v}function o(c={},u=null,f=null){const v=r("input",c);return u&&(v.type=u),f&&(v.addEventListener("keyup",(0,s.sg)(f,200)),v.addEventListener("change",(0,s.sg)(f,100))),v}function n(c={},u=null){return r("span",c,u)}function t(c={},u=null,f=null){const v=r("a",c,u);return f&&(v.href=f),v}function i(c,u=null,f={}){f.cursor||="pointer";const v=t(f,u);return c&&v.addEventListener("click",c),v}function O(c,u,f=null,v={},y={}){v.display||="inline-flex",v.alignItems||="center",v.gap||="0.25em";const N=i(c,f,v);return N.prepend(b(u,y)),N}function R(c={},u=null,f=null){const v=r("button",c,u);return f&&v.addEventListener("click",f),v}function h(c={},u=null){return r("div",c,u)}function g(c={}){return r("i",c)}function b(c,u={}){u.width||="1em",u.height||="1em",u.paddingBottom||="1px";const f=g(u);return f.setAttribute("data-lucide",c),f}function r(c,u,f=null){if(typeof u!="object"||u===null)throw new TypeError("styles should be an object");const v=document.createElement(c);return(0,l.ZM)(v,u),f&&(v.innerHTML=f),v}},573:(T,m,e)=>{e.d(m,{Fi:()=>p,YA:()=>t,fI:()=>d});var s=e(4214);function l(r,c=document){return!!c.querySelector(r)}function p(r,c=document,u=!1){const f=c.querySelector(r);return u&&!f&&console.log(`No element found for selector: ${r}`),f}function d(r,c=document,u=!1){const f=c.querySelectorAll(r);return u&&!f.length&&console.log(`No elements found for selector: ${r}`),f}function C(r,c=1){let u=r;for(let f=0;f<c;f++){if(!u.parentElement)return null;u=u.parentElement}return u}function o(r,c,u){return[...r.querySelectorAll(c)].find(f=>f.textContent.trim().includes(u))}function n(r,c,u=!1,f=!1,v=null){const y=p(c,r);return t(y,u,f,v)}function t(r,c=!1,u=!1,f=null){if(!r)return f===null?(console.log("No element found"),null):f;const v=r.innerText;return R(v,c,u)}function i(r,c,u=!1){const f=r[c];return t(f,u)}function O(r,c=!1,u=!1){const f=r.textContent;return R(f,c,u)}function R(r,c,u){c&&(r=(0,s.zr)(r)),u&&(r=r.replace(",","."));const f=Number(r);return Number.isNaN(f)?(console.log(`Invalid number: ${r}`),0):f}function h(r){return[...r.childNodes].find(c=>c.nodeType===Node.TEXT_NODE)}function g(r){const c=u=>u.nodeType===Node.TEXT_NODE&&u.textContent.trim()!==""?[u]:[...u.childNodes].flatMap(c);return c(r)}function b(r){return normalizeSpacing(r.textContent)}},5539:(T,m,e)=>{e.d(m,{Bt:()=>l,UC:()=>i,kl:()=>n});function s(a,E){a.parentNode.insertBefore(E,a.nextSibling)}function l(a){a.style.display="none"}function p(a,E=1){const P=document.querySelector(a);P&&d(P,E)}function d(a,E=1){const P=getElementAncestor(a,E);P&&l(P)}function C(a){h(a),l(a)}function o(a){a.intersectionObserver||runOnceOnIntersection(a,()=>l(a))}function n(a){a.style.display=""}function t(a){const E=R(a);a.style.display=E}function i(a,E){E?l(a):n(a)}function O(a,E){E?o(a):(clearIntersectionObserver(a),n(a))}function R(a){return h(a),a.defaultDisplay}function h(a){if(a.defaultDisplay)return;const{display:E}=getComputedStyle(a);a.defaultDisplay=E}function g(){return{show:[],hide:[]}}function b(a,E,P){a?E.hide.push(P):E.show.push(P)}function r(a){a.show.forEach(n),a.hide.forEach(l)}function c(a,E,P=.3){E?f(a,P):u(a)}function u(a){a.style.opacity=""}function f(a,E=.3){a.style.opacity=E}function v(a){a.style.order=""}function y(a,E){a.style.order=E}function N(a,E){a.style.background=E}function F(a,E){const P=getFirstElement(E);P&&A(a,P)}function A(a,E){const P=createLink();P.href=a,E.parentNode.append(P),P.append(E)}function _(a,E){const P=getFirstElement(E);P&&D(a,P)}function D(a,E){const P=createLink();P.href=a,P.append(...E.childNodes),E.append(P)}function L(){const a=getURLQueryParam("scrollTo");if(!a)return;const E=document.getElementById(a);E?E.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function M(a,E,P=null){const S=`${E}-click-passed`,U=P?I=>findElementByText(I,a,P):I=>getFirstElement(a,I);return function(I){if(I.hasAttribute(S))return!1;const w=U(I);return w&&w.click(),I.setAttribute(S,""),!0}}function k(a,E,P="text/plain"){const S=new Blob([a],{type:P}),U=URL.createObjectURL(S),I=document.createElement("a");I.href=U,I.download=E,document.body.appendChild(I),I.click(),document.body.removeChild(I),requestAnimationFrame(()=>URL.revokeObjectURL(U))}},6754:(T,m,e)=>{e.d(m,{ZM:()=>s});function s(C,o){Object.assign(C.style,o)}function l(C,o="custom-global-style"){let n=document.getElementById(o);n||(n=document.createElement("style"),n.id=o,n.type="text/css",document.head.appendChild(n)),n.textContent=C}function p(C){return Object.entries(C).map(([o,n])=>`${o.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${n};`).join(" ")}function d(C){return C?C.split(";").filter(o=>o.trim()!=="").reduce((o,n)=>{const[t,i]=n.split(":").map(R=>R.trim()),O=t.replace(/-([a-z])/g,(R,h)=>h.toUpperCase());return o[O]=i,o},{}):{}}},4921:(T,m,e)=>{e.d(m,{sg:()=>d,xk:()=>s});function s(i,O,R=null){const h=i.querySelector(O);return h?Promise.resolve(h):new Promise(g=>{const b=new MutationObserver(c);b.observe(i,{childList:!0,subtree:!0});let r;R&&(r=setTimeout(()=>{b.disconnect(),console.log(`No element found for selector: ${O}`),g(null)},R));function c(){const u=i.querySelector(O);u&&(r&&clearTimeout(r),b.disconnect(),g(u))}})}function l(i,O){return i.querySelector(O)?new Promise(h=>{const g=new MutationObserver(b);g.observe(i,{childList:!0,subtree:!0});function b(){i.querySelector(O)||(g.disconnect(),h())}}):Promise.resolve()}function p(i,O=400){return new Promise(R=>{let h;const g=new MutationObserver(()=>{clearTimeout(h),b()});function b(){h=setTimeout(()=>{g.disconnect(),R()},O)}b(),g.observe(i,{childList:!0,subtree:!0})})}function d(i,O=250){let R;return(...h)=>{clearTimeout(R),R=setTimeout(()=>i(...h),O)}}async function C(i){document.visibilityState==="visible"?await i():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await i()},{once:!0})}function o(i,O){const R=new IntersectionObserver(h=>{h.forEach(g=>{g.isIntersecting&&(O(),n(i))})});i.intersectionObserver=R,R.observe(i)}function n(i){i.intersectionObserver&&(i.intersectionObserver.disconnect(),i.intersectionObserver=null)}function t(i){i&&(i.disconnect(),i=null)}},3829:(T,m,e)=>{e.d(m,{Ay:()=>l,JE:()=>d,iG:()=>C});var s=e(8355);function l(n,t){return!p(n,t)}function p(n,t){if(!t.value)return!0;const i=n.toLowerCase(),O=(0,s.R)(t),R=[],h=[];return O.forEach(g=>{if(g.startsWith("!")){const b=g.substring(1);b&&h.push(b)}else R.push(g)}),R.every(g=>i.includes(g))&&h.every(g=>!i.includes(g))}function d(n,t){return t.value!=null&&n<t.value}function C(n,t){return t.value!=null&&n>t.value}function o(n,t){return t.value&&n!==t.value}},4521:(T,m,e)=>{e.d(m,{z:()=>l});var s=e(3048);function l(p,d=null){return{createGlobalFilter(C,o=null,n=p){return s.V.create(C,o,n)},createSectionFilter(C,o=null,n=p){if(!d)throw new Error("sectionId must be provided to use createSectionFilter.");return s.V.createWithCompositeKey(d,C,o,n)}}}},5884:(T,m,e)=>{e.d(m,{Hw:()=>C,Nm:()=>p,nW:()=>d});var s=e(9928),l=e(5467);function p(o,n,t={},i={}){const O=(0,s.kU)(i,n.updateValueFromEvent,n.value);return(0,l.E2)(O,t,o)}function d(o,n,t,i,O,R={},h={}){const g=(0,s.o5)(h,n.updateValueFromEvent,n.value,t,i,O);return(0,l.E2)(g,R,o)}function C(o,n,t={},i={}){const O=(0,s.S)(i,n.updateValueFromEvent,n.value);return(0,l.E2)(O,t,o)}},7877:(T,m,e)=>{e.d(m,{Ch:()=>O,E9:()=>l,H1:()=>g,HX:()=>p,VD:()=>t,Zi:()=>R,pW:()=>F});var s=e(5884);function l(A,_={},D={}){return(0,s.Nm)("\u041F\u043E\u0438\u0441\u043A: ",A,_,D)}function p(A,_={},D={},L=.1,M=3){return(0,s.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",A,L,M,5,_,D)}function d(A,_={},D={},L=.1,M=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",A,L,M,5,_,D)}function C(A,_={},D={}){return n("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",A,_,D)}function o(A,_={},D={}){return n("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",A,_,D)}function n(A,_,D={},L={}){return createNumberFilterControl(A,_,"1","1","999999",D,L)}function t(A,_={},D={}){return i("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",A,_,D)}function i(A,_,D={},L={}){return(0,s.nW)(A,_,"5","0","100",D,L)}function O(A,_={},D={}){return(0,s.nW)("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",A,"5","0","100",_,D)}function R(A,_,D={},L={},M="250"){return(0,s.nW)(A,_,M,"0","1000000",D,L)}function h(A,_={},D={},L="25"){return R("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",A,_,D,L)}function g(A,_={},D={},L="25"){return R("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",A,_,D,L)}function b(A,_={},D={}){return r("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",A,_,D)}function r(A,_,D={},L={}){return createNumberFilterControl(A,_,"1","0","99999",D,L)}function c(A,_={},D={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",A,"1","2","7",_,D)}function u(A,_={},D={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",A,1,1,10,_,D)}function f(A,_={},D={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",A,_,D)}function v(A,_={},D={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",A,_,D)}function y(A,_={},D={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",A,_,D)}function N(A,_={},D={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",A,_,D)}function F(A,_={},D={}){return(0,s.Hw)("\u0412\u043A\u043B: ",A,_,D)}},8355:(T,m,e)=>{e.d(m,{R:()=>s});function s(p){return p.value.toLowerCase().split(",").map(d=>d.trim()).filter(d=>d!=="")}function l(p){return s(p).filter(d=>!d.startsWith("!"))}},5213:(T,m,e)=>{e.d(m,{b:()=>p});var s=e(9928),l=e(573);function p(d,C,o=!1,n="customFiltersContainer"){let t=(0,l.Fi)(`#${n}`,d);if(t)if(o)t.remove();else return;t=(0,s.Sw)(),t.id=n,C(t,d)}},4444:(T,m,e)=>{e.d(m,{s:()=>s});function s(l){let C=2166136261;for(let o=0;o<l.length;o+=1){const n=l.charCodeAt(o);C^=n,C=Math.imul(C,16777619)}return C>>>0}},5081:(T,m,e)=>{e.d(m,{B:()=>p});var s=e(4444);function l(d){return(0,s.s)(d).toString(16).padStart(8,"0")}function p(d,C="common"){return d?l(d):C}},8200:(T,m,e)=>{e.d(m,{s:()=>s});function s(l){const{target:p}=l,{type:d}=p;switch(d){case"text":return`"${p.value}"`;case"number":return p.value;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${d}`),null}}},157:(T,m,e)=>{e.d(m,{Fg:()=>s,vx:()=>p});const s=window.GM_setValue,l=window.GM.setValue,p=window.GM_getValue},4639:(T,m,e)=>{e.d(m,{a:()=>d});var s=e(1870),l=e(8200),p=e(3976);class d extends s.j{constructor(o=null,n=null){super(o,n)}updateValueFromEvent=o=>{const n=(0,p.$)((0,l.s)(o));this.value!==n&&(this.value=n,this.onChangeIfDefined())}}},1870:(T,m,e)=>{e.d(m,{j:()=>s});class s{constructor(p,d){this.value=p,this.onChange=d}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,m,e)=>{e.d(m,{V:()=>C});var s=e(1870),l=e(8200),p=e(3976),d=e(157);class C extends s.j{constructor(n,t=null,i=null){super((0,d.vx)(n,t),i),this.storageKey=n,this.defaultValue=t}static create(n,t=null,i=null){return new C(n,t,i)}static createWithCompositeKey(n,t,i=null,O=null){const R=`${n}-${t}`;return new C(R,i,O)}updateValueFromEvent=n=>{const t=(0,l.s)(n),i=(0,p.$)(t);this.updateValue(i)};updateValue(n,t=!0){this.value!==n&&((0,d.Fg)(this.storageKey,n),this.value=n,t&&this.onChangeIfDefined())}clearValue(n=!1){this.updateValue(null,n)}resetValue(n=!1){this.updateValue(this.defaultValue,n)}}},3976:(T,m,e)=>{e.d(m,{$:()=>s});function s(l){return l===""?null:JSON.parse(l)}},4214:(T,m,e)=>{e.d(m,{zr:()=>l});function s(o){return o.replace(/\D/g,"")}function l(o){return o.replace(/[^\d.,-]/g,"")}function p(o){return o.replace(/\s/g,"")}function d(o){return o.charAt(0).toUpperCase()+o.slice(1)}function C(o){return o.replace(/\s+/g," ").trim()}},5406:(T,m,e)=>{e.d(m,{C$:()=>p,Fc:()=>s,W2:()=>t});function s(b,r="common",c=!1){const{pathname:u}=window.location;return l(u,b,r,c)}function l(b,r,c,u=!1){const f=b.split("/");r=r<0?f.length+r:r;const v=f[r]||c;return u&&console.log(`Pathname element: ${v}`),v}function p(b,r="common",c=!1){const u=s(b,"",c);return d(u,r,c)}function d(b,r,c){if(!b)return r;const u=b.split("-").at(-1);return c&&console.log(`Pathname element ending: ${u}`),u}function C(b,r,c="common",u=!1){const f=l(b,r,"",u);return d(f,c,u)}function o(b){return new URLSearchParams(window.location.search).get(b)}function n(b){return b.split("?")[0]}function t(b){return window.location.pathname.includes(b)}function i(b){return b.some(r=>t(r))}function O(b){return window.location.pathname.split("/").some(c=>c===b)}function R(b){try{const r=new URL(window.location.href);Object.entries(b).forEach(([c,u])=>{r.searchParams.set(c,u)}),window.location.href=r.toString()}catch(r){console.error("Failed to redirect:",r)}}function h(b,r=[]){const c={pathname:window.location.pathname};r.forEach(N=>{c[N]=o(N)});let u=!1;async function f(){if(u)return;const N={pathname:window.location.pathname};if(r.forEach(F=>{N[F]=o(F)}),Object.keys(c).some(F=>c[F]!==N[F])){Object.assign(c,N),u=!0;try{await b()}catch(F){console.error("Error in URL observer callback:",F)}finally{u=!1}}}function v(){f().catch(N=>{console.error("Error in URL change handler:",N)})}let y=window.location.href;setInterval(()=>{window.location.href!==y&&(y=window.location.href,v())},200),window.addEventListener("popstate",v)}function g(b=[]){h(()=>window.location.reload(),b)}},4010:(T,m,e)=>{e.a(T,async(s,l)=>{try{let o=function(){return(0,C.W2)("details")};var p=e(1901),d=e(2344),C=e(5406);o()?await(0,p.K)():await(0,d.P)(),l()}catch(o){l(o)}},1)},1926:(T,m,e)=>{e.d(m,{i:()=>s});const s={PRICE:"price",BALANCED_CASHBACK_PRICE:"balanced-cashback-price",COUPON:"applied-coupon",OBSERVED:"observed"}},1319:(T,m,e)=>{e.d(m,{Z:()=>p});var s=e(573),l=e(1926);function p(t,i,O,R){const h=(0,s.Fi)(i,t);return(d(h,R)||!h.hasAttribute(l.i.BALANCED_CASHBACK_PRICE))&&C(h,O,R),h}function d(t,i){if(t.hasAttribute(l.i.COUPON)){const O=+t.getAttribute(l.i.COUPON);return i!==O}return!!i}function C(t,i,O){let R=o(t);t.setAttribute(l.i.PRICE,R),O?(O<1?R=(R*(1-O)).toFixed():R-=O,t.setAttribute(l.i.COUPON,O)):t.removeAttribute(l.i.COUPON);const h=n(R,i),g=R-h;t.setAttribute(l.i.BALANCED_CASHBACK_PRICE,g);const b=`${R.toLocaleString()} (${g.toLocaleString()}) \u20BD`;t.innerText=b,t.title=`-${h.toLocaleString()}`}function o(t){return t.hasAttribute(l.i.PRICE)?+t.getAttribute(l.i.PRICE):(0,s.YA)(t,!0)}function n(t,i){const O=i/100;return(t*O/(1+O)).toFixed(0)}},4633:(T,m,e)=>{e.d(m,{r:()=>l});const s={INPUT:{border:"1px solid #e4ebf0",fontSize:"14px",borderRadius:"8px",marginLeft:"7px",padding:"8px 14px"}},l={CONTAINER:{display:"flex",gridGap:"15px",padding:"14px 5px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"14px"},TEXT_INPUT:{...s.INPUT,width:"180px"},NUMBER_INPUT:{...s.INPUT},CHECKBOX_INPUT:{marginLeft:"7px",width:"23px",height:"23px"}}},2344:(T,m,e)=>{e.d(m,{P:()=>D});var s=e(4921),l=e(5213),p=e(1319),d=e(5406),C=e(4639),o=e(3829),n=e(5884),t=e(5539),i=e(573),O=e(7877),R=e(1926),h=e(4633),g=e(4521),b=e(5081);const r={PRODUCT_CARD_LIST_HEADER:".catalog-listing-controls",PRODUCT_CARD:".catalog-item-desktop",PRODUCT_CARD_PRICE:".catalog-item-regular-desktop__price",PRODUCT_CARD_CASHBACK:".bonus-percent",PRODUCT_CARD_TITLE:".catalog-item-regular-desktop__title-link",PRODUCT_CARD_DISCOUNT:".discount-percentage__value",PRODUCT_CARD_SELLER_NAME:".merchant-info__name"};var c=e(6754);const u=(0,b.B)((0,d.Fc)(2)),{createSectionFilter:f}=(0,g.z)(k,u),v=f("name-filter"),y=f("min-cashback-filter"),N=f("max-price-filter"),F=f("min-discount-filter"),A=f("seller-name-filter"),_=new C.a(!1,k);async function D(){await L();const E=await(0,s.xk)(document,"#app");new MutationObserver((0,s.sg)(L)).observe(E,{childList:!0,subtree:!0})}async function L(){const E=await(0,s.xk)(document,r.PRODUCT_CARD_LIST_HEADER);(0,l.b)(E,M);const P=E.parentNode;if(P.hasAttribute(R.i.OBSERVED))return;new MutationObserver((0,s.sg)(k,50)).observe(P,{childList:!0,subtree:!0}),P.setAttribute(R.i.OBSERVED,"")}function M(E,P){(0,c.ZM)(E,h.r.CONTAINER);const S=(0,O.E9)(v,h.r.CONTROL,h.r.TEXT_INPUT),U=(0,O.Ch)(y,h.r.CONTROL,h.r.NUMBER_INPUT),I=(0,O.H1)(N,h.r.CONTROL,h.r.NUMBER_INPUT,"250"),w=(0,O.VD)(F,h.r.CONTROL,h.r.NUMBER_INPUT),x=(0,n.Nm)("\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446: ",A,h.r.CONTROL,h.r.TEXT_INPUT),W=(0,O.pW)(_,h.r.CONTROL,h.r.CHECKBOX_INPUT);E.append(S,U,I,w,x,W),P.append(E)}function k(){(0,i.fI)(r.PRODUCT_CARD).forEach(a)}function a(E){if(!_.value){(0,t.kl)(E);return}const P=(0,i.Fi)(r.PRODUCT_CARD_TITLE,E),S=(0,i.Fi)(r.PRODUCT_CARD_CASHBACK,E),U=(0,i.Fi)(r.PRODUCT_CARD_DISCOUNT,E);if(!P){(0,t.Bt)(E);return}const I=P.innerText,w=(0,i.YA)(S,!0,!1,0),x=Math.abs((0,i.YA)(U,!0,!1,0)),K=+(0,p.Z)(E,r.PRODUCT_CARD_PRICE,w).getAttribute(R.i.BALANCED_CASHBACK_PRICE),V=(0,i.Fi)(r.PRODUCT_CARD_SELLER_NAME,E),H=V?(0,o.Ay)(V.innerText,A):!1,G=(0,o.Ay)(I,v)||(0,o.JE)(w,y)||(0,o.iG)(K,N)||(0,o.JE)(x,F)||H;(0,t.UC)(E,G)}},1901:(T,m,e)=>{e.d(m,{K:()=>L});var s=e(4921),l=e(5081),p=e(5406),d=e(5213),C=e(4639),o=e(3829),n=e(5539),t=e(573),i=e(7877),O=e(5884),R=e(1319),h=e(1926),g=e(4633),b=e(4521);const r={APP:"#app",OFFERS_FILTER:".pdp-prices-filter",OFFERS_CONTAINER:".pdp-prices",OFFER:".pdp-prices .product-offer",PRICE:".product-offer-price__amount",CASHBACK:".bonus-percent",SELLER_RATING:".pdp-merchant-rating-block__rating"};var c=e(6754);const u=(0,l.B)((0,p.C$)(3)),{createGlobalFilter:f,createSectionFilter:v}=(0,b.z)(a,u),y=v("min-cashback-filter"),N=v("max-price-filter"),F=v("max-discounted-price-filter"),A=f("min-seller-rating-filter"),_=new C.a(null,a),D=f("filter-enabled",!1);async function L(){await M();const P=await(0,s.xk)(document,r.APP);new MutationObserver((0,s.sg)(M)).observe(P,{childList:!0})}async function M(){const P=await(0,s.xk)(document,r.OFFERS_FILTER);(0,d.b)(P,k),a();const S=(0,t.Fi)(r.OFFERS_CONTAINER);if(S.hasAttribute(h.i.OBSERVED))return;new MutationObserver((0,s.sg)(a,50)).observe(S,{childList:!0,subtree:!0}),S.setAttribute(h.i.OBSERVED,"")}function k(P,S){(0,c.ZM)(P,g.r.CONTAINER);const U=(0,i.Ch)(y,g.r.CONTROL,g.r.NUMBER_INPUT),I=(0,i.H1)(N,g.r.CONTROL,g.r.NUMBER_INPUT,"250"),w=(0,i.Zi)("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430 \u0441\u043E \u0441\u043A\u0438\u0434\u043A\u043E\u0439: ",F,g.r.CONTROL,g.r.NUMBER_INPUT),x=(0,i.HX)(A,g.r.CONTROL,g.r.NUMBER_INPUT),W=(0,O.nW)("\u041A\u0443\u043F\u043E\u043D: ",_,"500","0","100000",g.r.CONTROL,g.r.NUMBER_INPUT),K=(0,i.pW)(D,g.r.CONTROL,g.r.CHECKBOX_INPUT);P.append(U,I,w,x,W,K),S.append(P)}function a(){(0,t.fI)(r.OFFER).forEach(E)}function E(P){if(!D.value){(0,n.kl)(P);return}const S=(0,t.Fi)(r.PRICE,P),U=(0,t.Fi)(r.CASHBACK,P),I=(0,t.Fi)(r.SELLER_RATING,P);if(!S||!U||!I){(0,n.Bt)(P);return}const w=(0,t.YA)(U,!0),x=(0,R.Z)(P,r.PRICE,w,_.value),W=+x.getAttribute(h.i.PRICE),K=+x.getAttribute(h.i.BALANCED_CASHBACK_PRICE),V=(0,t.YA)(I,!0),H=(0,o.JE)(w,y)||(0,o.iG)(W,N)||(0,o.iG)(K,F)||(0,o.JE)(V,A);(0,n.UC)(P,H)}}},$={};function B(T){var m=$[T];if(m!==void 0)return m.exports;var e=$[T]={exports:{}};return j[T](e,e.exports,B),e.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=p=>{p&&p.d<1&&(p.d=1,p.forEach(d=>d.r--),p.forEach(d=>d.r--?d.r++:d()))},l=p=>p.map(d=>{if(d!==null&&typeof d=="object"){if(d[T])return d;if(d.then){var C=[];C.d=0,d.then(t=>{o[m]=t,s(C)},t=>{o[e]=t,s(C)});var o={};return o[T]=t=>t(C),o}}var n={};return n[T]=t=>{},n[m]=d,n});B.a=(p,d,C)=>{var o;C&&((o=[]).d=-1);var n=new Set,t=p.exports,i,O,R,h=new Promise((g,b)=>{R=b,O=g});h[m]=t,h[T]=g=>(o&&g(o),n.forEach(g),h.catch(b=>{})),p.exports=h,d(g=>{i=l(g);var b,r=()=>i.map(u=>{if(u[e])throw u[e];return u[m]}),c=new Promise(u=>{b=()=>u(r),b.r=0;var f=v=>v!==o&&!n.has(v)&&(n.add(v),v&&!v.d&&(b.r++,v.push(b)));i.map(v=>v[T](f))});return b.r?c:r()},g=>(g?R(h[e]=g):O(t),s(o))),o&&o.d<0&&(o.d=0)}})(),B.d=(T,m)=>{for(var e in m)B.o(m,e)&&!B.o(T,e)&&Object.defineProperty(T,e,{enumerable:!0,get:m[e]})},B.o=(T,m)=>Object.prototype.hasOwnProperty.call(T,m);var z=B(4010)})();})();
