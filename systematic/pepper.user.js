// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76943879
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var se={5467:(M,T,e)=>{e.d(T,{E2:()=>E});var u=e(9928);function E(b,d={},r=null){const o=(0,u.Sw)(d,r);return o.append(b),o}function N(b,d=null,r={},o={}){const i=createActionLink(b,d,o);return E(i,r)}function O(b,d=null,r=null,o={},i={},m={}){const a=createActionLinkWithIcon(b,r,d,i,m);return E(a,o)}},9928:(M,T,e)=>{e.d(T,{Hn:()=>o,S:()=>d,Sw:()=>g,VI:()=>i,kU:()=>N,o5:()=>O});var u=e(4921),E=e(6754);function N(f,h,w){const I=r(f,"text",h);return I.value=w,I}function O(f,h,w,I,H,j){const C=r(f,"number",h);return C.value=w,C.step=I,C.min=H,C.max=j,C}function b(f,h,w){const I=r(f,"date",h);return I.value=w,I}function d(f,h,w){const I=r(f,"checkbox",h);return I.checked=w,I}function r(f={},h=null,w=null){const I=p("input",f);return h&&(I.type=h),w&&(I.addEventListener("keyup",(0,u.sg)(w,200)),I.addEventListener("change",(0,u.sg)(w,100))),I}function o(f,h,w){const I=p("select",f);return h&&I.addEventListener("change",h),I.value=w,I}function i(f={},h=null){return p("span",f,h)}function m(f={},h=null,w=null){const I=p("a",f,h);return w&&(I.href=w),I}function a(f,h=null,w={}){w.cursor||="pointer";const I=m(w,h);return f&&I.addEventListener("click",f),I}function l(f,h,w=null,I={},H={}){I.display||="inline-flex",I.alignItems||="center",I.gap||="0.25em";const j=a(f,w,I);return j.prepend(t(h,H)),j}function P(f={},h=null,w=null){const I=p("button",f,h);return w&&I.addEventListener("click",w),I}function g(f={},h=null){return p("div",f,h)}function n(f={},h=null){return p("i",f,h)}function t(f,h={}){h.width||="1em",h.height||="1em";const w=createLucideSvg(f);return applyStyles(w,h),w}function p(f,h,w=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const I=document.createElement(f);return(0,E.ZM)(I,h),w&&(I.innerHTML=w),I}},573:(M,T,e)=>{e.d(T,{Fi:()=>N,YA:()=>o,fI:()=>O,s$:()=>b});var u=e(4214);function E(n,t=document){return!!t.querySelector(n)}function N(n,t=document,p=!1){const f=t.querySelector(n);return p&&!f&&console.log(`No element found for selector: ${n}`),f}function O(n,t=document,p=!1){const f=t.querySelectorAll(n);return p&&!f.length&&console.log(`No elements found for selector: ${n}`),f}function b(n,t=1){let p=n;for(let f=0;f<t;f++){if(!p.parentElement)return null;p=p.parentElement}return p}function d(n,t,p){return[...n.querySelectorAll(t)].find(f=>f.textContent.trim().includes(p))}function r(n,t,p=!1,f=!1,h=null){const w=N(t,n);return o(w,p,f,h)}function o(n,t=!1,p=!1,f=null){if(!n)return f===null?(console.log("No element found"),null):f;const h=n.innerText;return a(h,t,p)}function i(n,t,p=!1){const f=n[t];return o(f,p)}function m(n,t=!1,p=!1){const f=n.textContent;return a(f,t,p)}function a(n,t,p){t&&(n=(0,u.zr)(n)),p&&(n=n.replace(",","."));const f=Number(n);return Number.isNaN(f)?(console.log(`Invalid number: ${n}`),0):f}function l(n){return[...n.childNodes].find(t=>t.nodeType===Node.TEXT_NODE)}function P(n){const t=p=>p.nodeType===Node.TEXT_NODE&&p.textContent.trim()!==""?[p]:[...p.childNodes].flatMap(t);return t(n)}function g(n){return normalizeSpacing(n.textContent)}},5539:(M,T,e)=>{e.d(T,{D9:()=>p,iV:()=>h,ku:()=>O,vJ:()=>f});var u=e(573);function E(s,D){s.parentNode.insertBefore(D,s.nextSibling)}function N(s){s.style.display="none"}function O(s,D=1){const U=document.querySelector(s);U&&b(U,D)}function b(s,D=1){const U=(0,u.s$)(s,D);U&&N(U)}function d(s){P(s),N(s)}function r(s){s.intersectionObserver||runOnceOnIntersection(s,()=>N(s))}function o(s){s.style.display=""}function i(s){const D=l(s);s.style.display=D}function m(s,D){D?N(s):o(s)}function a(s,D){D?r(s):(clearIntersectionObserver(s),o(s))}function l(s){return P(s),s.defaultDisplay}function P(s){if(s.defaultDisplay)return;const{display:D}=getComputedStyle(s);s.defaultDisplay=D}function g(){return{show:[],hide:[]}}function n(s,D,U){s?D.hide.push(U):D.show.push(U)}function t(s){s.show.forEach(o),s.hide.forEach(N)}function p(s,D,U=.3){D?h(s,U):f(s)}function f(s){s.style.opacity=""}function h(s,D=.3){s.style.opacity=D}function w(s){s.style.order=""}function I(s,D){s.style.order=D}function H(s,D){s.style.background=D}function j(s,D){const U=getFirstElement(D);U&&C(s,U)}function C(s,D){const U=createLink();U.href=s,D.parentNode.append(U),U.append(D)}function Q(s,D){const U=getFirstElement(D);U&&F(s,U)}function F(s,D,U={}){const v=createLink(U);v.href=s,v.append(...D.childNodes),D.append(v)}function S(){const s=getURLQueryParam("scrollTo");if(!s)return;const D=document.getElementById(s);D?D.scrollIntoView():console.log(`Element with ID "${s}" was not found.`)}function _(s,D,U=null){const v=`${D}-click-passed`,y=U?L=>findElementByText(L,s,U):L=>getFirstElement(s,L);return function(L){if(L.hasAttribute(v))return!1;const k=y(L);return k&&k.click(),L.setAttribute(v,""),!0}}function V(s,D,U="text/plain"){const v=new Blob([s],{type:U}),y=URL.createObjectURL(v),L=document.createElement("a");L.href=y,L.download=D,document.body.appendChild(L),L.click(),document.body.removeChild(L),requestAnimationFrame(()=>URL.revokeObjectURL(y))}},6754:(M,T,e)=>{e.d(T,{ZM:()=>u});function u(b,d){Object.assign(b.style,d)}function E(b,d="custom-global-style"){let r=document.getElementById(d);r||(r=document.createElement("style"),r.id=d,r.type="text/css",document.head.appendChild(r)),r.textContent=b}function N(b){return Object.entries(b).map(([d,r])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${r};`).join(" ")}function O(b){return b?b.split(";").filter(d=>d.trim()!=="").reduce((d,r)=>{const[o,i]=r.split(":").map(a=>a.trim()),m=o.replace(/-([a-z])/g,(a,l)=>l.toUpperCase());return d[m]=i,d},{}):{}}},4921:(M,T,e)=>{e.d(T,{Un:()=>b,sg:()=>O,wP:()=>o});function u(i,m,a=null){const l=i.querySelector(m);return l?Promise.resolve(l):new Promise(P=>{const g=new MutationObserver(t);g.observe(i,{childList:!0,subtree:!0});let n;a&&(n=setTimeout(()=>{g.disconnect(),console.log(`No element found for selector: ${m}`),P(null)},a));function t(){const p=i.querySelector(m);p&&(n&&clearTimeout(n),g.disconnect(),P(p))}})}function E(i,m){return i.querySelector(m)?new Promise(l=>{const P=new MutationObserver(g);P.observe(i,{childList:!0,subtree:!0});function g(){i.querySelector(m)||(P.disconnect(),l())}}):Promise.resolve()}function N(i,m=400){return new Promise(a=>{let l;const P=new MutationObserver(()=>{clearTimeout(l),g()});function g(){l=setTimeout(()=>{P.disconnect(),a()},m)}g(),P.observe(i,{childList:!0,subtree:!0})})}function O(i,m=250){let a;return(...l)=>{clearTimeout(a),a=setTimeout(()=>i(...l),m)}}async function b(i){document.visibilityState==="visible"?await i():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await i()},{once:!0})}function d(i,m){const a=new IntersectionObserver(l=>{l.forEach(P=>{P.isIntersecting&&(m(),r(i))})});i.intersectionObserver=a,a.observe(i)}function r(i){i.intersectionObserver&&(i.intersectionObserver.disconnect(),i.intersectionObserver=null)}function o(i){i&&(i.disconnect(),i=null)}},3829:(M,T,e)=>{e.d(T,{Ay:()=>E,JE:()=>d,iG:()=>r});var u=e(8355);function E(a,l){return!N(a,l)}function N(a,l){if(!l||!l.value)return!0;const P=(0,u._7)(l.value);return O(a,P)}function O(a,l){if(!l||!l.length)return!0;const P=(a||"").toLowerCase();return l.every(g=>b(P,g))}function b(a,l){return l.some(({term:P,isNegative:g})=>{const n=a.includes(P);return g?!n:n})}function d(a,l){return l.value!=null&&a<l.value}function r(a,l){return l.value!=null&&a>l.value}function o(a,l){return l.value==null?!1:a<parseDateFromISO(l.value)}function i(a,l){return l.value==null?!1:a>parseDateFromISO(l.value)}function m(a,l){return l.value&&a!==l.value}},4521:(M,T,e)=>{e.d(T,{z:()=>E});var u=e(3048);function E(N,O=null){return{createGlobalFilter(b,d=null,r=N){return u.V.create(b,d,r)},createSectionFilter(b,d=null,r=N){if(!O)throw new Error("sectionId must be provided to use createSectionFilter.");return u.V.createWithCompositeKey(O,b,d,r)}}}},5884:(M,T,e)=>{e.d(T,{Hw:()=>r,Nm:()=>N,SA:()=>b,nW:()=>O});var u=e(9928),E=e(5467);function N(o,i,m={},a={}){const l=(0,u.kU)(a,i.updateValueFromEvent,i.value);return(0,E.E2)(l,m,o)}function O(o,i,m,a,l,P={},g={}){const n=(0,u.o5)(g,i.updateValueFromEvent,i.value,m,a,l);return(0,E.E2)(n,P,o)}function b(o,i,m={},a={}){const l=(0,u.Hn)(a,i.updateValueFromEvent,i.value);return(0,E.E2)(l,m,o)}function d(o,i,m={},a={}){const l=createDateInput(a,i.updateValueFromEvent,i.value);return createControl(l,m,o)}function r(o,i,m={},a={}){const l=(0,u.S)(a,i.updateValueFromEvent,i.value);return(0,E.E2)(l,m,o)}},7877:(M,T,e)=>{e.d(T,{E9:()=>E,H1:()=>g,pW:()=>C});var u=e(5884);function E(F,S={},_={}){return(0,u.Nm)("\u041F\u043E\u0438\u0441\u043A: ",F,S,_)}function N(F,S={},_={},V=.1,s=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",F,V,s,5,S,_)}function O(F,S={},_={},V=.1,s=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",F,V,s,5,S,_)}function b(F,S={},_={}){return r("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",F,S,_)}function d(F,S={},_={}){return r("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",F,S,_)}function r(F,S,_={},V={}){return createNumberFilterControl(F,S,"1","1","999999",_,V)}function o(F,S={},_={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",F,S,_)}function i(F,S={},_={}){return m("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",F,S,_)}function m(F,S,_={},V={}){return createNumberFilterControl(F,S,"5","0","100",_,V)}function a(F,S={},_={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",F,"5","0","100",S,_)}function l(F,S,_={},V={},s="250"){return(0,u.nW)(F,S,s,"0","1000000",_,V)}function P(F,S={},_={},V="25"){return l("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",F,S,_,V)}function g(F,S={},_={},V="25"){return l("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",F,S,_,V)}function n(F,S={},_={}){return t("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",F,S,_)}function t(F,S,_={},V={}){return createNumberFilterControl(F,S,"1","0","99999",_,V)}function p(F,S={},_={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",F,"1","2","8",S,_)}function f(F,S={},_={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",F,1,1,10,S,_)}function h(F,S={},_={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",F,S,_)}function w(F,S={},_={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",F,S,_)}function I(F,S={},_={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",F,S,_)}function H(F,S={},_={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",F,S,_)}function j(F,S={},_={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",F,S,_)}function C(F,S={},_={}){return(0,u.Hw)("\u0412\u043A\u043B: ",F,S,_)}function Q(F,S,_={}){const V=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],s={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},D=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),U=[],v=()=>S?parseFloat(S.value)||0:F.value,y=()=>{const L=v();U.forEach(({button:k,value:K})=>{const G=K<=L?s.active:s.inactive;Object.assign(k.style,G)})};return V.forEach(({value:L,emoji:k,tooltip:K})=>{const $=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",..._},k);$.title=K,$.type="button",$.addEventListener("click",G=>{G.preventDefault(),F.updateValue(L),S&&(S.value=L),y()}),$.addEventListener("mouseenter",()=>{L<=v()||($.style.background=s.hover.background)}),$.addEventListener("mouseleave",()=>{y()}),U.push({button:$,value:L}),D.appendChild($)}),y(),S&&(S.addEventListener("input",y),S.addEventListener("change",y)),D}},8355:(M,T,e)=>{e.d(T,{N4:()=>d,_7:()=>E,fO:()=>u});function u(o){if(!o)return[];const m=E(o).flat().filter(a=>a&&!a.isNegative&&a.term).map(a=>a.term);return[...new Set(m)]}function E(o){return o?o.toLowerCase().split(",").map(N).filter(Boolean):[]}function N(o){const i=o.split("/").map(a=>a.trim()).filter(Boolean);if(i.length===0)return null;const m=i.map(O).filter(Boolean);return m.length>0?m:null}function O(o){const i=o.startsWith("!"),m=i?o.slice(1).trim():o;return m?{term:m,isNegative:i}:null}function b(o,i){r(o,m=>m.style.display!=="none",i)}function d(o,i){r(o,m=>m.style.opacity==="",i)}function r(o,i,m){const a=[...o].filter(i).length;m.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${o.length}`}},5213:(M,T,e)=>{e.d(T,{b:()=>N});var u=e(9928),E=e(573);function N(O,b,d=!1,r="customFiltersContainer"){let o=(0,E.Fi)(`#${r}`,O);if(o)if(d)o.remove();else return;o=(0,u.Sw)(),o.id=r,b(o,O)}},8200:(M,T,e)=>{e.d(T,{s:()=>u});function u(E){const{target:N}=E,{type:O}=N;switch(O){case"text":return`"${N.value}"`;case"number":return N.value;case"select-one":return N.value;case"date":return`"${N.value}"`;case"checkbox":return N.checked;default:return console.log(`Unknown input type: ${O}`),null}}},157:(M,T,e)=>{e.d(T,{Fg:()=>u,vx:()=>N});const u=window.GM_setValue,E=window.GM.setValue,N=window.GM_getValue},1870:(M,T,e)=>{e.d(T,{j:()=>u});class u{constructor(N,O){this.value=N,this.onChange=O}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(M,T,e)=>{e.d(T,{V:()=>b});var u=e(1870),E=e(8200),N=e(3976),O=e(157);class b extends u.j{constructor(r,o=null,i=null){super((0,O.vx)(r,o),i),this.storageKey=r,this.defaultValue=o}static create(r,o=null,i=null){return new b(r,o,i)}static createWithCompositeKey(r,o,i=null,m=null){const a=`${r}-${o}`;return new b(a,i,m)}updateValueFromEvent=r=>{const o=(0,E.s)(r),i=(0,N.$)(o);this.updateValue(i)};updateValue(r,o=!0){this.value!==r&&((0,O.Fg)(this.storageKey,r),this.value=r,o&&this.onChangeIfDefined())}clearValue(r=!1){this.updateValue(null,r)}resetValue(r=!1){this.updateValue(this.defaultValue,r)}}},3976:(M,T,e)=>{e.d(T,{$:()=>u});function u(E){return E===""?null:JSON.parse(E)}},4214:(M,T,e)=>{e.d(T,{zr:()=>E});function u(d){return d.replace(/\D/g,"")}function E(d){return d.replace(/[^\d.,-]/g,"")}function N(d){return d.replace(/\s/g,"")}function O(d){return d.charAt(0).toUpperCase()+d.slice(1)}function b(d){return d.replace(/\s+/g," ").trim()}},5406:(M,T,e)=>{e.d(T,{z2:()=>m});function u(g,n="common",t=!1){const{pathname:p}=window.location;return E(p,g,n,t)}function E(g,n,t,p=!1){const f=g.split("/");n=n<0?f.length+n:n;const h=f[n]||t;return p&&console.log(`Pathname element: ${h}`),h}function N(g,n="common",t=!1){const p=u(g,"",t);return O(p,n,t)}function O(g,n,t){if(!g)return n;const p=g.split("-").at(-1);return t&&console.log(`Pathname element ending: ${p}`),p}function b(g,n,t="common",p=!1){const f=E(g,n,"",p);return O(f,t,p)}function d(g){return new URLSearchParams(window.location.search).get(g)}function r(g){return g.split("?")[0]}function o(g){return window.location.pathname.includes(g)}function i(g){return g.some(n=>o(n))}function m(...g){return window.location.pathname.split("/").some(t=>g.includes(t))}function a(g){try{const n=new URL(window.location.href);Object.entries(g).forEach(([t,p])=>{n.searchParams.set(t,p)}),window.location.href=n.toString()}catch(n){console.error("Failed to redirect:",n)}}function l(g,n=[]){const t={pathname:window.location.pathname};n.forEach(I=>{t[I]=d(I)});let p=!1;async function f(){if(p)return;const I={pathname:window.location.pathname};if(n.forEach(H=>{I[H]=d(H)}),Object.keys(t).some(H=>t[H]!==I[H])){Object.assign(t,I),p=!0;try{await g()}catch(H){console.error("Error in URL observer callback:",H)}finally{p=!1}}}function h(){f().catch(I=>{console.error("Error in URL change handler:",I)})}let w=window.location.href;setInterval(()=>{window.location.href!==w&&(w=window.location.href,h())},200),window.addEventListener("popstate",h)}function P(g=[]){l(()=>window.location.reload(),g)}},7926:(M,T,e)=>{e.d(T,{sV:()=>l,CU:()=>o,Jm:()=>g,Fr:()=>m,nd:()=>P,MB:()=>a,Su:()=>r,X0:()=>i});var u=e(157);function E(n,t=1e3){return Math.round((n+Number.EPSILON)*t)/t}function N(n){const t=n.slice().sort((f,h)=>f-h),p=Math.floor(t.length/2);return t.length%2!==0?t[p]:(t[p-1]+t[p])/2}function O(n,t){return Math.random()*(t-n)+n}const b="preferred-comment-counts",d=50;function r(n){(0,u.Fg)("newest-seen-product-id",n)}function o(){return(0,u.vx)("newest-seen-product-id")}function i(n){(0,u.Fg)("prev-newest-seen-product-id",n)}function m(){return(0,u.vx)("prev-newest-seen-product-id")}function a(){(0,u.Fg)("last-newest-seen-product-update",Date.now())}function l(){return(0,u.vx)("last-newest-seen-product-update")}function P(n){const t=(0,u.vx)(b,[]);t.push(n),t.length>d&&t.shift(),(0,u.Fg)(b,t)}function g(){const n=(0,u.vx)(b,[]);return n.length===0?null:N(n)}},9374:(M,T,e)=>{e.a(M,async(u,E)=>{try{var N=e(5406),O=e(468),b=e(7220);await d();async function d(){(0,N.z2)("new","search_result")?await(0,O.P)():(0,N.z2)("deals","coupons")&&await(0,b.O)()}E()}catch(d){E(d)}},1)},7220:(M,T,e)=>{e.d(T,{O:()=>Q});var u=e(573);const E={DEAL_ALERT_FORM_CONTENT:"#deal-alert-form-content",HIDE_TOP_COMMENTS_BUTTON:"#top-comments-open-close",COMMENTS_CONTAINER:"#comments",COMMENTS_LIST:"#comment-list",POST_BODY:'div[data-name="post[body]"]',MORE_REPLIES_LINK:"a.more-replies",COMMENT:'div[id^="post_"][id$="_new"]',COMMENT_TEXT_WRAP:'div[id^="parent_comment_"]',COMMENT_REACTIONS_CONTAINER:'[class^="given_reactions_"]',COMMENT_REACTION:"span.text-sm.text-secondary-text-light"};var N=e(4521),O=e(5213),b=e(6754),d=e(5013);const r={INPUT:{marginLeft:"7px",border:"2px solid #b3bcc5",borderRadius:"6px",padding:"7px 14px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"15px"}},o={FILTERS_CONTAINER:{display:"flex",flexFlow:"wrap",gap:"12px 16px",paddingBottom:"14px"},NUMBER_INPUT_SM:{...r.INPUT,width:"70px"},NUMBER_INPUT_MD:{...r.INPUT,width:"80px"},NUMBER_INPUT_LG:{...r.INPUT,width:"90px"},TEXT_INPUT:{...r.INPUT,width:"260px"},CHECKBOX_INPUT:{marginLeft:"7px",width:"26px",height:"26px"},CONTROL:r.CONTROL,PUSHED_RIGHT_CONTROL:{...r.CONTROL,marginLeft:"auto"}},i={DISLIKE_BUTTON:{marginLeft:"auto",gap:"8px"},DISLIKE_BUTTON_ICON_SM:{height:"0.9em",marginTop:"2px"},DISLIKE_BUTTON_ICON_MD:{marginTop:"2px"},SCROLL_TO_FILTERS_BUTTON:{position:"fixed",bottom:"20px",right:"20px",padding:"10px 20px 10px 14px",backgroundColor:"#005bff",color:"white",border:"none",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",cursor:"pointer",fontSize:"14px",transition:"background-color 0.3s",display:"none",gap:"4px"},CLONED_PRODUCT_CARDS_WRAP:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)"}},m={...d.B,FILTERS_CONTAINER:{...d.B.FILTERS_CONTAINER,padding:"15px 0px 12px",borderBottomWidth:"1px",top:"50px",zIndex:"9"},PUSHED_RIGHT_CONTROL:{...r.CONTROL,marginLeft:"auto"}};var a=e(7877),l=e(5884),P=e(5539),g=e(3829),n=e(4921);function t(c,x){c.forEach(R=>p(x,R))}function p(c,x){if(!x)return;const R=new RegExp(`(${x})`,"gi"),A=document.createTreeWalker(c,NodeFilter.SHOW_TEXT,null);let B=A.nextNode();const W=[];for(;B;){const{textContent:z}=B;if(R.test(z)){const X=document.createDocumentFragment();let J=0;z.replace(R,(q,oe,ie)=>{ie>J&&X.appendChild(document.createTextNode(z.slice(J,ie)));const ee=document.createElement("span");ee.className="highlightedSubstring",ee.style.backgroundColor="yellow",ee.textContent=q,X.appendChild(ee),J=ie+q.length}),J<z.length&&X.appendChild(document.createTextNode(z.slice(J))),W.push({node:B,fragment:X})}B=A.nextNode()}W.forEach(({node:z,fragment:X})=>{z.parentNode.replaceChild(X,z)})}function f(c){(0,u.fI)(".highlightedSubstring",c).forEach(R=>{const{parentNode:A}=R;R.replaceWith(R.textContent),A.normalize()})}var h=e(8355);function w(c,x){const R=(0,h.fO)(c.value);t(R,x)}function I(c,x){const R=getIncludedSearchStrings(c.value);x.forEach(A=>highlightSubstrings(R,A))}var H=e(9928),j=e(7926);const C={commentsContainer:null,commentsObserver:null,isFiltersInitialized:!1,filters:{commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},minReactionsSelect:null,lastStatsSnapshot:"",isMinReactionsAutoSelectActive:!0,commentsInfo:null,commentsCache:new WeakMap};async function Q(){F(),_(),await(0,n.Un)(V)}function F(){(0,P.ku)(E.DEAL_ALERT_FORM_CONTENT),S()}function S(){const c=(0,u.Fi)(E.HIDE_TOP_COMMENTS_BUTTON);c&&c.click()}function _(){if(!C.isFiltersInitialized){const{createGlobalFilter:c}=(0,N.z)(D);C.filters.commentTextFilter=c("comments-text-filter"),C.filters.minReactionsFilter=c("comments-min-reactions-filter",0),C.filters.filterEnabled=c("comments-filter-enabled",!0),C.filters.autoExpandFilter=c("comments-auto-expand",!1),C.isFiltersInitialized=!0}}function V(){if(C.commentsContainer=(0,u.Fi)(E.COMMENTS_CONTAINER),!C.commentsContainer)return;(0,O.b)(C.commentsContainer,s),D(),C.commentsObserver&&(0,n.wP)(C.commentsObserver),C.commentsObserver=new MutationObserver(x=>{for(const R of x)for(const A of R.addedNodes)if(A.nodeType===1&&(A.matches(E.COMMENT)||A.querySelector(E.COMMENT))){D();return}});const c=(0,u.Fi)(E.COMMENTS_LIST);C.commentsObserver.observe(c,{childList:!0,subtree:!0})}function s(c,x){(0,b.ZM)(c,m.FILTERS_CONTAINER);const R=(0,l.Nm)("\u0422\u0435\u043A\u0441\u0442:",C.filters.commentTextFilter,m.CONTROL,m.TEXT_INPUT),A=(0,l.SA)("\u0420\u0435\u0430\u043A\u0446\u0438\u0439: ",C.filters.minReactionsFilter,m.CONTROL,m.SELECT_INPUT),B=(0,a.pW)(C.filters.filterEnabled,m.CONTROL,m.CHECKBOX_INPUT),W=(0,l.Hw)("\u0410\u0432\u0442\u043E\u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435",C.filters.autoExpandFilter,m.CONTROL,m.CHECKBOX_INPUT);C.minReactionsSelect=A.querySelector("select"),C.commentsInfo=(0,H.Sw)(m.PUSHED_RIGHT_CONTROL),C.minReactionsSelect.addEventListener("change",X=>{if(C.isMinReactionsAutoSelectActive=!1,parseInt(X.target.value,10)===0)return;const q=X.target.options[X.target.selectedIndex],oe=parseInt(q.dataset.count,10);Number.isNaN(oe)||(0,j.nd)(oe)}),c.append(R,A,B,W,C.commentsInfo);const z=(0,u.Fi)(E.POST_BODY,x);x.insertBefore(c,z)}function D(){C.filters.autoExpandFilter.value&&U();const c=(0,u.fI)(E.COMMENT,C.commentsContainer);c.forEach(v),(0,h.N4)(c,C.commentsInfo),Z(c)}function U(){(0,u.fI)(E.MORE_REPLIES_LINK,C.commentsContainer).forEach(x=>x.click())}function v(c){if(!C.filters.filterEnabled.value){L(c);return}f(c);let x=C.commentsCache.get(c);if(!x){const A=(0,u.Fi)(E.COMMENT_TEXT_WRAP,c);if(!A){L(c);return}const B=A.innerText,W=G(c);x={commentText:B,commentTextWrap:A,reactionsCount:W},C.commentsCache.set(c,x)}C.filters.commentTextFilter.value&&w(C.filters.commentTextFilter,x.commentTextWrap);const R=(0,g.Ay)(x.commentText,C.filters.commentTextFilter)||(0,g.JE)(x.reactionsCount,C.filters.minReactionsFilter);k(c,R),$(c,R)}function y(c){(0,P.vJ)(c),c.style.maxHeight="",c.style.overflow=""}function L(c){y(c),$(c,!1)}function k(c,x){x?K(c):y(c)}function K(c){(0,P.iV)(c),c.style.maxHeight="83px",c.style.overflow="hidden"}function $(c,x){const R=C.commentsCache.get(c);if(R?.lastHoverState!==x){if(x){let A=null;c.onmouseenter=()=>{clearTimeout(A),A=setTimeout(()=>y(c),250)},c.onmouseleave=()=>{clearTimeout(A),K(c)}}else c.onmouseenter=null,c.onmouseleave=null;R&&(R.lastHoverState=x)}}function G(c){const x=(0,u.Fi)(E.COMMENT_REACTIONS_CONTAINER,c);if(!x)return 0;const R=(0,u.fI)(E.COMMENT_REACTION,x);let A=0;return R.forEach(B=>{const W=parseInt(B.textContent.trim(),10);Number.isNaN(W)||(A+=W)}),A}function Z(c){if(!C.minReactionsSelect)return;const x=te(c),R=ne(x),A=JSON.stringify(R);if(C.lastStatsSnapshot===A)return;C.lastStatsSnapshot=A,C.minReactionsSelect.innerHTML="";const B=document.createDocumentFragment();R.forEach(W=>{const z=document.createElement("option");z.value=W.value,z.textContent=W.label,z.dataset.count=W.count,B.appendChild(z)}),C.minReactionsSelect.appendChild(B),C.isMinReactionsAutoSelectActive&&re(R),C.minReactionsSelect.value=C.filters.minReactionsFilter.value}function te(c){const x=new Map;return c.forEach(R=>{const A=C.commentsCache.get(R);if(!A)return;const B=A.reactionsCount;x.set(B,(x.get(B)||0)+1)}),x.size===0&&x.set(0,0),x}function ne(c){const x=Array.from(c.keys()).sort((B,W)=>B-W),R=new Array(x.length);let A=0;for(let B=x.length-1;B>=0;B--){const W=x[B];A+=c.get(W),R[B]={value:W,label:`${W}+ (${A})`,count:A}}return R}function re(c){const x=(0,j.Jm)();if(x===null||c.length===0)return;let R=c[0],A=1/0;for(const B of c){const W=ce(B.count,x);W<A?(A=W,R=B):Math.abs(W-A)<.01&&B.count>R.count&&(R=B)}R.value===0&&(R=le(R,c)),C.filters.minReactionsFilter.value!==R.value&&C.filters.minReactionsFilter.updateValue(R.value)}function ce(c,x){const R=c-x,A=1.8;return R>=0?R:Math.abs(R)*A}function le(c,x){const R=x.find(B=>B.value>0&&B.count>0);return R&&ae(c.count,R.count)?R:c}function ae(c,x){return c<=3?!1:c>=9?x>=1:c>=7?x>=2:x>=3}function fe(){C.commentsContainer=null,C.isFiltersInitialized=!1,C.filters={commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},C.minReactionsSelect=null,C.lastStatsSnapshot="",C.isMinReactionsAutoSelectActive=!0,C.commentsInfo=null,C.commentsCache=new WeakMap,clearObserver(C.commentsObserver)}},5013:(M,T,e)=>{e.d(T,{B:()=>E});const u={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},E={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",marginBottom:".5rem",backgroundColor:"#fff",borderColor:"rgb(229, 229, 229)",position:"sticky"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...u.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...u.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},SELECT_INPUT:{...u.INPUT,width:"100px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...u.INPUT,width:"24px",height:"24px"}}},468:(M,T,e)=>{e.d(T,{P:()=>p});var u=e(573);const E={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a",PRODUCT_PRICE:"div.md\\:text-xll.text-lg.font-bold.text-primary.mr-2"};var N=e(4521),O=e(5213),b=e(6754),d=e(5013);const r={...d.B,FILTERS_CONTAINER:{...d.B.FILTERS_CONTAINER,padding:"11px 19px",borderWidth:"1px",borderRadius:"10px",top:"-1px",zIndex:"11"}};var o=e(7877),i=e(5884),m=e(5539),a=e(3829),l=e(7926);const P={ID_BADGE_APPENDED:"idBadgeAppended",SEEN_PRODUCT_CARD:"seenProductCard",MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"};var g=e(4921),n=e(9928);const t={productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},prevNewestSeenProductId:null};async function p(){f(),h(),await w(),await D()}function f(){t.prevNewestSeenProductId=(0,l.Fr)()}function h(){if(!t.isFiltersInitialized){const{createGlobalFilter:v}=(0,N.z)(w);t.filters.nameFilter=v("name-filter"),t.filters.minVotesFilter=v("min-votes-filter",50),t.filters.maxPriceFilter=v("max-price-filter"),t.filters.showExpiredFilter=v("show-expired-filter",!1),t.filters.filterEnabled=v("filter-enabled",!0),t.isFiltersInitialized=!0}}function w(){const v=(0,u.fI)(E.PRODUCT_CARD);if(v.length){const y=v[0].parentElement;(0,O.b)(y,I),H(),t.productListObserver&&(0,g.wP)(t.productListObserver),t.productListObserver=new MutationObserver(H),t.productListObserver.observe(y,{childList:!0,subtree:!0})}}function I(v,y){(0,b.ZM)(v,r.FILTERS_CONTAINER);const L=(0,o.E9)(t.filters.nameFilter,r.CONTROL,r.TEXT_INPUT),k=(0,i.nW)("\u041C\u0438\u043D. \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",t.filters.minVotesFilter,"50","0","10000",r.CONTROL,r.NUMBER_INPUT),K=(0,o.H1)(t.filters.maxPriceFilter,r.CONTROL,r.NUMBER_INPUT),$=(0,i.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",t.filters.showExpiredFilter,r.CONTROL,r.CHECKBOX_INPUT),G=(0,o.pW)(t.filters.filterEnabled,r.CONTROL,r.CHECKBOX_INPUT);v.append(L,k,K,$,G),y.prepend(v)}function H(){(0,u.fI)(E.PRODUCT_CARD).forEach(j);const y=(0,u.Fi)(`[${P.SEEN_PRODUCT_CARD}]`);y&&(y.style.marginTop="45px")}function j(v){const y=(0,u.Fi)(E.PRODUCT_CARD_LINK,v),L=C(y);if(Q(v,L),F(L,v),S(v,L),!t.filters.filterEnabled.value){(0,m.vJ)(v);return}if(v.classList.contains("expired-view")&&!t.filters.showExpiredFilter.value){(0,m.iV)(v);return}const K=(0,u.Fi)(E.PRODUCT_CARD_RATING,v);if(K.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const $=(0,u.Fi)(E.PRODUCT_NAME,v),G=(0,u.Fi)(E.PRODUCT_PRICE,v),Z=$.innerText,te=(0,u.YA)(K,!0),ne=(0,u.YA)(G,!0),re=(0,a.Ay)(Z,t.filters.nameFilter)||(0,a.JE)(te,t.filters.minVotesFilter)||(0,a.iG)(ne,t.filters.maxPriceFilter);(0,m.D9)(v,re)}function C(v){return+v.getAttribute("href").split("-").pop()}function Q(v,y){if(v.hasAttribute(P.ID_BADGE_APPENDED))return;const L=v.querySelector(".md\\:col-start-2.row-start-1 .flex.items-center");if(!L)return;const k=(0,n.VI)({marginRight:"10px"},`#${y}`);k.className="product-id-badge text-secondary-text-light dark:text-secondary-text-dark text-xs",k.addEventListener("mouseenter",()=>{const K=y-t.prevNewestSeenProductId,$=K>0?"+":"";k.textContent=`#${y} (${$}${K})`}),k.addEventListener("mouseleave",()=>{k.textContent=`#${y}`}),L.insertBefore(k,L.firstChild),v.setAttribute(P.ID_BADGE_APPENDED,"")}function F(v,y){y.style.removeProperty("margin-top"),v>t.prevNewestSeenProductId?(y.style.border="3px solid #8ab854",y.removeAttribute(P.SEEN_PRODUCT_CARD)):(y.style.removeProperty("border"),y.setAttribute(P.SEEN_PRODUCT_CARD,""))}function S(v,y){v.hasAttribute(P.MARK_AS_NEWEST_SEEN_APPENDED)||(v.addEventListener("mousedown",L=>{if(L.button===1&&!L.target.closest("a")){const k=y-(0,l.CU)(),K=(0,l.sV)(),$=_(K),G=["\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?","",`\u041D\u043E\u0432\u044B\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432: ~${k}`];$&&G.push(`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E: ${$}`);const Z=G.join(`
`);confirm(Z)&&(s(y),L.preventDefault())}}),v.setAttribute(P.MARK_AS_NEWEST_SEEN_APPENDED,""))}function _(v){const y=v?new Date(v):null;if(!y)return null;const L=Math.floor((Date.now()-y.getTime())/6e4);return V(L)}function V(v){const y=Math.floor(v/1440),L=Math.floor(v%1440/60),k=v%60;return y>0?`${y} \u0434. ${L} \u0447. ${k} \u043C.`:L>0?`${L} \u0447. ${k} \u043C.`:`${k} \u043C.`}function s(v){const y=(0,l.CU)();(0,l.X0)(y),(0,l.Su)(v),(0,l.MB)(),t.prevNewestSeenProductId=y,H()}async function D(){const v=(0,u.Fi)(E.DISCUSSIONS);v&&(v.style.position="sticky",v.style.top="0")}function U(){t.isFiltersInitialized=!1,t.filters={nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},t.prevNewestSeenProductId=null,clearObserver(t.productListObserver)}}},ue={};function Y(M){var T=ue[M];if(T!==void 0)return T.exports;var e=ue[M]={exports:{}};return se[M](e,e.exports,Y),e.exports}(()=>{var M=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",T=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",u=N=>{N&&N.d<1&&(N.d=1,N.forEach(O=>O.r--),N.forEach(O=>O.r--?O.r++:O()))},E=N=>N.map(O=>{if(O!==null&&typeof O=="object"){if(O[M])return O;if(O.then){var b=[];b.d=0,O.then(o=>{d[T]=o,u(b)},o=>{d[e]=o,u(b)});var d={};return d[M]=o=>o(b),d}}var r={};return r[M]=o=>{},r[T]=O,r});Y.a=(N,O,b)=>{var d;b&&((d=[]).d=-1);var r=new Set,o=N.exports,i,m,a,l=new Promise((P,g)=>{a=g,m=P});l[T]=o,l[M]=P=>(d&&P(d),r.forEach(P),l.catch(g=>{})),N.exports=l,O(P=>{i=E(P);var g,n=()=>i.map(p=>{if(p[e])throw p[e];return p[T]}),t=new Promise(p=>{g=()=>p(n),g.r=0;var f=h=>h!==d&&!r.has(h)&&(r.add(h),h&&!h.d&&(g.r++,h.push(g)));i.map(h=>h[M](f))});return g.r?t:n()},P=>(P?a(l[e]=P):m(o),u(d))),d&&d.d<0&&(d.d=0)}})(),Y.d=(M,T)=>{for(var e in T)Y.o(T,e)&&!Y.o(M,e)&&Object.defineProperty(M,e,{enumerable:!0,get:T[e]})},Y.o=(M,T)=>Object.prototype.hasOwnProperty.call(M,T);var de=Y(9374)})();})();
