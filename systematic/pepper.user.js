// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76830129
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var q={5467:(R,h,t)=>{t.d(h,{E2:()=>f});var a=t(9928);function f(N,o={},e=null){const d=(0,a.Sw)(o,e);return d.append(N),d}function T(N,o=null,e={},d={}){const s=createActionLink(N,o,d);return f(s,e)}function C(N,o=null,e=null,d={},s={}){const l=createActionLinkWithIcon(N,e,o,s);return f(l,d)}},9928:(R,h,t)=>{t.d(h,{S:()=>o,Sw:()=>P,kU:()=>T,o5:()=>C});var a=t(4921),f=t(6754);function T(n,c,v){const _=e(n,"text",c);return _.value=v,_}function C(n,c,v,_,D,k){const y=e(n,"number",c);return y.value=v,y.step=_,y.min=D,y.max=k,y}function N(n,c,v){const _=e(n,"date",c);return _.value=v,_}function o(n,c,v){const _=e(n,"checkbox",c);return _.checked=v,_}function e(n={},c=null,v=null){const _=m("input",n);return c&&(_.type=c),v&&(_.addEventListener("keyup",(0,a.sg)(v,200)),_.addEventListener("change",(0,a.sg)(v,100))),_}function d(n={},c=null){return m("span",n,c)}function s(n={},c=null,v=null){const _=m("a",n,c);return v&&(_.href=v),_}function l(n,c=null,v={}){v.cursor||="pointer";const _=s(v,c);return n&&_.addEventListener("click",n),_}function I(n,c,v=null,_={},D={}){_.display||="inline-flex",_.alignItems||="center",_.gap||="0.25em";const k=l(n,v,_);return k.prepend(u(c,D)),k}function S(n={},c=null,v=null){const _=m("button",n,c);return v&&_.addEventListener("click",v),_}function P(n={},c=null){return m("div",n,c)}function p(n={}){return m("i",n)}function u(n,c={}){c.width||="1em",c.height||="1em",c.paddingBottom||="1px";const v=p(c);return v.setAttribute("data-lucide",n),v}function m(n,c,v=null){if(typeof c!="object"||c===null)throw new TypeError("styles should be an object");const _=document.createElement(n);return(0,f.ZM)(_,c),v&&(_.innerHTML=v),_}},573:(R,h,t)=>{t.d(h,{Fi:()=>T,YA:()=>d,fI:()=>C});var a=t(4214);function f(u,m=document){return!!m.querySelector(u)}function T(u,m=document,n=!1){const c=m.querySelector(u);return n&&!c&&console.log(`No element found for selector: ${u}`),c}function C(u,m=document,n=!1){const c=m.querySelectorAll(u);return n&&!c.length&&console.log(`No elements found for selector: ${u}`),c}function N(u,m=1){let n=u;for(let c=0;c<m;c++){if(!n.parentElement)return null;n=n.parentElement}return n}function o(u,m,n){return[...u.querySelectorAll(m)].find(c=>c.textContent.trim().includes(n))}function e(u,m,n=!1,c=!1,v=null){const _=T(m,u);return d(_,n,c,v)}function d(u,m=!1,n=!1,c=null){if(!u)return c===null?(console.log("No element found"),null):c;const v=u.innerText;return I(v,m,n)}function s(u,m,n=!1){const c=u[m];return d(c,n)}function l(u,m=!1,n=!1){const c=u.textContent;return I(c,m,n)}function I(u,m,n){m&&(u=(0,a.zr)(u)),n&&(u=u.replace(",","."));const c=Number(u);return Number.isNaN(c)?(console.log(`Invalid number: ${u}`),0):c}function S(u){return[...u.childNodes].find(m=>m.nodeType===Node.TEXT_NODE)}function P(u){const m=n=>n.nodeType===Node.TEXT_NODE&&n.textContent.trim()!==""?[n]:[...n.childNodes].flatMap(m);return m(u)}function p(u){return normalizeSpacing(u.textContent)}},5539:(R,h,t)=>{t.d(h,{D9:()=>m,iV:()=>c,vJ:()=>n});function a(r,x){r.parentNode.insertBefore(x,r.nextSibling)}function f(r){r.style.display="none"}function T(r,x=1){const w=document.querySelector(r);w&&C(w,x)}function C(r,x=1){const w=getElementAncestor(r,x);w&&f(w)}function N(r){S(r),f(r)}function o(r){r.intersectionObserver||runOnceOnIntersection(r,()=>f(r))}function e(r){r.style.display=""}function d(r){const x=I(r);r.style.display=x}function s(r,x){x?f(r):e(r)}function l(r,x){x?o(r):(clearIntersectionObserver(r),e(r))}function I(r){return S(r),r.defaultDisplay}function S(r){if(r.defaultDisplay)return;const{display:x}=getComputedStyle(r);r.defaultDisplay=x}function P(){return{show:[],hide:[]}}function p(r,x,w){r?x.hide.push(w):x.show.push(w)}function u(r){r.show.forEach(e),r.hide.forEach(f)}function m(r,x,w=.3){x?c(r,w):n(r)}function n(r){r.style.opacity=""}function c(r,x=.3){r.style.opacity=x}function v(r){r.style.order=""}function _(r,x){r.style.order=x}function D(r,x){r.style.background=x}function k(r,x){const w=getFirstElement(x);w&&y(r,w)}function y(r,x){const w=createLink();w.href=r,x.parentNode.append(w),w.append(x)}function X(r,x){const w=getFirstElement(x);w&&b(r,w)}function b(r,x,w={}){const W=createLink(w);W.href=r,W.append(...x.childNodes),x.append(W)}function E(){const r=getURLQueryParam("scrollTo");if(!r)return;const x=document.getElementById(r);x?x.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function O(r,x,w=null){const W=`${x}-click-passed`,V=w?M=>findElementByText(M,r,w):M=>getFirstElement(r,M);return function(M){if(M.hasAttribute(W))return!1;const g=V(M);return g&&g.click(),M.setAttribute(W,""),!0}}function A(r,x,w="text/plain"){const W=new Blob([r],{type:w}),V=URL.createObjectURL(W),M=document.createElement("a");M.href=V,M.download=x,document.body.appendChild(M),M.click(),document.body.removeChild(M),requestAnimationFrame(()=>URL.revokeObjectURL(V))}},6754:(R,h,t)=>{t.d(h,{ZM:()=>a});function a(N,o){Object.assign(N.style,o)}function f(N,o="custom-global-style"){let e=document.getElementById(o);e||(e=document.createElement("style"),e.id=o,e.type="text/css",document.head.appendChild(e)),e.textContent=N}function T(N){return Object.entries(N).map(([o,e])=>`${o.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${e};`).join(" ")}function C(N){return N?N.split(";").filter(o=>o.trim()!=="").reduce((o,e)=>{const[d,s]=e.split(":").map(I=>I.trim()),l=d.replace(/-([a-z])/g,(I,S)=>S.toUpperCase());return o[l]=s,o},{}):{}}},4921:(R,h,t)=>{t.d(h,{sg:()=>C,wP:()=>d});function a(s,l,I=null){const S=s.querySelector(l);return S?Promise.resolve(S):new Promise(P=>{const p=new MutationObserver(m);p.observe(s,{childList:!0,subtree:!0});let u;I&&(u=setTimeout(()=>{p.disconnect(),console.log(`No element found for selector: ${l}`),P(null)},I));function m(){const n=s.querySelector(l);n&&(u&&clearTimeout(u),p.disconnect(),P(n))}})}function f(s,l){return s.querySelector(l)?new Promise(S=>{const P=new MutationObserver(p);P.observe(s,{childList:!0,subtree:!0});function p(){s.querySelector(l)||(P.disconnect(),S())}}):Promise.resolve()}function T(s,l=400){return new Promise(I=>{let S;const P=new MutationObserver(()=>{clearTimeout(S),p()});function p(){S=setTimeout(()=>{P.disconnect(),I()},l)}p(),P.observe(s,{childList:!0,subtree:!0})})}function C(s,l=250){let I;return(...S)=>{clearTimeout(I),I=setTimeout(()=>s(...S),l)}}async function N(s){document.visibilityState==="visible"?await s():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await s()},{once:!0})}function o(s,l){const I=new IntersectionObserver(S=>{S.forEach(P=>{P.isIntersecting&&(l(),e(s))})});s.intersectionObserver=I,I.observe(s)}function e(s){s.intersectionObserver&&(s.intersectionObserver.disconnect(),s.intersectionObserver=null)}function d(s){s&&(s.disconnect(),s=null)}},3829:(R,h,t)=>{t.d(h,{Ay:()=>f,JE:()=>C,iG:()=>N});var a=t(8355);function f(s,l){return!T(s,l)}function T(s,l){if(!l.value)return!0;const I=s.toLowerCase(),S=(0,a.Rn)(l),P=[],p=[];return S.forEach(u=>{if(u.startsWith("!")){const m=u.substring(1);m&&p.push(m)}else P.push(u)}),P.every(u=>I.includes(u))&&p.every(u=>!I.includes(u))}function C(s,l){return l.value!=null&&s<l.value}function N(s,l){return l.value!=null&&s>l.value}function o(s,l){return l.value==null?!1:s<parseDateFromISO(l.value)}function e(s,l){return l.value==null?!1:s>parseDateFromISO(l.value)}function d(s,l){return l.value&&s!==l.value}},4521:(R,h,t)=>{t.d(h,{z:()=>f});var a=t(3048);function f(T,C=null){return{createGlobalFilter(N,o=null,e=T){return a.V.create(N,o,e)},createSectionFilter(N,o=null,e=T){if(!C)throw new Error("sectionId must be provided to use createSectionFilter.");return a.V.createWithCompositeKey(C,N,o,e)}}}},5884:(R,h,t)=>{t.d(h,{Hw:()=>o,Nm:()=>T,nW:()=>C});var a=t(9928),f=t(5467);function T(e,d,s={},l={}){const I=(0,a.kU)(l,d.updateValueFromEvent,d.value);return(0,f.E2)(I,s,e)}function C(e,d,s,l,I,S={},P={}){const p=(0,a.o5)(P,d.updateValueFromEvent,d.value,s,l,I);return(0,f.E2)(p,S,e)}function N(e,d,s={},l={}){const I=createDateInput(l,d.updateValueFromEvent,d.value);return createControl(I,s,e)}function o(e,d,s={},l={}){const I=(0,a.S)(l,d.updateValueFromEvent,d.value);return(0,f.E2)(I,s,e)}},7877:(R,h,t)=>{t.d(h,{E9:()=>f,H1:()=>p,pW:()=>y});var a=t(5884);function f(b,E={},O={}){return(0,a.Nm)("\u041F\u043E\u0438\u0441\u043A: ",b,E,O)}function T(b,E={},O={},A=.1,r=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",b,A,r,5,E,O)}function C(b,E={},O={},A=.1,r=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",b,A,r,5,E,O)}function N(b,E={},O={}){return e("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",b,E,O)}function o(b,E={},O={}){return e("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",b,E,O)}function e(b,E,O={},A={}){return createNumberFilterControl(b,E,"1","1","999999",O,A)}function d(b,E={},O={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",b,E,O)}function s(b,E={},O={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",b,E,O)}function l(b,E,O={},A={}){return createNumberFilterControl(b,E,"5","0","100",O,A)}function I(b,E={},O={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",b,"5","0","100",E,O)}function S(b,E,O={},A={},r="250"){return(0,a.nW)(b,E,r,"0","1000000",O,A)}function P(b,E={},O={},A="25"){return S("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",b,E,O,A)}function p(b,E={},O={},A="25"){return S("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",b,E,O,A)}function u(b,E={},O={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",b,E,O)}function m(b,E,O={},A={}){return createNumberFilterControl(b,E,"1","0","99999",O,A)}function n(b,E={},O={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",b,"1","2","8",E,O)}function c(b,E={},O={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",b,1,1,10,E,O)}function v(b,E={},O={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",b,E,O)}function _(b,E={},O={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",b,E,O)}function D(b,E={},O={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",b,E,O)}function k(b,E={},O={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",b,E,O)}function y(b,E={},O={}){return(0,a.Hw)("\u0412\u043A\u043B: ",b,E,O)}function X(b,E,O={}){const A=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],r={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},x=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),w=[],W=()=>E?parseFloat(E.value)||0:b.value,V=()=>{const M=W();w.forEach(({button:g,value:U})=>{const F=U<=M?r.active:r.inactive;Object.assign(g.style,F)})};return A.forEach(({value:M,emoji:g,tooltip:U})=>{const i=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...O},g);i.title=U,i.type="button",i.addEventListener("click",F=>{F.preventDefault(),b.updateValue(M),E&&(E.value=M),V()}),i.addEventListener("mouseenter",()=>{M<=W()||(i.style.background=r.hover.background)}),i.addEventListener("mouseleave",()=>{V()}),w.push({button:i,value:M}),x.appendChild(i)}),V(),E&&(E.addEventListener("input",V),E.addEventListener("change",V)),x}},8355:(R,h,t)=>{t.d(h,{N4:()=>C,Rn:()=>a,fO:()=>f});function a(o){return o.value.toLowerCase().split(",").map(e=>e.trim()).filter(e=>e!=="")}function f(o){return a(o).filter(e=>!e.startsWith("!"))}function T(o,e){N(o,d=>d.style.display!=="none",e)}function C(o,e){N(o,d=>d.style.opacity==="",e)}function N(o,e,d){const s=[...o].filter(e).length;d.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${s} \u0438\u0437 ${o.length}`}},5213:(R,h,t)=>{t.d(h,{b:()=>T});var a=t(9928),f=t(573);function T(C,N,o=!1,e="customFiltersContainer"){let d=(0,f.Fi)(`#${e}`,C);if(d)if(o)d.remove();else return;d=(0,a.Sw)(),d.id=e,N(d,C)}},8200:(R,h,t)=>{t.d(h,{s:()=>a});function a(f){const{target:T}=f,{type:C}=T;switch(C){case"text":return`"${T.value}"`;case"number":return T.value;case"date":return`"${T.value}"`;case"checkbox":return T.checked;default:return console.log(`Unknown input type: ${C}`),null}}},157:(R,h,t)=>{t.d(h,{Fg:()=>a,vx:()=>T});const a=window.GM_setValue,f=window.GM.setValue,T=window.GM_getValue},1870:(R,h,t)=>{t.d(h,{j:()=>a});class a{constructor(T,C){this.value=T,this.onChange=C}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(R,h,t)=>{t.d(h,{V:()=>N});var a=t(1870),f=t(8200),T=t(3976),C=t(157);class N extends a.j{constructor(e,d=null,s=null){super((0,C.vx)(e,d),s),this.storageKey=e,this.defaultValue=d}static create(e,d=null,s=null){return new N(e,d,s)}static createWithCompositeKey(e,d,s=null,l=null){const I=`${e}-${d}`;return new N(I,s,l)}updateValueFromEvent=e=>{const d=(0,f.s)(e),s=(0,T.$)(d);this.updateValue(s)};updateValue(e,d=!0){this.value!==e&&((0,C.Fg)(this.storageKey,e),this.value=e,d&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}},3976:(R,h,t)=>{t.d(h,{$:()=>a});function a(f){return f===""?null:JSON.parse(f)}},4214:(R,h,t)=>{t.d(h,{zr:()=>f});function a(o){return o.replace(/\D/g,"")}function f(o){return o.replace(/[^\d.,-]/g,"")}function T(o){return o.replace(/\s/g,"")}function C(o){return o.charAt(0).toUpperCase()+o.slice(1)}function N(o){return o.replace(/\s+/g," ").trim()}},5406:(R,h,t)=>{t.d(h,{z2:()=>l});function a(p,u="common",m=!1){const{pathname:n}=window.location;return f(n,p,u,m)}function f(p,u,m,n=!1){const c=p.split("/");u=u<0?c.length+u:u;const v=c[u]||m;return n&&console.log(`Pathname element: ${v}`),v}function T(p,u="common",m=!1){const n=a(p,"",m);return C(n,u,m)}function C(p,u,m){if(!p)return u;const n=p.split("-").at(-1);return m&&console.log(`Pathname element ending: ${n}`),n}function N(p,u,m="common",n=!1){const c=f(p,u,"",n);return C(c,m,n)}function o(p){return new URLSearchParams(window.location.search).get(p)}function e(p){return p.split("?")[0]}function d(p){return window.location.pathname.includes(p)}function s(p){return p.some(u=>d(u))}function l(...p){return window.location.pathname.split("/").some(m=>p.includes(m))}function I(p){try{const u=new URL(window.location.href);Object.entries(p).forEach(([m,n])=>{u.searchParams.set(m,n)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function S(p,u=[]){const m={pathname:window.location.pathname};u.forEach(D=>{m[D]=o(D)});let n=!1;async function c(){if(n)return;const D={pathname:window.location.pathname};if(u.forEach(k=>{D[k]=o(k)}),Object.keys(m).some(k=>m[k]!==D[k])){Object.assign(m,D),n=!0;try{await p()}catch(k){console.error("Error in URL observer callback:",k)}finally{n=!1}}}function v(){c().catch(D=>{console.error("Error in URL change handler:",D)})}let _=window.location.href;setInterval(()=>{window.location.href!==_&&(_=window.location.href,v())},200),window.addEventListener("popstate",v)}function P(p=[]){S(()=>window.location.reload(),p)}},9374:(R,h,t)=>{t.a(R,async(a,f)=>{try{var T=t(5406),C=t(2372),N=t(7220);await o();async function o(){(0,T.z2)("new","search_result")?await(0,C.P)():(0,T.z2)("deals","coupons")&&await(0,N.O)()}f()}catch(o){f(o)}},1)},7220:(R,h,t)=>{t.d(h,{O:()=>X});var a=t(573);const f={COMMENTS_CONTAINER:"#comments",COMMENTS_LIST:"#comment-list",POST_BODY:'div[data-name="post[body]"]',MORE_REPLIES_LINK:"a.more-replies",COMMENT:'div[id^="post_"][id$="_new"]',COMMENT_TEXT_WRAP:'div[id^="parent_comment_"]',COMMENT_REACTIONS_CONTAINER:'[class^="given_reactions_"]',COMMENT_REACTION:"span.text-sm.text-secondary-text-light"};var T=t(4521),C=t(5213),N=t(6754),o=t(5013);const e={INPUT:{marginLeft:"7px",border:"2px solid #b3bcc5",borderRadius:"6px",padding:"7px 14px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"15px"}},d={FILTERS_CONTAINER:{display:"flex",flexFlow:"wrap",gap:"12px 16px",paddingBottom:"14px"},NUMBER_INPUT_SM:{...e.INPUT,width:"70px"},NUMBER_INPUT_MD:{...e.INPUT,width:"80px"},NUMBER_INPUT_LG:{...e.INPUT,width:"90px"},TEXT_INPUT:{...e.INPUT,width:"260px"},CHECKBOX_INPUT:{marginLeft:"7px",width:"26px",height:"26px"},CONTROL:e.CONTROL,PUSHED_RIGHT_CONTROL:{...e.CONTROL,marginLeft:"auto"}},s={DISLIKE_BUTTON:{display:"inline-flex",alignItems:"center",marginLeft:"auto",color:"rgba(0, 26, 52, 0.6)",cursor:"pointer"},SCROLL_TO_FILTERS_BUTTON:{position:"fixed",bottom:"20px",right:"20px",padding:"10px 20px 10px 14px",backgroundColor:"#005bff",color:"white",border:"none",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",cursor:"pointer",fontSize:"14px",transition:"background-color 0.3s",display:"none",gap:"4px"},CLONED_PRODUCT_CARDS_WRAP:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)"}},l={...o.B,FILTERS_CONTAINER:{...o.B.FILTERS_CONTAINER,padding:"15px 0px 12px",borderBottomWidth:"1px",top:"50px",zIndex:"9"},PUSHED_RIGHT_CONTROL:{...e.CONTROL,marginLeft:"auto"}};var I=t(7877),S=t(5884),P=t(5539),p=t(3829),u=t(4921);function m(i,F){i.forEach(L=>n(F,L))}function n(i,F){if(!F)return;const L=new RegExp(`(${F})`,"gi"),B=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,null);let K=B.nextNode();const H=[];for(;K;){const{textContent:$}=K;if(L.test($)){const z=document.createDocumentFragment();let G=0;$.replace(L,(Z,te,Q)=>{Q>G&&z.appendChild(document.createTextNode($.slice(G,Q)));const Y=document.createElement("span");Y.className="highlightedSubstring",Y.style.backgroundColor="yellow",Y.textContent=Z,z.appendChild(Y),G=Q+Z.length}),G<$.length&&z.appendChild(document.createTextNode($.slice(G))),H.push({node:K,fragment:z})}K=B.nextNode()}H.forEach(({node:$,fragment:z})=>{$.parentNode.replaceChild(z,$)})}function c(i){(0,a.fI)(".highlightedSubstring",i).forEach(L=>{const{parentNode:B}=L;L.replaceWith(L.textContent),B.normalize()})}var v=t(8355);function _(i,F){const L=(0,v.fO)(i);m(L,F)}function D(i,F){const L=getIncludedSearchStrings(i);F.forEach(B=>highlightSubstrings(L,B))}var k=t(9928);const y={commentsObserver:null,isFiltersInitialized:!1,filters:{commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},commentsInfo:null};async function X(){b(),await E()}function b(){if(!y.isFiltersInitialized){const{createGlobalFilter:i}=(0,T.z)(E);y.filters.commentTextFilter=i("comments-text-filter"),y.filters.minReactionsFilter=i("comments-min-reactions-filter",0),y.filters.filterEnabled=i("comments-filter-enabled",!0),y.filters.autoExpandFilter=i("comments-auto-expand",!1),y.isFiltersInitialized=!0}}function E(){const i=(0,a.Fi)(f.COMMENTS_CONTAINER);if(!i)return;(0,C.b)(i,O),A(i),y.commentsObserver&&(0,u.wP)(y.commentsObserver),y.commentsObserver=new MutationObserver(()=>A(i));const F=(0,a.Fi)(f.COMMENTS_LIST);y.commentsObserver.observe(F,{childList:!0,subtree:!0})}function O(i,F){(0,N.ZM)(i,l.FILTERS_CONTAINER);const L=(0,S.Nm)("\u0422\u0435\u043A\u0441\u0442:",y.filters.commentTextFilter,l.CONTROL,l.TEXT_INPUT),B=(0,S.nW)("\u041C\u0438\u043D. \u0440\u0435\u0430\u043A\u0446\u0438\u0439: ",y.filters.minReactionsFilter,"1","0","9999",l.CONTROL,l.NUMBER_INPUT),K=(0,I.pW)(y.filters.filterEnabled,l.CONTROL,l.CHECKBOX_INPUT),H=(0,S.Hw)("\u0410\u0432\u0442\u043E\u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435",y.filters.autoExpandFilter,l.CONTROL,l.CHECKBOX_INPUT);y.commentsInfo=(0,k.Sw)(l.PUSHED_RIGHT_CONTROL),i.append(L,B,K,H,y.commentsInfo);const $=(0,a.Fi)(f.POST_BODY,F);F.insertBefore(i,$)}function A(i){y.filters.autoExpandFilter.value&&r(i);const F=(0,a.fI)(f.COMMENT,i);F.forEach(x),(0,v.N4)(F,y.commentsInfo)}function r(i){(0,a.fI)(f.MORE_REPLIES_LINK,i).forEach(L=>L.click())}function x(i){if(w(i),!y.filters.filterEnabled.value){w(i);return}c(i);const F=(0,a.Fi)(f.COMMENT_TEXT_WRAP,i);if(!F){w(i);return}const L=F.innerText,B=g(i);y.filters.commentTextFilter.value&&_(y.filters.commentTextFilter,F);const K=(0,p.Ay)(L,y.filters.commentTextFilter)||(0,p.JE)(B,y.filters.minReactionsFilter);W(i,K),M(i,K)}function w(i){(0,P.vJ)(i),i.style.maxHeight="",i.style.overflow=""}function W(i,F){F?V(i):w(i)}function V(i){(0,P.iV)(i),i.style.maxHeight="83px",i.style.overflow="hidden"}function M(i,F){F?(i.onmouseenter=()=>w(i),i.onmouseleave=()=>V(i)):(i.onmouseenter=null,i.onmouseleave=null)}function g(i){const F=(0,a.Fi)(f.COMMENT_REACTIONS_CONTAINER,i);if(!F)return 0;const L=(0,a.fI)(f.COMMENT_REACTION,F);let B=0;return L.forEach(K=>{const H=parseInt(K.textContent.trim(),10);Number.isNaN(H)||(B+=H)}),B}function U(){y.isFiltersInitialized=!1,y.filters={commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},y.commentsInfo=null,clearObserver(y.commentsObserver)}},5013:(R,h,t)=>{t.d(h,{B:()=>f});const a={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},f={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",marginBottom:".5rem",backgroundColor:"#fff",borderColor:"rgb(229, 229, 229)",position:"sticky"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...a.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...a.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...a.INPUT,width:"24px",height:"24px"}}},2372:(R,h,t)=>{t.d(h,{P:()=>k});var a=t(573);const f={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a",PRODUCT_PRICE:"div.md\\:text-xll.text-lg.font-bold.text-primary.mr-2"};var T=t(4521),C=t(5213),N=t(6754),o=t(5013);const e={...o.B,FILTERS_CONTAINER:{...o.B.FILTERS_CONTAINER,padding:"11px 19px",borderWidth:"1px",borderRadius:"10px",top:"-1px",zIndex:"11"}};var d=t(7877),s=t(5884),l=t(5539),I=t(3829),S=t(157);function P(g){(0,S.Fg)("newest-seen-product-id",g)}function p(){return(0,S.vx)("newest-seen-product-id")}function u(g){(0,S.Fg)("prev-newest-seen-product-id",g)}function m(){return(0,S.vx)("prev-newest-seen-product-id")}function n(){(0,S.Fg)("last-newest-seen-product-update",Date.now())}function c(){return(0,S.vx)("last-newest-seen-product-update")}const v={MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"};var _=t(4921);const D={productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null}};async function k(){y(),await X(),await V()}function y(){if(!D.isFiltersInitialized){const{createGlobalFilter:g}=(0,T.z)(X);D.filters.nameFilter=g("name-filter"),D.filters.minVotesFilter=g("min-votes-filter",50),D.filters.maxPriceFilter=g("max-price-filter"),D.filters.showExpiredFilter=g("show-expired-filter",!1),D.filters.filterEnabled=g("filter-enabled",!0),D.isFiltersInitialized=!0}}function X(){const g=(0,a.fI)(f.PRODUCT_CARD);if(g.length){const U=g[0].parentElement;(0,C.b)(U,b),E(),D.productListObserver&&(0,_.wP)(D.productListObserver),D.productListObserver=new MutationObserver(E),D.productListObserver.observe(U,{childList:!0,subtree:!0})}}function b(g,U){(0,N.ZM)(g,e.FILTERS_CONTAINER);const i=(0,d.E9)(D.filters.nameFilter,e.CONTROL,e.TEXT_INPUT),F=(0,s.nW)("\u041C\u0438\u043D. \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",D.filters.minVotesFilter,"50","0","10000",e.CONTROL,e.NUMBER_INPUT),L=(0,d.H1)(D.filters.maxPriceFilter,e.CONTROL,e.NUMBER_INPUT),B=(0,s.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",D.filters.showExpiredFilter,e.CONTROL,e.CHECKBOX_INPUT),K=(0,d.pW)(D.filters.filterEnabled,e.CONTROL,e.CHECKBOX_INPUT);g.append(i,F,L,B,K),U.prepend(g)}function E(){(0,a.fI)(f.PRODUCT_CARD).forEach(O)}function O(g){const U=(0,a.Fi)(f.PRODUCT_CARD_LINK,g),i=A(U);if(r(i,g),x(g,U,i),!D.filters.filterEnabled.value){(0,l.vJ)(g);return}if(g.classList.contains("expired-view")&&!D.filters.showExpiredFilter.value){(0,l.iV)(g);return}const L=(0,a.Fi)(f.PRODUCT_CARD_RATING,g);if(L.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const B=(0,a.Fi)(f.PRODUCT_NAME,g),K=(0,a.Fi)(f.PRODUCT_PRICE,g),H=B.innerText,$=(0,a.YA)(L,!0),z=(0,a.YA)(K,!0),G=(0,I.Ay)(H,D.filters.nameFilter)||(0,I.JE)($,D.filters.minVotesFilter)||(0,I.iG)(z,D.filters.maxPriceFilter);(0,l.D9)(g,G)}function A(g){return+g.getAttribute("href").split("-").pop()}function r(g,U){g>m()?U.style.border="3px solid #8ab854":U.style.removeProperty("border")}function x(g,U,i){g.hasAttribute(v.MARK_AS_NEWEST_SEEN_APPENDED)||(g.addEventListener("mousedown",F=>{if(F.button===1&&F.target!==U){const L=c(),B=`\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?

${w(L)}`;confirm(B)&&(W(i),F.preventDefault())}}),g.setAttribute(v.MARK_AS_NEWEST_SEEN_APPENDED,""))}function w(g){const U=g?new Date(g):null;if(!U)return"";let i=Math.floor((Date.now()-U.getTime())/6e4);const F=Math.floor(i/1440);i-=F*1440;const L=Math.floor(i/60),B=i-L*60;return F>0?`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E ${F} \u0434. ${L} \u0447. ${B} \u043C.`:L>0?`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E ${L} \u0447. ${B} \u043C.`:`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E ${B} \u043C.`}function W(g){const U=p();u(U),P(g),n(),E()}async function V(){const g=(0,a.Fi)(f.DISCUSSIONS);g&&(g.style.position="sticky",g.style.top="0")}function M(){D.isFiltersInitialized=!1,D.filters={nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},clearObserver(D.productListObserver)}}},J={};function j(R){var h=J[R];if(h!==void 0)return h.exports;var t=J[R]={exports:{}};return q[R](t,t.exports,j),t.exports}(()=>{var R=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",a=T=>{T&&T.d<1&&(T.d=1,T.forEach(C=>C.r--),T.forEach(C=>C.r--?C.r++:C()))},f=T=>T.map(C=>{if(C!==null&&typeof C=="object"){if(C[R])return C;if(C.then){var N=[];N.d=0,C.then(d=>{o[h]=d,a(N)},d=>{o[t]=d,a(N)});var o={};return o[R]=d=>d(N),o}}var e={};return e[R]=d=>{},e[h]=C,e});j.a=(T,C,N)=>{var o;N&&((o=[]).d=-1);var e=new Set,d=T.exports,s,l,I,S=new Promise((P,p)=>{I=p,l=P});S[h]=d,S[R]=P=>(o&&P(o),e.forEach(P),S.catch(p=>{})),T.exports=S,C(P=>{s=f(P);var p,u=()=>s.map(n=>{if(n[t])throw n[t];return n[h]}),m=new Promise(n=>{p=()=>n(u),p.r=0;var c=v=>v!==o&&!e.has(v)&&(e.add(v),v&&!v.d&&(p.r++,v.push(p)));s.map(v=>v[R](c))});return p.r?m:u()},P=>(P?I(S[t]=P):l(d),a(o))),o&&o.d<0&&(o.d=0)}})(),j.d=(R,h)=>{for(var t in h)j.o(h,t)&&!j.o(R,t)&&Object.defineProperty(R,t,{enumerable:!0,get:h[t]})},j.o=(R,h)=>Object.prototype.hasOwnProperty.call(R,h);var ee=j(9374)})();})();
