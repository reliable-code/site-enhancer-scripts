// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76970372
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var se={7273:(P,h,e)=>{e.d(h,{S:()=>C,V:()=>m});var i=e(5558);function m(E={},v=null){return(0,i.n)("span",E,v)}function C(E={},v=null){return(0,i.n)("div",E,v)}},5467:(P,h,e)=>{e.d(h,{E2:()=>m});var i=e(7273);function m(v,f={},u=null){const s=(0,i.S)(f,u);return s.append(v),s}function C(v,f=null,u={},s={}){const o=createActionLink(v,f,s);return m(o,u)}function E(v,f=null,u=null,s={},o={},l={}){const c=createActionLinkWithIcon(v,u,f,o,l);return m(c,s)}},5558:(P,h,e)=>{e.d(h,{n:()=>m});var i=e(6754);function m(C,E,v=null){if(typeof E!="object"||E===null)throw new TypeError("styles should be an object");const f=document.createElement(C);return(0,i.ZM)(f,E),v&&(f.innerHTML=v),f}},740:(P,h,e)=>{e.d(h,{Hn:()=>s,S:()=>f,kU:()=>C,o5:()=>E});var i=e(5558),m=e(4921);function C(o,l,c){const r=u(o,"text",l);return r.value=c,r}function E(o,l,c,r,b,T){const t=u(o,"number",l);return t.value=c,t.step=r,t.min=b,t.max=T,t}function v(o,l,c){const r=u(o,"date",l);return r.value=c,r}function f(o,l,c){const r=u(o,"checkbox",l);return r.checked=c,r}function u(o={},l=null,c=null){const r=(0,i.n)("input",o);return l&&(r.type=l),c&&(r.addEventListener("keyup",(0,m.sg)(c,200)),r.addEventListener("change",(0,m.sg)(c,100))),r}function s(o,l,c){const r=(0,i.n)("select",o);return l&&r.addEventListener("change",l),r.value=c,r}},573:(P,h,e)=>{e.d(h,{Fi:()=>C,YA:()=>s,fI:()=>E,s$:()=>v});var i=e(4214);function m(t,n=document){return!!n.querySelector(t)}function C(t,n=document,g=!1){const w=n.querySelector(t);return g&&!w&&console.log(`No element found for selector: ${t}`),w}function E(t,n=document,g=!1){const w=n.querySelectorAll(t);return g&&!w.length&&console.log(`No elements found for selector: ${t}`),w}function v(t,n=1){let g=t;for(let w=0;w<n;w++){if(!g.parentElement)return null;g=g.parentElement}return g}function f(t,n,g){return[...t.querySelectorAll(n)].find(w=>w.textContent.trim().includes(g))}function u(t,n,g=!1,w=!1,M=null){const G=C(n,t);return s(G,g,w,M)}function s(t,n=!1,g=!1,w=null){if(!t)return w===null?(console.log("No element found"),null):w;const M=t.innerText;return c(M,n,g)}function o(t,n,g=!1){const w=t[n];return s(w,g)}function l(t,n=!1,g=!1){const w=t.textContent;return c(w,n,g)}function c(t,n,g){n&&(t=(0,i.zr)(t)),g&&(t=t.replace(",","."));const w=Number(t);return Number.isNaN(w)?(console.log(`Invalid number: ${t}`),0):w}function r(t){return[...t.childNodes].find(n=>n.nodeType===Node.TEXT_NODE)}function b(t){const n=g=>g.nodeType===Node.TEXT_NODE&&g.textContent.trim()!==""?[g]:[...g.childNodes].flatMap(n);return n(t)}function T(t){return normalizeSpacing(t.textContent)}},5539:(P,h,e)=>{e.d(h,{D9:()=>g,iV:()=>M,ku:()=>E,vJ:()=>w});var i=e(573);function m(d,R){d.parentNode.insertBefore(R,d.nextSibling)}function C(d){d.style.display="none"}function E(d,R=1){const A=document.querySelector(d);A&&v(A,R)}function v(d,R=1){const A=(0,i.s$)(d,R);A&&C(A)}function f(d){b(d),C(d)}function u(d){d.intersectionObserver||runOnceOnIntersection(d,()=>C(d))}function s(d){d.style.display=""}function o(d){const R=r(d);d.style.display=R}function l(d,R){R?C(d):s(d)}function c(d,R){R?u(d):(clearIntersectionObserver(d),s(d))}function r(d){return b(d),d.dataset.defaultDisplay}function b(d){if(d.dataset.defaultDisplay)return;const{display:R}=getComputedStyle(d);d.dataset.defaultDisplay=R}function T(){return{show:[],hide:[]}}function t(d,R,A){d?R.hide.push(A):R.show.push(A)}function n(d){d.show.forEach(s),d.hide.forEach(C)}function g(d,R,A=.3){R?M(d,A):w(d)}function w(d){d.style.opacity=""}function M(d,R=.3){d.style.opacity=R}function G(d){d.style.order=""}function $(d,R){d.style.order=R}function V(d,R){d.style.background=R}function X(d,R){const A=getFirstElement(R);A&&N(d,A)}function N(d,R){const A=createLink();A.href=d,R.parentNode.append(A),A.append(R)}function Q(d,R){const A=getFirstElement(R);A&&_(d,A)}function _(d,R,A={}){const p=createLink(A);p.href=d,p.append(...R.childNodes),R.append(p)}function O(){const d=getURLQueryParam("scrollTo");if(!d)return;const R=document.getElementById(d);R?R.scrollIntoView():console.log(`Element with ID "${d}" was not found.`)}function I(d,R,A=null){const p=`${R}-click-passed`,F=A?y=>findElementByText(y,d,A):y=>getFirstElement(d,y);return function(y){if(y.hasAttribute(p))return!1;const U=F(y);return U&&U.click(),y.setAttribute(p,""),!0}}function k(d,R,A="text/plain"){const p=new Blob([d],{type:A}),F=URL.createObjectURL(p),y=document.createElement("a");y.href=F,y.download=R,document.body.appendChild(y),y.click(),document.body.removeChild(y),requestAnimationFrame(()=>URL.revokeObjectURL(F))}},6754:(P,h,e)=>{e.d(h,{ZM:()=>i});function i(v,f){Object.assign(v.style,f)}function m(v,f="custom-global-style"){let u=document.getElementById(f);u||(u=document.createElement("style"),u.id=f,u.type="text/css",document.head.appendChild(u)),u.textContent=v}function C(v){return Object.entries(v).map(([f,u])=>`${f.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function E(v){return v?v.split(";").filter(f=>f.trim()!=="").reduce((f,u)=>{const[s,o]=u.split(":").map(c=>c.trim()),l=s.replace(/-([a-z])/g,(c,r)=>r.toUpperCase());return f[l]=o,f},{}):{}}},4921:(P,h,e)=>{e.d(h,{Un:()=>v,sg:()=>E,wP:()=>s,xk:()=>i});function i(o,l,c=null){const r=o.querySelector(l);return r?Promise.resolve(r):new Promise(b=>{const T=new MutationObserver(n);T.observe(o,{childList:!0,subtree:!0});let t;c&&(t=setTimeout(()=>{T.disconnect(),console.log(`No element found for selector: ${l}`),b(null)},c));function n(){const g=o.querySelector(l);g&&(t&&clearTimeout(t),T.disconnect(),b(g))}})}function m(o,l){return o.querySelector(l)?new Promise(r=>{const b=new MutationObserver(T);b.observe(o,{childList:!0,subtree:!0});function T(){o.querySelector(l)||(b.disconnect(),r())}}):Promise.resolve()}function C(o,l=400){return new Promise(c=>{let r;const b=new MutationObserver(()=>{clearTimeout(r),T()});function T(){r=setTimeout(()=>{b.disconnect(),c()},l)}T(),b.observe(o,{childList:!0,subtree:!0})})}function E(o,l=250){let c;return function(...r){const b=this;clearTimeout(c),c=setTimeout(()=>o.apply(b,r),l)}}async function v(o){document.visibilityState==="visible"?await o():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await o()},{once:!0})}function f(o,l){const c=new IntersectionObserver(r=>{r.forEach(b=>{b.isIntersecting&&(l(),u(o))})});o.intersectionObserver=c,c.observe(o)}function u(o){o.intersectionObserver&&(o.intersectionObserver.disconnect(),o.intersectionObserver=null)}function s(o){o&&(o.disconnect(),o=null)}},3829:(P,h,e)=>{e.d(h,{Ay:()=>m,JE:()=>f,iG:()=>u});var i=e(8355);function m(c,r){return!C(c,r)}function C(c,r){if(!r||!r.value)return!0;const b=(0,i._7)(r.value);return E(c,b)}function E(c,r){if(!r||!r.length)return!0;const b=(c||"").toLowerCase();return r.every(T=>v(b,T))}function v(c,r){return r.some(({term:b,isNegative:T})=>{const t=c.includes(b);return T?!t:t})}function f(c,r){return r.value!=null&&c<r.value}function u(c,r){return r.value!=null&&c>r.value}function s(c,r){return r.value==null?!1:c<parseDateFromISO(r.value)}function o(c,r){return r.value==null?!1:c>parseDateFromISO(r.value)}function l(c,r){return r.value&&c!==r.value}},4521:(P,h,e)=>{e.d(h,{z:()=>m});var i=e(3048);function m(C,E=null){return{createGlobalFilter(v,f=null,u=C){return i.V.create(v,f,u)},createSectionFilter(v,f=null,u=C){if(!E)throw new Error("sectionId must be provided to use createSectionFilter.");return i.V.createWithCompositeKey(E,v,f,u)}}}},5884:(P,h,e)=>{e.d(h,{Hw:()=>u,Nm:()=>C,SA:()=>v,nW:()=>E});var i=e(5467),m=e(740);function C(s,o,l={},c={}){const r=(0,m.kU)(c,o.updateValueFromEvent,o.value);return(0,i.E2)(r,l,s)}function E(s,o,l,c,r,b={},T={}){const t=(0,m.o5)(T,o.updateValueFromEvent,o.value,l,c,r);return(0,i.E2)(t,b,s)}function v(s,o,l={},c={}){const r=(0,m.Hn)(c,o.updateValueFromEvent,o.value);return(0,i.E2)(r,l,s)}function f(s,o,l={},c={}){const r=createDateInput(c,o.updateValueFromEvent,o.value);return createControl(r,l,s)}function u(s,o,l={},c={}){const r=(0,m.S)(c,o.updateValueFromEvent,o.value);return(0,i.E2)(r,l,s)}},7877:(P,h,e)=>{e.d(h,{E9:()=>m,H1:()=>T,pW:()=>N});var i=e(5884);function m(_,O={},I={}){return(0,i.Nm)("\u041F\u043E\u0438\u0441\u043A: ",_,O,I)}function C(_,O={},I={},k=.1,d=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,k,d,5,O,I)}function E(_,O={},I={},k=.1,d=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",_,k,d,5,O,I)}function v(_,O={},I={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,O,I)}function f(_,O={},I={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",_,O,I)}function u(_,O,I={},k={}){return createNumberFilterControl(_,O,"1","1","999999",I,k)}function s(_,O={},I={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",_,O,I)}function o(_,O={},I={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",_,O,I)}function l(_,O,I={},k={}){return createNumberFilterControl(_,O,"5","0","100",I,k)}function c(_,O={},I={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",_,"5","0","100",O,I)}function r(_,O,I={},k={},d="250"){return(0,i.nW)(_,O,d,"0","1000000",I,k)}function b(_,O={},I={},k="25"){return r("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",_,O,I,k)}function T(_,O={},I={},k="25"){return r("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",_,O,I,k)}function t(_,O={},I={}){return n("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",_,O,I)}function n(_,O,I={},k={}){return createNumberFilterControl(_,O,"1","0","99999",I,k)}function g(_,O={},I={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",_,"1","2","8",O,I)}function w(_,O={},I={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",_,1,1,10,O,I)}function M(_,O={},I={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",_,O,I)}function G(_,O={},I={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",_,O,I)}function $(_,O={},I={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",_,O,I)}function V(_,O={},I={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",_,O,I)}function X(_,O={},I={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",_,O,I)}function N(_,O={},I={}){return(0,i.Hw)("\u0412\u043A\u043B: ",_,O,I)}function Q(_,O,I={}){const k=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],d={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},R=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),A=[],p=()=>O?parseFloat(O.value)||0:_.value,F=()=>{const y=p();A.forEach(({button:U,value:H})=>{const z=H<=y?d.active:d.inactive;Object.assign(U.style,z)})};return k.forEach(({value:y,emoji:U,tooltip:H})=>{const W=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...I},U);W.title=H,W.type="button",W.addEventListener("click",z=>{z.preventDefault(),_.updateValue(y),O&&(O.value=y),F()}),W.addEventListener("mouseenter",()=>{y<=p()||(W.style.background=d.hover.background)}),W.addEventListener("mouseleave",()=>{F()}),A.push({button:W,value:y}),R.appendChild(W)}),F(),O&&(O.addEventListener("input",F),O.addEventListener("change",F)),R}},8355:(P,h,e)=>{e.d(h,{N4:()=>f,_7:()=>m,fO:()=>i});function i(s){if(!s)return[];const l=m(s).flat().filter(c=>c&&!c.isNegative&&c.term).map(c=>c.term);return[...new Set(l)]}function m(s){return s?s.toLowerCase().split(",").map(C).filter(Boolean):[]}function C(s){const o=s.split("/").map(c=>c.trim()).filter(Boolean);if(o.length===0)return null;const l=o.map(E).filter(Boolean);return l.length>0?l:null}function E(s){const o=s.startsWith("!"),l=o?s.slice(1).trim():s;return l?{term:l,isNegative:o}:null}function v(s,o){u(s,l=>l.style.display!=="none",o)}function f(s,o){u(s,l=>l.style.opacity==="",o)}function u(s,o,l){const c=[...s].filter(o).length;l.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${c} \u0438\u0437 ${s.length}`}},5213:(P,h,e)=>{e.d(h,{b:()=>C});var i=e(573),m=e(7273);function C(E,v,f=!1,u="customFiltersContainer"){let s=(0,i.Fi)(`#${u}`,E);if(s)if(f)s.remove();else return;s=(0,m.S)(),s.id=u,v(s,E)}},8200:(P,h,e)=>{e.d(h,{s:()=>i});function i(m){const{target:C}=m,{type:E}=C;switch(E){case"text":return`"${C.value}"`;case"number":return C.value;case"select-one":return C.value;case"date":return`"${C.value}"`;case"checkbox":return C.checked;default:return console.log(`Unknown input type: ${E}`),null}}},157:(P,h,e)=>{e.d(h,{Fg:()=>i,vx:()=>C});const i=window.GM_setValue,m=window.GM.setValue,C=window.GM_getValue},1870:(P,h,e)=>{e.d(h,{j:()=>i});class i{constructor(C,E){this.value=C,this.onChange=E}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(P,h,e)=>{e.d(h,{V:()=>v});var i=e(1870),m=e(8200),C=e(3976),E=e(157);class v extends i.j{constructor(u,s=null,o=null){super((0,E.vx)(u,s),o),this.storageKey=u,this.defaultValue=s}static create(u,s=null,o=null){return new v(u,s,o)}static createWithCompositeKey(u,s,o=null,l=null){const c=`${u}-${s}`;return new v(c,o,l)}updateValueFromEvent=u=>{const s=(0,m.s)(u),o=(0,C.$)(s);this.updateValue(o)};updateValue(u,s=!0){this.value!==u&&((0,E.Fg)(this.storageKey,u),this.value=u,s&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(P,h,e)=>{e.d(h,{$:()=>i});function i(m){return m===""?null:JSON.parse(m)}},4214:(P,h,e)=>{e.d(h,{zr:()=>m});function i(f){return f.replace(/\D/g,"")}function m(f){return f.replace(/[^\d.,-]/g,"")}function C(f){return f.replace(/\s/g,"")}function E(f){return f.charAt(0).toUpperCase()+f.slice(1)}function v(f){return f.replace(/\s+/g," ").trim()}},5406:(P,h,e)=>{e.d(h,{z2:()=>l});function i(T,t="common",n=!1){const{pathname:g}=window.location;return m(g,T,t,n)}function m(T,t,n,g=!1){const w=T.split("/");t=t<0?w.length+t:t;const M=w[t]||n;return g&&console.log(`Pathname element: ${M}`),M}function C(T,t="common",n=!1){const g=i(T,"",n);return E(g,t,n)}function E(T,t,n){if(!T)return t;const g=T.split("-").at(-1);return n&&console.log(`Pathname element ending: ${g}`),g}function v(T,t,n="common",g=!1){const w=m(T,t,"",g);return E(w,n,g)}function f(T){return new URLSearchParams(window.location.search).get(T)}function u(T){return T.split("?")[0]}function s(T){return window.location.pathname.includes(T)}function o(T){return T.some(t=>s(t))}function l(...T){return window.location.pathname.split("/").some(n=>T.includes(n))}function c(T){try{const t=new URL(window.location.href);Object.entries(T).forEach(([n,g])=>{t.searchParams.set(n,g)}),window.location.href=t.toString()}catch(t){console.error("Failed to redirect:",t)}}function r(T,t=[]){const n={pathname:window.location.pathname};t.forEach($=>{n[$]=f($)});let g=!1;async function w(){if(g)return;const $={pathname:window.location.pathname};if(t.forEach(V=>{$[V]=f(V)}),Object.keys(n).some(V=>n[V]!==$[V])){Object.assign(n,$),g=!0;try{await T()}catch(V){console.error("Error in URL observer callback:",V)}finally{g=!1}}}function M(){w().catch($=>{console.error("Error in URL change handler:",$)})}let G=window.location.href;setInterval(()=>{window.location.href!==G&&(G=window.location.href,M())},200),window.addEventListener("popstate",M)}function b(T=[]){r(()=>window.location.reload(),T)}},7926:(P,h,e)=>{e.d(h,{sV:()=>r,CU:()=>s,Jm:()=>T,Fr:()=>l,nd:()=>b,MB:()=>c,Su:()=>u,X0:()=>o});var i=e(157);function m(t,n=1e3){return Math.round((t+Number.EPSILON)*n)/n}function C(t){const n=t.slice().sort((w,M)=>w-M),g=Math.floor(n.length/2);return n.length%2!==0?n[g]:(n[g-1]+n[g])/2}function E(t,n){return Math.random()*(n-t)+t}const v="preferred-comment-counts",f=50;function u(t){(0,i.Fg)("newest-seen-product-id",t)}function s(){return(0,i.vx)("newest-seen-product-id")}function o(t){(0,i.Fg)("prev-newest-seen-product-id",t)}function l(){return(0,i.vx)("prev-newest-seen-product-id")}function c(){(0,i.Fg)("last-newest-seen-product-update",Date.now())}function r(){return(0,i.vx)("last-newest-seen-product-update")}function b(t){const n=(0,i.vx)(v,[]);n.push(t),n.length>f&&n.shift(),(0,i.Fg)(v,n)}function T(){const t=(0,i.vx)(v,[]);return t.length===0?null:C(t)}},9374:(P,h,e)=>{e.a(P,async(i,m)=>{try{var C=e(5406),E=e(468),v=e(7220);await f();async function f(){(0,C.z2)("new","search_result")?await(0,E.P)():(0,C.z2)("deals","coupons")&&await(0,v.O)()}m()}catch(f){m(f)}},1)},7220:(P,h,e)=>{e.d(h,{O:()=>Q});var i=e(573);const m={DEAL_ALERT_FORM_CONTENT:"#deal-alert-form-content",HIDE_TOP_COMMENTS_BUTTON:"#top-comments-open-close",OFFER:".text-2xl.font-bold.text-primary.mr-2",STICKY_HEADER:"#header-sticky-scroll",STICKY_HEADER_TITLE_CONTAINER:":scope > div.container > div:first-of-type",STICKY_HEADER_BUTTONS_CONTAINER:":scope > div.container > div:last-of-type",COMMENTS_CONTAINER:"#comments",COMMENTS_LIST:"#comment-list",POST_BODY:'div[data-name="post[body]"]',MORE_REPLIES_LINK:"a.more-replies",COMMENT:'div[id^="post_"][id$="_new"]',COMMENT_TEXT_WRAP:'div[id^="parent_comment_"]',COMMENT_REACTIONS_CONTAINER:'[class^="given_reactions_"]',COMMENT_REACTION:"span.text-sm.text-secondary-text-light"};var C=e(4521),E=e(5213),v=e(6754),f=e(5013);const u={INPUT:{marginLeft:"7px",border:"2px solid #b3bcc5",borderRadius:"6px",padding:"7px 14px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"15px"}},s={DISLIKE_BUTTON:{marginLeft:"auto",gap:"8px"},DISLIKE_BUTTON_ICON_SM:{height:"0.9em",marginTop:"2px"},DISLIKE_BUTTON_ICON_MD:{marginBottom:"1px"},FILTERS_CONTAINER:{display:"flex",flexFlow:"wrap",gap:"12px 16px",paddingBottom:"14px"},NUMBER_INPUT_SM:{...u.INPUT,width:"70px"},NUMBER_INPUT_MD:{...u.INPUT,width:"80px"},NUMBER_INPUT_LG:{...u.INPUT,width:"90px"},TEXT_INPUT:{...u.INPUT,width:"260px"},CHECKBOX_INPUT:{marginLeft:"7px",width:"26px",height:"26px"},CONTROL:u.CONTROL,PUSHED_RIGHT_CONTROL:{...u.CONTROL,marginLeft:"auto"}},o={SCROLL_TO_FILTERS_BUTTON:{position:"fixed",bottom:"20px",right:"20px",padding:"10px 20px 10px 14px",backgroundColor:"#005bff",color:"white",border:"none",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",cursor:"pointer",fontSize:"14px",transition:"background-color 0.3s",display:"none",gap:"4px",zIndex:5},CLONED_PRODUCT_CARDS_WRAP:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)"}},l={...f.B,FILTERS_CONTAINER:{...f.B.FILTERS_CONTAINER,padding:"15px 0px 12px",borderBottomWidth:"1px",top:"50px",zIndex:"9"},PUSHED_RIGHT_CONTROL:{...u.CONTROL,marginLeft:"auto"}};var c=e(7877),r=e(5884),b=e(5539),T=e(3829),t=e(4921);function n(a,S){a.forEach(x=>g(S,x))}function g(a,S){if(!S)return;const x=new RegExp(`(${S})`,"gi"),D=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null);let L=D.nextNode();const B=[];for(;L;){const{textContent:K}=L;if(x.test(K)){const Y=document.createDocumentFragment();let J=0;K.replace(x,(q,oe,ie)=>{ie>J&&Y.appendChild(document.createTextNode(K.slice(J,ie)));const ee=document.createElement("span");ee.className="highlightedSubstring",ee.style.backgroundColor="yellow",ee.textContent=q,Y.appendChild(ee),J=ie+q.length}),J<K.length&&Y.appendChild(document.createTextNode(K.slice(J))),B.push({node:L,fragment:Y})}L=D.nextNode()}B.forEach(({node:K,fragment:Y})=>{K.parentNode.replaceChild(Y,K)})}function w(a){(0,i.fI)(".highlightedSubstring",a).forEach(x=>{const{parentNode:D}=x;x.replaceWith(x.textContent),D.normalize()})}var M=e(8355);function G(a,S){const x=(0,M.fO)(a.value);n(x,S)}function $(a,S){const x=getIncludedSearchStrings(a.value);S.forEach(D=>highlightSubstrings(x,D))}var V=e(7926),X=e(7273);const N={commentsContainer:null,commentsObserver:null,isFiltersInitialized:!1,filters:{commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},minReactionsSelect:null,lastStatsSnapshot:"",isMinReactionsAutoSelectActive:!0,commentsInfo:null,commentsCache:new WeakMap};async function Q(){_(),k(),await I(),await(0,t.Un)(d)}function _(){(0,b.ku)(m.DEAL_ALERT_FORM_CONTENT),O()}function O(){const a=(0,i.Fi)(m.HIDE_TOP_COMMENTS_BUTTON);a&&a.click()}async function I(){const a=(0,i.Fi)(m.OFFER);if(!a)return;const S=(0,i.Fi)(m.STICKY_HEADER);if(!S)return;const x=await(0,t.xk)(S,m.STICKY_HEADER_TITLE_CONTAINER);if(!x)return;const D=await(0,t.xk)(S,m.STICKY_HEADER_BUTTONS_CONTAINER);if(!D)return;x.classList.remove("md:w-[calc(100%-280px)]","w-[calc(100%-40px)]"),x.classList.add("flex-1","min-w-0"),D.classList.remove("md:w-[270px]","w-[40px]"),D.classList.add("w-auto","pl-2","pr-1");const L=(0,X.S)({whiteSpace:"nowrap"},a.textContent);L.classList.add("font-bold","text-primary","mr-3"),D.prepend(L)}function k(){if(!N.isFiltersInitialized){const{createGlobalFilter:a}=(0,C.z)(A);N.filters.commentTextFilter=a("comments-text-filter"),N.filters.minReactionsFilter=a("comments-min-reactions-filter",0),N.filters.filterEnabled=a("comments-filter-enabled",!0),N.filters.autoExpandFilter=a("comments-auto-expand",!1),N.isFiltersInitialized=!0}}function d(){if(N.commentsContainer=(0,i.Fi)(m.COMMENTS_CONTAINER),!N.commentsContainer)return;(0,E.b)(N.commentsContainer,R),A(),N.commentsObserver&&(0,t.wP)(N.commentsObserver),N.commentsObserver=new MutationObserver(S=>{for(const x of S)for(const D of x.addedNodes)if(D.nodeType===1&&(D.matches(m.COMMENT)||D.querySelector(m.COMMENT))){A();return}});const a=(0,i.Fi)(m.COMMENTS_LIST);N.commentsObserver.observe(a,{childList:!0,subtree:!0})}function R(a,S){(0,v.ZM)(a,l.FILTERS_CONTAINER);const x=(0,r.Nm)("\u0422\u0435\u043A\u0441\u0442:",N.filters.commentTextFilter,l.CONTROL,l.TEXT_INPUT),D=(0,r.SA)("\u0420\u0435\u0430\u043A\u0446\u0438\u0439: ",N.filters.minReactionsFilter,l.CONTROL,l.SELECT_INPUT),L=(0,c.pW)(N.filters.filterEnabled,l.CONTROL,l.CHECKBOX_INPUT),B=(0,r.Hw)("\u0410\u0432\u0442\u043E\u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435",N.filters.autoExpandFilter,l.CONTROL,l.CHECKBOX_INPUT);N.minReactionsSelect=D.querySelector("select"),N.commentsInfo=(0,X.S)(l.PUSHED_RIGHT_CONTROL),N.minReactionsSelect.addEventListener("change",Y=>{if(N.isMinReactionsAutoSelectActive=!1,parseInt(Y.target.value,10)===0)return;const q=Y.target.options[Y.target.selectedIndex],oe=parseInt(q.dataset.count,10);Number.isNaN(oe)||(0,V.nd)(oe)}),a.append(x,D,L,B,N.commentsInfo);const K=(0,i.Fi)(m.POST_BODY,S);S.insertBefore(a,K)}function A(){N.filters.autoExpandFilter.value&&p();const a=(0,i.fI)(m.COMMENT,N.commentsContainer);a.forEach(F),(0,M.N4)(a,N.commentsInfo),te(a)}function p(){(0,i.fI)(m.MORE_REPLIES_LINK,N.commentsContainer).forEach(S=>S.click())}function F(a){if(!N.filters.filterEnabled.value){U(a);return}w(a);let S=N.commentsCache.get(a);if(!S){const D=(0,i.Fi)(m.COMMENT_TEXT_WRAP,a);if(!D){U(a);return}const L=D.innerText,B=Z(a);S={commentText:L,commentTextWrap:D,reactionsCount:B},N.commentsCache.set(a,S)}N.filters.commentTextFilter.value&&G(N.filters.commentTextFilter,S.commentTextWrap);const x=(0,T.Ay)(S.commentText,N.filters.commentTextFilter)||(0,T.JE)(S.reactionsCount,N.filters.minReactionsFilter);H(a,x),z(a,x)}function y(a){(0,b.vJ)(a),a.style.maxHeight="",a.style.overflow=""}function U(a){y(a),z(a,!1)}function H(a,S){S?W(a):y(a)}function W(a){(0,b.iV)(a),a.style.maxHeight="83px",a.style.overflow="hidden"}function z(a,S){const x=N.commentsCache.get(a);if(x?.lastHoverState!==S){if(S){let D=null;a.onmouseenter=()=>{clearTimeout(D),D=setTimeout(()=>y(a),250)},a.onmouseleave=()=>{clearTimeout(D),W(a)}}else a.onmouseenter=null,a.onmouseleave=null;x&&(x.lastHoverState=S)}}function Z(a){const S=(0,i.Fi)(m.COMMENT_REACTIONS_CONTAINER,a);if(!S)return 0;const x=(0,i.fI)(m.COMMENT_REACTION,S);let D=0;return x.forEach(L=>{const B=parseInt(L.textContent.trim(),10);Number.isNaN(B)||(D+=B)}),D}function te(a){if(!N.minReactionsSelect)return;const S=ne(a),x=re(S),D=JSON.stringify(x);if(N.lastStatsSnapshot===D)return;N.lastStatsSnapshot=D,N.minReactionsSelect.innerHTML="";const L=document.createDocumentFragment();x.forEach(B=>{const K=document.createElement("option");K.value=B.value,K.textContent=B.label,K.dataset.count=B.count,L.appendChild(K)}),N.minReactionsSelect.appendChild(L),N.isMinReactionsAutoSelectActive&&ce(x),N.minReactionsSelect.value=N.filters.minReactionsFilter.value}function ne(a){const S=new Map;return a.forEach(x=>{const D=N.commentsCache.get(x);if(!D)return;const L=D.reactionsCount;S.set(L,(S.get(L)||0)+1)}),S.size===0&&S.set(0,0),S}function re(a){const S=Array.from(a.keys()).sort((L,B)=>L-B),x=new Array(S.length);let D=0;for(let L=S.length-1;L>=0;L--){const B=S[L];D+=a.get(B),x[L]={value:B,label:`${B}+ (${D})`,count:D}}return x}function ce(a){const S=(0,V.Jm)();if(S===null||a.length===0)return;let x=a[0],D=1/0;for(const L of a){const B=ae(L.count,S);B<D?(D=B,x=L):Math.abs(B-D)<.01&&L.count>x.count&&(x=L)}x.value===0&&(x=le(x,a)),N.filters.minReactionsFilter.value!==x.value&&N.filters.minReactionsFilter.updateValue(x.value)}function ae(a,S){const x=a-S,D=1.8;return x>=0?x:Math.abs(x)*D}function le(a,S){const x=S.find(L=>L.value>0&&L.count>0);return x&&de(a.count,x.count)?x:a}function de(a,S){return a<=3?!1:a>=9?S>=1:a>=7?S>=2:S>=3}function me(){N.commentsContainer=null,N.isFiltersInitialized=!1,N.filters={commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},N.minReactionsSelect=null,N.lastStatsSnapshot="",N.isMinReactionsAutoSelectActive=!0,N.commentsInfo=null,N.commentsCache=new WeakMap,clearObserver(N.commentsObserver)}},5013:(P,h,e)=>{e.d(h,{B:()=>m});const i={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},m={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",marginBottom:".5rem",backgroundColor:"#fff",borderColor:"rgb(229, 229, 229)",position:"sticky"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...i.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...i.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},SELECT_INPUT:{...i.INPUT,width:"100px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...i.INPUT,width:"24px",height:"24px"}}},468:(P,h,e)=>{e.d(h,{P:()=>g});var i=e(573);const m={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a",PRODUCT_PRICE:"div.md\\:text-xll.text-lg.font-bold.text-primary.mr-2"};var C=e(4521),E=e(5213),v=e(6754),f=e(5013);const u={...f.B,FILTERS_CONTAINER:{...f.B.FILTERS_CONTAINER,padding:"11px 19px",borderWidth:"1px",borderRadius:"10px",top:"-1px",zIndex:"11"}};var s=e(7877),o=e(5884),l=e(5539),c=e(3829),r=e(7926);const b={ID_BADGE_APPENDED:"idBadgeAppended",SEEN_PRODUCT_CARD:"seenProductCard",MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"};var T=e(4921),t=e(7273);const n={productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},prevNewestSeenProductId:null};async function g(){w(),M(),await G(),await R()}function w(){n.prevNewestSeenProductId=(0,r.Fr)()}function M(){if(!n.isFiltersInitialized){const{createGlobalFilter:p}=(0,C.z)(G);n.filters.nameFilter=p("name-filter"),n.filters.minVotesFilter=p("min-votes-filter",50),n.filters.maxPriceFilter=p("max-price-filter"),n.filters.showExpiredFilter=p("show-expired-filter",!1),n.filters.filterEnabled=p("filter-enabled",!0),n.isFiltersInitialized=!0}}function G(){const p=(0,i.fI)(m.PRODUCT_CARD);if(p.length){const F=p[0].parentElement;(0,E.b)(F,$),V(),n.productListObserver&&(0,T.wP)(n.productListObserver),n.productListObserver=new MutationObserver(V),n.productListObserver.observe(F,{childList:!0,subtree:!0})}}function $(p,F){(0,v.ZM)(p,u.FILTERS_CONTAINER);const y=(0,s.E9)(n.filters.nameFilter,u.CONTROL,u.TEXT_INPUT),U=(0,o.nW)("\u041C\u0438\u043D. \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",n.filters.minVotesFilter,"50","0","10000",u.CONTROL,u.NUMBER_INPUT),H=(0,s.H1)(n.filters.maxPriceFilter,u.CONTROL,u.NUMBER_INPUT),W=(0,o.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",n.filters.showExpiredFilter,u.CONTROL,u.CHECKBOX_INPUT),z=(0,s.pW)(n.filters.filterEnabled,u.CONTROL,u.CHECKBOX_INPUT);p.append(y,U,H,W,z),F.prepend(p)}function V(){(0,i.fI)(m.PRODUCT_CARD).forEach(X);const F=(0,i.Fi)(`[${b.SEEN_PRODUCT_CARD}]`);F&&(F.style.marginTop="45px")}function X(p){const F=(0,i.Fi)(m.PRODUCT_CARD_LINK,p),y=N(F);if(Q(p,y),_(y,p),O(p,y),!n.filters.filterEnabled.value){(0,l.vJ)(p);return}if(p.classList.contains("expired-view")&&!n.filters.showExpiredFilter.value){(0,l.iV)(p);return}const H=(0,i.Fi)(m.PRODUCT_CARD_RATING,p);if(H.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const W=(0,i.Fi)(m.PRODUCT_NAME,p),z=(0,i.Fi)(m.PRODUCT_PRICE,p),Z=W.innerText,te=(0,i.YA)(H,!0),ne=(0,i.YA)(z,!0),re=(0,c.Ay)(Z,n.filters.nameFilter)||(0,c.JE)(te,n.filters.minVotesFilter)||(0,c.iG)(ne,n.filters.maxPriceFilter);(0,l.D9)(p,re)}function N(p){return+p.getAttribute("href").split("-").pop()}function Q(p,F){if(p.hasAttribute(b.ID_BADGE_APPENDED))return;const y=p.querySelector(".md\\:col-start-2.row-start-1 .flex.items-center");if(!y)return;const U=(0,t.V)({marginRight:"10px"},`#${F}`);U.className="product-id-badge text-secondary-text-light dark:text-secondary-text-dark text-xs",p.addEventListener("mouseenter",()=>{const H=F-n.prevNewestSeenProductId,W=H>0?"+":"";U.textContent=`#${F} (${W}${H})`}),p.addEventListener("mouseleave",()=>{U.textContent=`#${F}`}),y.insertBefore(U,y.firstChild),p.setAttribute(b.ID_BADGE_APPENDED,"")}function _(p,F){F.style.removeProperty("margin-top"),p>n.prevNewestSeenProductId?(F.style.border="3px solid #8ab854",F.removeAttribute(b.SEEN_PRODUCT_CARD)):(F.style.removeProperty("border"),F.setAttribute(b.SEEN_PRODUCT_CARD,""))}function O(p,F){p.hasAttribute(b.MARK_AS_NEWEST_SEEN_APPENDED)||(p.addEventListener("mousedown",y=>{if(y.button===1&&!y.target.closest("a")){const U=F-(0,r.CU)(),H=(0,r.sV)(),W=I(H),z=["\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?","",`\u041D\u043E\u0432\u044B\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432: ~${U}`];W&&z.push(`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E: ${W}`);const Z=z.join(`
`);confirm(Z)&&(d(F),y.preventDefault())}}),p.setAttribute(b.MARK_AS_NEWEST_SEEN_APPENDED,""))}function I(p){const F=p?new Date(p):null;if(!F)return null;const y=Math.floor((Date.now()-F.getTime())/6e4);return k(y)}function k(p){const F=Math.floor(p/1440),y=Math.floor(p%1440/60),U=p%60;return F>0?`${F} \u0434. ${y} \u0447. ${U} \u043C.`:y>0?`${y} \u0447. ${U} \u043C.`:`${U} \u043C.`}function d(p){const F=(0,r.CU)();(0,r.X0)(F),(0,r.Su)(p),(0,r.MB)(),n.prevNewestSeenProductId=F,V()}async function R(){const p=(0,i.Fi)(m.DISCUSSIONS);p&&(p.style.position="sticky",p.style.top="0")}function A(){n.isFiltersInitialized=!1,n.filters={nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},n.prevNewestSeenProductId=null,clearObserver(n.productListObserver)}}},ue={};function j(P){var h=ue[P];if(h!==void 0)return h.exports;var e=ue[P]={exports:{}};return se[P](e,e.exports,j),e.exports}(()=>{var P=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",i=C=>{C&&C.d<1&&(C.d=1,C.forEach(E=>E.r--),C.forEach(E=>E.r--?E.r++:E()))},m=C=>C.map(E=>{if(E!==null&&typeof E=="object"){if(E[P])return E;if(E.then){var v=[];v.d=0,E.then(s=>{f[h]=s,i(v)},s=>{f[e]=s,i(v)});var f={};return f[P]=s=>s(v),f}}var u={};return u[P]=s=>{},u[h]=E,u});j.a=(C,E,v)=>{var f;v&&((f=[]).d=-1);var u=new Set,s=C.exports,o,l,c,r=new Promise((b,T)=>{c=T,l=b});r[h]=s,r[P]=b=>(f&&b(f),u.forEach(b),r.catch(T=>{})),C.exports=r,E(b=>{o=m(b);var T,t=()=>o.map(g=>{if(g[e])throw g[e];return g[h]}),n=new Promise(g=>{T=()=>g(t),T.r=0;var w=M=>M!==f&&!u.has(M)&&(u.add(M),M&&!M.d&&(T.r++,M.push(T)));o.map(M=>M[P](w))});return T.r?n:t()},b=>(b?c(r[e]=b):l(s),i(f))),f&&f.d<0&&(f.d=0)}})(),j.d=(P,h)=>{for(var e in h)j.o(h,e)&&!j.o(P,e)&&Object.defineProperty(P,e,{enumerable:!0,get:h[e]})},j.o=(P,h)=>Object.prototype.hasOwnProperty.call(P,h);var fe=j(9374)})();})();
