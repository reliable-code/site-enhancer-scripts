// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76953891
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var se={5467:(M,g,e)=>{e.d(g,{E2:()=>m});var o=e(9928);function m(x,d={},r=null){const i=(0,o.Sw)(d,r);return i.append(x),i}function N(x,d=null,r={},i={}){const s=createActionLink(x,d,i);return m(s,r)}function b(x,d=null,r=null,i={},s={},p={}){const a=createActionLinkWithIcon(x,r,d,s,p);return m(a,i)}},9928:(M,g,e)=>{e.d(g,{Hn:()=>i,S:()=>d,Sw:()=>T,VI:()=>s,kU:()=>N,o5:()=>b});var o=e(4921),m=e(6754);function N(f,h,A){const I=r(f,"text",h);return I.value=A,I}function b(f,h,A,I,K,j){const C=r(f,"number",h);return C.value=A,C.step=I,C.min=K,C.max=j,C}function x(f,h,A){const I=r(f,"date",h);return I.value=A,I}function d(f,h,A){const I=r(f,"checkbox",h);return I.checked=A,I}function r(f={},h=null,A=null){const I=E("input",f);return h&&(I.type=h),A&&(I.addEventListener("keyup",(0,o.sg)(A,200)),I.addEventListener("change",(0,o.sg)(A,100))),I}function i(f,h,A){const I=E("select",f);return h&&I.addEventListener("change",h),I.value=A,I}function s(f={},h=null){return E("span",f,h)}function p(f={},h=null,A=null){const I=E("a",f,h);return A&&(I.href=A),I}function a(f,h=null,A={}){A.cursor||="pointer";const I=p(A,h);return f&&I.addEventListener("click",f),I}function l(f,h,A=null,I={},K={}){I.display||="inline-flex",I.alignItems||="center",I.gap||="0.25em";const j=a(f,A,I);return j.prepend(t(h,K)),j}function D(f={},h=null,A=null){const I=E("button",f,h);return A&&I.addEventListener("click",A),I}function T(f={},h=null){return E("div",f,h)}function n(f={},h=null){return E("i",f,h)}function t(f,h={}){h.width||="1em",h.height||="1em";const A=createLucideSvg(f);return applyStyles(A,h),A}function E(f,h,A=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const I=document.createElement(f);return(0,m.ZM)(I,h),A&&(I.innerHTML=A),I}},573:(M,g,e)=>{e.d(g,{Fi:()=>N,YA:()=>i,fI:()=>b,s$:()=>x});var o=e(4214);function m(n,t=document){return!!t.querySelector(n)}function N(n,t=document,E=!1){const f=t.querySelector(n);return E&&!f&&console.log(`No element found for selector: ${n}`),f}function b(n,t=document,E=!1){const f=t.querySelectorAll(n);return E&&!f.length&&console.log(`No elements found for selector: ${n}`),f}function x(n,t=1){let E=n;for(let f=0;f<t;f++){if(!E.parentElement)return null;E=E.parentElement}return E}function d(n,t,E){return[...n.querySelectorAll(t)].find(f=>f.textContent.trim().includes(E))}function r(n,t,E=!1,f=!1,h=null){const A=N(t,n);return i(A,E,f,h)}function i(n,t=!1,E=!1,f=null){if(!n)return f===null?(console.log("No element found"),null):f;const h=n.innerText;return a(h,t,E)}function s(n,t,E=!1){const f=n[t];return i(f,E)}function p(n,t=!1,E=!1){const f=n.textContent;return a(f,t,E)}function a(n,t,E){t&&(n=(0,o.zr)(n)),E&&(n=n.replace(",","."));const f=Number(n);return Number.isNaN(f)?(console.log(`Invalid number: ${n}`),0):f}function l(n){return[...n.childNodes].find(t=>t.nodeType===Node.TEXT_NODE)}function D(n){const t=E=>E.nodeType===Node.TEXT_NODE&&E.textContent.trim()!==""?[E]:[...E.childNodes].flatMap(t);return t(n)}function T(n){return normalizeSpacing(n.textContent)}},5539:(M,g,e)=>{e.d(g,{D9:()=>E,iV:()=>h,ku:()=>b,vJ:()=>f});var o=e(573);function m(c,P){c.parentNode.insertBefore(P,c.nextSibling)}function N(c){c.style.display="none"}function b(c,P=1){const U=document.querySelector(c);U&&x(U,P)}function x(c,P=1){const U=(0,o.s$)(c,P);U&&N(U)}function d(c){D(c),N(c)}function r(c){c.intersectionObserver||runOnceOnIntersection(c,()=>N(c))}function i(c){c.style.display=""}function s(c){const P=l(c);c.style.display=P}function p(c,P){P?N(c):i(c)}function a(c,P){P?r(c):(clearIntersectionObserver(c),i(c))}function l(c){return D(c),c.defaultDisplay}function D(c){if(c.defaultDisplay)return;const{display:P}=getComputedStyle(c);c.defaultDisplay=P}function T(){return{show:[],hide:[]}}function n(c,P,U){c?P.hide.push(U):P.show.push(U)}function t(c){c.show.forEach(i),c.hide.forEach(N)}function E(c,P,U=.3){P?h(c,U):f(c)}function f(c){c.style.opacity=""}function h(c,P=.3){c.style.opacity=P}function A(c){c.style.order=""}function I(c,P){c.style.order=P}function K(c,P){c.style.background=P}function j(c,P){const U=getFirstElement(P);U&&C(c,U)}function C(c,P){const U=createLink();U.href=c,P.parentNode.append(U),U.append(P)}function Q(c,P){const U=getFirstElement(P);U&&F(c,U)}function F(c,P,U={}){const v=createLink(U);v.href=c,v.append(...P.childNodes),P.append(v)}function S(){const c=getURLQueryParam("scrollTo");if(!c)return;const P=document.getElementById(c);P?P.scrollIntoView():console.log(`Element with ID "${c}" was not found.`)}function R(c,P,U=null){const v=`${P}-click-passed`,y=U?w=>findElementByText(w,c,U):w=>getFirstElement(c,w);return function(w){if(w.hasAttribute(v))return!1;const k=y(w);return k&&k.click(),w.setAttribute(v,""),!0}}function V(c,P,U="text/plain"){const v=new Blob([c],{type:U}),y=URL.createObjectURL(v),w=document.createElement("a");w.href=y,w.download=P,document.body.appendChild(w),w.click(),document.body.removeChild(w),requestAnimationFrame(()=>URL.revokeObjectURL(y))}},6754:(M,g,e)=>{e.d(g,{ZM:()=>o});function o(x,d){Object.assign(x.style,d)}function m(x,d="custom-global-style"){let r=document.getElementById(d);r||(r=document.createElement("style"),r.id=d,r.type="text/css",document.head.appendChild(r)),r.textContent=x}function N(x){return Object.entries(x).map(([d,r])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${r};`).join(" ")}function b(x){return x?x.split(";").filter(d=>d.trim()!=="").reduce((d,r)=>{const[i,s]=r.split(":").map(a=>a.trim()),p=i.replace(/-([a-z])/g,(a,l)=>l.toUpperCase());return d[p]=s,d},{}):{}}},4921:(M,g,e)=>{e.d(g,{Un:()=>x,sg:()=>b,wP:()=>i,xk:()=>o});function o(s,p,a=null){const l=s.querySelector(p);return l?Promise.resolve(l):new Promise(D=>{const T=new MutationObserver(t);T.observe(s,{childList:!0,subtree:!0});let n;a&&(n=setTimeout(()=>{T.disconnect(),console.log(`No element found for selector: ${p}`),D(null)},a));function t(){const E=s.querySelector(p);E&&(n&&clearTimeout(n),T.disconnect(),D(E))}})}function m(s,p){return s.querySelector(p)?new Promise(l=>{const D=new MutationObserver(T);D.observe(s,{childList:!0,subtree:!0});function T(){s.querySelector(p)||(D.disconnect(),l())}}):Promise.resolve()}function N(s,p=400){return new Promise(a=>{let l;const D=new MutationObserver(()=>{clearTimeout(l),T()});function T(){l=setTimeout(()=>{D.disconnect(),a()},p)}T(),D.observe(s,{childList:!0,subtree:!0})})}function b(s,p=250){let a;return(...l)=>{clearTimeout(a),a=setTimeout(()=>s(...l),p)}}async function x(s){document.visibilityState==="visible"?await s():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await s()},{once:!0})}function d(s,p){const a=new IntersectionObserver(l=>{l.forEach(D=>{D.isIntersecting&&(p(),r(s))})});s.intersectionObserver=a,a.observe(s)}function r(s){s.intersectionObserver&&(s.intersectionObserver.disconnect(),s.intersectionObserver=null)}function i(s){s&&(s.disconnect(),s=null)}},3829:(M,g,e)=>{e.d(g,{Ay:()=>m,JE:()=>d,iG:()=>r});var o=e(8355);function m(a,l){return!N(a,l)}function N(a,l){if(!l||!l.value)return!0;const D=(0,o._7)(l.value);return b(a,D)}function b(a,l){if(!l||!l.length)return!0;const D=(a||"").toLowerCase();return l.every(T=>x(D,T))}function x(a,l){return l.some(({term:D,isNegative:T})=>{const n=a.includes(D);return T?!n:n})}function d(a,l){return l.value!=null&&a<l.value}function r(a,l){return l.value!=null&&a>l.value}function i(a,l){return l.value==null?!1:a<parseDateFromISO(l.value)}function s(a,l){return l.value==null?!1:a>parseDateFromISO(l.value)}function p(a,l){return l.value&&a!==l.value}},4521:(M,g,e)=>{e.d(g,{z:()=>m});var o=e(3048);function m(N,b=null){return{createGlobalFilter(x,d=null,r=N){return o.V.create(x,d,r)},createSectionFilter(x,d=null,r=N){if(!b)throw new Error("sectionId must be provided to use createSectionFilter.");return o.V.createWithCompositeKey(b,x,d,r)}}}},5884:(M,g,e)=>{e.d(g,{Hw:()=>r,Nm:()=>N,SA:()=>x,nW:()=>b});var o=e(9928),m=e(5467);function N(i,s,p={},a={}){const l=(0,o.kU)(a,s.updateValueFromEvent,s.value);return(0,m.E2)(l,p,i)}function b(i,s,p,a,l,D={},T={}){const n=(0,o.o5)(T,s.updateValueFromEvent,s.value,p,a,l);return(0,m.E2)(n,D,i)}function x(i,s,p={},a={}){const l=(0,o.Hn)(a,s.updateValueFromEvent,s.value);return(0,m.E2)(l,p,i)}function d(i,s,p={},a={}){const l=createDateInput(a,s.updateValueFromEvent,s.value);return createControl(l,p,i)}function r(i,s,p={},a={}){const l=(0,o.S)(a,s.updateValueFromEvent,s.value);return(0,m.E2)(l,p,i)}},7877:(M,g,e)=>{e.d(g,{E9:()=>m,H1:()=>T,pW:()=>C});var o=e(5884);function m(F,S={},R={}){return(0,o.Nm)("\u041F\u043E\u0438\u0441\u043A: ",F,S,R)}function N(F,S={},R={},V=.1,c=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",F,V,c,5,S,R)}function b(F,S={},R={},V=.1,c=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",F,V,c,5,S,R)}function x(F,S={},R={}){return r("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",F,S,R)}function d(F,S={},R={}){return r("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",F,S,R)}function r(F,S,R={},V={}){return createNumberFilterControl(F,S,"1","1","999999",R,V)}function i(F,S={},R={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",F,S,R)}function s(F,S={},R={}){return p("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",F,S,R)}function p(F,S,R={},V={}){return createNumberFilterControl(F,S,"5","0","100",R,V)}function a(F,S={},R={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",F,"5","0","100",S,R)}function l(F,S,R={},V={},c="250"){return(0,o.nW)(F,S,c,"0","1000000",R,V)}function D(F,S={},R={},V="25"){return l("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",F,S,R,V)}function T(F,S={},R={},V="25"){return l("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",F,S,R,V)}function n(F,S={},R={}){return t("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",F,S,R)}function t(F,S,R={},V={}){return createNumberFilterControl(F,S,"1","0","99999",R,V)}function E(F,S={},R={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",F,"1","2","8",S,R)}function f(F,S={},R={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",F,1,1,10,S,R)}function h(F,S={},R={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",F,S,R)}function A(F,S={},R={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",F,S,R)}function I(F,S={},R={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",F,S,R)}function K(F,S={},R={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",F,S,R)}function j(F,S={},R={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",F,S,R)}function C(F,S={},R={}){return(0,o.Hw)("\u0412\u043A\u043B: ",F,S,R)}function Q(F,S,R={}){const V=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],c={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},P=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),U=[],v=()=>S?parseFloat(S.value)||0:F.value,y=()=>{const w=v();U.forEach(({button:k,value:$})=>{const G=$<=w?c.active:c.inactive;Object.assign(k.style,G)})};return V.forEach(({value:w,emoji:k,tooltip:$})=>{const H=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...R},k);H.title=$,H.type="button",H.addEventListener("click",G=>{G.preventDefault(),F.updateValue(w),S&&(S.value=w),y()}),H.addEventListener("mouseenter",()=>{w<=v()||(H.style.background=c.hover.background)}),H.addEventListener("mouseleave",()=>{y()}),U.push({button:H,value:w}),P.appendChild(H)}),y(),S&&(S.addEventListener("input",y),S.addEventListener("change",y)),P}},8355:(M,g,e)=>{e.d(g,{N4:()=>d,_7:()=>m,fO:()=>o});function o(i){if(!i)return[];const p=m(i).flat().filter(a=>a&&!a.isNegative&&a.term).map(a=>a.term);return[...new Set(p)]}function m(i){return i?i.toLowerCase().split(",").map(N).filter(Boolean):[]}function N(i){const s=i.split("/").map(a=>a.trim()).filter(Boolean);if(s.length===0)return null;const p=s.map(b).filter(Boolean);return p.length>0?p:null}function b(i){const s=i.startsWith("!"),p=s?i.slice(1).trim():i;return p?{term:p,isNegative:s}:null}function x(i,s){r(i,p=>p.style.display!=="none",s)}function d(i,s){r(i,p=>p.style.opacity==="",s)}function r(i,s,p){const a=[...i].filter(s).length;p.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${i.length}`}},5213:(M,g,e)=>{e.d(g,{b:()=>N});var o=e(9928),m=e(573);function N(b,x,d=!1,r="customFiltersContainer"){let i=(0,m.Fi)(`#${r}`,b);if(i)if(d)i.remove();else return;i=(0,o.Sw)(),i.id=r,x(i,b)}},8200:(M,g,e)=>{e.d(g,{s:()=>o});function o(m){const{target:N}=m,{type:b}=N;switch(b){case"text":return`"${N.value}"`;case"number":return N.value;case"select-one":return N.value;case"date":return`"${N.value}"`;case"checkbox":return N.checked;default:return console.log(`Unknown input type: ${b}`),null}}},157:(M,g,e)=>{e.d(g,{Fg:()=>o,vx:()=>N});const o=window.GM_setValue,m=window.GM.setValue,N=window.GM_getValue},1870:(M,g,e)=>{e.d(g,{j:()=>o});class o{constructor(N,b){this.value=N,this.onChange=b}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(M,g,e)=>{e.d(g,{V:()=>x});var o=e(1870),m=e(8200),N=e(3976),b=e(157);class x extends o.j{constructor(r,i=null,s=null){super((0,b.vx)(r,i),s),this.storageKey=r,this.defaultValue=i}static create(r,i=null,s=null){return new x(r,i,s)}static createWithCompositeKey(r,i,s=null,p=null){const a=`${r}-${i}`;return new x(a,s,p)}updateValueFromEvent=r=>{const i=(0,m.s)(r),s=(0,N.$)(i);this.updateValue(s)};updateValue(r,i=!0){this.value!==r&&((0,b.Fg)(this.storageKey,r),this.value=r,i&&this.onChangeIfDefined())}clearValue(r=!1){this.updateValue(null,r)}resetValue(r=!1){this.updateValue(this.defaultValue,r)}}},3976:(M,g,e)=>{e.d(g,{$:()=>o});function o(m){return m===""?null:JSON.parse(m)}},4214:(M,g,e)=>{e.d(g,{zr:()=>m});function o(d){return d.replace(/\D/g,"")}function m(d){return d.replace(/[^\d.,-]/g,"")}function N(d){return d.replace(/\s/g,"")}function b(d){return d.charAt(0).toUpperCase()+d.slice(1)}function x(d){return d.replace(/\s+/g," ").trim()}},5406:(M,g,e)=>{e.d(g,{z2:()=>p});function o(T,n="common",t=!1){const{pathname:E}=window.location;return m(E,T,n,t)}function m(T,n,t,E=!1){const f=T.split("/");n=n<0?f.length+n:n;const h=f[n]||t;return E&&console.log(`Pathname element: ${h}`),h}function N(T,n="common",t=!1){const E=o(T,"",t);return b(E,n,t)}function b(T,n,t){if(!T)return n;const E=T.split("-").at(-1);return t&&console.log(`Pathname element ending: ${E}`),E}function x(T,n,t="common",E=!1){const f=m(T,n,"",E);return b(f,t,E)}function d(T){return new URLSearchParams(window.location.search).get(T)}function r(T){return T.split("?")[0]}function i(T){return window.location.pathname.includes(T)}function s(T){return T.some(n=>i(n))}function p(...T){return window.location.pathname.split("/").some(t=>T.includes(t))}function a(T){try{const n=new URL(window.location.href);Object.entries(T).forEach(([t,E])=>{n.searchParams.set(t,E)}),window.location.href=n.toString()}catch(n){console.error("Failed to redirect:",n)}}function l(T,n=[]){const t={pathname:window.location.pathname};n.forEach(I=>{t[I]=d(I)});let E=!1;async function f(){if(E)return;const I={pathname:window.location.pathname};if(n.forEach(K=>{I[K]=d(K)}),Object.keys(t).some(K=>t[K]!==I[K])){Object.assign(t,I),E=!0;try{await T()}catch(K){console.error("Error in URL observer callback:",K)}finally{E=!1}}}function h(){f().catch(I=>{console.error("Error in URL change handler:",I)})}let A=window.location.href;setInterval(()=>{window.location.href!==A&&(A=window.location.href,h())},200),window.addEventListener("popstate",h)}function D(T=[]){l(()=>window.location.reload(),T)}},7926:(M,g,e)=>{e.d(g,{sV:()=>l,CU:()=>i,Jm:()=>T,Fr:()=>p,nd:()=>D,MB:()=>a,Su:()=>r,X0:()=>s});var o=e(157);function m(n,t=1e3){return Math.round((n+Number.EPSILON)*t)/t}function N(n){const t=n.slice().sort((f,h)=>f-h),E=Math.floor(t.length/2);return t.length%2!==0?t[E]:(t[E-1]+t[E])/2}function b(n,t){return Math.random()*(t-n)+n}const x="preferred-comment-counts",d=50;function r(n){(0,o.Fg)("newest-seen-product-id",n)}function i(){return(0,o.vx)("newest-seen-product-id")}function s(n){(0,o.Fg)("prev-newest-seen-product-id",n)}function p(){return(0,o.vx)("prev-newest-seen-product-id")}function a(){(0,o.Fg)("last-newest-seen-product-update",Date.now())}function l(){return(0,o.vx)("last-newest-seen-product-update")}function D(n){const t=(0,o.vx)(x,[]);t.push(n),t.length>d&&t.shift(),(0,o.Fg)(x,t)}function T(){const n=(0,o.vx)(x,[]);return n.length===0?null:N(n)}},9374:(M,g,e)=>{e.a(M,async(o,m)=>{try{var N=e(5406),b=e(468),x=e(7220);await d();async function d(){(0,N.z2)("new","search_result")?await(0,b.P)():(0,N.z2)("deals","coupons")&&await(0,x.O)()}m()}catch(d){m(d)}},1)},7220:(M,g,e)=>{e.d(g,{O:()=>Q});var o=e(573);const m={DEAL_ALERT_FORM_CONTENT:"#deal-alert-form-content",HIDE_TOP_COMMENTS_BUTTON:"#top-comments-open-close",OFFER:".text-2xl.font-bold.text-primary.mr-2",STICKY_HEADER:"#header-sticky-scroll",STICKY_HEADER_BUTTONS_CONTAINER:":scope > div.container > div.justify-end.items-center",COMMENTS_CONTAINER:"#comments",COMMENTS_LIST:"#comment-list",POST_BODY:'div[data-name="post[body]"]',MORE_REPLIES_LINK:"a.more-replies",COMMENT:'div[id^="post_"][id$="_new"]',COMMENT_TEXT_WRAP:'div[id^="parent_comment_"]',COMMENT_REACTIONS_CONTAINER:'[class^="given_reactions_"]',COMMENT_REACTION:"span.text-sm.text-secondary-text-light"};var N=e(4521),b=e(5213),x=e(6754),d=e(5013);const r={INPUT:{marginLeft:"7px",border:"2px solid #b3bcc5",borderRadius:"6px",padding:"7px 14px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"15px"}},i={FILTERS_CONTAINER:{display:"flex",flexFlow:"wrap",gap:"12px 16px",paddingBottom:"14px"},NUMBER_INPUT_SM:{...r.INPUT,width:"70px"},NUMBER_INPUT_MD:{...r.INPUT,width:"80px"},NUMBER_INPUT_LG:{...r.INPUT,width:"90px"},TEXT_INPUT:{...r.INPUT,width:"260px"},CHECKBOX_INPUT:{marginLeft:"7px",width:"26px",height:"26px"},CONTROL:r.CONTROL,PUSHED_RIGHT_CONTROL:{...r.CONTROL,marginLeft:"auto"}},s={DISLIKE_BUTTON:{marginLeft:"auto",gap:"8px"},DISLIKE_BUTTON_ICON_SM:{height:"0.9em",marginTop:"2px"},DISLIKE_BUTTON_ICON_MD:{marginTop:"2px"},SCROLL_TO_FILTERS_BUTTON:{position:"fixed",bottom:"20px",right:"20px",padding:"10px 20px 10px 14px",backgroundColor:"#005bff",color:"white",border:"none",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",cursor:"pointer",fontSize:"14px",transition:"background-color 0.3s",display:"none",gap:"4px",zIndex:5},CLONED_PRODUCT_CARDS_WRAP:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)"}},p={...d.B,FILTERS_CONTAINER:{...d.B.FILTERS_CONTAINER,padding:"15px 0px 12px",borderBottomWidth:"1px",top:"50px",zIndex:"9"},PUSHED_RIGHT_CONTROL:{...r.CONTROL,marginLeft:"auto"}};var a=e(7877),l=e(5884),D=e(5539),T=e(3829),n=e(4921);function t(u,O){u.forEach(_=>E(O,_))}function E(u,O){if(!O)return;const _=new RegExp(`(${O})`,"gi"),L=document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null);let B=L.nextNode();const W=[];for(;B;){const{textContent:z}=B;if(_.test(z)){const Y=document.createDocumentFragment();let J=0;z.replace(_,(q,oe,ie)=>{ie>J&&Y.appendChild(document.createTextNode(z.slice(J,ie)));const ee=document.createElement("span");ee.className="highlightedSubstring",ee.style.backgroundColor="yellow",ee.textContent=q,Y.appendChild(ee),J=ie+q.length}),J<z.length&&Y.appendChild(document.createTextNode(z.slice(J))),W.push({node:B,fragment:Y})}B=L.nextNode()}W.forEach(({node:z,fragment:Y})=>{z.parentNode.replaceChild(Y,z)})}function f(u){(0,o.fI)(".highlightedSubstring",u).forEach(_=>{const{parentNode:L}=_;_.replaceWith(_.textContent),L.normalize()})}var h=e(8355);function A(u,O){const _=(0,h.fO)(u.value);t(_,O)}function I(u,O){const _=getIncludedSearchStrings(u.value);O.forEach(L=>highlightSubstrings(_,L))}var K=e(9928),j=e(7926);const C={commentsContainer:null,commentsObserver:null,isFiltersInitialized:!1,filters:{commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},minReactionsSelect:null,lastStatsSnapshot:"",isMinReactionsAutoSelectActive:!0,commentsInfo:null,commentsCache:new WeakMap};async function Q(){F(),V(),await R(),await(0,n.Un)(c)}function F(){(0,D.ku)(m.DEAL_ALERT_FORM_CONTENT),S()}function S(){const u=(0,o.Fi)(m.HIDE_TOP_COMMENTS_BUTTON);u&&u.click()}async function R(){const u=(0,o.Fi)(m.OFFER);if(!u)return;const O=(0,o.Fi)(m.STICKY_HEADER);if(!O)return;const _=await(0,n.xk)(O,m.STICKY_HEADER_BUTTONS_CONTAINER);if(!_)return;const L=(0,K.Sw)({whiteSpace:"nowrap"},u.textContent);L.classList.add("font-bold","text-primary","mr-2"),_.prepend(L)}function V(){if(!C.isFiltersInitialized){const{createGlobalFilter:u}=(0,N.z)(U);C.filters.commentTextFilter=u("comments-text-filter"),C.filters.minReactionsFilter=u("comments-min-reactions-filter",0),C.filters.filterEnabled=u("comments-filter-enabled",!0),C.filters.autoExpandFilter=u("comments-auto-expand",!1),C.isFiltersInitialized=!0}}function c(){if(C.commentsContainer=(0,o.Fi)(m.COMMENTS_CONTAINER),!C.commentsContainer)return;(0,b.b)(C.commentsContainer,P),U(),C.commentsObserver&&(0,n.wP)(C.commentsObserver),C.commentsObserver=new MutationObserver(O=>{for(const _ of O)for(const L of _.addedNodes)if(L.nodeType===1&&(L.matches(m.COMMENT)||L.querySelector(m.COMMENT))){U();return}});const u=(0,o.Fi)(m.COMMENTS_LIST);C.commentsObserver.observe(u,{childList:!0,subtree:!0})}function P(u,O){(0,x.ZM)(u,p.FILTERS_CONTAINER);const _=(0,l.Nm)("\u0422\u0435\u043A\u0441\u0442:",C.filters.commentTextFilter,p.CONTROL,p.TEXT_INPUT),L=(0,l.SA)("\u0420\u0435\u0430\u043A\u0446\u0438\u0439: ",C.filters.minReactionsFilter,p.CONTROL,p.SELECT_INPUT),B=(0,a.pW)(C.filters.filterEnabled,p.CONTROL,p.CHECKBOX_INPUT),W=(0,l.Hw)("\u0410\u0432\u0442\u043E\u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435",C.filters.autoExpandFilter,p.CONTROL,p.CHECKBOX_INPUT);C.minReactionsSelect=L.querySelector("select"),C.commentsInfo=(0,K.Sw)(p.PUSHED_RIGHT_CONTROL),C.minReactionsSelect.addEventListener("change",Y=>{if(C.isMinReactionsAutoSelectActive=!1,parseInt(Y.target.value,10)===0)return;const q=Y.target.options[Y.target.selectedIndex],oe=parseInt(q.dataset.count,10);Number.isNaN(oe)||(0,j.nd)(oe)}),u.append(_,L,B,W,C.commentsInfo);const z=(0,o.Fi)(m.POST_BODY,O);O.insertBefore(u,z)}function U(){C.filters.autoExpandFilter.value&&v();const u=(0,o.fI)(m.COMMENT,C.commentsContainer);u.forEach(y),(0,h.N4)(u,C.commentsInfo),te(u)}function v(){(0,o.fI)(m.MORE_REPLIES_LINK,C.commentsContainer).forEach(O=>O.click())}function y(u){if(!C.filters.filterEnabled.value){k(u);return}f(u);let O=C.commentsCache.get(u);if(!O){const L=(0,o.Fi)(m.COMMENT_TEXT_WRAP,u);if(!L){k(u);return}const B=L.innerText,W=Z(u);O={commentText:B,commentTextWrap:L,reactionsCount:W},C.commentsCache.set(u,O)}C.filters.commentTextFilter.value&&A(C.filters.commentTextFilter,O.commentTextWrap);const _=(0,T.Ay)(O.commentText,C.filters.commentTextFilter)||(0,T.JE)(O.reactionsCount,C.filters.minReactionsFilter);$(u,_),G(u,_)}function w(u){(0,D.vJ)(u),u.style.maxHeight="",u.style.overflow=""}function k(u){w(u),G(u,!1)}function $(u,O){O?H(u):w(u)}function H(u){(0,D.iV)(u),u.style.maxHeight="83px",u.style.overflow="hidden"}function G(u,O){const _=C.commentsCache.get(u);if(_?.lastHoverState!==O){if(O){let L=null;u.onmouseenter=()=>{clearTimeout(L),L=setTimeout(()=>w(u),250)},u.onmouseleave=()=>{clearTimeout(L),H(u)}}else u.onmouseenter=null,u.onmouseleave=null;_&&(_.lastHoverState=O)}}function Z(u){const O=(0,o.Fi)(m.COMMENT_REACTIONS_CONTAINER,u);if(!O)return 0;const _=(0,o.fI)(m.COMMENT_REACTION,O);let L=0;return _.forEach(B=>{const W=parseInt(B.textContent.trim(),10);Number.isNaN(W)||(L+=W)}),L}function te(u){if(!C.minReactionsSelect)return;const O=ne(u),_=re(O),L=JSON.stringify(_);if(C.lastStatsSnapshot===L)return;C.lastStatsSnapshot=L,C.minReactionsSelect.innerHTML="";const B=document.createDocumentFragment();_.forEach(W=>{const z=document.createElement("option");z.value=W.value,z.textContent=W.label,z.dataset.count=W.count,B.appendChild(z)}),C.minReactionsSelect.appendChild(B),C.isMinReactionsAutoSelectActive&&ce(_),C.minReactionsSelect.value=C.filters.minReactionsFilter.value}function ne(u){const O=new Map;return u.forEach(_=>{const L=C.commentsCache.get(_);if(!L)return;const B=L.reactionsCount;O.set(B,(O.get(B)||0)+1)}),O.size===0&&O.set(0,0),O}function re(u){const O=Array.from(u.keys()).sort((B,W)=>B-W),_=new Array(O.length);let L=0;for(let B=O.length-1;B>=0;B--){const W=O[B];L+=u.get(W),_[B]={value:W,label:`${W}+ (${L})`,count:L}}return _}function ce(u){const O=(0,j.Jm)();if(O===null||u.length===0)return;let _=u[0],L=1/0;for(const B of u){const W=le(B.count,O);W<L?(L=W,_=B):Math.abs(W-L)<.01&&B.count>_.count&&(_=B)}_.value===0&&(_=ae(_,u)),C.filters.minReactionsFilter.value!==_.value&&C.filters.minReactionsFilter.updateValue(_.value)}function le(u,O){const _=u-O,L=1.8;return _>=0?_:Math.abs(_)*L}function ae(u,O){const _=O.find(B=>B.value>0&&B.count>0);return _&&de(u.count,_.count)?_:u}function de(u,O){return u<=3?!1:u>=9?O>=1:u>=7?O>=2:O>=3}function me(){C.commentsContainer=null,C.isFiltersInitialized=!1,C.filters={commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},C.minReactionsSelect=null,C.lastStatsSnapshot="",C.isMinReactionsAutoSelectActive=!0,C.commentsInfo=null,C.commentsCache=new WeakMap,clearObserver(C.commentsObserver)}},5013:(M,g,e)=>{e.d(g,{B:()=>m});const o={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},m={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",marginBottom:".5rem",backgroundColor:"#fff",borderColor:"rgb(229, 229, 229)",position:"sticky"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...o.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...o.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},SELECT_INPUT:{...o.INPUT,width:"100px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...o.INPUT,width:"24px",height:"24px"}}},468:(M,g,e)=>{e.d(g,{P:()=>E});var o=e(573);const m={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a",PRODUCT_PRICE:"div.md\\:text-xll.text-lg.font-bold.text-primary.mr-2"};var N=e(4521),b=e(5213),x=e(6754),d=e(5013);const r={...d.B,FILTERS_CONTAINER:{...d.B.FILTERS_CONTAINER,padding:"11px 19px",borderWidth:"1px",borderRadius:"10px",top:"-1px",zIndex:"11"}};var i=e(7877),s=e(5884),p=e(5539),a=e(3829),l=e(7926);const D={ID_BADGE_APPENDED:"idBadgeAppended",SEEN_PRODUCT_CARD:"seenProductCard",MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"};var T=e(4921),n=e(9928);const t={productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},prevNewestSeenProductId:null};async function E(){f(),h(),await A(),await P()}function f(){t.prevNewestSeenProductId=(0,l.Fr)()}function h(){if(!t.isFiltersInitialized){const{createGlobalFilter:v}=(0,N.z)(A);t.filters.nameFilter=v("name-filter"),t.filters.minVotesFilter=v("min-votes-filter",50),t.filters.maxPriceFilter=v("max-price-filter"),t.filters.showExpiredFilter=v("show-expired-filter",!1),t.filters.filterEnabled=v("filter-enabled",!0),t.isFiltersInitialized=!0}}function A(){const v=(0,o.fI)(m.PRODUCT_CARD);if(v.length){const y=v[0].parentElement;(0,b.b)(y,I),K(),t.productListObserver&&(0,T.wP)(t.productListObserver),t.productListObserver=new MutationObserver(K),t.productListObserver.observe(y,{childList:!0,subtree:!0})}}function I(v,y){(0,x.ZM)(v,r.FILTERS_CONTAINER);const w=(0,i.E9)(t.filters.nameFilter,r.CONTROL,r.TEXT_INPUT),k=(0,s.nW)("\u041C\u0438\u043D. \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",t.filters.minVotesFilter,"50","0","10000",r.CONTROL,r.NUMBER_INPUT),$=(0,i.H1)(t.filters.maxPriceFilter,r.CONTROL,r.NUMBER_INPUT),H=(0,s.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",t.filters.showExpiredFilter,r.CONTROL,r.CHECKBOX_INPUT),G=(0,i.pW)(t.filters.filterEnabled,r.CONTROL,r.CHECKBOX_INPUT);v.append(w,k,$,H,G),y.prepend(v)}function K(){(0,o.fI)(m.PRODUCT_CARD).forEach(j);const y=(0,o.Fi)(`[${D.SEEN_PRODUCT_CARD}]`);y&&(y.style.marginTop="45px")}function j(v){const y=(0,o.Fi)(m.PRODUCT_CARD_LINK,v),w=C(y);if(Q(v,w),F(w,v),S(v,w),!t.filters.filterEnabled.value){(0,p.vJ)(v);return}if(v.classList.contains("expired-view")&&!t.filters.showExpiredFilter.value){(0,p.iV)(v);return}const $=(0,o.Fi)(m.PRODUCT_CARD_RATING,v);if($.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const H=(0,o.Fi)(m.PRODUCT_NAME,v),G=(0,o.Fi)(m.PRODUCT_PRICE,v),Z=H.innerText,te=(0,o.YA)($,!0),ne=(0,o.YA)(G,!0),re=(0,a.Ay)(Z,t.filters.nameFilter)||(0,a.JE)(te,t.filters.minVotesFilter)||(0,a.iG)(ne,t.filters.maxPriceFilter);(0,p.D9)(v,re)}function C(v){return+v.getAttribute("href").split("-").pop()}function Q(v,y){if(v.hasAttribute(D.ID_BADGE_APPENDED))return;const w=v.querySelector(".md\\:col-start-2.row-start-1 .flex.items-center");if(!w)return;const k=(0,n.VI)({marginRight:"10px"},`#${y}`);k.className="product-id-badge text-secondary-text-light dark:text-secondary-text-dark text-xs",v.addEventListener("mouseenter",()=>{const $=y-t.prevNewestSeenProductId,H=$>0?"+":"";k.textContent=`#${y} (${H}${$})`}),v.addEventListener("mouseleave",()=>{k.textContent=`#${y}`}),w.insertBefore(k,w.firstChild),v.setAttribute(D.ID_BADGE_APPENDED,"")}function F(v,y){y.style.removeProperty("margin-top"),v>t.prevNewestSeenProductId?(y.style.border="3px solid #8ab854",y.removeAttribute(D.SEEN_PRODUCT_CARD)):(y.style.removeProperty("border"),y.setAttribute(D.SEEN_PRODUCT_CARD,""))}function S(v,y){v.hasAttribute(D.MARK_AS_NEWEST_SEEN_APPENDED)||(v.addEventListener("mousedown",w=>{if(w.button===1&&!w.target.closest("a")){const k=y-(0,l.CU)(),$=(0,l.sV)(),H=R($),G=["\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?","",`\u041D\u043E\u0432\u044B\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432: ~${k}`];H&&G.push(`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E: ${H}`);const Z=G.join(`
`);confirm(Z)&&(c(y),w.preventDefault())}}),v.setAttribute(D.MARK_AS_NEWEST_SEEN_APPENDED,""))}function R(v){const y=v?new Date(v):null;if(!y)return null;const w=Math.floor((Date.now()-y.getTime())/6e4);return V(w)}function V(v){const y=Math.floor(v/1440),w=Math.floor(v%1440/60),k=v%60;return y>0?`${y} \u0434. ${w} \u0447. ${k} \u043C.`:w>0?`${w} \u0447. ${k} \u043C.`:`${k} \u043C.`}function c(v){const y=(0,l.CU)();(0,l.X0)(y),(0,l.Su)(v),(0,l.MB)(),t.prevNewestSeenProductId=y,K()}async function P(){const v=(0,o.Fi)(m.DISCUSSIONS);v&&(v.style.position="sticky",v.style.top="0")}function U(){t.isFiltersInitialized=!1,t.filters={nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},t.prevNewestSeenProductId=null,clearObserver(t.productListObserver)}}},ue={};function X(M){var g=ue[M];if(g!==void 0)return g.exports;var e=ue[M]={exports:{}};return se[M](e,e.exports,X),e.exports}(()=>{var M=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",g=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",o=N=>{N&&N.d<1&&(N.d=1,N.forEach(b=>b.r--),N.forEach(b=>b.r--?b.r++:b()))},m=N=>N.map(b=>{if(b!==null&&typeof b=="object"){if(b[M])return b;if(b.then){var x=[];x.d=0,b.then(i=>{d[g]=i,o(x)},i=>{d[e]=i,o(x)});var d={};return d[M]=i=>i(x),d}}var r={};return r[M]=i=>{},r[g]=b,r});X.a=(N,b,x)=>{var d;x&&((d=[]).d=-1);var r=new Set,i=N.exports,s,p,a,l=new Promise((D,T)=>{a=T,p=D});l[g]=i,l[M]=D=>(d&&D(d),r.forEach(D),l.catch(T=>{})),N.exports=l,b(D=>{s=m(D);var T,n=()=>s.map(E=>{if(E[e])throw E[e];return E[g]}),t=new Promise(E=>{T=()=>E(n),T.r=0;var f=h=>h!==d&&!r.has(h)&&(r.add(h),h&&!h.d&&(T.r++,h.push(T)));s.map(h=>h[M](f))});return T.r?t:n()},D=>(D?a(l[e]=D):p(i),o(d))),d&&d.d<0&&(d.d=0)}})(),X.d=(M,g)=>{for(var e in g)X.o(g,e)&&!X.o(M,e)&&Object.defineProperty(M,e,{enumerable:!0,get:g[e]})},X.o=(M,g)=>Object.prototype.hasOwnProperty.call(M,g);var fe=X(9374)})();})();
