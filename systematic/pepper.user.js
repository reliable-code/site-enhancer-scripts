// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76816607
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Q={5467:(y,C,e)=>{e.d(C,{E2:()=>f});var c=e(9928);function f(O,l={},t=null){const p=(0,c.Sw)(l,t);return p.append(O),p}function b(O,l=null,t={},p={}){const o=createActionLink(O,l,p);return f(o,t)}function h(O,l=null,t=null,p={},o={}){const E=createActionLinkWithIcon(O,t,l,o);return f(E,p)}},9928:(y,C,e)=>{e.d(C,{S:()=>l,Sw:()=>P,kU:()=>b,o5:()=>h});var c=e(4921),f=e(6754);function b(n,a,i){const S=t(n,"text",a);return S.value=i,S}function h(n,a,i,S,w,B){const V=t(n,"number",a);return V.value=i,V.step=S,V.min=w,V.max=B,V}function O(n,a,i){const S=t(n,"date",a);return S.value=i,S}function l(n,a,i){const S=t(n,"checkbox",a);return S.checked=i,S}function t(n={},a=null,i=null){const S=m("input",n);return a&&(S.type=a),i&&(S.addEventListener("keyup",(0,c.sg)(i,200)),S.addEventListener("change",(0,c.sg)(i,100))),S}function p(n={},a=null){return m("span",n,a)}function o(n={},a=null,i=null){const S=m("a",n,a);return i&&(S.href=i),S}function E(n,a=null,i={}){i.cursor||="pointer";const S=o(i,a);return n&&S.addEventListener("click",n),S}function D(n,a,i=null,S={},w={}){S.display||="inline-flex",S.alignItems||="center",S.gap||="0.25em";const B=E(n,i,S);return B.prepend(u(a,w)),B}function I(n={},a=null,i=null){const S=m("button",n,a);return i&&S.addEventListener("click",i),S}function P(n={},a=null){return m("div",n,a)}function v(n={}){return m("i",n)}function u(n,a={}){a.width||="1em",a.height||="1em",a.paddingBottom||="1px";const i=v(a);return i.setAttribute("data-lucide",n),i}function m(n,a,i=null){if(typeof a!="object"||a===null)throw new TypeError("styles should be an object");const S=document.createElement(n);return(0,f.ZM)(S,a),i&&(S.innerHTML=i),S}},573:(y,C,e)=>{e.d(C,{Fi:()=>b,YA:()=>p,fI:()=>h});var c=e(4214);function f(u,m=document){return!!m.querySelector(u)}function b(u,m=document,n=!1){const a=m.querySelector(u);return n&&!a&&console.log(`No element found for selector: ${u}`),a}function h(u,m=document,n=!1){const a=m.querySelectorAll(u);return n&&!a.length&&console.log(`No elements found for selector: ${u}`),a}function O(u,m=1){let n=u;for(let a=0;a<m;a++){if(!n.parentElement)return null;n=n.parentElement}return n}function l(u,m,n){return[...u.querySelectorAll(m)].find(a=>a.textContent.trim().includes(n))}function t(u,m,n=!1,a=!1,i=null){const S=b(m,u);return p(S,n,a,i)}function p(u,m=!1,n=!1,a=null){if(!u)return a===null?(console.log("No element found"),null):a;const i=u.innerText;return D(i,m,n)}function o(u,m,n=!1){const a=u[m];return p(a,n)}function E(u,m=!1,n=!1){const a=u.textContent;return D(a,m,n)}function D(u,m,n){m&&(u=(0,c.zr)(u)),n&&(u=u.replace(",","."));const a=Number(u);return Number.isNaN(a)?(console.log(`Invalid number: ${u}`),0):a}function I(u){return[...u.childNodes].find(m=>m.nodeType===Node.TEXT_NODE)}function P(u){const m=n=>n.nodeType===Node.TEXT_NODE&&n.textContent.trim()!==""?[n]:[...n.childNodes].flatMap(m);return m(u)}function v(u){return normalizeSpacing(u.textContent)}},5539:(y,C,e)=>{e.d(C,{D9:()=>m,iV:()=>a,vJ:()=>n});function c(r,x){r.parentNode.insertBefore(x,r.nextSibling)}function f(r){r.style.display="none"}function b(r,x=1){const R=document.querySelector(r);R&&h(R,x)}function h(r,x=1){const R=getElementAncestor(r,x);R&&f(R)}function O(r){I(r),f(r)}function l(r){r.intersectionObserver||runOnceOnIntersection(r,()=>f(r))}function t(r){r.style.display=""}function p(r){const x=D(r);r.style.display=x}function o(r,x){x?f(r):t(r)}function E(r,x){x?l(r):(clearIntersectionObserver(r),t(r))}function D(r){return I(r),r.defaultDisplay}function I(r){if(r.defaultDisplay)return;const{display:x}=getComputedStyle(r);r.defaultDisplay=x}function P(){return{show:[],hide:[]}}function v(r,x,R){r?x.hide.push(R):x.show.push(R)}function u(r){r.show.forEach(t),r.hide.forEach(f)}function m(r,x,R=.3){x?a(r,R):n(r)}function n(r){r.style.opacity=""}function a(r,x=.3){r.style.opacity=x}function i(r){r.style.order=""}function S(r,x){r.style.order=x}function w(r,x){r.style.background=x}function B(r,x){const R=getFirstElement(x);R&&V(r,R)}function V(r,x){const R=createLink();R.href=r,x.parentNode.append(R),R.append(x)}function z(r,x){const R=getFirstElement(x);R&&T(r,R)}function T(r,x,R={}){const W=createLink(R);W.href=r,W.append(...x.childNodes),x.append(W)}function g(){const r=getURLQueryParam("scrollTo");if(!r)return;const x=document.getElementById(r);x?x.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function F(r,x,R=null){const W=`${x}-click-passed`,d=R?N=>findElementByText(N,r,R):N=>getFirstElement(r,N);return function(N){if(N.hasAttribute(W))return!1;const s=d(N);return s&&s.click(),N.setAttribute(W,""),!0}}function M(r,x,R="text/plain"){const W=new Blob([r],{type:R}),d=URL.createObjectURL(W),N=document.createElement("a");N.href=d,N.download=x,document.body.appendChild(N),N.click(),document.body.removeChild(N),requestAnimationFrame(()=>URL.revokeObjectURL(d))}},6754:(y,C,e)=>{e.d(C,{ZM:()=>c});function c(O,l){Object.assign(O.style,l)}function f(O,l="custom-global-style"){let t=document.getElementById(l);t||(t=document.createElement("style"),t.id=l,t.type="text/css",document.head.appendChild(t)),t.textContent=O}function b(O){return Object.entries(O).map(([l,t])=>`${l.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function h(O){return O?O.split(";").filter(l=>l.trim()!=="").reduce((l,t)=>{const[p,o]=t.split(":").map(D=>D.trim()),E=p.replace(/-([a-z])/g,(D,I)=>I.toUpperCase());return l[E]=o,l},{}):{}}},4921:(y,C,e)=>{e.d(C,{sg:()=>h,wP:()=>p});function c(o,E,D=null){const I=o.querySelector(E);return I?Promise.resolve(I):new Promise(P=>{const v=new MutationObserver(m);v.observe(o,{childList:!0,subtree:!0});let u;D&&(u=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${E}`),P(null)},D));function m(){const n=o.querySelector(E);n&&(u&&clearTimeout(u),v.disconnect(),P(n))}})}function f(o,E){return o.querySelector(E)?new Promise(I=>{const P=new MutationObserver(v);P.observe(o,{childList:!0,subtree:!0});function v(){o.querySelector(E)||(P.disconnect(),I())}}):Promise.resolve()}function b(o,E=400){return new Promise(D=>{let I;const P=new MutationObserver(()=>{clearTimeout(I),v()});function v(){I=setTimeout(()=>{P.disconnect(),D()},E)}v(),P.observe(o,{childList:!0,subtree:!0})})}function h(o,E=250){let D;return(...I)=>{clearTimeout(D),D=setTimeout(()=>o(...I),E)}}async function O(o){document.visibilityState==="visible"?await o():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await o()},{once:!0})}function l(o,E){const D=new IntersectionObserver(I=>{I.forEach(P=>{P.isIntersecting&&(E(),t(o))})});o.intersectionObserver=D,D.observe(o)}function t(o){o.intersectionObserver&&(o.intersectionObserver.disconnect(),o.intersectionObserver=null)}function p(o){o&&(o.disconnect(),o=null)}},3829:(y,C,e)=>{e.d(C,{Ay:()=>f,JE:()=>h,iG:()=>O});var c=e(8355);function f(o,E){return!b(o,E)}function b(o,E){if(!E.value)return!0;const D=o.toLowerCase(),I=(0,c.R)(E),P=[],v=[];return I.forEach(u=>{if(u.startsWith("!")){const m=u.substring(1);m&&v.push(m)}else P.push(u)}),P.every(u=>D.includes(u))&&v.every(u=>!D.includes(u))}function h(o,E){return E.value!=null&&o<E.value}function O(o,E){return E.value!=null&&o>E.value}function l(o,E){return E.value==null?!1:o<parseDateFromISO(E.value)}function t(o,E){return E.value==null?!1:o>parseDateFromISO(E.value)}function p(o,E){return E.value&&o!==E.value}},4521:(y,C,e)=>{e.d(C,{z:()=>f});var c=e(3048);function f(b,h=null){return{createGlobalFilter(O,l=null,t=b){return c.V.create(O,l,t)},createSectionFilter(O,l=null,t=b){if(!h)throw new Error("sectionId must be provided to use createSectionFilter.");return c.V.createWithCompositeKey(h,O,l,t)}}}},5884:(y,C,e)=>{e.d(C,{Hw:()=>l,Nm:()=>b,nW:()=>h});var c=e(9928),f=e(5467);function b(t,p,o={},E={}){const D=(0,c.kU)(E,p.updateValueFromEvent,p.value);return(0,f.E2)(D,o,t)}function h(t,p,o,E,D,I={},P={}){const v=(0,c.o5)(P,p.updateValueFromEvent,p.value,o,E,D);return(0,f.E2)(v,I,t)}function O(t,p,o={},E={}){const D=createDateInput(E,p.updateValueFromEvent,p.value);return createControl(D,o,t)}function l(t,p,o={},E={}){const D=(0,c.S)(E,p.updateValueFromEvent,p.value);return(0,f.E2)(D,o,t)}},7877:(y,C,e)=>{e.d(C,{E9:()=>f,H1:()=>v,pW:()=>V});var c=e(5884);function f(T,g={},F={}){return(0,c.Nm)("\u041F\u043E\u0438\u0441\u043A: ",T,g,F)}function b(T,g={},F={},M=.1,r=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",T,M,r,5,g,F)}function h(T,g={},F={},M=.1,r=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",T,M,r,5,g,F)}function O(T,g={},F={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",T,g,F)}function l(T,g={},F={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",T,g,F)}function t(T,g,F={},M={}){return createNumberFilterControl(T,g,"1","1","999999",F,M)}function p(T,g={},F={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",T,g,F)}function o(T,g={},F={}){return E("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",T,g,F)}function E(T,g,F={},M={}){return createNumberFilterControl(T,g,"5","0","100",F,M)}function D(T,g={},F={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",T,"5","0","100",g,F)}function I(T,g,F={},M={},r="250"){return(0,c.nW)(T,g,r,"0","1000000",F,M)}function P(T,g={},F={},M="25"){return I("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",T,g,F,M)}function v(T,g={},F={},M="25"){return I("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",T,g,F,M)}function u(T,g={},F={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",T,g,F)}function m(T,g,F={},M={}){return createNumberFilterControl(T,g,"1","0","99999",F,M)}function n(T,g={},F={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",T,"1","2","7",g,F)}function a(T,g={},F={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",T,1,1,10,g,F)}function i(T,g={},F={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",T,g,F)}function S(T,g={},F={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",T,g,F)}function w(T,g={},F={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",T,g,F)}function B(T,g={},F={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",T,g,F)}function V(T,g={},F={}){return(0,c.Hw)("\u0412\u043A\u043B: ",T,g,F)}function z(T,g,F={}){const M=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],r={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},x=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),R=[],W=()=>g?parseFloat(g.value)||0:T.value,d=()=>{const N=W();R.forEach(({button:s,value:_})=>{const A=_<=N?r.active:r.inactive;Object.assign(s.style,A)})};return M.forEach(({value:N,emoji:s,tooltip:_})=>{const L=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...F},s);L.title=_,L.type="button",L.addEventListener("click",A=>{A.preventDefault(),T.updateValue(N),g&&(g.value=N),d()}),L.addEventListener("mouseenter",()=>{N<=W()||(L.style.background=r.hover.background)}),L.addEventListener("mouseleave",()=>{d()}),R.push({button:L,value:N}),x.appendChild(L)}),d(),g&&(g.addEventListener("input",d),g.addEventListener("change",d)),x}},8355:(y,C,e)=>{e.d(C,{R:()=>c,f:()=>f});function c(b){return b.value.toLowerCase().split(",").map(h=>h.trim()).filter(h=>h!=="")}function f(b){return c(b).filter(h=>!h.startsWith("!"))}},5213:(y,C,e)=>{e.d(C,{b:()=>b});var c=e(9928),f=e(573);function b(h,O,l=!1,t="customFiltersContainer"){let p=(0,f.Fi)(`#${t}`,h);if(p)if(l)p.remove();else return;p=(0,c.Sw)(),p.id=t,O(p,h)}},8200:(y,C,e)=>{e.d(C,{s:()=>c});function c(f){const{target:b}=f,{type:h}=b;switch(h){case"text":return`"${b.value}"`;case"number":return b.value;case"date":return`"${b.value}"`;case"checkbox":return b.checked;default:return console.log(`Unknown input type: ${h}`),null}}},157:(y,C,e)=>{e.d(C,{Fg:()=>c,vx:()=>b});const c=window.GM_setValue,f=window.GM.setValue,b=window.GM_getValue},1870:(y,C,e)=>{e.d(C,{j:()=>c});class c{constructor(b,h){this.value=b,this.onChange=h}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(y,C,e)=>{e.d(C,{V:()=>O});var c=e(1870),f=e(8200),b=e(3976),h=e(157);class O extends c.j{constructor(t,p=null,o=null){super((0,h.vx)(t,p),o),this.storageKey=t,this.defaultValue=p}static create(t,p=null,o=null){return new O(t,p,o)}static createWithCompositeKey(t,p,o=null,E=null){const D=`${t}-${p}`;return new O(D,o,E)}updateValueFromEvent=t=>{const p=(0,f.s)(t),o=(0,b.$)(p);this.updateValue(o)};updateValue(t,p=!0){this.value!==t&&((0,h.Fg)(this.storageKey,t),this.value=t,p&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(y,C,e)=>{e.d(C,{$:()=>c});function c(f){return f===""?null:JSON.parse(f)}},4214:(y,C,e)=>{e.d(C,{zr:()=>f});function c(l){return l.replace(/\D/g,"")}function f(l){return l.replace(/[^\d.,-]/g,"")}function b(l){return l.replace(/\s/g,"")}function h(l){return l.charAt(0).toUpperCase()+l.slice(1)}function O(l){return l.replace(/\s+/g," ").trim()}},5406:(y,C,e)=>{e.d(C,{z2:()=>E});function c(v,u="common",m=!1){const{pathname:n}=window.location;return f(n,v,u,m)}function f(v,u,m,n=!1){const a=v.split("/");u=u<0?a.length+u:u;const i=a[u]||m;return n&&console.log(`Pathname element: ${i}`),i}function b(v,u="common",m=!1){const n=c(v,"",m);return h(n,u,m)}function h(v,u,m){if(!v)return u;const n=v.split("-").at(-1);return m&&console.log(`Pathname element ending: ${n}`),n}function O(v,u,m="common",n=!1){const a=f(v,u,"",n);return h(a,m,n)}function l(v){return new URLSearchParams(window.location.search).get(v)}function t(v){return v.split("?")[0]}function p(v){return window.location.pathname.includes(v)}function o(v){return v.some(u=>p(u))}function E(...v){return window.location.pathname.split("/").some(m=>v.includes(m))}function D(v){try{const u=new URL(window.location.href);Object.entries(v).forEach(([m,n])=>{u.searchParams.set(m,n)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function I(v,u=[]){const m={pathname:window.location.pathname};u.forEach(w=>{m[w]=l(w)});let n=!1;async function a(){if(n)return;const w={pathname:window.location.pathname};if(u.forEach(B=>{w[B]=l(B)}),Object.keys(m).some(B=>m[B]!==w[B])){Object.assign(m,w),n=!0;try{await v()}catch(B){console.error("Error in URL observer callback:",B)}finally{n=!1}}}function i(){a().catch(w=>{console.error("Error in URL change handler:",w)})}let S=window.location.href;setInterval(()=>{window.location.href!==S&&(S=window.location.href,i())},200),window.addEventListener("popstate",i)}function P(v=[]){I(()=>window.location.reload(),v)}},9374:(y,C,e)=>{e.a(y,async(c,f)=>{try{var b=e(5406),h=e(2372),O=e(6242);await l();async function l(){(0,b.z2)("new","search_result")?await(0,h.P)():(0,b.z2)("deals","coupons")&&await(0,O.O)()}f()}catch(l){f(l)}},1)},6242:(y,C,e)=>{e.d(C,{O:()=>S});var c=e(573);const f={COMMENTS_CONTAINER:"#comments",COMMENTS_LIST:"#comment-list",POST_BODY:'div[data-name="post[body]"]',MORE_REPLIES_LINK:"a.more-replies",COMMENT:'div[id^="post_"][id$="_new"]',COMMENT_TEXT_WRAP:'div[id^="parent_comment_"]',COMMENT_REACTIONS_CONTAINER:'[class^="given_reactions_"]',COMMENT_REACTION:"span.text-sm.text-secondary-text-light"};var b=e(4521),h=e(5213),O=e(6754),l=e(5013);const t={...l.B,FILTERS_CONTAINER:{...l.B.FILTERS_CONTAINER,padding:"15px 0px 12px",borderBottomWidth:"1px",top:"50px",zIndex:"9"}};var p=e(7877),o=e(5884),E=e(5539),D=e(3829),I=e(4921);function P(d,N){d.forEach(s=>v(N,s))}function v(d,N){if(!N)return;const s=new RegExp(`(${N})`,"gi"),_=document.createTreeWalker(d,NodeFilter.SHOW_TEXT,null);let L=_.nextNode();const A=[];for(;L;){const{textContent:U}=L;if(s.test(U)){const k=document.createDocumentFragment();let K=0;U.replace(s,(G,Y,j)=>{j>K&&k.appendChild(document.createTextNode(U.slice(K,j)));const H=document.createElement("span");H.className="highlightedSubstring",H.style.backgroundColor="yellow",H.textContent=G,k.appendChild(H),K=j+G.length}),K<U.length&&k.appendChild(document.createTextNode(U.slice(K))),A.push({node:L,fragment:k})}L=_.nextNode()}A.forEach(({node:U,fragment:k})=>{U.parentNode.replaceChild(k,U)})}function u(d){(0,c.fI)(".highlightedSubstring",d).forEach(s=>{const{parentNode:_}=s;s.replaceWith(s.textContent),_.normalize()})}var m=e(8355);function n(d,N){const s=(0,m.f)(d);P(s,N)}function a(d,N){const s=getIncludedSearchStrings(d);N.forEach(_=>highlightSubstrings(s,_))}const i={commentsObserver:null,isFiltersInitialized:!1,filters:{commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null}};async function S(){w(),await B()}function w(){if(!i.isFiltersInitialized){const{createGlobalFilter:d}=(0,b.z)(B);i.filters.commentTextFilter=d("comments-text-filter"),i.filters.minReactionsFilter=d("comments-min-reactions-filter",0),i.filters.filterEnabled=d("comments-filter-enabled",!0),i.filters.autoExpandFilter=d("comments-auto-expand",!1),i.isFiltersInitialized=!0}}function B(){const d=(0,c.Fi)(f.COMMENTS_CONTAINER);if(!d)return;(0,h.b)(d,V),z(d),i.commentsObserver&&(0,I.wP)(i.commentsObserver),i.commentsObserver=new MutationObserver(()=>z(d));const N=(0,c.Fi)(f.COMMENTS_LIST);i.commentsObserver.observe(N,{childList:!0,subtree:!0})}function V(d,N){(0,O.ZM)(d,t.FILTERS_CONTAINER);const s=(0,o.Nm)("\u0422\u0435\u043A\u0441\u0442:",i.filters.commentTextFilter,t.CONTROL,t.TEXT_INPUT),_=(0,o.nW)("\u041C\u0438\u043D. \u0440\u0435\u0430\u043A\u0446\u0438\u0439: ",i.filters.minReactionsFilter,"1","0","9999",t.CONTROL,t.NUMBER_INPUT),L=(0,p.pW)(i.filters.filterEnabled,t.CONTROL,t.CHECKBOX_INPUT),A=(0,o.Hw)("\u0410\u0432\u0442\u043E\u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435",i.filters.autoExpandFilter,t.CONTROL,t.CHECKBOX_INPUT);d.append(s,_,L,A);const U=(0,c.Fi)(f.POST_BODY,N);N.insertBefore(d,U)}function z(d){i.filters.autoExpandFilter.value&&T(d),(0,c.fI)(f.COMMENT,d).forEach(g)}function T(d){(0,c.fI)(f.MORE_REPLIES_LINK,d).forEach(s=>s.click())}function g(d){if(F(d),!i.filters.filterEnabled.value)return;u(d);const N=(0,c.Fi)(f.COMMENT_TEXT_WRAP,d);if(!N){F(d);return}const s=N.innerText,_=R(d);i.filters.commentTextFilter.value&&n(i.filters.commentTextFilter,N);const L=(0,D.Ay)(s,i.filters.commentTextFilter)||(0,D.JE)(_,i.filters.minReactionsFilter);M(d,L),x(d,L)}function F(d){(0,E.vJ)(d),d.style.maxHeight="",d.style.overflow=""}function M(d,N){N?r(d):F(d)}function r(d){(0,E.iV)(d),d.style.maxHeight="83px",d.style.overflow="hidden"}function x(d,N){N?(d.onmouseenter=()=>F(d),d.onmouseleave=()=>r(d)):(d.onmouseenter=null,d.onmouseleave=null)}function R(d){const N=(0,c.Fi)(f.COMMENT_REACTIONS_CONTAINER,d);if(!N)return 0;const s=(0,c.fI)(f.COMMENT_REACTION,N);let _=0;return s.forEach(L=>{const A=parseInt(L.textContent.trim(),10);Number.isNaN(A)||(_+=A)}),_}function W(){i.isFiltersInitialized=!1,i.filters={commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},clearObserver(i.commentsObserver)}},5013:(y,C,e)=>{e.d(C,{B:()=>f});const c={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},f={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",marginBottom:".5rem",backgroundColor:"#fff",borderColor:"rgb(229, 229, 229)",position:"sticky"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...c.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...c.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...c.INPUT,width:"24px",height:"24px"}}},2372:(y,C,e)=>{e.d(C,{P:()=>B});var c=e(573);const f={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a",PRODUCT_PRICE:"div.md\\:text-xll.text-lg.font-bold.text-primary.mr-2"};var b=e(4521),h=e(5213),O=e(6754),l=e(5013);const t={...l.B,FILTERS_CONTAINER:{...l.B.FILTERS_CONTAINER,padding:"11px 19px",borderWidth:"1px",borderRadius:"10px",top:"-1px",zIndex:"11"}};var p=e(7877),o=e(5884),E=e(5539),D=e(3829),I=e(157);function P(s){(0,I.Fg)("newest-seen-product-id",s)}function v(){return(0,I.vx)("newest-seen-product-id")}function u(s){(0,I.Fg)("prev-newest-seen-product-id",s)}function m(){return(0,I.vx)("prev-newest-seen-product-id")}function n(){(0,I.Fg)("last-newest-seen-product-update",Date.now())}function a(){return(0,I.vx)("last-newest-seen-product-update")}const i={MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"};var S=e(4921);const w={productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null}};async function B(){V(),await z(),await d()}function V(){if(!w.isFiltersInitialized){const{createGlobalFilter:s}=(0,b.z)(z);w.filters.nameFilter=s("name-filter"),w.filters.minVotesFilter=s("min-votes-filter",50),w.filters.maxPriceFilter=s("max-price-filter"),w.filters.showExpiredFilter=s("show-expired-filter",!1),w.filters.filterEnabled=s("filter-enabled",!0),w.isFiltersInitialized=!0}}function z(){const s=(0,c.fI)(f.PRODUCT_CARD);if(s.length){const _=s[0].parentElement;(0,h.b)(_,T),g(),w.productListObserver&&(0,S.wP)(w.productListObserver),w.productListObserver=new MutationObserver(g),w.productListObserver.observe(_,{childList:!0,subtree:!0})}}function T(s,_){(0,O.ZM)(s,t.FILTERS_CONTAINER);const L=(0,p.E9)(w.filters.nameFilter,t.CONTROL,t.TEXT_INPUT),A=(0,o.nW)("\u041C\u0438\u043D. \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",w.filters.minVotesFilter,"50","0","10000",t.CONTROL,t.NUMBER_INPUT),U=(0,p.H1)(w.filters.maxPriceFilter,t.CONTROL,t.NUMBER_INPUT),k=(0,o.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",w.filters.showExpiredFilter,t.CONTROL,t.CHECKBOX_INPUT),K=(0,p.pW)(w.filters.filterEnabled,t.CONTROL,t.CHECKBOX_INPUT);s.append(L,A,U,k,K),_.prepend(s)}function g(){(0,c.fI)(f.PRODUCT_CARD).forEach(F)}function F(s){const _=(0,c.Fi)(f.PRODUCT_CARD_LINK,s),L=M(_);if(r(L,s),x(s,_,L),!w.filters.filterEnabled.value){(0,E.vJ)(s);return}if(s.classList.contains("expired-view")&&!w.filters.showExpiredFilter.value){(0,E.iV)(s);return}const U=(0,c.Fi)(f.PRODUCT_CARD_RATING,s);if(U.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const k=(0,c.Fi)(f.PRODUCT_NAME,s),K=(0,c.Fi)(f.PRODUCT_PRICE,s),G=k.innerText,Y=(0,c.YA)(U,!0),j=(0,c.YA)(K,!0),H=(0,D.Ay)(G,w.filters.nameFilter)||(0,D.JE)(Y,w.filters.minVotesFilter)||(0,D.iG)(j,w.filters.maxPriceFilter);(0,E.D9)(s,H)}function M(s){return+s.getAttribute("href").split("-").pop()}function r(s,_){s>m()?_.style.border="3px solid #8ab854":_.style.removeProperty("border")}function x(s,_,L){s.hasAttribute(i.MARK_AS_NEWEST_SEEN_APPENDED)||(s.addEventListener("mousedown",A=>{if(A.button===1&&A.target!==_){const U=a(),k=`\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?

${R(U)}`;confirm(k)&&(W(L),A.preventDefault())}}),s.setAttribute(i.MARK_AS_NEWEST_SEEN_APPENDED,""))}function R(s){const _=s?new Date(s):null;if(!_)return"";let L=Math.floor((Date.now()-_.getTime())/6e4);const A=Math.floor(L/1440);L-=A*1440;const U=Math.floor(L/60),k=L-U*60;return A>0?`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E ${A} \u0434. ${U} \u0447. ${k} \u043C.`:U>0?`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E ${U} \u0447. ${k} \u043C.`:`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E ${k} \u043C.`}function W(s){const _=v();u(_),P(s),n(),g()}async function d(){const s=(0,c.Fi)(f.DISCUSSIONS);s&&(s.style.position="sticky",s.style.top="0")}function N(){w.isFiltersInitialized=!1,w.filters={nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},clearObserver(w.productListObserver)}}},X={};function $(y){var C=X[y];if(C!==void 0)return C.exports;var e=X[y]={exports:{}};return Q[y](e,e.exports,$),e.exports}(()=>{var y=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",C=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",c=b=>{b&&b.d<1&&(b.d=1,b.forEach(h=>h.r--),b.forEach(h=>h.r--?h.r++:h()))},f=b=>b.map(h=>{if(h!==null&&typeof h=="object"){if(h[y])return h;if(h.then){var O=[];O.d=0,h.then(p=>{l[C]=p,c(O)},p=>{l[e]=p,c(O)});var l={};return l[y]=p=>p(O),l}}var t={};return t[y]=p=>{},t[C]=h,t});$.a=(b,h,O)=>{var l;O&&((l=[]).d=-1);var t=new Set,p=b.exports,o,E,D,I=new Promise((P,v)=>{D=v,E=P});I[C]=p,I[y]=P=>(l&&P(l),t.forEach(P),I.catch(v=>{})),b.exports=I,h(P=>{o=f(P);var v,u=()=>o.map(n=>{if(n[e])throw n[e];return n[C]}),m=new Promise(n=>{v=()=>n(u),v.r=0;var a=i=>i!==l&&!t.has(i)&&(t.add(i),i&&!i.d&&(v.r++,i.push(v)));o.map(i=>i[y](a))});return v.r?m:u()},P=>(P?D(I[e]=P):E(p),c(l))),l&&l.d<0&&(l.d=0)}})(),$.d=(y,C)=>{for(var e in C)$.o(C,e)&&!$.o(y,e)&&Object.defineProperty(y,e,{enumerable:!0,get:C[e]})},$.o=(y,C)=>Object.prototype.hasOwnProperty.call(y,C);var J=$(9374)})();})();
