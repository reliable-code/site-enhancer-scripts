// ==UserScript==
// @name         Pepper product cards filter
// @description  Hide product cards by filter
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.pepper.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76927367
// @icon         https://www.google.com/s2/favicons?sz=64&domain=pepper.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/pepper.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var se={5467:(M,T,e)=>{e.d(T,{E2:()=>E});var u=e(9928);function E(O,a={},r=null){const o=(0,u.Sw)(a,r);return o.append(O),o}function N(O,a=null,r={},o={}){const i=createActionLink(O,a,o);return E(i,r)}function S(O,a=null,r=null,o={},i={}){const m=createActionLinkWithIcon(O,r,a,i);return E(m,o)}},9928:(M,T,e)=>{e.d(T,{Hn:()=>o,S:()=>a,Sw:()=>g,VI:()=>i,kU:()=>N,o5:()=>S});var u=e(4921),E=e(6754);function N(f,h,w){const F=r(f,"text",h);return F.value=w,F}function S(f,h,w,F,H,j){const v=r(f,"number",h);return v.value=w,v.step=F,v.min=H,v.max=j,v}function O(f,h,w){const F=r(f,"date",h);return F.value=w,F}function a(f,h,w){const F=r(f,"checkbox",h);return F.checked=w,F}function r(f={},h=null,w=null){const F=p("input",f);return h&&(F.type=h),w&&(F.addEventListener("keyup",(0,u.sg)(w,200)),F.addEventListener("change",(0,u.sg)(w,100))),F}function o(f,h,w){const F=p("select",f);return h&&F.addEventListener("change",h),F.value=w,F}function i(f={},h=null){return p("span",f,h)}function m(f={},h=null,w=null){const F=p("a",f,h);return w&&(F.href=w),F}function d(f,h=null,w={}){w.cursor||="pointer";const F=m(w,h);return f&&F.addEventListener("click",f),F}function c(f,h,w=null,F={},H={}){F.display||="inline-flex",F.alignItems||="center",F.gap||="0.25em";const j=d(f,w,F);return j.prepend(t(h,H)),j}function P(f={},h=null,w=null){const F=p("button",f,h);return w&&F.addEventListener("click",w),F}function g(f={},h=null){return p("div",f,h)}function n(f={},h=null){return p("i",f,h)}function t(f,h={}){h.width||="1em",h.height||="1em",h.paddingBottom||="1px";const w=n(h);return w.setAttribute("data-lucide",f),w}function p(f,h,w=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const F=document.createElement(f);return(0,E.ZM)(F,h),w&&(F.innerHTML=w),F}},573:(M,T,e)=>{e.d(T,{Fi:()=>N,YA:()=>o,fI:()=>S,s$:()=>O});var u=e(4214);function E(n,t=document){return!!t.querySelector(n)}function N(n,t=document,p=!1){const f=t.querySelector(n);return p&&!f&&console.log(`No element found for selector: ${n}`),f}function S(n,t=document,p=!1){const f=t.querySelectorAll(n);return p&&!f.length&&console.log(`No elements found for selector: ${n}`),f}function O(n,t=1){let p=n;for(let f=0;f<t;f++){if(!p.parentElement)return null;p=p.parentElement}return p}function a(n,t,p){return[...n.querySelectorAll(t)].find(f=>f.textContent.trim().includes(p))}function r(n,t,p=!1,f=!1,h=null){const w=N(t,n);return o(w,p,f,h)}function o(n,t=!1,p=!1,f=null){if(!n)return f===null?(console.log("No element found"),null):f;const h=n.innerText;return d(h,t,p)}function i(n,t,p=!1){const f=n[t];return o(f,p)}function m(n,t=!1,p=!1){const f=n.textContent;return d(f,t,p)}function d(n,t,p){t&&(n=(0,u.zr)(n)),p&&(n=n.replace(",","."));const f=Number(n);return Number.isNaN(f)?(console.log(`Invalid number: ${n}`),0):f}function c(n){return[...n.childNodes].find(t=>t.nodeType===Node.TEXT_NODE)}function P(n){const t=p=>p.nodeType===Node.TEXT_NODE&&p.textContent.trim()!==""?[p]:[...p.childNodes].flatMap(t);return t(n)}function g(n){return normalizeSpacing(n.textContent)}},5539:(M,T,e)=>{e.d(T,{D9:()=>p,iV:()=>h,ku:()=>S,vJ:()=>f});var u=e(573);function E(l,D){l.parentNode.insertBefore(D,l.nextSibling)}function N(l){l.style.display="none"}function S(l,D=1){const U=document.querySelector(l);U&&O(U,D)}function O(l,D=1){const U=(0,u.s$)(l,D);U&&N(U)}function a(l){P(l),N(l)}function r(l){l.intersectionObserver||runOnceOnIntersection(l,()=>N(l))}function o(l){l.style.display=""}function i(l){const D=c(l);l.style.display=D}function m(l,D){D?N(l):o(l)}function d(l,D){D?r(l):(clearIntersectionObserver(l),o(l))}function c(l){return P(l),l.defaultDisplay}function P(l){if(l.defaultDisplay)return;const{display:D}=getComputedStyle(l);l.defaultDisplay=D}function g(){return{show:[],hide:[]}}function n(l,D,U){l?D.hide.push(U):D.show.push(U)}function t(l){l.show.forEach(o),l.hide.forEach(N)}function p(l,D,U=.3){D?h(l,U):f(l)}function f(l){l.style.opacity=""}function h(l,D=.3){l.style.opacity=D}function w(l){l.style.order=""}function F(l,D){l.style.order=D}function H(l,D){l.style.background=D}function j(l,D){const U=getFirstElement(D);U&&v(l,U)}function v(l,D){const U=createLink();U.href=l,D.parentNode.append(U),U.append(D)}function R(l,D){const U=getFirstElement(D);U&&b(l,U)}function b(l,D,U={}){const C=createLink(U);C.href=l,C.append(...D.childNodes),D.append(C)}function _(){const l=getURLQueryParam("scrollTo");if(!l)return;const D=document.getElementById(l);D?D.scrollIntoView():console.log(`Element with ID "${l}" was not found.`)}function V(l,D,U=null){const C=`${D}-click-passed`,y=U?L=>findElementByText(L,l,U):L=>getFirstElement(l,L);return function(L){if(L.hasAttribute(C))return!1;const k=y(L);return k&&k.click(),L.setAttribute(C,""),!0}}function G(l,D,U="text/plain"){const C=new Blob([l],{type:U}),y=URL.createObjectURL(C),L=document.createElement("a");L.href=y,L.download=D,document.body.appendChild(L),L.click(),document.body.removeChild(L),requestAnimationFrame(()=>URL.revokeObjectURL(y))}},6754:(M,T,e)=>{e.d(T,{ZM:()=>u});function u(O,a){Object.assign(O.style,a)}function E(O,a="custom-global-style"){let r=document.getElementById(a);r||(r=document.createElement("style"),r.id=a,r.type="text/css",document.head.appendChild(r)),r.textContent=O}function N(O){return Object.entries(O).map(([a,r])=>`${a.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${r};`).join(" ")}function S(O){return O?O.split(";").filter(a=>a.trim()!=="").reduce((a,r)=>{const[o,i]=r.split(":").map(d=>d.trim()),m=o.replace(/-([a-z])/g,(d,c)=>c.toUpperCase());return a[m]=i,a},{}):{}}},4921:(M,T,e)=>{e.d(T,{Un:()=>O,sg:()=>S,wP:()=>o});function u(i,m,d=null){const c=i.querySelector(m);return c?Promise.resolve(c):new Promise(P=>{const g=new MutationObserver(t);g.observe(i,{childList:!0,subtree:!0});let n;d&&(n=setTimeout(()=>{g.disconnect(),console.log(`No element found for selector: ${m}`),P(null)},d));function t(){const p=i.querySelector(m);p&&(n&&clearTimeout(n),g.disconnect(),P(p))}})}function E(i,m){return i.querySelector(m)?new Promise(c=>{const P=new MutationObserver(g);P.observe(i,{childList:!0,subtree:!0});function g(){i.querySelector(m)||(P.disconnect(),c())}}):Promise.resolve()}function N(i,m=400){return new Promise(d=>{let c;const P=new MutationObserver(()=>{clearTimeout(c),g()});function g(){c=setTimeout(()=>{P.disconnect(),d()},m)}g(),P.observe(i,{childList:!0,subtree:!0})})}function S(i,m=250){let d;return(...c)=>{clearTimeout(d),d=setTimeout(()=>i(...c),m)}}async function O(i){document.visibilityState==="visible"?await i():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await i()},{once:!0})}function a(i,m){const d=new IntersectionObserver(c=>{c.forEach(P=>{P.isIntersecting&&(m(),r(i))})});i.intersectionObserver=d,d.observe(i)}function r(i){i.intersectionObserver&&(i.intersectionObserver.disconnect(),i.intersectionObserver=null)}function o(i){i&&(i.disconnect(),i=null)}},3829:(M,T,e)=>{e.d(T,{Ay:()=>E,JE:()=>a,iG:()=>r});var u=e(8355);function E(d,c){return!N(d,c)}function N(d,c){if(!c||!c.value)return!0;const P=(0,u._7)(c.value);return S(d,P)}function S(d,c){if(!c||!c.length)return!0;const P=(d||"").toLowerCase();return c.every(g=>O(P,g))}function O(d,c){return c.some(({term:P,isNegative:g})=>{const n=d.includes(P);return g?!n:n})}function a(d,c){return c.value!=null&&d<c.value}function r(d,c){return c.value!=null&&d>c.value}function o(d,c){return c.value==null?!1:d<parseDateFromISO(c.value)}function i(d,c){return c.value==null?!1:d>parseDateFromISO(c.value)}function m(d,c){return c.value&&d!==c.value}},4521:(M,T,e)=>{e.d(T,{z:()=>E});var u=e(3048);function E(N,S=null){return{createGlobalFilter(O,a=null,r=N){return u.V.create(O,a,r)},createSectionFilter(O,a=null,r=N){if(!S)throw new Error("sectionId must be provided to use createSectionFilter.");return u.V.createWithCompositeKey(S,O,a,r)}}}},5884:(M,T,e)=>{e.d(T,{Hw:()=>r,Nm:()=>N,SA:()=>O,nW:()=>S});var u=e(9928),E=e(5467);function N(o,i,m={},d={}){const c=(0,u.kU)(d,i.updateValueFromEvent,i.value);return(0,E.E2)(c,m,o)}function S(o,i,m,d,c,P={},g={}){const n=(0,u.o5)(g,i.updateValueFromEvent,i.value,m,d,c);return(0,E.E2)(n,P,o)}function O(o,i,m={},d={}){const c=(0,u.Hn)(d,i.updateValueFromEvent,i.value);return(0,E.E2)(c,m,o)}function a(o,i,m={},d={}){const c=createDateInput(d,i.updateValueFromEvent,i.value);return createControl(c,m,o)}function r(o,i,m={},d={}){const c=(0,u.S)(d,i.updateValueFromEvent,i.value);return(0,E.E2)(c,m,o)}},7877:(M,T,e)=>{e.d(T,{E9:()=>E,H1:()=>g,pW:()=>j});var u=e(5884);function E(R,b={},_={}){return(0,u.Nm)("\u041F\u043E\u0438\u0441\u043A: ",R,b,_)}function N(R,b={},_={},V=.1,G=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",R,V,G,5,b,_)}function S(R,b={},_={},V=.1,G=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",R,V,G,5,b,_)}function O(R,b={},_={}){return r("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",R,b,_)}function a(R,b={},_={}){return r("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",R,b,_)}function r(R,b,_={},V={}){return createNumberFilterControl(R,b,"1","1","999999",_,V)}function o(R,b={},_={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",R,b,_)}function i(R,b={},_={}){return m("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",R,b,_)}function m(R,b,_={},V={}){return createNumberFilterControl(R,b,"5","0","100",_,V)}function d(R,b={},_={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",R,"5","0","100",b,_)}function c(R,b,_={},V={},G="250"){return(0,u.nW)(R,b,G,"0","1000000",_,V)}function P(R,b={},_={},V="25"){return c("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",R,b,_,V)}function g(R,b={},_={},V="25"){return c("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",R,b,_,V)}function n(R,b={},_={}){return t("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",R,b,_)}function t(R,b,_={},V={}){return createNumberFilterControl(R,b,"1","0","99999",_,V)}function p(R,b={},_={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",R,"1","2","8",b,_)}function f(R,b={},_={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",R,1,1,10,b,_)}function h(R,b={},_={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",R,b,_)}function w(R,b={},_={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",R,b,_)}function F(R,b={},_={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",R,b,_)}function H(R,b={},_={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",R,b,_)}function j(R,b={},_={}){return(0,u.Hw)("\u0412\u043A\u043B: ",R,b,_)}function v(R,b,_={}){const V=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],G={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},l=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),D=[],U=()=>b?parseFloat(b.value)||0:R.value,C=()=>{const y=U();D.forEach(({button:L,value:k})=>{const K=k<=y?G.active:G.inactive;Object.assign(L.style,K)})};return V.forEach(({value:y,emoji:L,tooltip:k})=>{const $=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",..._},L);$.title=k,$.type="button",$.addEventListener("click",K=>{K.preventDefault(),R.updateValue(y),b&&(b.value=y),C()}),$.addEventListener("mouseenter",()=>{y<=U()||($.style.background=G.hover.background)}),$.addEventListener("mouseleave",()=>{C()}),D.push({button:$,value:y}),l.appendChild($)}),C(),b&&(b.addEventListener("input",C),b.addEventListener("change",C)),l}},8355:(M,T,e)=>{e.d(T,{N4:()=>a,_7:()=>E,fO:()=>u});function u(o){if(!o)return[];const m=E(o).flat().filter(d=>d&&!d.isNegative&&d.term).map(d=>d.term);return[...new Set(m)]}function E(o){return o?o.toLowerCase().split(",").map(N).filter(Boolean):[]}function N(o){const i=o.split("/").map(d=>d.trim()).filter(Boolean);if(i.length===0)return null;const m=i.map(S).filter(Boolean);return m.length>0?m:null}function S(o){const i=o.startsWith("!"),m=i?o.slice(1).trim():o;return m?{term:m,isNegative:i}:null}function O(o,i){r(o,m=>m.style.display!=="none",i)}function a(o,i){r(o,m=>m.style.opacity==="",i)}function r(o,i,m){const d=[...o].filter(i).length;m.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${d} \u0438\u0437 ${o.length}`}},5213:(M,T,e)=>{e.d(T,{b:()=>N});var u=e(9928),E=e(573);function N(S,O,a=!1,r="customFiltersContainer"){let o=(0,E.Fi)(`#${r}`,S);if(o)if(a)o.remove();else return;o=(0,u.Sw)(),o.id=r,O(o,S)}},8200:(M,T,e)=>{e.d(T,{s:()=>u});function u(E){const{target:N}=E,{type:S}=N;switch(S){case"text":return`"${N.value}"`;case"number":return N.value;case"select-one":return N.value;case"date":return`"${N.value}"`;case"checkbox":return N.checked;default:return console.log(`Unknown input type: ${S}`),null}}},157:(M,T,e)=>{e.d(T,{Fg:()=>u,vx:()=>N});const u=window.GM_setValue,E=window.GM.setValue,N=window.GM_getValue},1870:(M,T,e)=>{e.d(T,{j:()=>u});class u{constructor(N,S){this.value=N,this.onChange=S}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(M,T,e)=>{e.d(T,{V:()=>O});var u=e(1870),E=e(8200),N=e(3976),S=e(157);class O extends u.j{constructor(r,o=null,i=null){super((0,S.vx)(r,o),i),this.storageKey=r,this.defaultValue=o}static create(r,o=null,i=null){return new O(r,o,i)}static createWithCompositeKey(r,o,i=null,m=null){const d=`${r}-${o}`;return new O(d,i,m)}updateValueFromEvent=r=>{const o=(0,E.s)(r),i=(0,N.$)(o);this.updateValue(i)};updateValue(r,o=!0){this.value!==r&&((0,S.Fg)(this.storageKey,r),this.value=r,o&&this.onChangeIfDefined())}clearValue(r=!1){this.updateValue(null,r)}resetValue(r=!1){this.updateValue(this.defaultValue,r)}}},3976:(M,T,e)=>{e.d(T,{$:()=>u});function u(E){return E===""?null:JSON.parse(E)}},4214:(M,T,e)=>{e.d(T,{zr:()=>E});function u(a){return a.replace(/\D/g,"")}function E(a){return a.replace(/[^\d.,-]/g,"")}function N(a){return a.replace(/\s/g,"")}function S(a){return a.charAt(0).toUpperCase()+a.slice(1)}function O(a){return a.replace(/\s+/g," ").trim()}},5406:(M,T,e)=>{e.d(T,{z2:()=>m});function u(g,n="common",t=!1){const{pathname:p}=window.location;return E(p,g,n,t)}function E(g,n,t,p=!1){const f=g.split("/");n=n<0?f.length+n:n;const h=f[n]||t;return p&&console.log(`Pathname element: ${h}`),h}function N(g,n="common",t=!1){const p=u(g,"",t);return S(p,n,t)}function S(g,n,t){if(!g)return n;const p=g.split("-").at(-1);return t&&console.log(`Pathname element ending: ${p}`),p}function O(g,n,t="common",p=!1){const f=E(g,n,"",p);return S(f,t,p)}function a(g){return new URLSearchParams(window.location.search).get(g)}function r(g){return g.split("?")[0]}function o(g){return window.location.pathname.includes(g)}function i(g){return g.some(n=>o(n))}function m(...g){return window.location.pathname.split("/").some(t=>g.includes(t))}function d(g){try{const n=new URL(window.location.href);Object.entries(g).forEach(([t,p])=>{n.searchParams.set(t,p)}),window.location.href=n.toString()}catch(n){console.error("Failed to redirect:",n)}}function c(g,n=[]){const t={pathname:window.location.pathname};n.forEach(F=>{t[F]=a(F)});let p=!1;async function f(){if(p)return;const F={pathname:window.location.pathname};if(n.forEach(H=>{F[H]=a(H)}),Object.keys(t).some(H=>t[H]!==F[H])){Object.assign(t,F),p=!0;try{await g()}catch(H){console.error("Error in URL observer callback:",H)}finally{p=!1}}}function h(){f().catch(F=>{console.error("Error in URL change handler:",F)})}let w=window.location.href;setInterval(()=>{window.location.href!==w&&(w=window.location.href,h())},200),window.addEventListener("popstate",h)}function P(g=[]){c(()=>window.location.reload(),g)}},7926:(M,T,e)=>{e.d(T,{sV:()=>c,CU:()=>o,Jm:()=>g,Fr:()=>m,nd:()=>P,MB:()=>d,Su:()=>r,X0:()=>i});var u=e(157);function E(n,t=1e3){return Math.round((n+Number.EPSILON)*t)/t}function N(n){const t=n.slice().sort((f,h)=>f-h),p=Math.floor(t.length/2);return t.length%2!==0?t[p]:(t[p-1]+t[p])/2}function S(n,t){return Math.random()*(t-n)+n}const O="preferred-comment-counts",a=50;function r(n){(0,u.Fg)("newest-seen-product-id",n)}function o(){return(0,u.vx)("newest-seen-product-id")}function i(n){(0,u.Fg)("prev-newest-seen-product-id",n)}function m(){return(0,u.vx)("prev-newest-seen-product-id")}function d(){(0,u.Fg)("last-newest-seen-product-update",Date.now())}function c(){return(0,u.vx)("last-newest-seen-product-update")}function P(n){const t=(0,u.vx)(O,[]);t.push(n),t.length>a&&t.shift(),(0,u.Fg)(O,t)}function g(){const n=(0,u.vx)(O,[]);return n.length===0?null:N(n)}},9374:(M,T,e)=>{e.a(M,async(u,E)=>{try{var N=e(5406),S=e(468),O=e(7220);await a();async function a(){(0,N.z2)("new","search_result")?await(0,S.P)():(0,N.z2)("deals","coupons")&&await(0,O.O)()}E()}catch(a){E(a)}},1)},7220:(M,T,e)=>{e.d(T,{O:()=>R});var u=e(573);const E={DEAL_ALERT_FORM_CONTENT:"#deal-alert-form-content",HIDE_TOP_COMMENTS_BUTTON:"#top-comments-open-close",COMMENTS_CONTAINER:"#comments",COMMENTS_LIST:"#comment-list",POST_BODY:'div[data-name="post[body]"]',MORE_REPLIES_LINK:"a.more-replies",COMMENT:'div[id^="post_"][id$="_new"]',COMMENT_TEXT_WRAP:'div[id^="parent_comment_"]',COMMENT_REACTIONS_CONTAINER:'[class^="given_reactions_"]',COMMENT_REACTION:"span.text-sm.text-secondary-text-light"};var N=e(4521),S=e(5213),O=e(6754),a=e(5013);const r={INPUT:{marginLeft:"7px",border:"2px solid #b3bcc5",borderRadius:"6px",padding:"7px 14px"},CONTROL:{display:"flex",alignItems:"center",fontSize:"15px"}},o={FILTERS_CONTAINER:{display:"flex",flexFlow:"wrap",gap:"12px 16px",paddingBottom:"14px"},NUMBER_INPUT_SM:{...r.INPUT,width:"70px"},NUMBER_INPUT_MD:{...r.INPUT,width:"80px"},NUMBER_INPUT_LG:{...r.INPUT,width:"90px"},TEXT_INPUT:{...r.INPUT,width:"260px"},CHECKBOX_INPUT:{marginLeft:"7px",width:"26px",height:"26px"},CONTROL:r.CONTROL,PUSHED_RIGHT_CONTROL:{...r.CONTROL,marginLeft:"auto"}},i={DISLIKE_BUTTON:{display:"inline-flex",alignItems:"center",marginLeft:"auto",color:"rgba(0, 26, 52, 0.6)",cursor:"pointer"},SCROLL_TO_FILTERS_BUTTON:{position:"fixed",bottom:"20px",right:"20px",padding:"10px 20px 10px 14px",backgroundColor:"#005bff",color:"white",border:"none",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",cursor:"pointer",fontSize:"14px",transition:"background-color 0.3s",display:"none",gap:"4px"},CLONED_PRODUCT_CARDS_WRAP:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)"}},m={...a.B,FILTERS_CONTAINER:{...a.B.FILTERS_CONTAINER,padding:"15px 0px 12px",borderBottomWidth:"1px",top:"50px",zIndex:"9"},PUSHED_RIGHT_CONTROL:{...r.CONTROL,marginLeft:"auto"}};var d=e(7877),c=e(5884),P=e(5539),g=e(3829),n=e(4921);function t(s,x){s.forEach(I=>p(x,I))}function p(s,x){if(!x)return;const I=new RegExp(`(${x})`,"gi"),A=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null);let B=A.nextNode();const W=[];for(;B;){const{textContent:z}=B;if(I.test(z)){const X=document.createDocumentFragment();let Q=0;z.replace(I,(q,oe,ie)=>{ie>Q&&X.appendChild(document.createTextNode(z.slice(Q,ie)));const ee=document.createElement("span");ee.className="highlightedSubstring",ee.style.backgroundColor="yellow",ee.textContent=q,X.appendChild(ee),Q=ie+q.length}),Q<z.length&&X.appendChild(document.createTextNode(z.slice(Q))),W.push({node:B,fragment:X})}B=A.nextNode()}W.forEach(({node:z,fragment:X})=>{z.parentNode.replaceChild(X,z)})}function f(s){(0,u.fI)(".highlightedSubstring",s).forEach(I=>{const{parentNode:A}=I;I.replaceWith(I.textContent),A.normalize()})}var h=e(8355);function w(s,x){const I=(0,h.fO)(s.value);t(I,x)}function F(s,x){const I=getIncludedSearchStrings(s.value);x.forEach(A=>highlightSubstrings(I,A))}var H=e(9928),j=e(7926);const v={commentsContainer:null,commentsObserver:null,isFiltersInitialized:!1,filters:{commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},minReactionsSelect:null,lastStatsSnapshot:"",isMinReactionsAutoSelectActive:!0,commentsInfo:null,commentsCache:new WeakMap};async function R(){b(),V(),await(0,n.Un)(G)}function b(){(0,P.ku)(E.DEAL_ALERT_FORM_CONTENT),_()}function _(){const s=(0,u.Fi)(E.HIDE_TOP_COMMENTS_BUTTON);s&&s.click()}function V(){if(!v.isFiltersInitialized){const{createGlobalFilter:s}=(0,N.z)(D);v.filters.commentTextFilter=s("comments-text-filter"),v.filters.minReactionsFilter=s("comments-min-reactions-filter",0),v.filters.filterEnabled=s("comments-filter-enabled",!0),v.filters.autoExpandFilter=s("comments-auto-expand",!1),v.isFiltersInitialized=!0}}function G(){if(v.commentsContainer=(0,u.Fi)(E.COMMENTS_CONTAINER),!v.commentsContainer)return;(0,S.b)(v.commentsContainer,l),D(),v.commentsObserver&&(0,n.wP)(v.commentsObserver),v.commentsObserver=new MutationObserver(x=>{for(const I of x)for(const A of I.addedNodes)if(A.nodeType===1&&(A.matches(E.COMMENT)||A.querySelector(E.COMMENT))){D();return}});const s=(0,u.Fi)(E.COMMENTS_LIST);v.commentsObserver.observe(s,{childList:!0,subtree:!0})}function l(s,x){(0,O.ZM)(s,m.FILTERS_CONTAINER);const I=(0,c.Nm)("\u0422\u0435\u043A\u0441\u0442:",v.filters.commentTextFilter,m.CONTROL,m.TEXT_INPUT),A=(0,c.SA)("\u0420\u0435\u0430\u043A\u0446\u0438\u0439: ",v.filters.minReactionsFilter,m.CONTROL,m.SELECT_INPUT),B=(0,d.pW)(v.filters.filterEnabled,m.CONTROL,m.CHECKBOX_INPUT),W=(0,c.Hw)("\u0410\u0432\u0442\u043E\u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435",v.filters.autoExpandFilter,m.CONTROL,m.CHECKBOX_INPUT);v.minReactionsSelect=A.querySelector("select"),v.commentsInfo=(0,H.Sw)(m.PUSHED_RIGHT_CONTROL),v.minReactionsSelect.addEventListener("change",X=>{if(v.isMinReactionsAutoSelectActive=!1,parseInt(X.target.value,10)===0)return;const q=X.target.options[X.target.selectedIndex],oe=parseInt(q.dataset.count,10);Number.isNaN(oe)||(0,j.nd)(oe)}),s.append(I,A,B,W,v.commentsInfo);const z=(0,u.Fi)(E.POST_BODY,x);x.insertBefore(s,z)}function D(){v.filters.autoExpandFilter.value&&U();const s=(0,u.fI)(E.COMMENT,v.commentsContainer);s.forEach(C),(0,h.N4)(s,v.commentsInfo),Z(s)}function U(){(0,u.fI)(E.MORE_REPLIES_LINK,v.commentsContainer).forEach(x=>x.click())}function C(s){if(!v.filters.filterEnabled.value){L(s);return}f(s);let x=v.commentsCache.get(s);if(!x){const A=(0,u.Fi)(E.COMMENT_TEXT_WRAP,s);if(!A){L(s);return}const B=A.innerText,W=Y(s);x={commentText:B,commentTextWrap:A,reactionsCount:W},v.commentsCache.set(s,x)}v.filters.commentTextFilter.value&&w(v.filters.commentTextFilter,x.commentTextWrap);const I=(0,g.Ay)(x.commentText,v.filters.commentTextFilter)||(0,g.JE)(x.reactionsCount,v.filters.minReactionsFilter);k(s,I),K(s,I)}function y(s){(0,P.vJ)(s),s.style.maxHeight="",s.style.overflow=""}function L(s){y(s),K(s,!1)}function k(s,x){x?$(s):y(s)}function $(s){(0,P.iV)(s),s.style.maxHeight="83px",s.style.overflow="hidden"}function K(s,x){const I=v.commentsCache.get(s);if(I?.lastHoverState!==x){if(x){let A=null;s.onmouseenter=()=>{clearTimeout(A),A=setTimeout(()=>y(s),250)},s.onmouseleave=()=>{clearTimeout(A),$(s)}}else s.onmouseenter=null,s.onmouseleave=null;I&&(I.lastHoverState=x)}}function Y(s){const x=(0,u.Fi)(E.COMMENT_REACTIONS_CONTAINER,s);if(!x)return 0;const I=(0,u.fI)(E.COMMENT_REACTION,x);let A=0;return I.forEach(B=>{const W=parseInt(B.textContent.trim(),10);Number.isNaN(W)||(A+=W)}),A}function Z(s){if(!v.minReactionsSelect)return;const x=te(s),I=ne(x),A=JSON.stringify(I);if(v.lastStatsSnapshot===A)return;v.lastStatsSnapshot=A,v.minReactionsSelect.innerHTML="";const B=document.createDocumentFragment();I.forEach(W=>{const z=document.createElement("option");z.value=W.value,z.textContent=W.label,z.dataset.count=W.count,B.appendChild(z)}),v.minReactionsSelect.appendChild(B),v.isMinReactionsAutoSelectActive&&re(I),v.minReactionsSelect.value=v.filters.minReactionsFilter.value}function te(s){const x=new Map;return s.forEach(I=>{const A=v.commentsCache.get(I);if(!A)return;const B=A.reactionsCount;x.set(B,(x.get(B)||0)+1)}),x.size===0&&x.set(0,0),x}function ne(s){const x=Array.from(s.keys()).sort((B,W)=>B-W),I=new Array(x.length);let A=0;for(let B=x.length-1;B>=0;B--){const W=x[B];A+=s.get(W),I[B]={value:W,label:`${W}+ (${A})`,count:A}}return I}function re(s){const x=(0,j.Jm)();if(x===null||s.length===0)return;let I=s[0],A=1/0;for(const B of s){const W=ce(B.count,x);W<A?(A=W,I=B):Math.abs(W-A)<.01&&B.count>I.count&&(I=B)}I.value===0&&(I=le(I,s)),v.filters.minReactionsFilter.value!==I.value&&v.filters.minReactionsFilter.updateValue(I.value)}function ce(s,x){const I=s-x,A=1.8;return I>=0?I:Math.abs(I)*A}function le(s,x){const I=x.find(B=>B.value>0&&B.count>0);return I&&ae(s.count,I.count)?I:s}function ae(s,x){return s<=3?!1:s>=9?x>=1:s>=7?x>=2:x>=3}function fe(){v.commentsContainer=null,v.isFiltersInitialized=!1,v.filters={commentTextFilter:null,minReactionsFilter:null,filterEnabled:null,autoExpandFilter:null},v.minReactionsSelect=null,v.lastStatsSnapshot="",v.isMinReactionsAutoSelectActive=!0,v.commentsInfo=null,v.commentsCache=new WeakMap,clearObserver(v.commentsObserver)}},5013:(M,T,e)=>{e.d(T,{B:()=>E});const u={INPUT:{border:"1px solid #d1d5db",borderRadius:"8px",marginLeft:"7px"}},E={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",marginBottom:".5rem",backgroundColor:"#fff",borderColor:"rgb(229, 229, 229)",position:"sticky"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...u.INPUT,width:"180px",padding:"7px 14px",backgroundColor:"#fff"},NUMBER_INPUT:{...u.INPUT,width:"90px",padding:"7px 14px",backgroundColor:"#fff"},SELECT_INPUT:{...u.INPUT,width:"100px",padding:"7px 14px",backgroundColor:"#fff"},CHECKBOX_INPUT:{...u.INPUT,width:"24px",height:"24px"}}},468:(M,T,e)=>{e.d(T,{P:()=>p});var u=e(573);const E={DISCUSSIONS:"div.md\\:block.hidden.common-box:nth-of-type(3)",PRODUCT_CARD:".deal-card",PRODUCT_CARD_RATING:".common-box span",PRODUCT_NAME:".custom-card-title",PRODUCT_CARD_LINK:".custom-card-title > a",PRODUCT_PRICE:"div.md\\:text-xll.text-lg.font-bold.text-primary.mr-2"};var N=e(4521),S=e(5213),O=e(6754),a=e(5013);const r={...a.B,FILTERS_CONTAINER:{...a.B.FILTERS_CONTAINER,padding:"11px 19px",borderWidth:"1px",borderRadius:"10px",top:"-1px",zIndex:"11"}};var o=e(7877),i=e(5884),m=e(5539),d=e(3829),c=e(7926);const P={ID_BADGE_APPENDED:"idBadgeAppended",SEEN_PRODUCT_CARD:"seenProductCard",MARK_AS_NEWEST_SEEN_APPENDED:"markAsNewestSeenAppended"};var g=e(4921),n=e(9928);const t={productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},prevNewestSeenProductId:null};async function p(){f(),h(),await w(),await D()}function f(){t.prevNewestSeenProductId=(0,c.Fr)()}function h(){if(!t.isFiltersInitialized){const{createGlobalFilter:C}=(0,N.z)(w);t.filters.nameFilter=C("name-filter"),t.filters.minVotesFilter=C("min-votes-filter",50),t.filters.maxPriceFilter=C("max-price-filter"),t.filters.showExpiredFilter=C("show-expired-filter",!1),t.filters.filterEnabled=C("filter-enabled",!0),t.isFiltersInitialized=!0}}function w(){const C=(0,u.fI)(E.PRODUCT_CARD);if(C.length){const y=C[0].parentElement;(0,S.b)(y,F),H(),t.productListObserver&&(0,g.wP)(t.productListObserver),t.productListObserver=new MutationObserver(H),t.productListObserver.observe(y,{childList:!0,subtree:!0})}}function F(C,y){(0,O.ZM)(C,r.FILTERS_CONTAINER);const L=(0,o.E9)(t.filters.nameFilter,r.CONTROL,r.TEXT_INPUT),k=(0,i.nW)("\u041C\u0438\u043D. \u0433\u043E\u043B\u043E\u0441\u043E\u0432: ",t.filters.minVotesFilter,"50","0","10000",r.CONTROL,r.NUMBER_INPUT),$=(0,o.H1)(t.filters.maxPriceFilter,r.CONTROL,r.NUMBER_INPUT),K=(0,i.Hw)("\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043D\u043D\u044B\u0435: ",t.filters.showExpiredFilter,r.CONTROL,r.CHECKBOX_INPUT),Y=(0,o.pW)(t.filters.filterEnabled,r.CONTROL,r.CHECKBOX_INPUT);C.append(L,k,$,K,Y),y.prepend(C)}function H(){(0,u.fI)(E.PRODUCT_CARD).forEach(j);const y=(0,u.Fi)(`[${P.SEEN_PRODUCT_CARD}]`);y&&(y.style.marginTop="45px")}function j(C){const y=(0,u.Fi)(E.PRODUCT_CARD_LINK,C),L=v(y);if(R(C,L),b(L,C),_(C,L),!t.filters.filterEnabled.value){(0,m.vJ)(C);return}if(C.classList.contains("expired-view")&&!t.filters.showExpiredFilter.value){(0,m.iV)(C);return}const $=(0,u.Fi)(E.PRODUCT_CARD_RATING,C);if($.innerText.includes("\u041D\u043E\u0432\u043E\u0435"))return;const K=(0,u.Fi)(E.PRODUCT_NAME,C),Y=(0,u.Fi)(E.PRODUCT_PRICE,C),Z=K.innerText,te=(0,u.YA)($,!0),ne=(0,u.YA)(Y,!0),re=(0,d.Ay)(Z,t.filters.nameFilter)||(0,d.JE)(te,t.filters.minVotesFilter)||(0,d.iG)(ne,t.filters.maxPriceFilter);(0,m.D9)(C,re)}function v(C){return+C.getAttribute("href").split("-").pop()}function R(C,y){if(C.hasAttribute(P.ID_BADGE_APPENDED))return;const L=C.querySelector(".md\\:col-start-2.row-start-1 .flex.items-center");if(!L)return;const k=(0,n.VI)({marginRight:"10px"},`#${y}`);k.className="product-id-badge text-secondary-text-light dark:text-secondary-text-dark text-xs",k.addEventListener("mouseenter",()=>{const $=y-t.prevNewestSeenProductId,K=$>0?"+":"";k.textContent=`#${y} (${K}${$})`}),k.addEventListener("mouseleave",()=>{k.textContent=`#${y}`}),L.insertBefore(k,L.firstChild),C.setAttribute(P.ID_BADGE_APPENDED,"")}function b(C,y){y.style.removeProperty("margin-top"),C>t.prevNewestSeenProductId?(y.style.border="3px solid #8ab854",y.removeAttribute(P.SEEN_PRODUCT_CARD)):(y.style.removeProperty("border"),y.setAttribute(P.SEEN_PRODUCT_CARD,""))}function _(C,y){C.hasAttribute(P.MARK_AS_NEWEST_SEEN_APPENDED)||(C.addEventListener("mousedown",L=>{if(L.button===1&&!L.target.closest("a")){const k=y-(0,c.CU)(),$=(0,c.sV)(),K=V($),Y=["\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u043E\u0435?","",`\u041D\u043E\u0432\u044B\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432: ~${k}`];K&&Y.push(`\u0421 \u043F\u0440\u043E\u0448\u043B\u043E\u0433\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u043E: ${K}`);const Z=Y.join(`
`);confirm(Z)&&(l(y),L.preventDefault())}}),C.setAttribute(P.MARK_AS_NEWEST_SEEN_APPENDED,""))}function V(C){const y=C?new Date(C):null;if(!y)return null;const L=Math.floor((Date.now()-y.getTime())/6e4);return G(L)}function G(C){const y=Math.floor(C/1440),L=Math.floor(C%1440/60),k=C%60;return y>0?`${y} \u0434. ${L} \u0447. ${k} \u043C.`:L>0?`${L} \u0447. ${k} \u043C.`:`${k} \u043C.`}function l(C){const y=(0,c.CU)();(0,c.X0)(y),(0,c.Su)(C),(0,c.MB)(),t.prevNewestSeenProductId=y,H()}async function D(){const C=(0,u.Fi)(E.DISCUSSIONS);C&&(C.style.position="sticky",C.style.top="0")}function U(){t.isFiltersInitialized=!1,t.filters={nameFilter:null,minVotesFilter:null,maxPriceFilter:null,showExpiredFilter:null,filterEnabled:null},t.prevNewestSeenProductId=null,clearObserver(t.productListObserver)}}},ue={};function J(M){var T=ue[M];if(T!==void 0)return T.exports;var e=ue[M]={exports:{}};return se[M](e,e.exports,J),e.exports}(()=>{var M=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",T=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",u=N=>{N&&N.d<1&&(N.d=1,N.forEach(S=>S.r--),N.forEach(S=>S.r--?S.r++:S()))},E=N=>N.map(S=>{if(S!==null&&typeof S=="object"){if(S[M])return S;if(S.then){var O=[];O.d=0,S.then(o=>{a[T]=o,u(O)},o=>{a[e]=o,u(O)});var a={};return a[M]=o=>o(O),a}}var r={};return r[M]=o=>{},r[T]=S,r});J.a=(N,S,O)=>{var a;O&&((a=[]).d=-1);var r=new Set,o=N.exports,i,m,d,c=new Promise((P,g)=>{d=g,m=P});c[T]=o,c[M]=P=>(a&&P(a),r.forEach(P),c.catch(g=>{})),N.exports=c,S(P=>{i=E(P);var g,n=()=>i.map(p=>{if(p[e])throw p[e];return p[T]}),t=new Promise(p=>{g=()=>p(n),g.r=0;var f=h=>h!==a&&!r.has(h)&&(r.add(h),h&&!h.d&&(g.r++,h.push(g)));i.map(h=>h[M](f))});return g.r?t:n()},P=>(P?d(c[e]=P):m(o),u(a))),a&&a.d<0&&(a.d=0)}})(),J.d=(M,T)=>{for(var e in T)J.o(T,e)&&!J.o(M,e)&&Object.defineProperty(M,e,{enumerable:!0,get:T[e]})},J.o=(M,T)=>Object.prototype.hasOwnProperty.call(M,T);var de=J(9374)})();})();
