// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.76963182
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var te={8738:(b,E,t)=>{t.d(E,{d:()=>c});var f=t(5558);function c(u={},i=null,e=null){const o=(0,f.n)("a",u,i);return e&&(o.href=e),o}function l(u,i=null,e={}){e.cursor||="pointer";const o=c(e,i);return u&&o.addEventListener("click",u),o}function p(u,i,e=null,o={},r={}){o.display||="inline-flex",o.alignItems||="center",o.gap||="0.25em";const n=l(u,e,o);return n.prepend(createLucideIcon(i,r)),n}function m(u,i,e={},o={}){const r=v=>{v.stopPropagation(),v.preventDefault(),window.confirm("\u0412\u044B\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?")&&u()},n=i?"<span>\u0414\u0438\u0437\u043B\u0430\u0439\u043A</span>":null,h=p(r,ThumbsDown,n,e,o);return h.classList.add("userscript-control"),h}function d(u={},i=null,e=null){const o=createElement("button",u,i);return e&&o.addEventListener("click",e),o}},7273:(b,E,t)=>{t.d(E,{S:()=>l});var f=t(5558);function c(p={},m=null){return createElement("span",p,m)}function l(p={},m=null){return(0,f.n)("div",p,m)}},5467:(b,E,t)=>{t.d(E,{E2:()=>c});var f=t(7273);function c(m,d={},u=null){const i=(0,f.S)(d,u);return i.append(m),i}function l(m,d=null,u={},i={}){const e=createActionLink(m,d,i);return c(e,u)}function p(m,d=null,u=null,i={},e={},o={}){const r=createActionLinkWithIcon(m,u,d,e,o);return c(r,i)}},5558:(b,E,t)=>{t.d(E,{n:()=>c});var f=t(6754);function c(l,p,m=null){if(typeof p!="object"||p===null)throw new TypeError("styles should be an object");const d=document.createElement(l);return(0,f.ZM)(d,p),m&&(d.innerHTML=m),d}},740:(b,E,t)=>{t.d(E,{S:()=>d,kU:()=>l,o5:()=>p});var f=t(5558),c=t(4921);function l(e,o,r){const n=u(e,"text",o);return n.value=r,n}function p(e,o,r,n,h,v){const s=u(e,"number",o);return s.value=r,s.step=n,s.min=h,s.max=v,s}function m(e,o,r){const n=u(e,"date",o);return n.value=r,n}function d(e,o,r){const n=u(e,"checkbox",o);return n.checked=r,n}function u(e={},o=null,r=null){const n=(0,f.n)("input",e);return o&&(n.type=o),r&&(n.addEventListener("keyup",(0,c.sg)(r,200)),n.addEventListener("change",(0,c.sg)(r,100))),n}function i(e,o,r){const n=createElement("select",e);return o&&n.addEventListener("change",o),n.value=r,n}},573:(b,E,t)=>{t.d(E,{Fi:()=>l,YA:()=>i,fI:()=>p});var f=t(4214);function c(s,I=document){return!!I.querySelector(s)}function l(s,I=document,g=!1){const F=I.querySelector(s);return g&&!F&&console.log(`No element found for selector: ${s}`),F}function p(s,I=document,g=!1){const F=I.querySelectorAll(s);return g&&!F.length&&console.log(`No elements found for selector: ${s}`),F}function m(s,I=1){let g=s;for(let F=0;F<I;F++){if(!g.parentElement)return null;g=g.parentElement}return g}function d(s,I,g){return[...s.querySelectorAll(I)].find(F=>F.textContent.trim().includes(g))}function u(s,I,g=!1,F=!1,y=null){const A=l(I,s);return i(A,g,F,y)}function i(s,I=!1,g=!1,F=null){if(!s)return F===null?(console.log("No element found"),null):F;const y=s.innerText;return r(y,I,g)}function e(s,I,g=!1){const F=s[I];return i(F,g)}function o(s,I=!1,g=!1){const F=s.textContent;return r(F,I,g)}function r(s,I,g){I&&(s=(0,f.zr)(s)),g&&(s=s.replace(",","."));const F=Number(s);return Number.isNaN(F)?(console.log(`Invalid number: ${s}`),0):F}function n(s){return[...s.childNodes].find(I=>I.nodeType===Node.TEXT_NODE)}function h(s){const I=g=>g.nodeType===Node.TEXT_NODE&&g.textContent.trim()!==""?[g]:[...g.childNodes].flatMap(I);return I(s)}function v(s){return normalizeSpacing(s.textContent)}},5539:(b,E,t)=>{t.d(E,{Bt:()=>c,UC:()=>e,WH:()=>f,kl:()=>u});function f(a,R){a.parentNode.insertBefore(R,a.nextSibling)}function c(a){a.style.display="none"}function l(a,R=1){const w=document.querySelector(a);w&&p(w,R)}function p(a,R=1){const w=getElementAncestor(a,R);w&&c(w)}function m(a){n(a),c(a)}function d(a){a.intersectionObserver||runOnceOnIntersection(a,()=>c(a))}function u(a){a.style.display=""}function i(a){const R=r(a);a.style.display=R}function e(a,R){R?c(a):u(a)}function o(a,R){R?d(a):(clearIntersectionObserver(a),u(a))}function r(a){return n(a),a.defaultDisplay}function n(a){if(a.defaultDisplay)return;const{display:R}=getComputedStyle(a);a.defaultDisplay=R}function h(){return{show:[],hide:[]}}function v(a,R,w){a?R.hide.push(w):R.show.push(w)}function s(a){a.show.forEach(u),a.hide.forEach(c)}function I(a,R,w=.3){R?F(a,w):g(a)}function g(a){a.style.opacity=""}function F(a,R=.3){a.style.opacity=R}function y(a){a.style.order=""}function A(a,R){a.style.order=R}function S(a,R){a.style.background=R}function L(a,R){const w=getFirstElement(R);w&&U(a,w)}function U(a,R){const w=createLink();w.href=a,R.parentNode.append(w),w.append(R)}function $(a,R){const w=getFirstElement(R);w&&K(a,w)}function K(a,R,w={}){const k=createLink(w);k.href=a,k.append(...R.childNodes),R.append(k)}function D(){const a=getURLQueryParam("scrollTo");if(!a)return;const R=document.getElementById(a);R?R.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function C(a,R,w=null){const k=`${R}-click-passed`,G=w?P=>findElementByText(P,a,w):P=>getFirstElement(a,P);return function(P){if(P.hasAttribute(k))return!1;const N=G(P);return N&&N.click(),P.setAttribute(k,""),!0}}function O(a,R,w="text/plain"){const k=new Blob([a],{type:w}),G=URL.createObjectURL(k),P=document.createElement("a");P.href=G,P.download=R,document.body.appendChild(P),P.click(),document.body.removeChild(P),requestAnimationFrame(()=>URL.revokeObjectURL(G))}},6754:(b,E,t)=>{t.d(E,{ZM:()=>f});function f(m,d){Object.assign(m.style,d)}function c(m,d="custom-global-style"){let u=document.getElementById(d);u||(u=document.createElement("style"),u.id=d,u.type="text/css",document.head.appendChild(u)),u.textContent=m}function l(m){return Object.entries(m).map(([d,u])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function p(m){return m?m.split(";").filter(d=>d.trim()!=="").reduce((d,u)=>{const[i,e]=u.split(":").map(r=>r.trim()),o=i.replace(/-([a-z])/g,(r,n)=>n.toUpperCase());return d[o]=e,d},{}):{}}},4921:(b,E,t)=>{t.d(E,{sg:()=>p,xk:()=>f});function f(e,o,r=null){const n=e.querySelector(o);return n?Promise.resolve(n):new Promise(h=>{const v=new MutationObserver(I);v.observe(e,{childList:!0,subtree:!0});let s;r&&(s=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${o}`),h(null)},r));function I(){const g=e.querySelector(o);g&&(s&&clearTimeout(s),v.disconnect(),h(g))}})}function c(e,o){return e.querySelector(o)?new Promise(n=>{const h=new MutationObserver(v);h.observe(e,{childList:!0,subtree:!0});function v(){e.querySelector(o)||(h.disconnect(),n())}}):Promise.resolve()}function l(e,o=400){return new Promise(r=>{let n;const h=new MutationObserver(()=>{clearTimeout(n),v()});function v(){n=setTimeout(()=>{h.disconnect(),r()},o)}v(),h.observe(e,{childList:!0,subtree:!0})})}function p(e,o=250){let r;return function(...n){const h=this;clearTimeout(r),r=setTimeout(()=>e.apply(h,n),o)}}async function m(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function d(e,o){const r=new IntersectionObserver(n=>{n.forEach(h=>{h.isIntersecting&&(o(),u(e))})});e.intersectionObserver=r,r.observe(e)}function u(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function i(e){e&&(e.disconnect(),e=null)}},3829:(b,E,t)=>{t.d(E,{Ay:()=>c,JE:()=>d,iG:()=>u});var f=t(8355);function c(r,n){return!l(r,n)}function l(r,n){if(!n||!n.value)return!0;const h=(0,f._7)(n.value);return p(r,h)}function p(r,n){if(!n||!n.length)return!0;const h=(r||"").toLowerCase();return n.every(v=>m(h,v))}function m(r,n){return n.some(({term:h,isNegative:v})=>{const s=r.includes(h);return v?!s:s})}function d(r,n){return n.value!=null&&r<n.value}function u(r,n){return n.value!=null&&r>n.value}function i(r,n){return n.value==null?!1:r<parseDateFromISO(n.value)}function e(r,n){return n.value==null?!1:r>parseDateFromISO(n.value)}function o(r,n){return n.value&&r!==n.value}},4521:(b,E,t)=>{t.d(E,{z:()=>c});var f=t(3048);function c(l,p=null){return{createGlobalFilter(m,d=null,u=l){return f.V.create(m,d,u)},createSectionFilter(m,d=null,u=l){if(!p)throw new Error("sectionId must be provided to use createSectionFilter.");return f.V.createWithCompositeKey(p,m,d,u)}}}},5884:(b,E,t)=>{t.d(E,{Hw:()=>u,Nm:()=>l,nW:()=>p});var f=t(5467),c=t(740);function l(i,e,o={},r={}){const n=(0,c.kU)(r,e.updateValueFromEvent,e.value);return(0,f.E2)(n,o,i)}function p(i,e,o,r,n,h={},v={}){const s=(0,c.o5)(v,e.updateValueFromEvent,e.value,o,r,n);return(0,f.E2)(s,h,i)}function m(i,e,o={},r={}){const n=createSelect(r,e.updateValueFromEvent,e.value);return createControl(n,o,i)}function d(i,e,o={},r={}){const n=createDateInput(r,e.updateValueFromEvent,e.value);return createControl(n,o,i)}function u(i,e,o={},r={}){const n=(0,c.S)(r,e.updateValueFromEvent,e.value);return(0,f.E2)(n,o,i)}},7877:(b,E,t)=>{t.d(E,{E9:()=>c,FR:()=>p,HX:()=>l,X0:()=>m,pW:()=>$});var f=t(5884);function c(D,C={},O={}){return(0,f.Nm)("\u041F\u043E\u0438\u0441\u043A: ",D,C,O)}function l(D,C={},O={},a=.1,R=3){return(0,f.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",D,a,R,5,C,O)}function p(D,C={},O={},a=.1,R=3){return(0,f.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",D,a,R,5,C,O)}function m(D,C={},O={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",D,C,O)}function d(D,C={},O={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",D,C,O)}function u(D,C,O={},a={}){return(0,f.nW)(D,C,"1","1","999999",O,a)}function i(D,C={},O={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",D,C,O)}function e(D,C={},O={}){return o("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",D,C,O)}function o(D,C,O={},a={}){return createNumberFilterControl(D,C,"5","0","100",O,a)}function r(D,C={},O={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",D,"5","0","100",C,O)}function n(D,C,O={},a={},R="250"){return createNumberFilterControl(D,C,R,"0","1000000",O,a)}function h(D,C={},O={},a="25"){return n("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",D,C,O,a)}function v(D,C={},O={},a="25"){return n("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",D,C,O,a)}function s(D,C={},O={}){return I("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",D,C,O)}function I(D,C,O={},a={}){return createNumberFilterControl(D,C,"1","0","99999",O,a)}function g(D,C={},O={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",D,"1","2","8",C,O)}function F(D,C={},O={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",D,1,1,10,C,O)}function y(D,C={},O={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",D,C,O)}function A(D,C={},O={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",D,C,O)}function S(D,C={},O={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",D,C,O)}function L(D,C={},O={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",D,C,O)}function U(D,C={},O={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",D,C,O)}function $(D,C={},O={}){return(0,f.Hw)("\u0412\u043A\u043B: ",D,C,O)}function K(D,C,O={}){const a=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],R={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},w=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),k=[],G=()=>C?parseFloat(C.value)||0:D.value,P=()=>{const N=G();k.forEach(({button:B,value:z})=>{const T=z<=N?R.active:R.inactive;Object.assign(B.style,T)})};return a.forEach(({value:N,emoji:B,tooltip:z})=>{const V=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...O},B);V.title=z,V.type="button",V.addEventListener("click",T=>{T.preventDefault(),D.updateValue(N),C&&(C.value=N),P()}),V.addEventListener("mouseenter",()=>{N<=G()||(V.style.background=R.hover.background)}),V.addEventListener("mouseleave",()=>{P()}),k.push({button:V,value:N}),w.appendChild(V)}),P(),C&&(C.addEventListener("input",P),C.addEventListener("change",P)),w}},8355:(b,E,t)=>{t.d(E,{_7:()=>c,fO:()=>f});function f(i){if(!i)return[];const o=c(i).flat().filter(r=>r&&!r.isNegative&&r.term).map(r=>r.term);return[...new Set(o)]}function c(i){return i?i.toLowerCase().split(",").map(l).filter(Boolean):[]}function l(i){const e=i.split("/").map(r=>r.trim()).filter(Boolean);if(e.length===0)return null;const o=e.map(p).filter(Boolean);return o.length>0?o:null}function p(i){const e=i.startsWith("!"),o=e?i.slice(1).trim():i;return o?{term:o,isNegative:e}:null}function m(i,e){u(i,o=>o.style.display!=="none",e)}function d(i,e){u(i,o=>o.style.opacity==="",e)}function u(i,e,o){const r=[...i].filter(e).length;o.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${r} \u0438\u0437 ${i.length}`}},5213:(b,E,t)=>{t.d(E,{b:()=>l});var f=t(573),c=t(7273);function l(p,m,d=!1,u="customFiltersContainer"){let i=(0,f.Fi)(`#${u}`,p);if(i)if(d)i.remove();else return;i=(0,c.S)(),i.id=u,m(i,p)}},8200:(b,E,t)=>{t.d(E,{s:()=>f});function f(c){const{target:l}=c,{type:p}=l;switch(p){case"text":return`"${l.value}"`;case"number":return l.value;case"select-one":return l.value;case"date":return`"${l.value}"`;case"checkbox":return l.checked;default:return console.log(`Unknown input type: ${p}`),null}}},157:(b,E,t)=>{t.d(E,{Fg:()=>f,vx:()=>l});const f=window.GM_setValue,c=window.GM.setValue,l=window.GM_getValue},1870:(b,E,t)=>{t.d(E,{j:()=>f});class f{constructor(l,p){this.value=l,this.onChange=p}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(b,E,t)=>{t.d(E,{V:()=>m});var f=t(1870),c=t(8200),l=t(3976),p=t(157);class m extends f.j{constructor(u,i=null,e=null){super((0,p.vx)(u,i),e),this.storageKey=u,this.defaultValue=i}static create(u,i=null,e=null){return new m(u,i,e)}static createWithCompositeKey(u,i,e=null,o=null){const r=`${u}-${i}`;return new m(r,e,o)}updateValueFromEvent=u=>{const i=(0,c.s)(u),e=(0,l.$)(i);this.updateValue(e)};updateValue(u,i=!0){this.value!==u&&((0,p.Fg)(this.storageKey,u),this.value=u,i&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(b,E,t)=>{t.d(E,{$:()=>f});function f(c){return c===""?null:JSON.parse(c)}},4214:(b,E,t)=>{t.d(E,{$z:()=>f,zr:()=>c});function f(d){return d.replace(/\D/g,"")}function c(d){return d.replace(/[^\d.,-]/g,"")}function l(d){return d.replace(/\s/g,"")}function p(d){return d.charAt(0).toUpperCase()+d.slice(1)}function m(d){return d.replace(/\s+/g," ").trim()}},5406:(b,E,t)=>{t.d(E,{$F:()=>d,Fc:()=>f,bn:()=>c,z2:()=>o});function f(v,s="common",I=!1){const{pathname:g}=window.location;return c(g,v,s,I)}function c(v,s,I,g=!1){const F=v.split("/");s=s<0?F.length+s:s;const y=F[s]||I;return g&&console.log(`Pathname element: ${y}`),y}function l(v,s="common",I=!1){const g=f(v,"",I);return p(g,s,I)}function p(v,s,I){if(!v)return s;const g=v.split("-").at(-1);return I&&console.log(`Pathname element ending: ${g}`),g}function m(v,s,I="common",g=!1){const F=c(v,s,"",g);return p(F,I,g)}function d(v){return new URLSearchParams(window.location.search).get(v)}function u(v){return v.split("?")[0]}function i(v){return window.location.pathname.includes(v)}function e(v){return v.some(s=>i(s))}function o(...v){return window.location.pathname.split("/").some(I=>v.includes(I))}function r(v){try{const s=new URL(window.location.href);Object.entries(v).forEach(([I,g])=>{s.searchParams.set(I,g)}),window.location.href=s.toString()}catch(s){console.error("Failed to redirect:",s)}}function n(v,s=[]){const I={pathname:window.location.pathname};s.forEach(S=>{I[S]=d(S)});let g=!1;async function F(){if(g)return;const S={pathname:window.location.pathname};if(s.forEach(L=>{S[L]=d(L)}),Object.keys(I).some(L=>I[L]!==S[L])){Object.assign(I,S),g=!0;try{await v()}catch(L){console.error("Error in URL observer callback:",L)}finally{g=!1}}}function y(){F().catch(S=>{console.error("Error in URL change handler:",S)})}let A=window.location.href;setInterval(()=>{window.location.href!==A&&(A=window.location.href,y())},200),window.addEventListener("popstate",y)}function h(v=[]){n(()=>window.location.reload(),v)}},2524:(b,E,t)=>{t.d(E,{d5:()=>l,vX:()=>u,ft:()=>p});var f=t(157);class c{constructor(o=Date.now(),r=[]){this.lastCheckDate=o,this.reviewsData=r}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(o){const{lastCheckDate:r,reviewsData:n}=o;return new c(r,n)}}const l={LAST_DOCTOR_UPDATE:"last-doctor-update"};function p(e,o){const r=m(e),n=(0,f.vx)(r),h=d(n);h.reviewsData=o,h.updateLastCheckDate(),(0,f.Fg)(r,h),(0,f.Fg)(l.LAST_DOCTOR_UPDATE,Date.now())}function m(e){return`doctor-${e}`}function d(e){return e?c.fromObject(e):new c}function u(e){return i(e)?.reviewsData??null}function i(e){const o=m(e);return(0,f.vx)(o)}},1753:(b,E,t)=>{t.a(b,async(f,c)=>{try{var l=t(573),p=t(7858),m=t(4231),d=t(5406),u=t(5072);const e=(0,l.Fi)(".appointments_page");e?(0,m.$)(e):(0,d.z2)("otzivi")?await(0,u.N)():(0,d.z2)("vrach")&&(0,p.O)(),c()}catch(i){c(i)}},1)},7653:(b,E,t)=>{t.d(E,{NI:()=>o,z1:()=>h,Np:()=>g,pR:()=>v,sp:()=>y,rd:()=>F});var f=t(573);const c={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var l=t(8586),p=t(5406),m=t(4214),d=t(7273),u=t(8738);const i="additionalLinksAppended",e=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function o(A,S){S.classList.contains(i)||(e.forEach(L=>{r(A,S,L)}),S.classList.add(i))}function r(A,S,L){const U=n(A,L),$=(0,u.d)({},L,U),K=document.createElement("br");S.append(K,$)}function n(A,S){const L=`${A} ${S}`;return`https://www.google.com/search?q=${encodeURIComponent(L)}&btnI`}function h(){const A=(0,f.Fi)(c.DOCTOR_CARD_NAME,document,!0);if(!A)return;const S=A.innerText.trim(),L=(0,d.S)();L.style.textAlign="center",(0,f.Fi)(c.DOCTOR_INTRO_LEFT).append(L),o(S,L)}function v(A,S,L=!1){const U=(0,d.S)(l.r.REVIEWS_INFO);L&&(U.style.justifyContent="center"),U.classList.add("v-application");const $=(0,d.S)(l.r.REVIEWS_INFO_BLOCK);return $.style.height=L?"10px":"23px",$.append(U),A.slice(L?1:0).forEach(K=>{const{category:D,title:C,count:O,bgClassSuffix:a}=K,R=`${S}?rates_category=${D}`,w=L?O:`${C} ${O}`,k=(0,u.d)(l.r.REVIEW_INFO,w,R);k.classList=s(a),U.append(k),L&&I(k,C)}),$}function s(A){return`text-caption text--text px-2 py-1 rounded-sm bg-${A}`}function I(A,S){let L=null;A.addEventListener("mouseenter",()=>{L=(0,d.S)(l.r.REVIEW_INFO_TOOLTIP,S),document.body.appendChild(L);const U=A.getBoundingClientRect();L.style.left=`${(U.left+U.right)/2-L.offsetWidth/2+window.scrollX+2}px`,L.style.top=`${U.top+window.scrollY-L.offsetHeight-4}px`}),A.addEventListener("mouseleave",()=>{L&&(L.remove(),L=null)})}function g(A){const S=(0,f.Fi)(c.NAME_SPAN_HOLDER,document,!0);if(!S)return;const L=(0,f.Fi)(c.NAME_SPAN,S,!0);L&&L.append(A)}function F(){const A=(0,p.Fc)(3,"unknown");return(0,m.$z)(A)}function y(A){const S=(0,p.bn)(A,5,"");return(0,m.$z)(S)}},8586:(b,E,t)=>{t.d(E,{r:()=>c});const f={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},c={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...f.INPUT,width:"195px"},NUMBER_INPUT:{...f.INPUT,width:"70px"},CHECKBOX_INPUT:{...f.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(b,E,t)=>{t.d(E,{$:()=>D});var f=t(5406),c=t(573),l=t(5539),p=t(3829),m=t(7653),d=t(5213),u=t(5884),i=t(7877);const e={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .text-subtitle-1",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var o=t(4521),r=t(2524),n=t(4921),h=t(8586),v=t(6754);const s=window.GM_addValueChangeListener,I=(0,f.Fc)(2),{createGlobalFilter:g,createSectionFilter:F}=(0,o.z)(a,I),y=F("spec-filter"),A=F("clinic-filter"),S=F("min-reviews-filter",10),L=F("min-experience-filter",5,P),U=F("max-experience-filter",40),$=g("filter-enabled",!0),K={doctorCardsCache:new WeakMap};function D(N){P(),C();const B=(0,c.Fi)(e.DOCTOR_FILTERS);(0,d.b)(B,O),a(),s(r.d5.LAST_DOCTOR_UPDATE,a),new MutationObserver((0,n.sg)(a)).observe(N,{childList:!0})}function C(){const N=(0,c.Fi)(e.LIST_HEADER);N&&N.remove()}function O(N,B){(0,v.ZM)(N,h.r.FILTERS_CONTAINER),N.style.marginTop="6px";const z=(0,u.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",y,h.r.CONTROL,h.r.TEXT_INPUT),V=(0,u.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",A,h.r.CONTROL,h.r.TEXT_INPUT),T=(0,i.X0)(S,h.r.CONTROL,h.r.NUMBER_INPUT),_=(0,u.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",L,"1","0","100",h.r.CONTROL,h.r.NUMBER_INPUT),x=(0,u.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",U,"1","0","100",h.r.CONTROL,h.r.NUMBER_INPUT),M=(0,i.pW)($,h.r.CONTROL,h.r.CHECKBOX_INPUT);N.append(z,V,T,_,x,M),B.append(N)}function a(){(0,c.fI)(e.DOCTOR_CARD).forEach(R)}function R(N){if(!$.value){(0,l.kl)(N);return}let B=K.doctorCardsCache.get(N);if(!B){const V=(0,c.Fi)(e.PROFILE_CARD,N),T=(0,c.Fi)(e.REVIEWS_LINK,V),_=(0,c.Fi)(e.EXPERIENCE_WRAP,N);if(!T||!_){(0,l.Bt)(N);return}const M=(0,c.Fi)(e.SPEC_WRAP,N,!0).innerText.trim(),W=(0,c.Fi)(e.CLINIC_CONTAINER,N,!0),H=(0,c.Fi)(e.CLINIC_WRAP,W,!0).innerText.trim(),X=(0,c.YA)(T,!0),Q=(0,c.YA)(_,!0),J=w(T);T.href=J,(0,m.NI)(k(N),V),B={specInfo:M,clinicName:H,reviewsLinkNumber:X,experienceNumber:Q,reviewsLink:T,reviewInfoAppended:!1},K.doctorCardsCache.set(N,B)}G(B);const z=(0,p.Ay)(B.specInfo,y)||(0,p.Ay)(B.clinicName,A)||(0,p.JE)(B.reviewsLinkNumber,S)||(0,p.JE)(B.experienceNumber,L)||(0,p.iG)(B.experienceNumber,U);(0,l.UC)(N,z)}function w(N){return N.href.replace(/\/#otzivi$/,"/otzivi/")}function k(N){return(0,c.Fi)(e.DOCTOR_CARD_NAME,N,!0).innerText}function G(N){if(N.reviewInfoAppended)return;const{reviewsLink:B}=N,z=B.href,V=(0,r.vX)((0,m.sp)(z));if(!V)return;const T=(0,m.pR)(V,z,!0);(0,l.WH)(B,T),N.reviewInfoAppended=!0}function P(){if(!L.value)return;const N=new URL(window.location.href);+N.searchParams.get("experience")!==L.value&&(N.searchParams.set("experience",L.value),window.location.href=N.toString())}},7858:(b,E,t)=>{t.d(E,{O:()=>u});var f=t(573),c=t(7653);const l={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var p=t(2524),m=t(7273),d=t(8738);function u(){(0,c.z1)(),e();const r=i();o(r);const n=(0,p.vX)((0,c.rd)());if(!n)return;const h=(0,c.pR)(n,r);(0,c.Np)(h)}function i(){const{location:r}=window;return`${r.origin}${r.pathname}otzivi/`}function e(){if(!(0,f.Fi)(l.DOCTOR_CONTACTS))return;const n=[...(0,f.fI)(l.DOCTOR_DETAILS)].pop();if(!n)return;n.style.position="sticky",n.style.top="16px";const h=(0,m.S)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");h.classList.add("b-doctor-details__toc-title");const v=(0,d.d)({},null,"#doctor-contacts");v.classList.add("b-doctor-details__toc-item"),v.append(h),n.insertBefore(v,n.firstChild)}function o(r){const n=(0,f.Fi)(l.REVIEWS_LINK);n&&(n.href=r)}},5072:(b,E,t)=>{t.d(E,{N:()=>R});var f=t(7653);const c={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var l=t(573),p=t(4921),m=t(5406),d=t(2524),u=t(4521),i=t(5213),e=t(8586),o=t(7877),r=t(5539);function n(T,_){T.forEach(x=>h(_,x))}function h(T,_){if(!_)return;const x=new RegExp(`(${_})`,"gi"),M=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null);let W=M.nextNode();const j=[];for(;W;){const{textContent:H}=W;if(x.test(H)){const X=document.createDocumentFragment();let Q=0;H.replace(x,(J,re,q)=>{q>Q&&X.appendChild(document.createTextNode(H.slice(Q,q)));const Z=document.createElement("span");Z.className="highlightedSubstring",Z.style.backgroundColor="yellow",Z.textContent=J,X.appendChild(Z),Q=q+J.length}),Q<H.length&&X.appendChild(document.createTextNode(H.slice(Q))),j.push({node:W,fragment:X})}W=M.nextNode()}j.forEach(({node:H,fragment:X})=>{H.parentNode.replaceChild(X,H)})}function v(T){(0,l.fI)(".highlightedSubstring",T).forEach(x=>{const{parentNode:M}=x;x.replaceWith(x.textContent),M.normalize()})}var s=t(8355);function I(T,_){const x=(0,s.fO)(T.value);n(x,_)}function g(T,_){const x=getIncludedSearchStrings(T.value);_.forEach(M=>highlightSubstrings(x,M))}var F=t(3829),y=t(7273);function A(T={}){return(0,y.S)(T,"|")}function S(T={},_=75,x="customFiltersContainer"){const M=document.getElementById(x);if(!M)return console.log(`Element with id="${x}" not found.`),null;const W=createButton(T,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return W.addEventListener("mouseenter",()=>{W.style.filter="brightness(0.9)"}),W.addEventListener("mouseleave",()=>{W.style.filter="brightness(1)"}),W.addEventListener("click",()=>{const j=M.getBoundingClientRect();window.scrollTo({top:j.top+window.scrollY-_})}),new IntersectionObserver(([j])=>{W.style.display=j.isIntersecting?"none":"flex"},{threshold:.5}).observe(M),W}function L(T,_={}){const x=S(_);x&&T.appendChild(x)}var U=t(6754);const{createGlobalFilter:$}=(0,u.z)(k),K=$("reviews-text-filter"),D=$("reviews-min-rating-filter"),C=$("reviews-max-rating-filter"),O=$("reviews-filter-enabled",!0),a={reviewCardsCache:new Map};async function R(){(0,f.z1)();const T=await(0,p.xk)(document,c.CONTROLS_CONTAINER);(0,i.b)(T,w),k();const _=await N();(0,d.ft)((0,f.rd)(),_);const x=(0,f.pR)(_,z());(0,f.Np)(x),(0,m.$F)("rates_category")&&V()}function w(T,_){(0,U.ZM)(T,e.r.FILTERS_CONTAINER),T.style.marginTop="12px";const x=(0,o.E9)(K,e.r.CONTROL,e.r.TEXT_INPUT),M=(0,o.HX)(D,e.r.CONTROL,e.r.NUMBER_INPUT,1,1),W=(0,o.FR)(C,e.r.CONTROL,e.r.NUMBER_INPUT,1,1),j=A(e.r.CONTROL),H=(0,o.pW)(O,e.r.CONTROL,e.r.CHECKBOX_INPUT);T.append(x,M,W,j,H),_.append(T)}function k(){(0,l.fI)(c.REVIEWS).forEach(G)}function G(T){if(!O.value){(0,r.kl)(T);return}v(T);let _=a.reviewCardsCache.get(T);if(!_){const M=(0,l.Fi)(c.REVIEW_TEXT_WRAP,T),W=(0,l.Fi)(c.REVIEW_RATING_WRAP,T);if(!M){(0,r.Bt)(T);return}_={reviewTextWrap:M,reviewText:M.innerText,rating:W&&(0,l.YA)(W)},a.reviewCardsCache.set(T,_)}K.value&&I(K,_.reviewTextWrap);const x=(0,F.Ay)(_.reviewText,K)||P(_.rating);(0,r.UC)(T,x)}function P(T){return T?(0,F.JE)(T,D)||(0,F.iG)(T,C):!1}async function N(){const T=(0,l.Fi)(c.FILTER_CHIP);T.click();const _=await(0,p.xk)(document,c.FILTER_LIST),x=[...(0,l.fI)(c.FILTER_LIST_ITEM,_)].map(M=>{const W=M.getAttribute("data-qa");if(!W)return null;const j=W.replace("reviews_filter_list_item_",""),H=(0,l.Fi)(c.FILTER_TITLE_WRAP,M).textContent.trim(),X=(0,l.Fi)(c.FILTER_COUNT_WRAP,M),Q=(0,l.YA)(X,!0),J=B(X.classList);return{category:j,title:H,count:Q,bgClassSuffix:J}});return T.click(),x}function B(T){const _=T.value.match(/bg-(\w+)/);return _?_[1]:null}function z(){const{location:T}=window;return`${T.origin}${T.pathname}`}function V(){(0,l.Fi)(c.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},ee={};function Y(b){var E=ee[b];if(E!==void 0)return E.exports;var t=ee[b]={exports:{}};return te[b](t,t.exports,Y),t.exports}(()=>{var b=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",f=l=>{l&&l.d<1&&(l.d=1,l.forEach(p=>p.r--),l.forEach(p=>p.r--?p.r++:p()))},c=l=>l.map(p=>{if(p!==null&&typeof p=="object"){if(p[b])return p;if(p.then){var m=[];m.d=0,p.then(i=>{d[E]=i,f(m)},i=>{d[t]=i,f(m)});var d={};return d[b]=i=>i(m),d}}var u={};return u[b]=i=>{},u[E]=p,u});Y.a=(l,p,m)=>{var d;m&&((d=[]).d=-1);var u=new Set,i=l.exports,e,o,r,n=new Promise((h,v)=>{r=v,o=h});n[E]=i,n[b]=h=>(d&&h(d),u.forEach(h),n.catch(v=>{})),l.exports=n,p(h=>{e=c(h);var v,s=()=>e.map(g=>{if(g[t])throw g[t];return g[E]}),I=new Promise(g=>{v=()=>g(s),v.r=0;var F=y=>y!==d&&!u.has(y)&&(u.add(y),y&&!y.d&&(v.r++,y.push(v)));e.map(y=>y[b](F))});return v.r?I:s()},h=>(h?r(n[t]=h):o(i),f(d))),d&&d.d<0&&(d.d=0)}})(),Y.d=(b,E)=>{for(var t in E)Y.o(E,t)&&!Y.o(b,t)&&Object.defineProperty(b,t,{enumerable:!0,get:E[t]})},Y.o=(b,E)=>Object.prototype.hasOwnProperty.call(b,E);var ne=Y(1753)})();})();
