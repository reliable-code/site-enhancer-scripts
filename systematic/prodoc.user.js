// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.75784360
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var te={5467:(F,E,e)=>{e.d(E,{E2:()=>r});var l=e(9928);function r(h,c={},t=null){const n=(0,l.Sw)(c,t);return n.append(h),n}function d(h,c=null,t={},n={}){const o=createActionLink(h,c,n);return r(o,t)}function p(h,c=null,t=null,n={},o={}){const v=createActionLinkWithIcon(h,t,c,o);return r(v,n)}},9928:(F,E,e)=>{e.d(E,{S:()=>h,Sw:()=>S,d:()=>n,kU:()=>d,o5:()=>p});var l=e(4921),r=e(6754);function d(s,i,m){const a=c(s,"text",i);return a.value=m,a}function p(s,i,m,a,x,O){const _=c(s,"number",i);return _.value=m,_.step=a,_.min=x,_.max=O,_}function h(s,i,m){const a=c(s,"checkbox",i);return a.checked=m,a}function c(s={},i=null,m=null){const a=u("input",s);return i&&(a.type=i),m&&(a.addEventListener("keyup",(0,l.sg)(m,200)),a.addEventListener("change",(0,l.sg)(m,100))),a}function t(s={},i=null){return u("span",s,i)}function n(s={},i=null,m=null){const a=u("a",s,i);return m&&(a.href=m),a}function o(s,i=null,m={}){m.cursor||="pointer";const a=n(m,i);return s&&a.addEventListener("click",s),a}function v(s,i,m=null,a={},x={}){a.display||="inline-flex",a.alignItems||="center",a.gap||="0.25em";const O=o(s,m,a);return O.prepend(N(i,x)),O}function g(s={},i=null,m=null){const a=u("button",s,i);return m&&a.addEventListener("click",m),a}function S(s={},i=null){return u("div",s,i)}function C(s={}){return u("i",s)}function N(s,i={}){i.width||="1em",i.height||="1em",i.paddingBottom||="1px";const m=C(i);return m.setAttribute("data-lucide",s),m}function u(s,i,m=null){if(typeof i!="object"||i===null)throw new TypeError("styles should be an object");const a=document.createElement(s);return(0,r.ZM)(a,i),m&&(a.innerHTML=m),a}},573:(F,E,e)=>{e.d(E,{Fi:()=>d,YA:()=>n,fI:()=>p});var l=e(4214);function r(u,s=document){return!!s.querySelector(u)}function d(u,s=document,i=!1){const m=s.querySelector(u);return i&&!m&&console.log(`No element found for selector: ${u}`),m}function p(u,s=document,i=!1){const m=s.querySelectorAll(u);return i&&!m.length&&console.log(`No elements found for selector: ${u}`),m}function h(u,s=1){let i=u;for(let m=0;m<s;m++){if(!i.parentElement)return null;i=i.parentElement}return i}function c(u,s,i){return[...u.querySelectorAll(s)].find(m=>m.textContent.trim().includes(i))}function t(u,s,i=!1,m=!1,a=null){const x=d(s,u);return n(x,i,m,a)}function n(u,s=!1,i=!1,m=null){if(!u)return m===null?(console.log("No element found"),null):m;const a=u.innerText;return g(a,s,i)}function o(u,s,i=!1){const m=u[s];return n(m,i)}function v(u,s=!1,i=!1){const m=u.textContent;return g(m,s,i)}function g(u,s,i){s&&(u=(0,l.zr)(u)),i&&(u=u.replace(",","."));const m=Number(u);return Number.isNaN(m)?(console.log(`Invalid number: ${u}`),0):m}function S(u){return[...u.childNodes].find(s=>s.nodeType===Node.TEXT_NODE)}function C(u){const s=i=>i.nodeType===Node.TEXT_NODE&&i.textContent.trim()!==""?[i]:[...i.childNodes].flatMap(s);return s(u)}function N(u){return normalizeSpacing(u.textContent)}},5539:(F,E,e)=>{e.d(E,{Bt:()=>r,UC:()=>o,WH:()=>l,kl:()=>t});function l(f,L){f.parentNode.insertBefore(L,f.nextSibling)}function r(f){f.style.display="none"}function d(f,L=1){const b=document.querySelector(f);b&&p(b,L)}function p(f,L=1){const b=getElementAncestor(f,L);b&&r(b)}function h(f){S(f),r(f)}function c(f){f.intersectionObserver||runOnceOnIntersection(f,()=>r(f))}function t(f){f.style.display=""}function n(f){const L=g(f);f.style.display=L}function o(f,L){L?r(f):t(f)}function v(f,L){L?c(f):(clearIntersectionObserver(f),t(f))}function g(f){return S(f),f.defaultDisplay}function S(f){if(f.defaultDisplay)return;const{display:L}=getComputedStyle(f);f.defaultDisplay=L}function C(){return{show:[],hide:[]}}function N(f,L,b){f?L.hide.push(b):L.show.push(b)}function u(f){f.show.forEach(t),f.hide.forEach(r)}function s(f,L,b=.3){L?m(f,b):i(f)}function i(f){f.style.opacity=""}function m(f,L=.3){f.style.opacity=L}function a(f){f.style.order=""}function x(f,L){f.style.order=L}function O(f,L){f.style.background=L}function _(f,L){const b=getFirstElement(L);b&&I(f,b)}function I(f,L){const b=createLink();b.href=f,L.parentNode.append(b),b.append(L)}function R(f,L){const b=getFirstElement(L);b&&w(f,b)}function w(f,L){const b=createLink();b.href=f,b.append(...L.childNodes),L.append(b)}function P(){const f=getURLQueryParam("scrollTo");if(!f)return;const L=document.getElementById(f);L?L.scrollIntoView():console.log(`Element with ID "${f}" was not found.`)}function B(f,L,b){const z=`${b}-click-passed`;return function(K){if(K.hasAttribute(z))return;const $=findElementByText(K,f,L);$&&$.click(),K.setAttribute(z,"")}}function Y(f,L,b="text/plain"){const z=new Blob([f],{type:b}),K=URL.createObjectURL(z),$=document.createElement("a");$.href=K,$.download=L,document.body.appendChild($),$.click(),document.body.removeChild($),requestAnimationFrame(()=>URL.revokeObjectURL(K))}},6754:(F,E,e)=>{e.d(E,{ZM:()=>l});function l(h,c){Object.assign(h.style,c)}function r(h,c="custom-global-style"){let t=document.getElementById(c);t||(t=document.createElement("style"),t.id=c,t.type="text/css",document.head.appendChild(t)),t.textContent=h}function d(h){return Object.entries(h).map(([c,t])=>`${c.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function p(h){return h?h.split(";").filter(c=>c.trim()!=="").reduce((c,t)=>{const[n,o]=t.split(":").map(g=>g.trim()),v=n.replace(/-([a-z])/g,(g,S)=>S.toUpperCase());return c[v]=o,c},{}):{}}},4921:(F,E,e)=>{e.d(E,{sg:()=>p,xk:()=>l});function l(t,n,o=null){const v=t.querySelector(n);return v?Promise.resolve(v):new Promise(g=>{const S=new MutationObserver(N);S.observe(t,{childList:!0,subtree:!0});let C;o&&(C=setTimeout(()=>{S.disconnect(),console.log(`No element found for selector: ${n}`),g(null)},o));function N(){const u=t.querySelector(n);u&&(C&&clearTimeout(C),S.disconnect(),g(u))}})}function r(t,n){return t.querySelector(n)?new Promise(v=>{const g=new MutationObserver(S);g.observe(t,{childList:!0,subtree:!0});function S(){t.querySelector(n)||(g.disconnect(),v())}}):Promise.resolve()}function d(t,n=400){return new Promise(o=>{let v;const g=new MutationObserver(()=>{clearTimeout(v),S()});function S(){v=setTimeout(()=>{g.disconnect(),o()},n)}S(),g.observe(t,{childList:!0,subtree:!0})})}function p(t,n=250){let o;return(...v)=>{clearTimeout(o),o=setTimeout(()=>t(...v),n)}}function h(t,n){const o=new IntersectionObserver(v=>{v.forEach(g=>{g.isIntersecting&&(n(),c(t))})});t.intersectionObserver=o,o.observe(t)}function c(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(F,E,e)=>{e.d(E,{Ay:()=>r,JE:()=>p,iG:()=>h});var l=e(8355);function r(t,n){return!d(t,n)}function d(t,n){if(!n.value)return!0;const o=t.toLowerCase(),v=(0,l.R)(n),g=[],S=[];return v.forEach(C=>{if(C.startsWith("!")){const N=C.substring(1);N&&S.push(N)}else g.push(C)}),g.every(C=>o.includes(C))&&S.every(C=>!o.includes(C))}function p(t,n){return n.value!=null&&t<n.value}function h(t,n){return n.value!=null&&t>n.value}function c(t,n){return n.value&&t!==n.value}},4521:(F,E,e)=>{e.d(E,{z:()=>r});var l=e(3048);function r(d,p=null){return{createGlobalFilter(h,c=null,t=d){return l.V.create(h,c,t)},createSectionFilter(h,c=null,t=d){if(!p)throw new Error("sectionId must be provided to use createSectionFilter.");return l.V.createWithCompositeKey(p,h,c,t)}}}},5884:(F,E,e)=>{e.d(E,{Hw:()=>h,Nm:()=>d,nW:()=>p});var l=e(9928),r=e(5467);function d(c,t,n={},o={}){const v=(0,l.kU)(o,t.updateValueFromEvent,t.value);return(0,r.E2)(v,n,c)}function p(c,t,n,o,v,g={},S={}){const C=(0,l.o5)(S,t.updateValueFromEvent,t.value,n,o,v);return(0,r.E2)(C,g,c)}function h(c,t,n={},o={}){const v=(0,l.S)(o,t.updateValueFromEvent,t.value);return(0,r.E2)(v,n,c)}},7877:(F,E,e)=>{e.d(E,{E9:()=>r,FR:()=>p,HX:()=>d,X0:()=>h,pW:()=>_});var l=e(5884);function r(I,R={},w={}){return(0,l.Nm)("\u041F\u043E\u0438\u0441\u043A: ",I,R,w)}function d(I,R={},w={},P=.1,B=3){return(0,l.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,P,B,5,R,w)}function p(I,R={},w={},P=.1,B=3){return(0,l.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,P,B,5,R,w)}function h(I,R={},w={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,R,w)}function c(I,R={},w={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,R,w)}function t(I,R,w={},P={}){return(0,l.nW)(I,R,"1","1","999999",w,P)}function n(I,R={},w={}){return o("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",I,R,w)}function o(I,R,w={},P={}){return createNumberFilterControl(I,R,"5","0","100",w,P)}function v(I,R={},w={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",I,"5","0","100",R,w)}function g(I,R,w={},P={},B="250"){return createNumberFilterControl(I,R,B,"0","1000000",w,P)}function S(I,R={},w={},P="25"){return g("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",I,R,w,P)}function C(I,R={},w={},P="25"){return g("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",I,R,w,P)}function N(I,R={},w={}){return u("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",I,R,w)}function u(I,R,w={},P={}){return createNumberFilterControl(I,R,"1","0","99999",w,P)}function s(I,R={},w={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",I,"1","2","7",R,w)}function i(I,R={},w={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",I,1,1,10,R,w)}function m(I,R={},w={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",I,R,w)}function a(I,R={},w={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",I,R,w)}function x(I,R={},w={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",I,R,w)}function O(I,R={},w={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",I,R,w)}function _(I,R={},w={}){return(0,l.Hw)("\u0412\u043A\u043B: ",I,R,w)}},8355:(F,E,e)=>{e.d(E,{R:()=>l,f:()=>r});function l(d){return d.value.toLowerCase().split(",").map(p=>p.trim()).filter(p=>p!=="")}function r(d){return l(d).filter(p=>!p.startsWith("!"))}},5213:(F,E,e)=>{e.d(E,{b:()=>d});var l=e(9928),r=e(573);function d(p,h,c=!1,t="customFiltersContainer"){let n=(0,r.Fi)(`#${t}`,p);if(n)if(c)n.remove();else return;n=(0,l.Sw)(),n.id=t,h(n,p)}},8200:(F,E,e)=>{e.d(E,{s:()=>l});function l(r){const{target:d}=r,{type:p}=d;switch(p){case"text":return`"${d.value}"`;case"number":return d.value;case"checkbox":return d.checked;default:return console.log(`Unknown input type: ${p}`),null}}},157:(F,E,e)=>{e.d(E,{Fg:()=>l,vx:()=>d});const l=window.GM_setValue,r=window.GM.setValue,d=window.GM_getValue},1870:(F,E,e)=>{e.d(E,{j:()=>l});class l{constructor(d,p){this.value=d,this.onChange=p}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(F,E,e)=>{e.d(E,{V:()=>h});var l=e(1870),r=e(8200),d=e(3976),p=e(157);class h extends l.j{constructor(t,n=null,o=null){super((0,p.vx)(t,n),o),this.storageKey=t,this.defaultValue=n}static create(t,n=null,o=null){return new h(t,n,o)}static createWithCompositeKey(t,n,o=null,v=null){const g=`${t}-${n}`;return new h(g,o,v)}updateValueFromEvent=t=>{const n=(0,r.s)(t),o=(0,d.$)(n);this.updateValue(o)};updateValue(t,n=!0){this.value!==t&&((0,p.Fg)(this.storageKey,t),this.value=t,n&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(F,E,e)=>{e.d(E,{$:()=>l});function l(r){return r===""?null:JSON.parse(r)}},4214:(F,E,e)=>{e.d(E,{$z:()=>l,zr:()=>r});function l(c){return c.replace(/\D/g,"")}function r(c){return c.replace(/[^\d.,-]/g,"")}function d(c){return c.replace(/\s/g,"")}function p(c){return c.charAt(0).toUpperCase()+c.slice(1)}function h(c){return c.replace(/\s+/g," ").trim()}},5406:(F,E,e)=>{e.d(E,{$F:()=>c,Fc:()=>l,bn:()=>r,z2:()=>v});function l(N,u="common",s=!1){const{pathname:i}=window.location;return r(i,N,u,s)}function r(N,u,s,i=!1){const m=N.split("/");u=u<0?m.length+u:u;const a=m[u]||s;return i&&console.log(`Pathname element: ${a}`),a}function d(N,u="common",s=!1){const i=l(N,"",s);return p(i,u,s)}function p(N,u,s){if(!N)return u;const i=N.split("-").at(-1);return s&&console.log(`Pathname element ending: ${i}`),i}function h(N,u,s="common",i=!1){const m=r(N,u,"",i);return p(m,s,i)}function c(N){return new URLSearchParams(window.location.search).get(N)}function t(N){return N.split("?")[0]}function n(N){return window.location.pathname.includes(N)}function o(N){return N.some(u=>n(u))}function v(N){return window.location.pathname.split("/").some(s=>s===N)}function g(N){try{const u=new URL(window.location.href);Object.entries(N).forEach(([s,i])=>{u.searchParams.set(s,i)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function S(N,u=[]){const s={pathname:window.location.pathname};u.forEach(O=>{s[O]=c(O)});let i=!1;async function m(){if(i)return;const O={pathname:window.location.pathname};if(u.forEach(_=>{O[_]=c(_)}),Object.keys(s).some(_=>s[_]!==O[_])){Object.assign(s,O),i=!0;try{await N()}catch(_){console.error("Error in URL observer callback:",_)}finally{i=!1}}}function a(){m().catch(O=>{console.error("Error in URL change handler:",O)})}let x=window.location.href;setInterval(()=>{window.location.href!==x&&(x=window.location.href,a())},200),window.addEventListener("popstate",a)}function C(N=[]){S(()=>window.location.reload(),N)}},2524:(F,E,e)=>{e.d(E,{d5:()=>d,vX:()=>t,ft:()=>p});var l=e(157);class r{constructor(v=Date.now(),g=[]){this.lastCheckDate=v,this.reviewsData=g}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(v){const{lastCheckDate:g,reviewsData:S}=v;return new r(g,S)}}const d={LAST_DOCTOR_UPDATE:"last-doctor-update"};function p(o,v){const g=h(o),S=(0,l.vx)(g),C=c(S);C.reviewsData=v,C.updateLastCheckDate(),(0,l.Fg)(g,C),(0,l.Fg)(d.LAST_DOCTOR_UPDATE,Date.now())}function h(o){return`doctor-${o}`}function c(o){return o?r.fromObject(o):new r}function t(o){return n(o)?.reviewsData??null}function n(o){const v=h(o);return(0,l.vx)(v)}},1753:(F,E,e)=>{e.a(F,async(l,r)=>{try{var d=e(573),p=e(7858),h=e(4231),c=e(5406),t=e(5072);const o=(0,d.Fi)(".appointments_page");o?(0,h.$)(o):(0,c.z2)("otzivi")?await(0,t.N)():(0,c.z2)("vrach")&&(0,p.O)(),r()}catch(n){r(n)}},1)},7653:(F,E,e)=>{e.d(E,{NI:()=>o,z1:()=>S,Np:()=>s,pR:()=>C,sp:()=>m,rd:()=>i});var l=e(9928),r=e(573);const d={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var p=e(8586),h=e(5406),c=e(4214);const t="additionalLinksAppended",n=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function o(a,x){x.classList.contains(t)||(n.forEach(O=>{v(a,x,O)}),x.classList.add(t))}function v(a,x,O){const _=g(a,O),I=(0,l.d)({},O,_),R=document.createElement("br");x.append(R,I)}function g(a,x){const O=`${a} ${x}`;return`https://www.google.com/search?q=${encodeURIComponent(O)}&btnI`}function S(){const a=(0,r.Fi)(d.DOCTOR_CARD_NAME,document,!0);if(!a)return;const x=a.innerText.trim(),O=(0,l.Sw)();O.style.textAlign="center",(0,r.Fi)(d.DOCTOR_INTRO_LEFT).append(O),o(x,O)}function C(a,x,O=!1){const _=(0,l.Sw)(p.r.REVIEWS_INFO);O&&(_.style.justifyContent="center"),_.classList.add("v-application");const I=(0,l.Sw)(p.r.REVIEWS_INFO_BLOCK);return I.style.height=O?"10px":"23px",I.append(_),a.slice(O?1:0).forEach(R=>{const{category:w,title:P,count:B,bgClassSuffix:Y}=R,f=`${x}?rates_category=${w}`,L=O?B:`${P} ${B}`,b=(0,l.d)(p.r.REVIEW_INFO,L,f);b.classList=N(Y),_.append(b),O&&u(b,P)}),I}function N(a){return`text-caption text--text px-2 py-1 rounded-sm bg-${a}`}function u(a,x){let O=null;a.addEventListener("mouseenter",()=>{O=(0,l.Sw)(p.r.REVIEW_INFO_TOOLTIP,x),document.body.appendChild(O);const _=a.getBoundingClientRect();O.style.left=`${(_.left+_.right)/2-O.offsetWidth/2+window.scrollX+2}px`,O.style.top=`${_.top+window.scrollY-O.offsetHeight-4}px`}),a.addEventListener("mouseleave",()=>{O&&(O.remove(),O=null)})}function s(a){const x=(0,r.Fi)(d.NAME_SPAN_HOLDER,document,!0);if(!x)return;const O=(0,r.Fi)(d.NAME_SPAN,x,!0);O&&O.append(a)}function i(){const a=(0,h.Fc)(3,"unknown");return(0,c.$z)(a)}function m(a){const x=(0,h.bn)(a,5,"");return(0,c.$z)(x)}},8586:(F,E,e)=>{e.d(E,{r:()=>r});const l={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},r={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...l.INPUT,width:"195px"},NUMBER_INPUT:{...l.INPUT,width:"70px"},CHECKBOX_INPUT:{...l.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(F,E,e)=>{e.d(E,{$:()=>P});var l=e(5406),r=e(573),d=e(5539),p=e(3829),h=e(7653),c=e(5213),t=e(5884),n=e(7877);const o={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .text-subtitle-1",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var v=e(4521),g=e(2524),S=e(4921),C=e(8586),N=e(6754);const u=window.GM_addValueChangeListener,s=(0,l.Fc)(2),{createGlobalFilter:i,createSectionFilter:m}=(0,v.z)(f,s),a=m("spec-filter"),x=m("clinic-filter"),O=m("min-reviews-filter",10),_=m("min-experience-filter",5,$),I=m("max-experience-filter",40),R=i("filter-enabled",!0),w={doctorCardsCache:new WeakMap};function P(D){$(),B();const U=(0,r.Fi)(o.DOCTOR_FILTERS);(0,c.b)(U,Y),f(),u(g.d5.LAST_DOCTOR_UPDATE,f),new MutationObserver((0,S.sg)(f)).observe(D,{childList:!0})}function B(){const D=(0,r.Fi)(o.LIST_HEADER);D&&D.remove()}function Y(D,U){(0,N.ZM)(D,C.r.FILTERS_CONTAINER),D.style.marginTop="6px";const X=(0,t.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",a,C.r.CONTROL,C.r.TEXT_INPUT),G=(0,t.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",x,C.r.CONTROL,C.r.TEXT_INPUT),T=(0,n.X0)(O,C.r.CONTROL,C.r.NUMBER_INPUT),A=(0,t.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",_,"1","0","100",C.r.CONTROL,C.r.NUMBER_INPUT),y=(0,t.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",I,"1","0","100",C.r.CONTROL,C.r.NUMBER_INPUT),W=(0,n.pW)(R,C.r.CONTROL,C.r.CHECKBOX_INPUT);D.append(X,G,T,A,y,W),U.append(D)}function f(){(0,r.fI)(o.DOCTOR_CARD).forEach(L)}function L(D){if(!R.value){(0,d.kl)(D);return}let U=w.doctorCardsCache.get(D);if(!U){const G=(0,r.Fi)(o.PROFILE_CARD,D),T=(0,r.Fi)(o.REVIEWS_LINK,G),A=(0,r.Fi)(o.EXPERIENCE_WRAP,D);if(!T||!A){(0,d.Bt)(D);return}const W=(0,r.Fi)(o.SPEC_WRAP,D,!0).innerText.trim(),M=(0,r.Fi)(o.CLINIC_CONTAINER,D,!0),k=(0,r.Fi)(o.CLINIC_WRAP,M,!0).innerText.trim(),H=(0,r.YA)(T,!0),j=(0,r.YA)(A,!0),J=b(T);T.href=J,(0,h.NI)(z(D),G),U={specInfo:W,clinicName:k,reviewsLinkNumber:H,experienceNumber:j,reviewsLink:T,reviewInfoAppended:!1},w.doctorCardsCache.set(D,U)}K(U);const X=(0,p.Ay)(U.specInfo,a)||(0,p.Ay)(U.clinicName,x)||(0,p.JE)(U.reviewsLinkNumber,O)||(0,p.JE)(U.experienceNumber,_)||(0,p.iG)(U.experienceNumber,I);(0,d.UC)(D,X)}function b(D){return D.href.replace(/\/#otzivi$/,"/otzivi/")}function z(D){return(0,r.Fi)(o.DOCTOR_CARD_NAME,D,!0).innerText}function K(D){if(D.reviewInfoAppended)return;const{reviewsLink:U}=D,X=U.href,G=(0,g.vX)((0,h.sp)(X));if(!G)return;const T=(0,h.pR)(G,X,!0);(0,d.WH)(U,T),D.reviewInfoAppended=!0}function $(){if(!_.value)return;const D=new URL(window.location.href);+D.searchParams.get("experience")!==_.value&&(D.searchParams.set("experience",_.value),window.location.href=D.toString())}},7858:(F,E,e)=>{e.d(E,{O:()=>c});var l=e(573),r=e(9928),d=e(7653);const p={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var h=e(2524);function c(){(0,d.z1)(),n();const v=t();o(v);const g=(0,h.vX)((0,d.rd)());if(!g)return;const S=(0,d.pR)(g,v);(0,d.Np)(S)}function t(){const{location:v}=window;return`${v.origin}${v.pathname}otzivi/`}function n(){if(!(0,l.Fi)(p.DOCTOR_CONTACTS))return;const g=[...(0,l.fI)(p.DOCTOR_DETAILS)].pop();if(!g)return;g.style.position="sticky",g.style.top="16px";const S=(0,r.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");S.classList.add("b-doctor-details__toc-title");const C=(0,r.d)({},null,"#doctor-contacts");C.classList.add("b-doctor-details__toc-item"),C.append(S),g.insertBefore(C,g.firstChild)}function o(v){const g=(0,l.Fi)(p.REVIEWS_LINK);g&&(g.href=v)}},5072:(F,E,e)=>{e.d(E,{N:()=>L});var l=e(7653);const r={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var d=e(573),p=e(4921),h=e(5406),c=e(2524),t=e(4521),n=e(5213),o=e(8586),v=e(7877),g=e(5539);function S(T,A){T.forEach(y=>C(A,y))}function C(T,A){if(!A)return;const y=new RegExp(`(${A})`,"gi"),W=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null);let M=W.nextNode();const V=[];for(;M;){const{textContent:k}=M;if(y.test(k)){const H=document.createDocumentFragment();let j=0;k.replace(y,(J,re,q)=>{q>j&&H.appendChild(document.createTextNode(k.slice(j,q)));const Z=document.createElement("span");Z.className="highlightedSubstring",Z.style.backgroundColor="yellow",Z.textContent=J,H.appendChild(Z),j=q+J.length}),j<k.length&&H.appendChild(document.createTextNode(k.slice(j))),V.push({node:M,fragment:H})}M=W.nextNode()}V.forEach(({node:k,fragment:H})=>{k.parentNode.replaceChild(H,k)})}function N(T){(0,d.fI)(".highlightedSubstring",T).forEach(y=>{const{parentNode:W}=y;y.replaceWith(y.textContent),W.normalize()})}var u=e(8355);function s(T,A){const y=(0,u.f)(T);S(y,A)}function i(T,A){const y=getIncludedSearchStrings(T);A.forEach(W=>highlightSubstrings(y,W))}var m=e(3829),a=e(9928);function x(T={}){return(0,a.Sw)(T,"|")}function O(T={},A=75,y="customFiltersContainer"){const W=document.getElementById(y);if(!W)return console.log(`Element with id="${y}" not found.`),null;const M=createButton(T,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return M.addEventListener("mouseenter",()=>{M.style.filter="brightness(0.9)"}),M.addEventListener("mouseleave",()=>{M.style.filter="brightness(1)"}),M.addEventListener("click",()=>{const V=W.getBoundingClientRect();window.scrollTo({top:V.top+window.scrollY-A})}),new IntersectionObserver(([V])=>{M.style.display=V.isIntersecting?"none":"flex"},{threshold:.5}).observe(W),M}function _(T,A={}){const y=O(A);y&&T.appendChild(y)}var I=e(6754);const{createGlobalFilter:R}=(0,t.z)(z),w=R("reviews-text-filter"),P=R("reviews-min-rating-filter"),B=R("reviews-max-rating-filter"),Y=R("reviews-filter-enabled",!0),f={reviewCardsCache:new Map};async function L(){(0,l.z1)();const T=await(0,p.xk)(document,r.CONTROLS_CONTAINER);(0,n.b)(T,b),z();const A=await D();(0,c.ft)((0,l.rd)(),A);const y=(0,l.pR)(A,X());(0,l.Np)(y),(0,h.$F)("rates_category")&&G()}function b(T,A){(0,I.ZM)(T,o.r.FILTERS_CONTAINER),T.style.marginTop="12px";const y=(0,v.E9)(w,o.r.CONTROL,o.r.TEXT_INPUT),W=(0,v.HX)(P,o.r.CONTROL,o.r.NUMBER_INPUT,1,1),M=(0,v.FR)(B,o.r.CONTROL,o.r.NUMBER_INPUT,1,1),V=x(o.r.CONTROL),k=(0,v.pW)(Y,o.r.CONTROL,o.r.CHECKBOX_INPUT);T.append(y,W,M,V,k),A.append(T)}function z(){(0,d.fI)(r.REVIEWS).forEach(K)}function K(T){if(!Y.value){(0,g.kl)(T);return}N(T);let A=f.reviewCardsCache.get(T);if(!A){const W=(0,d.Fi)(r.REVIEW_TEXT_WRAP,T),M=(0,d.Fi)(r.REVIEW_RATING_WRAP,T);if(!W){(0,g.Bt)(T);return}A={reviewTextWrap:W,reviewText:W.innerText,rating:M&&(0,d.YA)(M)},f.reviewCardsCache.set(T,A)}w.value&&s(w,A.reviewTextWrap);const y=(0,m.Ay)(A.reviewText,w)||$(A.rating);(0,g.UC)(T,y)}function $(T){return T?(0,m.JE)(T,P)||(0,m.iG)(T,B):!1}async function D(){const T=(0,d.Fi)(r.FILTER_CHIP);T.click();const A=await(0,p.xk)(document,r.FILTER_LIST),y=[...(0,d.fI)(r.FILTER_LIST_ITEM,A)].map(W=>{const M=W.getAttribute("data-qa");if(!M)return null;const V=M.replace("reviews_filter_list_item_",""),k=(0,d.Fi)(r.FILTER_TITLE_WRAP,W).textContent.trim(),H=(0,d.Fi)(r.FILTER_COUNT_WRAP,W),j=(0,d.YA)(H,!0),J=U(H.classList);return{category:V,title:k,count:j,bgClassSuffix:J}});return T.click(),y}function U(T){const A=T.value.match(/bg-(\w+)/);return A?A[1]:null}function X(){const{location:T}=window;return`${T.origin}${T.pathname}`}function G(){(0,d.Fi)(r.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},ee={};function Q(F){var E=ee[F];if(E!==void 0)return E.exports;var e=ee[F]={exports:{}};return te[F](e,e.exports,Q),e.exports}(()=>{var F=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",E=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",l=d=>{d&&d.d<1&&(d.d=1,d.forEach(p=>p.r--),d.forEach(p=>p.r--?p.r++:p()))},r=d=>d.map(p=>{if(p!==null&&typeof p=="object"){if(p[F])return p;if(p.then){var h=[];h.d=0,p.then(n=>{c[E]=n,l(h)},n=>{c[e]=n,l(h)});var c={};return c[F]=n=>n(h),c}}var t={};return t[F]=n=>{},t[E]=p,t});Q.a=(d,p,h)=>{var c;h&&((c=[]).d=-1);var t=new Set,n=d.exports,o,v,g,S=new Promise((C,N)=>{g=N,v=C});S[E]=n,S[F]=C=>(c&&C(c),t.forEach(C),S.catch(N=>{})),d.exports=S,p(C=>{o=r(C);var N,u=()=>o.map(i=>{if(i[e])throw i[e];return i[E]}),s=new Promise(i=>{N=()=>i(u),N.r=0;var m=a=>a!==c&&!t.has(a)&&(t.add(a),a&&!a.d&&(N.r++,a.push(N)));o.map(a=>a[F](m))});return N.r?s:u()},C=>(C?g(S[e]=C):v(n),l(c))),c&&c.d<0&&(c.d=0)}})(),Q.d=(F,E)=>{for(var e in E)Q.o(E,e)&&!Q.o(F,e)&&Object.defineProperty(F,e,{enumerable:!0,get:E[e]})},Q.o=(F,E)=>Object.prototype.hasOwnProperty.call(F,E);var ne=Q(1753)})();})();
