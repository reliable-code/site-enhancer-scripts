// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.77144488
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var te={8738:(F,v,n)=>{n.d(v,{d:()=>u});var d=n(5558);function u(e={},i=null,r=null){const t=(0,d.n)("a",e,i);return r&&(t.href=r),t}function a(e,i=null,r={}){r.cursor||="pointer";const t=u(r,i);return e&&t.addEventListener("click",e),t}function f(e,i,r=null,t={},m={}){t.display||="inline-flex",t.alignItems||="center",t.gap||="0.25em";const b=a(e,r,t);return b.prepend(createLucideIcon(i,m)),b}function h(e,i,r,t=null,m={},b={},c="us-control"){const C=A=>{A.stopPropagation(),A.preventDefault(),window.confirm(r)&&e()},T=t?`<span>${t}</span>`:null,I=f(C,i,T,m,b);return I.classList.add(c),I}function l(e,i,r={},t={}){return h(e,ThumbsDown,"\u0412\u044B\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?",i?"\u0414\u0438\u0437\u043B\u0430\u0439\u043A":null,r,t)}function s(e,i,r={},t={}){return h(e,RotateCcw,"\u0423\u0431\u0440\u0430\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?",i?"\u0423\u0431\u0440\u0430\u0442\u044C \u0434\u0438\u0437\u043B\u0430\u0439\u043A":null,r,t)}function E(e={},i=null,r=null){const t=createElement("button",e,i);return r&&t.addEventListener("click",r),t}},7273:(F,v,n)=>{n.d(v,{S:()=>a});var d=n(5558);function u(f={},h=null){return createElement("span",f,h)}function a(f={},h=null){return(0,d.n)("div",f,h)}},5467:(F,v,n)=>{n.d(v,{E2:()=>u});var d=n(7273);function u(h,l={},s=null){const E=(0,d.S)(l,s);return E.append(h),E}function a(h,l=null,s={},E={}){const e=createActionLink(h,l,E);return u(e,s)}function f(h,l=null,s=null,E={},e={},i={}){const r=createActionLinkWithIcon(h,s,l,e,i);return u(r,E)}},5558:(F,v,n)=>{n.d(v,{n:()=>u});var d=n(6754);function u(a,f,h=null){if(typeof f!="object"||f===null)throw new TypeError("styles should be an object");const l=document.createElement(a);return(0,d.ZM)(l,f),h&&(l.innerHTML=h),l}},740:(F,v,n)=>{n.d(v,{S:()=>l,kU:()=>a,o5:()=>f});var d=n(5558),u=n(4921);function a(e,i,r){const t=s(e,"text",i);return t.value=r,t}function f(e,i,r,t,m,b){const c=s(e,"number",i);return c.value=r,c.step=t,c.min=m,c.max=b,c}function h(e,i,r){const t=s(e,"date",i);return t.value=r,t}function l(e,i,r){const t=s(e,"checkbox",i);return t.checked=r,t}function s(e={},i=null,r=null){const t=(0,d.n)("input",e);return i&&(t.type=i),r&&(t.addEventListener("keyup",(0,u.sg)(r,200)),t.addEventListener("change",(0,u.sg)(r,100))),t}function E(e,i,r){const t=createElement("select",e);return i&&t.addEventListener("change",i),t.value=r,t}},573:(F,v,n)=>{n.d(v,{Fi:()=>a,YA:()=>E,fI:()=>f});var d=n(4214);function u(c,C=document){return!!C.querySelector(c)}function a(c,C=document,T=!1){const I=C.querySelector(c);return T&&!I&&console.log(`No element found for selector: ${c}`),I}function f(c,C=document,T=!1){const I=C.querySelectorAll(c);return T&&!I.length&&console.log(`No elements found for selector: ${c}`),I}function h(c,C=1){let T=c;for(let I=0;I<C;I++){if(!T.parentElement)return null;T=T.parentElement}return T}function l(c,C,T){return[...c.querySelectorAll(C)].find(I=>I.textContent.trim().includes(T))}function s(c,C,T=!1,I=!1,A=null){const _=a(C,c);return E(_,T,I,A)}function E(c,C=!1,T=!1,I=null){if(!c)return I===null?(console.log("No element found"),null):I;const A=c.innerText;return r(A,C,T)}function e(c,C,T=!1){const I=c[C];return E(I,T)}function i(c,C=!1,T=!1){const I=c.textContent;return r(I,C,T)}function r(c,C,T){C&&(c=(0,d.zr)(c)),T&&(c=c.replace(",","."));const I=Number(c);return Number.isNaN(I)?(console.log(`Invalid number: ${c}`),0):I}function t(c){return[...c.childNodes].find(C=>C.nodeType===Node.TEXT_NODE)}function m(c){const C=T=>T.nodeType===Node.TEXT_NODE&&T.textContent.trim()!==""?[T]:[...T.childNodes].flatMap(C);return C(c)}function b(c){return normalizeSpacing(c.textContent)}},5539:(F,v,n)=>{n.d(v,{Bt:()=>u,UC:()=>i,WH:()=>d,kl:()=>E});function d(o,R){o.parentNode.insertBefore(R,o.nextSibling)}function u(o){o.style.display="none"}function a(o,R=1){const O=document.querySelector(o);O&&f(O,R)}function f(o,R=1){const O=getElementAncestor(o,R);O&&u(O)}function h(o,R,O){const p=findElementByText(o,R,O);p&&u(p)}function l(o){m(o),u(o)}function s(o){o.intersectionObserver||runOnceOnIntersection(o,()=>u(o))}function E(o){o.style.display=""}function e(o){const R=t(o);o.style.display=R}function i(o,R){R?u(o):E(o)}function r(o,R){R?s(o):(clearIntersectionObserver(o),E(o))}function t(o){return m(o),o.dataset.defaultDisplay}function m(o){if(o.dataset.defaultDisplay)return;const{display:R}=getComputedStyle(o);o.dataset.defaultDisplay=R}function b(){return{show:[],hide:[]}}function c(o,R,O){o?R.hide.push(O):R.show.push(O)}function C(o){o.show.forEach(E),o.hide.forEach(u)}function T(o,R,O=.3){R?A(o,O):I(o)}function I(o){o.style.opacity=""}function A(o,R=.3){o.style.opacity=R}function _(o){o.style.order=""}function x(o,R){o.style.order=R}function w(o,R,O,p="inline-flex"){R.style.display=o?p:"none",O.style.display=o?"none":p}function W(o,R=.3){o.style.transition="opacity 0.3s",o.style.opacity=R,g(o)}function U(o){o.style.opacity="",D(o)}function $(o){o.style.animation="loading-pulse 2.5s ease-in-out infinite",g(o)}function L(o){o.style.animation="",D(o)}function g(o){o.style.pointerEvents="none",o.style.cursor="wait"}function D(o){o.style.pointerEvents="",o.style.cursor=""}function B(o,R){const O=getFirstElement(R);O&&k(o,O)}function k(o,R){const O=createLink();O.href=o,R.parentNode.append(O),O.append(R)}function j(o,R){const O=getFirstElement(R);O&&K(o,O)}function K(o,R,O={}){const p=createLink(O);p.href=o,p.append(...R.childNodes),R.append(p)}function Y(){const o=getURLQueryParam("scrollTo");if(!o)return;const R=document.getElementById(o);R?R.scrollIntoView():console.log(`Element with ID "${o}" was not found.`)}function G(o,R,O=null){const p=`${R}-click-passed`,S=O?y=>findElementByText(y,o,O):y=>getFirstElement(o,y);return function(y){if(y.hasAttribute(p))return!1;const P=S(y);return P&&P.click(),y.setAttribute(p,""),!0}}function N(o,R,O="text/plain"){const p=new Blob([o],{type:O}),S=URL.createObjectURL(p),y=document.createElement("a");y.href=S,y.download=R,document.body.appendChild(y),y.click(),document.body.removeChild(y),requestAnimationFrame(()=>URL.revokeObjectURL(S))}},6754:(F,v,n)=>{n.d(v,{ZM:()=>d});function d(h,l){Object.assign(h.style,l)}function u(h,l="custom-global-style"){let s=document.getElementById(l);s||(s=document.createElement("style"),s.id=l,s.type="text/css",document.head.appendChild(s)),s.textContent=h}function a(h){return Object.entries(h).map(([l,s])=>`${l.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${s};`).join(" ")}function f(h){return h?h.split(";").filter(l=>l.trim()!=="").reduce((l,s)=>{const[E,e]=s.split(":").map(r=>r.trim()),i=E.replace(/-([a-z])/g,(r,t)=>t.toUpperCase());return l[i]=e,l},{}):{}}},4921:(F,v,n)=>{n.d(v,{sg:()=>f,xk:()=>d});function d(e,i,r=null){const t=e.querySelector(i);return t?Promise.resolve(t):new Promise(m=>{const b=new MutationObserver(C);b.observe(e,{childList:!0,subtree:!0});let c;r&&(c=setTimeout(()=>{b.disconnect(),console.log(`No element found for selector: ${i}`),m(null)},r));function C(){const T=e.querySelector(i);T&&(c&&clearTimeout(c),b.disconnect(),m(T))}})}function u(e,i){return e.querySelector(i)?new Promise(t=>{const m=new MutationObserver(b);m.observe(e,{childList:!0,subtree:!0});function b(){e.querySelector(i)||(m.disconnect(),t())}}):Promise.resolve()}function a(e,i=400){return new Promise(r=>{let t;const m=new MutationObserver(()=>{clearTimeout(t),b()});function b(){t=setTimeout(()=>{m.disconnect(),r()},i)}b(),m.observe(e,{childList:!0,subtree:!0})})}function f(e,i=250){let r;return function(...t){const m=this;clearTimeout(r),r=setTimeout(()=>e.apply(m,t),i)}}async function h(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function l(e,i){const r=new IntersectionObserver(t=>{t.forEach(m=>{m.isIntersecting&&(i(),s(e))})});e.intersectionObserver=r,r.observe(e)}function s(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function E(e){e&&(e.disconnect(),e=null)}},3829:(F,v,n)=>{n.d(v,{Ay:()=>u,JE:()=>l,iG:()=>s});var d=n(8355);function u(r,t){return!a(r,t)}function a(r,t){if(!t||!t.value)return!0;const m=(0,d._7)(t.value);return f(r,m)}function f(r,t){if(!t||!t.length)return!0;const m=(r||"").toLowerCase();return t.every(b=>h(m,b))}function h(r,t){return t.some(({term:m,isNegative:b})=>{const c=r.includes(m);return b?!c:c})}function l(r,t){return t.value!=null&&r<t.value}function s(r,t){return t.value!=null&&r>t.value}function E(r,t){return t.value==null?!1:r<parseDateFromISO(t.value)}function e(r,t){return t.value==null?!1:r>parseDateFromISO(t.value)}function i(r,t){return t.value&&r!==t.value}},4521:(F,v,n)=>{n.d(v,{z:()=>u});var d=n(3048);function u(a,f=null){return{createGlobalFilter(h,l=null,s=a){return d.V.create(h,l,s)},createSectionFilter(h,l=null,s=a){if(!f)throw new Error("sectionId must be provided to use createSectionFilter.");return d.V.createWithCompositeKey(f,h,l,s)}}}},5884:(F,v,n)=>{n.d(v,{Hw:()=>s,Nm:()=>a,nW:()=>f});var d=n(5467),u=n(740);function a(E,e,i={},r={}){const t=(0,u.kU)(r,e.updateValueFromEvent,e.value);return(0,d.E2)(t,i,E)}function f(E,e,i,r,t,m={},b={}){const c=(0,u.o5)(b,e.updateValueFromEvent,e.value,i,r,t);return(0,d.E2)(c,m,E)}function h(E,e,i={},r={}){const t=createSelect(r,e.updateValueFromEvent,e.value);return createControl(t,i,E)}function l(E,e,i={},r={}){const t=createDateInput(r,e.updateValueFromEvent,e.value);return createControl(t,i,E)}function s(E,e,i={},r={}){const t=(0,u.S)(r,e.updateValueFromEvent,e.value);return(0,d.E2)(t,i,E)}},7877:(F,v,n)=>{n.d(v,{E9:()=>u,FR:()=>f,HX:()=>a,X0:()=>h,pW:()=>U});var d=n(5884);function u(L,g={},D={}){return(0,d.Nm)("\u041F\u043E\u0438\u0441\u043A: ",L,g,D)}function a(L,g={},D={},B=.1,k=3){return(0,d.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",L,B,k,5,g,D)}function f(L,g={},D={},B=.1,k=3){return(0,d.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",L,B,k,5,g,D)}function h(L,g={},D={}){return s("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",L,g,D)}function l(L,g={},D={}){return s("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",L,g,D)}function s(L,g,D={},B={}){return(0,d.nW)(L,g,"1","1","999999",D,B)}function E(L,g={},D={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",L,g,D)}function e(L,g={},D={}){return i("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",L,g,D)}function i(L,g,D={},B={}){return createNumberFilterControl(L,g,"5","0","100",D,B)}function r(L,g={},D={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",L,"5","0","100",g,D)}function t(L,g,D={},B={},k="250"){return createNumberFilterControl(L,g,k,"0","1000000",D,B)}function m(L,g={},D={},B="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",L,g,D,B)}function b(L,g={},D={},B="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",L,g,D,B)}function c(L,g={},D={}){return C("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",L,g,D)}function C(L,g,D={},B={}){return createNumberFilterControl(L,g,"1","0","99999",D,B)}function T(L,g={},D={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",L,"1","2","8",g,D)}function I(L,g={},D={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",L,1,1,10,g,D)}function A(L,g={},D={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",L,g,D)}function _(L,g={},D={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",L,g,D)}function x(L,g={},D={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",L,g,D)}function w(L,g={},D={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",L,g,D)}function W(L,g={},D={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",L,g,D)}function U(L,g={},D={}){return(0,d.Hw)("\u0412\u043A\u043B: ",L,g,D)}function $(L,g,D={}){const B=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],k={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},j=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),K=[],Y=()=>g?parseFloat(g.value)||0:L.value,G=()=>{const N=Y();K.forEach(({button:o,value:R})=>{const p=R<=N?k.active:k.inactive;Object.assign(o.style,p)})};return B.forEach(({value:N,emoji:o,tooltip:R})=>{const O=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...D},o);O.title=R,O.type="button",O.addEventListener("click",p=>{p.preventDefault(),L.updateValue(N),g&&(g.value=N),G()}),O.addEventListener("mouseenter",()=>{N<=Y()||(O.style.background=k.hover.background)}),O.addEventListener("mouseleave",()=>{G()}),K.push({button:O,value:N}),j.appendChild(O)}),G(),g&&(g.addEventListener("input",G),g.addEventListener("change",G)),j}},8355:(F,v,n)=>{n.d(v,{_7:()=>u,fO:()=>d});function d(e){if(!e)return[];const r=u(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(r)]}function u(e){return e?e.toLowerCase().split(",").map(a).filter(Boolean):[]}function a(e){const i=e.split("/").map(t=>t.trim()).filter(Boolean);if(i.length===0)return null;const r=i.map(f).filter(Boolean);return r.length>0?r:null}function f(e){const i=e.startsWith("!"),r=i?e.slice(1).trim():e;return r?{term:r,isNegative:i}:null}function h(e,i){s(e,r=>r.style.display!=="none",i)}function l(e,i){s(e,r=>r.style.opacity==="",i)}function s(e,i,r){const t=[...e].filter(i).length,m=e.length;E(r,t,m)}function E(e,i,r){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${i} \u0438\u0437 ${r}`}},5213:(F,v,n)=>{n.d(v,{b:()=>u});var d=n(7273);function u(a,f,h=!1,l="customFiltersContainer"){let s=a.querySelector(`#${l}`);if(s){if(!h)return;s.replaceChildren()}else s=(0,d.S)(),s.id=l;f(s,a)}},8200:(F,v,n)=>{n.d(v,{s:()=>d});function d(u){const{target:a}=u,{type:f}=a;switch(f){case"text":return`"${a.value}"`;case"number":return a.value;case"select-one":return a.value;case"date":return`"${a.value}"`;case"checkbox":return a.checked;default:return console.log(`Unknown input type: ${f}`),null}}},157:(F,v,n)=>{n.d(v,{Fg:()=>d,vx:()=>a});const d=window.GM_setValue,u=window.GM.setValue,a=window.GM_getValue},1870:(F,v,n)=>{n.d(v,{j:()=>d});class d{constructor(a,f){this.value=a,this.onChange=f}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(F,v,n)=>{n.d(v,{V:()=>h});var d=n(1870),u=n(8200),a=n(3976),f=n(157);class h extends d.j{constructor(s,E=null,e=null){super((0,f.vx)(s,E),e),this.storageKey=s,this.defaultValue=E}static create(s,E=null,e=null){return new h(s,E,e)}static createWithCompositeKey(s,E,e=null,i=null){const r=`${s}-${E}`;return new h(r,e,i)}updateValueFromEvent=s=>{const E=(0,u.s)(s),e=(0,a.$)(E);this.updateValue(e)};updateValue(s,E=!0){this.value!==s&&((0,f.Fg)(this.storageKey,s),this.value=s,E&&this.onChangeIfDefined())}clearValue(s=!1){this.updateValue(null,s)}resetValue(s=!1){this.updateValue(this.defaultValue,s)}}},3976:(F,v,n)=>{n.d(v,{$:()=>d});function d(u){return u===""?null:JSON.parse(u)}},4214:(F,v,n)=>{n.d(v,{$z:()=>d,zr:()=>u});function d(l){return l.replace(/\D/g,"")}function u(l){return l.replace(/[^\d.,-]/g,"")}function a(l){return l.replace(/\s/g,"")}function f(l){return l.charAt(0).toUpperCase()+l.slice(1)}function h(l){return l.replace(/\s+/g," ").trim()}},5406:(F,v,n)=>{n.d(v,{$F:()=>l,Fc:()=>d,bn:()=>u,z2:()=>r});function d(c,C="common",T=!1){const{pathname:I}=window.location;return u(I,c,C,T)}function u(c,C,T,I=!1){const A=c.split("/");C=C<0?A.length+C:C;const _=A[C]||T;return I&&console.log(`Pathname element: ${_}`),_}function a(c,C="common",T=!1){const I=d(c,"",T);return f(I,C,T)}function f(c,C,T){if(!c)return C;const I=c.split("-").at(-1);return T&&console.log(`Pathname element ending: ${I}`),I}function h(c,C,T="common",I=!1){const A=u(c,C,"",I);return f(A,T,I)}function l(c){return new URLSearchParams(window.location.search).get(c)}function s(c){return c.split("?")[0]}function E(c){return window.location.pathname.endsWith(c)}function e(c){return window.location.pathname.includes(c)}function i(c){return c.some(C=>e(C))}function r(...c){return window.location.pathname.split("/").some(T=>c.includes(T))}function t(c){try{const C=new URL(window.location.href);Object.entries(c).forEach(([T,I])=>{C.searchParams.set(T,I)}),window.location.href=C.toString()}catch(C){console.error("Failed to redirect:",C)}}function m(c,C=[]){const T=new AbortController;let I=!1;const A=x=>{const w=new URL(x),W={pathname:w.pathname};return C.forEach(U=>{W[U]=w.searchParams.get(U)}),W};let _=A(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(I)return;const x=A(window.navigation.currentEntry.url);if(Object.keys(_).some(W=>_[W]!==x[W])){_=x,I=!0;try{await c(x)}catch(W){console.error("URL observer error:",W)}finally{I=!1}}},{signal:T.signal}),()=>T.abort()}function b(c=[]){m(()=>window.location.reload(),c)}},2524:(F,v,n)=>{n.d(v,{d5:()=>a,vX:()=>s,ft:()=>f});var d=n(157);class u{constructor(i=Date.now(),r=[]){this.lastCheckDate=i,this.reviewsData=r}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(i){const{lastCheckDate:r,reviewsData:t}=i;return new u(r,t)}}const a={LAST_DOCTOR_UPDATE:"last-doctor-update"};function f(e,i){const r=h(e),t=(0,d.vx)(r),m=l(t);m.reviewsData=i,m.updateLastCheckDate(),(0,d.Fg)(r,m),(0,d.Fg)(a.LAST_DOCTOR_UPDATE,Date.now())}function h(e){return`doctor-${e}`}function l(e){return e?u.fromObject(e):new u}function s(e){return E(e)?.reviewsData??null}function E(e){const i=h(e);return(0,d.vx)(i)}},1753:(F,v,n)=>{n.a(F,async(d,u)=>{try{var a=n(573),f=n(7858),h=n(4231),l=n(5406),s=n(5072);const e=(0,a.Fi)(".appointments_page");e?(0,h.$)(e):(0,l.z2)("otzivi")?await(0,s.N)():(0,l.z2)("vrach")&&(0,f.O)(),u()}catch(E){u(E)}},1)},7653:(F,v,n)=>{n.d(v,{NI:()=>i,z1:()=>m,Np:()=>T,pR:()=>b,sp:()=>A,rd:()=>I});var d=n(573);const u={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var a=n(8586),f=n(5406),h=n(4214),l=n(7273),s=n(8738);const E="additionalLinksAppended",e=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function i(_,x){x.classList.contains(E)||(e.forEach(w=>{r(_,x,w)}),x.classList.add(E))}function r(_,x,w){const W=t(_,w),U=(0,s.d)({},w,W),$=document.createElement("br");x.append($,U)}function t(_,x){const w=`${_} ${x}`;return`https://www.google.com/search?q=${encodeURIComponent(w)}&btnI`}function m(){const _=(0,d.Fi)(u.DOCTOR_CARD_NAME,document,!0);if(!_)return;const x=_.innerText.trim(),w=(0,l.S)();w.style.textAlign="center",(0,d.Fi)(u.DOCTOR_INTRO_LEFT).append(w),i(x,w)}function b(_,x,w=!1){const W=(0,l.S)(a.r.REVIEWS_INFO);w&&(W.style.justifyContent="center"),W.classList.add("v-application");const U=(0,l.S)(a.r.REVIEWS_INFO_BLOCK);return U.style.height=w?"10px":"23px",U.append(W),_.slice(w?1:0).forEach($=>{const{category:L,title:g,count:D,bgClassSuffix:B}=$,k=`${x}?rates_category=${L}`,j=w?D:`${g} ${D}`,K=(0,s.d)(a.r.REVIEW_INFO,j,k);K.classList=c(B),W.append(K),w&&C(K,g)}),U}function c(_){return`text-caption text--text px-2 py-1 rounded-sm bg-${_}`}function C(_,x){let w=null;_.addEventListener("mouseenter",()=>{w=(0,l.S)(a.r.REVIEW_INFO_TOOLTIP,x),document.body.appendChild(w);const W=_.getBoundingClientRect();w.style.left=`${(W.left+W.right)/2-w.offsetWidth/2+window.scrollX+2}px`,w.style.top=`${W.top+window.scrollY-w.offsetHeight-4}px`}),_.addEventListener("mouseleave",()=>{w&&(w.remove(),w=null)})}function T(_){const x=(0,d.Fi)(u.NAME_SPAN_HOLDER,document,!0);if(!x)return;const w=(0,d.Fi)(u.NAME_SPAN,x,!0);w&&w.append(_)}function I(){const _=(0,f.Fc)(3,"unknown");return(0,h.$z)(_)}function A(_){const x=(0,f.bn)(_,5,"");return(0,h.$z)(x)}},8586:(F,v,n)=>{n.d(v,{r:()=>u});const d={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},u={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...d.INPUT,width:"195px"},NUMBER_INPUT:{...d.INPUT,width:"70px"},CHECKBOX_INPUT:{...d.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(F,v,n)=>{n.d(v,{$:()=>L});var d=n(5406),u=n(573),a=n(5539),f=n(3829),h=n(7653),l=n(5213),s=n(5884),E=n(7877);const e={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .text-subtitle-1",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var i=n(4521),r=n(2524),t=n(4921),m=n(8586),b=n(6754);const c=window.GM_addValueChangeListener,C=(0,d.Fc)(2),{createGlobalFilter:T,createSectionFilter:I}=(0,i.z)(B,C),A=I("spec-filter"),_=I("clinic-filter"),x=I("min-reviews-filter",10),w=I("min-experience-filter",5,G),W=I("max-experience-filter",40),U=T("filter-enabled",!0),$={doctorCardsCache:new WeakMap};function L(N){G(),g();const o=(0,u.Fi)(e.DOCTOR_FILTERS);(0,l.b)(o,D),B(),c(r.d5.LAST_DOCTOR_UPDATE,B),new MutationObserver((0,t.sg)(B)).observe(N,{childList:!0})}function g(){const N=(0,u.Fi)(e.LIST_HEADER);N&&N.remove()}function D(N,o){(0,b.ZM)(N,m.r.FILTERS_CONTAINER),N.style.marginTop="6px";const R=(0,s.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",A,m.r.CONTROL,m.r.TEXT_INPUT),O=(0,s.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",_,m.r.CONTROL,m.r.TEXT_INPUT),p=(0,E.X0)(x,m.r.CONTROL,m.r.NUMBER_INPUT),S=(0,s.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",w,"1","0","100",m.r.CONTROL,m.r.NUMBER_INPUT),y=(0,s.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",W,"1","0","100",m.r.CONTROL,m.r.NUMBER_INPUT),P=(0,E.pW)(U,m.r.CONTROL,m.r.CHECKBOX_INPUT);N.append(R,O,p,S,y,P),o.append(N)}function B(){(0,u.fI)(e.DOCTOR_CARD).forEach(k)}function k(N){if(!U.value){(0,a.kl)(N);return}let o=$.doctorCardsCache.get(N);if(!o){const O=(0,u.Fi)(e.PROFILE_CARD,N),p=(0,u.Fi)(e.REVIEWS_LINK,O),S=(0,u.Fi)(e.EXPERIENCE_WRAP,N);if(!p||!S){(0,a.Bt)(N);return}const P=(0,u.Fi)(e.SPEC_WRAP,N,!0).innerText.trim(),M=(0,u.Fi)(e.CLINIC_CONTAINER,N,!0),V=(0,u.Fi)(e.CLINIC_WRAP,M,!0).innerText.trim(),H=(0,u.YA)(p,!0),X=(0,u.YA)(S,!0),J=j(p);p.href=J,(0,h.NI)(K(N),O),o={specInfo:P,clinicName:V,reviewsLinkNumber:H,experienceNumber:X,reviewsLink:p,reviewInfoAppended:!1},$.doctorCardsCache.set(N,o)}Y(o);const R=(0,f.Ay)(o.specInfo,A)||(0,f.Ay)(o.clinicName,_)||(0,f.JE)(o.reviewsLinkNumber,x)||(0,f.JE)(o.experienceNumber,w)||(0,f.iG)(o.experienceNumber,W);(0,a.UC)(N,R)}function j(N){return N.href.replace(/\/#otzivi$/,"/otzivi/")}function K(N){return(0,u.Fi)(e.DOCTOR_CARD_NAME,N,!0).innerText}function Y(N){if(N.reviewInfoAppended)return;const{reviewsLink:o}=N,R=o.href,O=(0,r.vX)((0,h.sp)(R));if(!O)return;const p=(0,h.pR)(O,R,!0);(0,a.WH)(o,p),N.reviewInfoAppended=!0}function G(){if(!w.value)return;const N=new URL(window.location.href);+N.searchParams.get("experience")!==w.value&&(N.searchParams.set("experience",w.value),window.location.href=N.toString())}},7858:(F,v,n)=>{n.d(v,{O:()=>s});var d=n(573),u=n(7653);const a={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var f=n(2524),h=n(7273),l=n(8738);function s(){(0,u.z1)(),e();const r=E();i(r);const t=(0,f.vX)((0,u.rd)());if(!t)return;const m=(0,u.pR)(t,r);(0,u.Np)(m)}function E(){const{location:r}=window;return`${r.origin}${r.pathname}otzivi/`}function e(){if(!(0,d.Fi)(a.DOCTOR_CONTACTS))return;const t=[...(0,d.fI)(a.DOCTOR_DETAILS)].pop();if(!t)return;t.style.position="sticky",t.style.top="16px";const m=(0,h.S)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");m.classList.add("b-doctor-details__toc-title");const b=(0,l.d)({},null,"#doctor-contacts");b.classList.add("b-doctor-details__toc-item"),b.append(m),t.insertBefore(b,t.firstChild)}function i(r){const t=(0,d.Fi)(a.REVIEWS_LINK);t&&(t.href=r)}},5072:(F,v,n)=>{n.d(v,{N:()=>k});var d=n(7653);const u={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var a=n(573),f=n(4921),h=n(5406),l=n(2524),s=n(4521),E=n(5213),e=n(8586),i=n(7877),r=n(5539);function t(p,S){p.forEach(y=>m(S,y))}function m(p,S){if(!S)return;const y=new RegExp(`(${S})`,"gi"),P=document.createTreeWalker(p,NodeFilter.SHOW_TEXT,null);let M=P.nextNode();const z=[];for(;M;){const{textContent:V}=M;if(y.test(V)){const H=document.createDocumentFragment();let X=0;V.replace(y,(J,re,q)=>{q>X&&H.appendChild(document.createTextNode(V.slice(X,q)));const Z=document.createElement("span");Z.className="highlightedSubstring",Z.style.backgroundColor="yellow",Z.textContent=J,H.appendChild(Z),X=q+J.length}),X<V.length&&H.appendChild(document.createTextNode(V.slice(X))),z.push({node:M,fragment:H})}M=P.nextNode()}z.forEach(({node:V,fragment:H})=>{V.parentNode.replaceChild(H,V)})}function b(p){(0,a.fI)(".highlightedSubstring",p).forEach(y=>{const{parentNode:P}=y;y.replaceWith(y.textContent),P.normalize()})}var c=n(8355);function C(p,S){const y=(0,c.fO)(p.value);t(y,S)}function T(p,S){const y=getIncludedSearchStrings(p.value);S.forEach(P=>highlightSubstrings(y,P))}var I=n(3829),A=n(7273);function _(p={}){return(0,A.S)(p,"|")}function x(p,S={},y="customFiltersContainer"){const P=document.getElementById(y);if(!P)return console.log(`Element with id="${y}" not found.`),null;const M=createButton(S,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return M.addEventListener("mouseenter",()=>{M.style.filter="brightness(0.9)"}),M.addEventListener("mouseleave",()=>{M.style.filter="brightness(1)"}),M.addEventListener("click",()=>{const z=P.getBoundingClientRect();window.scrollTo({top:z.top+window.scrollY-p,behavior:"smooth"})}),new IntersectionObserver(([z])=>{const V=z.boundingClientRect.top<0,H=!z.isIntersecting&&V;M.style.display=H?"flex":"none"},{threshold:.5}).observe(P),M}function w(p,S={},y=75){const P=x(y,S);P&&p.appendChild(P)}var W=n(6754);const{createGlobalFilter:U}=(0,s.z)(K),$=U("reviews-text-filter"),L=U("reviews-min-rating-filter"),g=U("reviews-max-rating-filter"),D=U("reviews-filter-enabled",!0),B={reviewCardsCache:new Map};async function k(){(0,d.z1)();const p=await(0,f.xk)(document,u.CONTROLS_CONTAINER);(0,E.b)(p,j),K();const S=await N();(0,l.ft)((0,d.rd)(),S);const y=(0,d.pR)(S,R());(0,d.Np)(y),(0,h.$F)("rates_category")&&O()}function j(p,S){(0,W.ZM)(p,e.r.FILTERS_CONTAINER),p.style.marginTop="12px";const y=(0,i.E9)($,e.r.CONTROL,e.r.TEXT_INPUT),P=(0,i.HX)(L,e.r.CONTROL,e.r.NUMBER_INPUT,1,1),M=(0,i.FR)(g,e.r.CONTROL,e.r.NUMBER_INPUT,1,1),z=_(e.r.CONTROL),V=(0,i.pW)(D,e.r.CONTROL,e.r.CHECKBOX_INPUT);p.append(y,P,M,z,V),S.append(p)}function K(){(0,a.fI)(u.REVIEWS).forEach(Y)}function Y(p){if(!D.value){(0,r.kl)(p);return}b(p);let S=B.reviewCardsCache.get(p);if(!S){const P=(0,a.Fi)(u.REVIEW_TEXT_WRAP,p),M=(0,a.Fi)(u.REVIEW_RATING_WRAP,p);if(!P){(0,r.Bt)(p);return}S={reviewTextWrap:P,reviewText:P.innerText,rating:M&&(0,a.YA)(M)},B.reviewCardsCache.set(p,S)}$.value&&C($,S.reviewTextWrap);const y=(0,I.Ay)(S.reviewText,$)||G(S.rating);(0,r.UC)(p,y)}function G(p){return p?(0,I.JE)(p,L)||(0,I.iG)(p,g):!1}async function N(){const p=(0,a.Fi)(u.FILTER_CHIP);p.click();const S=await(0,f.xk)(document,u.FILTER_LIST),y=[...(0,a.fI)(u.FILTER_LIST_ITEM,S)].map(P=>{const M=P.getAttribute("data-qa");if(!M)return null;const z=M.replace("reviews_filter_list_item_",""),V=(0,a.Fi)(u.FILTER_TITLE_WRAP,P).textContent.trim(),H=(0,a.Fi)(u.FILTER_COUNT_WRAP,P),X=(0,a.YA)(H,!0),J=o(H.classList);return{category:z,title:V,count:X,bgClassSuffix:J}});return p.click(),y}function o(p){const S=p.value.match(/bg-(\w+)/);return S?S[1]:null}function R(){const{location:p}=window;return`${p.origin}${p.pathname}`}function O(){(0,a.Fi)(u.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},ee={};function Q(F){var v=ee[F];if(v!==void 0)return v.exports;var n=ee[F]={exports:{}};return te[F](n,n.exports,Q),n.exports}(()=>{var F=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",v=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",d=a=>{a&&a.d<1&&(a.d=1,a.forEach(f=>f.r--),a.forEach(f=>f.r--?f.r++:f()))},u=a=>a.map(f=>{if(f!==null&&typeof f=="object"){if(f[F])return f;if(f.then){var h=[];h.d=0,f.then(E=>{l[v]=E,d(h)},E=>{l[n]=E,d(h)});var l={};return l[F]=E=>E(h),l}}var s={};return s[F]=E=>{},s[v]=f,s});Q.a=(a,f,h)=>{var l;h&&((l=[]).d=-1);var s=new Set,E=a.exports,e,i,r,t=new Promise((m,b)=>{r=b,i=m});t[v]=E,t[F]=m=>(l&&m(l),s.forEach(m),t.catch(b=>{})),a.exports=t,f(m=>{e=u(m);var b,c=()=>e.map(T=>{if(T[n])throw T[n];return T[v]}),C=new Promise(T=>{b=()=>T(c),b.r=0;var I=A=>A!==l&&!s.has(A)&&(s.add(A),A&&!A.d&&(b.r++,A.push(b)));e.map(A=>A[F](I))});return b.r?C:c()},m=>(m?r(t[n]=m):i(E),d(l))),l&&l.d<0&&(l.d=0)}})(),Q.d=(F,v)=>{for(var n in v)Q.o(v,n)&&!Q.o(F,n)&&Object.defineProperty(F,n,{enumerable:!0,get:v[n]})},Q.o=(F,v)=>Object.prototype.hasOwnProperty.call(F,v);var ne=Q(1753)})();})();
