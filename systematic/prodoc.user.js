// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.76071660
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var te={5467:(D,m,e)=>{e.d(m,{E2:()=>o});var d=e(9928);function o(T,c={},n=null){const a=(0,d.Sw)(c,n);return a.append(T),a}function f(T,c=null,n={},a={}){const t=createActionLink(T,c,a);return o(t,n)}function p(T,c=null,n=null,a={},t={}){const v=createActionLinkWithIcon(T,n,c,t);return o(v,a)}},9928:(D,m,e)=>{e.d(m,{S:()=>T,Sw:()=>S,d:()=>a,kU:()=>f,o5:()=>p});var d=e(4921),o=e(6754);function f(i,r,E){const l=c(i,"text",r);return l.value=E,l}function p(i,r,E,l,x,O){const _=c(i,"number",r);return _.value=E,_.step=l,_.min=x,_.max=O,_}function T(i,r,E){const l=c(i,"checkbox",r);return l.checked=E,l}function c(i={},r=null,E=null){const l=u("input",i);return r&&(l.type=r),E&&(l.addEventListener("keyup",(0,d.sg)(E,200)),l.addEventListener("change",(0,d.sg)(E,100))),l}function n(i={},r=null){return u("span",i,r)}function a(i={},r=null,E=null){const l=u("a",i,r);return E&&(l.href=E),l}function t(i,r=null,E={}){E.cursor||="pointer";const l=a(E,r);return i&&l.addEventListener("click",i),l}function v(i,r,E=null,l={},x={}){l.display||="inline-flex",l.alignItems||="center",l.gap||="0.25em";const O=t(i,E,l);return O.prepend(R(r,x)),O}function g(i={},r=null,E=null){const l=u("button",i,r);return E&&l.addEventListener("click",E),l}function S(i={},r=null){return u("div",i,r)}function C(i={}){return u("i",i)}function R(i,r={}){r.width||="1em",r.height||="1em",r.paddingBottom||="1px";const E=C(r);return E.setAttribute("data-lucide",i),E}function u(i,r,E=null){if(typeof r!="object"||r===null)throw new TypeError("styles should be an object");const l=document.createElement(i);return(0,o.ZM)(l,r),E&&(l.innerHTML=E),l}},573:(D,m,e)=>{e.d(m,{Fi:()=>f,YA:()=>a,fI:()=>p});var d=e(4214);function o(u,i=document){return!!i.querySelector(u)}function f(u,i=document,r=!1){const E=i.querySelector(u);return r&&!E&&console.log(`No element found for selector: ${u}`),E}function p(u,i=document,r=!1){const E=i.querySelectorAll(u);return r&&!E.length&&console.log(`No elements found for selector: ${u}`),E}function T(u,i=1){let r=u;for(let E=0;E<i;E++){if(!r.parentElement)return null;r=r.parentElement}return r}function c(u,i,r){return[...u.querySelectorAll(i)].find(E=>E.textContent.trim().includes(r))}function n(u,i,r=!1,E=!1,l=null){const x=f(i,u);return a(x,r,E,l)}function a(u,i=!1,r=!1,E=null){if(!u)return E===null?(console.log("No element found"),null):E;const l=u.innerText;return g(l,i,r)}function t(u,i,r=!1){const E=u[i];return a(E,r)}function v(u,i=!1,r=!1){const E=u.textContent;return g(E,i,r)}function g(u,i,r){i&&(u=(0,d.zr)(u)),r&&(u=u.replace(",","."));const E=Number(u);return Number.isNaN(E)?(console.log(`Invalid number: ${u}`),0):E}function S(u){return[...u.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function C(u){const i=r=>r.nodeType===Node.TEXT_NODE&&r.textContent.trim()!==""?[r]:[...r.childNodes].flatMap(i);return i(u)}function R(u){return normalizeSpacing(u.textContent)}},5539:(D,m,e)=>{e.d(m,{Bt:()=>o,UC:()=>t,WH:()=>d,kl:()=>n});function d(s,L){s.parentNode.insertBefore(L,s.nextSibling)}function o(s){s.style.display="none"}function f(s,L=1){const F=document.querySelector(s);F&&p(F,L)}function p(s,L=1){const F=getElementAncestor(s,L);F&&o(F)}function T(s){S(s),o(s)}function c(s){s.intersectionObserver||runOnceOnIntersection(s,()=>o(s))}function n(s){s.style.display=""}function a(s){const L=g(s);s.style.display=L}function t(s,L){L?o(s):n(s)}function v(s,L){L?c(s):(clearIntersectionObserver(s),n(s))}function g(s){return S(s),s.defaultDisplay}function S(s){if(s.defaultDisplay)return;const{display:L}=getComputedStyle(s);s.defaultDisplay=L}function C(){return{show:[],hide:[]}}function R(s,L,F){s?L.hide.push(F):L.show.push(F)}function u(s){s.show.forEach(n),s.hide.forEach(o)}function i(s,L,F=.3){L?E(s,F):r(s)}function r(s){s.style.opacity=""}function E(s,L=.3){s.style.opacity=L}function l(s){s.style.order=""}function x(s,L){s.style.order=L}function O(s,L){s.style.background=L}function _(s,L){const F=getFirstElement(L);F&&H(s,F)}function H(s,L){const F=createLink();F.href=s,L.parentNode.append(F),F.append(L)}function I(s,L){const F=getFirstElement(L);F&&h(s,F)}function h(s,L){const F=createLink();F.href=s,F.append(...L.childNodes),L.append(F)}function N(){const s=getURLQueryParam("scrollTo");if(!s)return;const L=document.getElementById(s);L?L.scrollIntoView():console.log(`Element with ID "${s}" was not found.`)}function W(s,L,F=null){const k=`${L}-click-passed`,K=F?P=>findElementByText(P,s,F):P=>getFirstElement(s,P);return function(P){if(P.hasAttribute(k))return!1;const b=K(P);return b&&b.click(),P.setAttribute(k,""),!0}}function V(s,L,F="text/plain"){const k=new Blob([s],{type:F}),K=URL.createObjectURL(k),P=document.createElement("a");P.href=K,P.download=L,document.body.appendChild(P),P.click(),document.body.removeChild(P),requestAnimationFrame(()=>URL.revokeObjectURL(K))}},6754:(D,m,e)=>{e.d(m,{ZM:()=>d});function d(T,c){Object.assign(T.style,c)}function o(T,c="custom-global-style"){let n=document.getElementById(c);n||(n=document.createElement("style"),n.id=c,n.type="text/css",document.head.appendChild(n)),n.textContent=T}function f(T){return Object.entries(T).map(([c,n])=>`${c.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${n};`).join(" ")}function p(T){return T?T.split(";").filter(c=>c.trim()!=="").reduce((c,n)=>{const[a,t]=n.split(":").map(g=>g.trim()),v=a.replace(/-([a-z])/g,(g,S)=>S.toUpperCase());return c[v]=t,c},{}):{}}},4921:(D,m,e)=>{e.d(m,{sg:()=>p,xk:()=>d});function d(t,v,g=null){const S=t.querySelector(v);return S?Promise.resolve(S):new Promise(C=>{const R=new MutationObserver(i);R.observe(t,{childList:!0,subtree:!0});let u;g&&(u=setTimeout(()=>{R.disconnect(),console.log(`No element found for selector: ${v}`),C(null)},g));function i(){const r=t.querySelector(v);r&&(u&&clearTimeout(u),R.disconnect(),C(r))}})}function o(t,v){return t.querySelector(v)?new Promise(S=>{const C=new MutationObserver(R);C.observe(t,{childList:!0,subtree:!0});function R(){t.querySelector(v)||(C.disconnect(),S())}}):Promise.resolve()}function f(t,v=400){return new Promise(g=>{let S;const C=new MutationObserver(()=>{clearTimeout(S),R()});function R(){S=setTimeout(()=>{C.disconnect(),g()},v)}R(),C.observe(t,{childList:!0,subtree:!0})})}function p(t,v=250){let g;return(...S)=>{clearTimeout(g),g=setTimeout(()=>t(...S),v)}}async function T(t){document.visibilityState==="visible"?await t():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await t()},{once:!0})}function c(t,v){const g=new IntersectionObserver(S=>{S.forEach(C=>{C.isIntersecting&&(v(),n(t))})});t.intersectionObserver=g,g.observe(t)}function n(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}function a(t){t&&(t.disconnect(),t=null)}},3829:(D,m,e)=>{e.d(m,{Ay:()=>o,JE:()=>p,iG:()=>T});var d=e(8355);function o(n,a){return!f(n,a)}function f(n,a){if(!a.value)return!0;const t=n.toLowerCase(),v=(0,d.R)(a),g=[],S=[];return v.forEach(C=>{if(C.startsWith("!")){const R=C.substring(1);R&&S.push(R)}else g.push(C)}),g.every(C=>t.includes(C))&&S.every(C=>!t.includes(C))}function p(n,a){return a.value!=null&&n<a.value}function T(n,a){return a.value!=null&&n>a.value}function c(n,a){return a.value&&n!==a.value}},4521:(D,m,e)=>{e.d(m,{z:()=>o});var d=e(3048);function o(f,p=null){return{createGlobalFilter(T,c=null,n=f){return d.V.create(T,c,n)},createSectionFilter(T,c=null,n=f){if(!p)throw new Error("sectionId must be provided to use createSectionFilter.");return d.V.createWithCompositeKey(p,T,c,n)}}}},5884:(D,m,e)=>{e.d(m,{Hw:()=>T,Nm:()=>f,nW:()=>p});var d=e(9928),o=e(5467);function f(c,n,a={},t={}){const v=(0,d.kU)(t,n.updateValueFromEvent,n.value);return(0,o.E2)(v,a,c)}function p(c,n,a,t,v,g={},S={}){const C=(0,d.o5)(S,n.updateValueFromEvent,n.value,a,t,v);return(0,o.E2)(C,g,c)}function T(c,n,a={},t={}){const v=(0,d.S)(t,n.updateValueFromEvent,n.value);return(0,o.E2)(v,a,c)}},7877:(D,m,e)=>{e.d(m,{E9:()=>o,FR:()=>p,HX:()=>f,X0:()=>T,pW:()=>_});var d=e(5884);function o(I,h={},N={}){return(0,d.Nm)("\u041F\u043E\u0438\u0441\u043A: ",I,h,N)}function f(I,h={},N={},W=.1,V=3){return(0,d.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,W,V,5,h,N)}function p(I,h={},N={},W=.1,V=3){return(0,d.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,W,V,5,h,N)}function T(I,h={},N={}){return n("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,h,N)}function c(I,h={},N={}){return n("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,h,N)}function n(I,h,N={},W={}){return(0,d.nW)(I,h,"1","1","999999",N,W)}function a(I,h={},N={}){return t("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",I,h,N)}function t(I,h,N={},W={}){return createNumberFilterControl(I,h,"5","0","100",N,W)}function v(I,h={},N={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",I,"5","0","100",h,N)}function g(I,h,N={},W={},V="250"){return createNumberFilterControl(I,h,V,"0","1000000",N,W)}function S(I,h={},N={},W="25"){return g("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",I,h,N,W)}function C(I,h={},N={},W="25"){return g("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",I,h,N,W)}function R(I,h={},N={}){return u("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",I,h,N)}function u(I,h,N={},W={}){return createNumberFilterControl(I,h,"1","0","99999",N,W)}function i(I,h={},N={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",I,"1","2","7",h,N)}function r(I,h={},N={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",I,1,1,10,h,N)}function E(I,h={},N={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",I,h,N)}function l(I,h={},N={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",I,h,N)}function x(I,h={},N={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",I,h,N)}function O(I,h={},N={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",I,h,N)}function _(I,h={},N={}){return(0,d.Hw)("\u0412\u043A\u043B: ",I,h,N)}function H(I,h,N={}){const W=[{value:-35,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-35%)"},{value:-25,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F44D}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"}],V=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),s=[],L=()=>{const F=h?parseFloat(h.value)||0:I.value;s.forEach(({button:k,value:K})=>{K<=F?(k.style.background="#e3f2fd",k.style.borderColor="#2196f3",k.style.boxShadow="0 0 0 1px #2196f3"):(k.style.background="#fff",k.style.borderColor="#ccc",k.style.boxShadow="none")})};return W.forEach(({value:F,emoji:k,tooltip:K})=>{const P=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...N},k);P.title=K,P.type="button",P.addEventListener("click",b=>{b.preventDefault(),I.updateValue(F),h&&(h.value=F),L()}),P.addEventListener("mouseenter",()=>{const b=h?parseFloat(h.value)||0:I.value;F<=b||(P.style.background="#f5f5f5")}),P.addEventListener("mouseleave",()=>{L()}),s.push({button:P,value:F}),V.appendChild(P)}),L(),h&&(h.addEventListener("input",L),h.addEventListener("change",L)),V}},8355:(D,m,e)=>{e.d(m,{R:()=>d,f:()=>o});function d(f){return f.value.toLowerCase().split(",").map(p=>p.trim()).filter(p=>p!=="")}function o(f){return d(f).filter(p=>!p.startsWith("!"))}},5213:(D,m,e)=>{e.d(m,{b:()=>f});var d=e(9928),o=e(573);function f(p,T,c=!1,n="customFiltersContainer"){let a=(0,o.Fi)(`#${n}`,p);if(a)if(c)a.remove();else return;a=(0,d.Sw)(),a.id=n,T(a,p)}},8200:(D,m,e)=>{e.d(m,{s:()=>d});function d(o){const{target:f}=o,{type:p}=f;switch(p){case"text":return`"${f.value}"`;case"number":return f.value;case"checkbox":return f.checked;default:return console.log(`Unknown input type: ${p}`),null}}},157:(D,m,e)=>{e.d(m,{Fg:()=>d,vx:()=>f});const d=window.GM_setValue,o=window.GM.setValue,f=window.GM_getValue},1870:(D,m,e)=>{e.d(m,{j:()=>d});class d{constructor(f,p){this.value=f,this.onChange=p}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(D,m,e)=>{e.d(m,{V:()=>T});var d=e(1870),o=e(8200),f=e(3976),p=e(157);class T extends d.j{constructor(n,a=null,t=null){super((0,p.vx)(n,a),t),this.storageKey=n,this.defaultValue=a}static create(n,a=null,t=null){return new T(n,a,t)}static createWithCompositeKey(n,a,t=null,v=null){const g=`${n}-${a}`;return new T(g,t,v)}updateValueFromEvent=n=>{const a=(0,o.s)(n),t=(0,f.$)(a);this.updateValue(t)};updateValue(n,a=!0){this.value!==n&&((0,p.Fg)(this.storageKey,n),this.value=n,a&&this.onChangeIfDefined())}clearValue(n=!1){this.updateValue(null,n)}resetValue(n=!1){this.updateValue(this.defaultValue,n)}}},3976:(D,m,e)=>{e.d(m,{$:()=>d});function d(o){return o===""?null:JSON.parse(o)}},4214:(D,m,e)=>{e.d(m,{$z:()=>d,zr:()=>o});function d(c){return c.replace(/\D/g,"")}function o(c){return c.replace(/[^\d.,-]/g,"")}function f(c){return c.replace(/\s/g,"")}function p(c){return c.charAt(0).toUpperCase()+c.slice(1)}function T(c){return c.replace(/\s+/g," ").trim()}},5406:(D,m,e)=>{e.d(m,{$F:()=>c,Fc:()=>d,bn:()=>o,z2:()=>v});function d(R,u="common",i=!1){const{pathname:r}=window.location;return o(r,R,u,i)}function o(R,u,i,r=!1){const E=R.split("/");u=u<0?E.length+u:u;const l=E[u]||i;return r&&console.log(`Pathname element: ${l}`),l}function f(R,u="common",i=!1){const r=d(R,"",i);return p(r,u,i)}function p(R,u,i){if(!R)return u;const r=R.split("-").at(-1);return i&&console.log(`Pathname element ending: ${r}`),r}function T(R,u,i="common",r=!1){const E=o(R,u,"",r);return p(E,i,r)}function c(R){return new URLSearchParams(window.location.search).get(R)}function n(R){return R.split("?")[0]}function a(R){return window.location.pathname.includes(R)}function t(R){return R.some(u=>a(u))}function v(R){return window.location.pathname.split("/").some(i=>i===R)}function g(R){try{const u=new URL(window.location.href);Object.entries(R).forEach(([i,r])=>{u.searchParams.set(i,r)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function S(R,u=[]){const i={pathname:window.location.pathname};u.forEach(O=>{i[O]=c(O)});let r=!1;async function E(){if(r)return;const O={pathname:window.location.pathname};if(u.forEach(_=>{O[_]=c(_)}),Object.keys(i).some(_=>i[_]!==O[_])){Object.assign(i,O),r=!0;try{await R()}catch(_){console.error("Error in URL observer callback:",_)}finally{r=!1}}}function l(){E().catch(O=>{console.error("Error in URL change handler:",O)})}let x=window.location.href;setInterval(()=>{window.location.href!==x&&(x=window.location.href,l())},200),window.addEventListener("popstate",l)}function C(R=[]){S(()=>window.location.reload(),R)}},2524:(D,m,e)=>{e.d(m,{d5:()=>f,vX:()=>n,ft:()=>p});var d=e(157);class o{constructor(v=Date.now(),g=[]){this.lastCheckDate=v,this.reviewsData=g}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(v){const{lastCheckDate:g,reviewsData:S}=v;return new o(g,S)}}const f={LAST_DOCTOR_UPDATE:"last-doctor-update"};function p(t,v){const g=T(t),S=(0,d.vx)(g),C=c(S);C.reviewsData=v,C.updateLastCheckDate(),(0,d.Fg)(g,C),(0,d.Fg)(f.LAST_DOCTOR_UPDATE,Date.now())}function T(t){return`doctor-${t}`}function c(t){return t?o.fromObject(t):new o}function n(t){return a(t)?.reviewsData??null}function a(t){const v=T(t);return(0,d.vx)(v)}},1753:(D,m,e)=>{e.a(D,async(d,o)=>{try{var f=e(573),p=e(7858),T=e(4231),c=e(5406),n=e(5072);const t=(0,f.Fi)(".appointments_page");t?(0,T.$)(t):(0,c.z2)("otzivi")?await(0,n.N)():(0,c.z2)("vrach")&&(0,p.O)(),o()}catch(a){o(a)}},1)},7653:(D,m,e)=>{e.d(m,{NI:()=>t,z1:()=>S,Np:()=>i,pR:()=>C,sp:()=>E,rd:()=>r});var d=e(9928),o=e(573);const f={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var p=e(8586),T=e(5406),c=e(4214);const n="additionalLinksAppended",a=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function t(l,x){x.classList.contains(n)||(a.forEach(O=>{v(l,x,O)}),x.classList.add(n))}function v(l,x,O){const _=g(l,O),H=(0,d.d)({},O,_),I=document.createElement("br");x.append(I,H)}function g(l,x){const O=`${l} ${x}`;return`https://www.google.com/search?q=${encodeURIComponent(O)}&btnI`}function S(){const l=(0,o.Fi)(f.DOCTOR_CARD_NAME,document,!0);if(!l)return;const x=l.innerText.trim(),O=(0,d.Sw)();O.style.textAlign="center",(0,o.Fi)(f.DOCTOR_INTRO_LEFT).append(O),t(x,O)}function C(l,x,O=!1){const _=(0,d.Sw)(p.r.REVIEWS_INFO);O&&(_.style.justifyContent="center"),_.classList.add("v-application");const H=(0,d.Sw)(p.r.REVIEWS_INFO_BLOCK);return H.style.height=O?"10px":"23px",H.append(_),l.slice(O?1:0).forEach(I=>{const{category:h,title:N,count:W,bgClassSuffix:V}=I,s=`${x}?rates_category=${h}`,L=O?W:`${N} ${W}`,F=(0,d.d)(p.r.REVIEW_INFO,L,s);F.classList=R(V),_.append(F),O&&u(F,N)}),H}function R(l){return`text-caption text--text px-2 py-1 rounded-sm bg-${l}`}function u(l,x){let O=null;l.addEventListener("mouseenter",()=>{O=(0,d.Sw)(p.r.REVIEW_INFO_TOOLTIP,x),document.body.appendChild(O);const _=l.getBoundingClientRect();O.style.left=`${(_.left+_.right)/2-O.offsetWidth/2+window.scrollX+2}px`,O.style.top=`${_.top+window.scrollY-O.offsetHeight-4}px`}),l.addEventListener("mouseleave",()=>{O&&(O.remove(),O=null)})}function i(l){const x=(0,o.Fi)(f.NAME_SPAN_HOLDER,document,!0);if(!x)return;const O=(0,o.Fi)(f.NAME_SPAN,x,!0);O&&O.append(l)}function r(){const l=(0,T.Fc)(3,"unknown");return(0,c.$z)(l)}function E(l){const x=(0,T.bn)(l,5,"");return(0,c.$z)(x)}},8586:(D,m,e)=>{e.d(m,{r:()=>o});const d={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},o={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...d.INPUT,width:"195px"},NUMBER_INPUT:{...d.INPUT,width:"70px"},CHECKBOX_INPUT:{...d.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(D,m,e)=>{e.d(m,{$:()=>N});var d=e(5406),o=e(573),f=e(5539),p=e(3829),T=e(7653),c=e(5213),n=e(5884),a=e(7877);const t={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .text-subtitle-1",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var v=e(4521),g=e(2524),S=e(4921),C=e(8586),R=e(6754);const u=window.GM_addValueChangeListener,i=(0,d.Fc)(2),{createGlobalFilter:r,createSectionFilter:E}=(0,v.z)(s,i),l=E("spec-filter"),x=E("clinic-filter"),O=E("min-reviews-filter",10),_=E("min-experience-filter",5,P),H=E("max-experience-filter",40),I=r("filter-enabled",!0),h={doctorCardsCache:new WeakMap};function N(b){P(),W();const U=(0,o.Fi)(t.DOCTOR_FILTERS);(0,c.b)(U,V),s(),u(g.d5.LAST_DOCTOR_UPDATE,s),new MutationObserver((0,S.sg)(s)).observe(b,{childList:!0})}function W(){const b=(0,o.Fi)(t.LIST_HEADER);b&&b.remove()}function V(b,U){(0,R.ZM)(b,C.r.FILTERS_CONTAINER),b.style.marginTop="6px";const j=(0,n.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",l,C.r.CONTROL,C.r.TEXT_INPUT),G=(0,n.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",x,C.r.CONTROL,C.r.TEXT_INPUT),w=(0,a.X0)(O,C.r.CONTROL,C.r.NUMBER_INPUT),A=(0,n.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",_,"1","0","100",C.r.CONTROL,C.r.NUMBER_INPUT),y=(0,n.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",H,"1","0","100",C.r.CONTROL,C.r.NUMBER_INPUT),M=(0,a.pW)(I,C.r.CONTROL,C.r.CHECKBOX_INPUT);b.append(j,G,w,A,y,M),U.append(b)}function s(){(0,o.fI)(t.DOCTOR_CARD).forEach(L)}function L(b){if(!I.value){(0,f.kl)(b);return}let U=h.doctorCardsCache.get(b);if(!U){const G=(0,o.Fi)(t.PROFILE_CARD,b),w=(0,o.Fi)(t.REVIEWS_LINK,G),A=(0,o.Fi)(t.EXPERIENCE_WRAP,b);if(!w||!A){(0,f.Bt)(b);return}const M=(0,o.Fi)(t.SPEC_WRAP,b,!0).innerText.trim(),B=(0,o.Fi)(t.CLINIC_CONTAINER,b,!0),$=(0,o.Fi)(t.CLINIC_WRAP,B,!0).innerText.trim(),X=(0,o.YA)(w,!0),Q=(0,o.YA)(A,!0),J=F(w);w.href=J,(0,T.NI)(k(b),G),U={specInfo:M,clinicName:$,reviewsLinkNumber:X,experienceNumber:Q,reviewsLink:w,reviewInfoAppended:!1},h.doctorCardsCache.set(b,U)}K(U);const j=(0,p.Ay)(U.specInfo,l)||(0,p.Ay)(U.clinicName,x)||(0,p.JE)(U.reviewsLinkNumber,O)||(0,p.JE)(U.experienceNumber,_)||(0,p.iG)(U.experienceNumber,H);(0,f.UC)(b,j)}function F(b){return b.href.replace(/\/#otzivi$/,"/otzivi/")}function k(b){return(0,o.Fi)(t.DOCTOR_CARD_NAME,b,!0).innerText}function K(b){if(b.reviewInfoAppended)return;const{reviewsLink:U}=b,j=U.href,G=(0,g.vX)((0,T.sp)(j));if(!G)return;const w=(0,T.pR)(G,j,!0);(0,f.WH)(U,w),b.reviewInfoAppended=!0}function P(){if(!_.value)return;const b=new URL(window.location.href);+b.searchParams.get("experience")!==_.value&&(b.searchParams.set("experience",_.value),window.location.href=b.toString())}},7858:(D,m,e)=>{e.d(m,{O:()=>c});var d=e(573),o=e(9928),f=e(7653);const p={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var T=e(2524);function c(){(0,f.z1)(),a();const v=n();t(v);const g=(0,T.vX)((0,f.rd)());if(!g)return;const S=(0,f.pR)(g,v);(0,f.Np)(S)}function n(){const{location:v}=window;return`${v.origin}${v.pathname}otzivi/`}function a(){if(!(0,d.Fi)(p.DOCTOR_CONTACTS))return;const g=[...(0,d.fI)(p.DOCTOR_DETAILS)].pop();if(!g)return;g.style.position="sticky",g.style.top="16px";const S=(0,o.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");S.classList.add("b-doctor-details__toc-title");const C=(0,o.d)({},null,"#doctor-contacts");C.classList.add("b-doctor-details__toc-item"),C.append(S),g.insertBefore(C,g.firstChild)}function t(v){const g=(0,d.Fi)(p.REVIEWS_LINK);g&&(g.href=v)}},5072:(D,m,e)=>{e.d(m,{N:()=>L});var d=e(7653);const o={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var f=e(573),p=e(4921),T=e(5406),c=e(2524),n=e(4521),a=e(5213),t=e(8586),v=e(7877),g=e(5539);function S(w,A){w.forEach(y=>C(A,y))}function C(w,A){if(!A)return;const y=new RegExp(`(${A})`,"gi"),M=document.createTreeWalker(w,NodeFilter.SHOW_TEXT,null);let B=M.nextNode();const z=[];for(;B;){const{textContent:$}=B;if(y.test($)){const X=document.createDocumentFragment();let Q=0;$.replace(y,(J,re,q)=>{q>Q&&X.appendChild(document.createTextNode($.slice(Q,q)));const Z=document.createElement("span");Z.className="highlightedSubstring",Z.style.backgroundColor="yellow",Z.textContent=J,X.appendChild(Z),Q=q+J.length}),Q<$.length&&X.appendChild(document.createTextNode($.slice(Q))),z.push({node:B,fragment:X})}B=M.nextNode()}z.forEach(({node:$,fragment:X})=>{$.parentNode.replaceChild(X,$)})}function R(w){(0,f.fI)(".highlightedSubstring",w).forEach(y=>{const{parentNode:M}=y;y.replaceWith(y.textContent),M.normalize()})}var u=e(8355);function i(w,A){const y=(0,u.f)(w);S(y,A)}function r(w,A){const y=getIncludedSearchStrings(w);A.forEach(M=>highlightSubstrings(y,M))}var E=e(3829),l=e(9928);function x(w={}){return(0,l.Sw)(w,"|")}function O(w={},A=75,y="customFiltersContainer"){const M=document.getElementById(y);if(!M)return console.log(`Element with id="${y}" not found.`),null;const B=createButton(w,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return B.addEventListener("mouseenter",()=>{B.style.filter="brightness(0.9)"}),B.addEventListener("mouseleave",()=>{B.style.filter="brightness(1)"}),B.addEventListener("click",()=>{const z=M.getBoundingClientRect();window.scrollTo({top:z.top+window.scrollY-A})}),new IntersectionObserver(([z])=>{B.style.display=z.isIntersecting?"none":"flex"},{threshold:.5}).observe(M),B}function _(w,A={}){const y=O(A);y&&w.appendChild(y)}var H=e(6754);const{createGlobalFilter:I}=(0,n.z)(k),h=I("reviews-text-filter"),N=I("reviews-min-rating-filter"),W=I("reviews-max-rating-filter"),V=I("reviews-filter-enabled",!0),s={reviewCardsCache:new Map};async function L(){(0,d.z1)();const w=await(0,p.xk)(document,o.CONTROLS_CONTAINER);(0,a.b)(w,F),k();const A=await b();(0,c.ft)((0,d.rd)(),A);const y=(0,d.pR)(A,j());(0,d.Np)(y),(0,T.$F)("rates_category")&&G()}function F(w,A){(0,H.ZM)(w,t.r.FILTERS_CONTAINER),w.style.marginTop="12px";const y=(0,v.E9)(h,t.r.CONTROL,t.r.TEXT_INPUT),M=(0,v.HX)(N,t.r.CONTROL,t.r.NUMBER_INPUT,1,1),B=(0,v.FR)(W,t.r.CONTROL,t.r.NUMBER_INPUT,1,1),z=x(t.r.CONTROL),$=(0,v.pW)(V,t.r.CONTROL,t.r.CHECKBOX_INPUT);w.append(y,M,B,z,$),A.append(w)}function k(){(0,f.fI)(o.REVIEWS).forEach(K)}function K(w){if(!V.value){(0,g.kl)(w);return}R(w);let A=s.reviewCardsCache.get(w);if(!A){const M=(0,f.Fi)(o.REVIEW_TEXT_WRAP,w),B=(0,f.Fi)(o.REVIEW_RATING_WRAP,w);if(!M){(0,g.Bt)(w);return}A={reviewTextWrap:M,reviewText:M.innerText,rating:B&&(0,f.YA)(B)},s.reviewCardsCache.set(w,A)}h.value&&i(h,A.reviewTextWrap);const y=(0,E.Ay)(A.reviewText,h)||P(A.rating);(0,g.UC)(w,y)}function P(w){return w?(0,E.JE)(w,N)||(0,E.iG)(w,W):!1}async function b(){const w=(0,f.Fi)(o.FILTER_CHIP);w.click();const A=await(0,p.xk)(document,o.FILTER_LIST),y=[...(0,f.fI)(o.FILTER_LIST_ITEM,A)].map(M=>{const B=M.getAttribute("data-qa");if(!B)return null;const z=B.replace("reviews_filter_list_item_",""),$=(0,f.Fi)(o.FILTER_TITLE_WRAP,M).textContent.trim(),X=(0,f.Fi)(o.FILTER_COUNT_WRAP,M),Q=(0,f.YA)(X,!0),J=U(X.classList);return{category:z,title:$,count:Q,bgClassSuffix:J}});return w.click(),y}function U(w){const A=w.value.match(/bg-(\w+)/);return A?A[1]:null}function j(){const{location:w}=window;return`${w.origin}${w.pathname}`}function G(){(0,f.Fi)(o.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},ee={};function Y(D){var m=ee[D];if(m!==void 0)return m.exports;var e=ee[D]={exports:{}};return te[D](e,e.exports,Y),e.exports}(()=>{var D=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",d=f=>{f&&f.d<1&&(f.d=1,f.forEach(p=>p.r--),f.forEach(p=>p.r--?p.r++:p()))},o=f=>f.map(p=>{if(p!==null&&typeof p=="object"){if(p[D])return p;if(p.then){var T=[];T.d=0,p.then(a=>{c[m]=a,d(T)},a=>{c[e]=a,d(T)});var c={};return c[D]=a=>a(T),c}}var n={};return n[D]=a=>{},n[m]=p,n});Y.a=(f,p,T)=>{var c;T&&((c=[]).d=-1);var n=new Set,a=f.exports,t,v,g,S=new Promise((C,R)=>{g=R,v=C});S[m]=a,S[D]=C=>(c&&C(c),n.forEach(C),S.catch(R=>{})),f.exports=S,p(C=>{t=o(C);var R,u=()=>t.map(r=>{if(r[e])throw r[e];return r[m]}),i=new Promise(r=>{R=()=>r(u),R.r=0;var E=l=>l!==c&&!n.has(l)&&(n.add(l),l&&!l.d&&(R.r++,l.push(R)));t.map(l=>l[D](E))});return R.r?i:u()},C=>(C?g(S[e]=C):v(a),d(c))),c&&c.d<0&&(c.d=0)}})(),Y.d=(D,m)=>{for(var e in m)Y.o(m,e)&&!Y.o(D,e)&&Object.defineProperty(D,e,{enumerable:!0,get:m[e]})},Y.o=(D,m)=>Object.prototype.hasOwnProperty.call(D,m);var ne=Y(1753)})();})();
