// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.75621094
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var te={5467:(F,v,e)=>{e.d(v,{E2:()=>o});var a=e(9928);function o(E,u={},t=null){const r=(0,a.Sw)(u,t);return r.append(E),r}function l(E,u=null,t={},r={}){const i=createActionLink(E,u,r);return o(i,t)}function d(E,u=null,t=null,r={},i={}){const h=createActionLinkWithIcon(E,t,u,i);return o(h,r)}},9928:(F,v,e)=>{e.d(v,{S:()=>E,Sw:()=>O,d:()=>r,kU:()=>l,o5:()=>d});var a=e(4921),o=e(6754);function l(p,f,C){const s=u(p,"text",f);return s.value=C,s}function d(p,f,C,s,D,S){const x=u(p,"number",f);return x.value=C,x.step=s,x.min=D,x.max=S,x}function E(p,f,C){const s=u(p,"checkbox",f);return s.checked=C,s}function u(p={},f=null,C=null){const s=m("input",p);return f&&(s.type=f),C&&(s.addEventListener("keyup",(0,a.sg)(C,200)),s.addEventListener("change",(0,a.sg)(C,100))),s}function t(p={},f=null){return m("span",p,f)}function r(p={},f=null,C=null){const s=m("a",p,f);return C&&(s.href=C),s}function i(p,f=null,C={}){C.cursor||="pointer";const s=r(C,f);return p&&s.addEventListener("click",p),s}function h(p,f,C=null,s={},D={}){s.display||="inline-flex",s.alignItems||="center",s.gap||="0.25em";const S=i(p,C,s);return S.prepend(n(f,D)),S}function g(p={},f=null,C=null){const s=m("button",p,f);return C&&s.addEventListener("click",C),s}function O(p={},f=null){return m("div",p,f)}function L(p={}){return m("i",p)}function n(p,f={}){f.width||="1em",f.height||="1em",f.paddingBottom||="1px";const C=L(f);return C.setAttribute("data-lucide",p),C}function m(p,f,C=null){if(typeof f!="object"||f===null)throw new TypeError("styles should be an object");const s=document.createElement(p);return(0,o.ZM)(s,f),C&&(s.innerHTML=C),s}},573:(F,v,e)=>{e.d(v,{Fi:()=>l,YA:()=>t,fI:()=>d});var a=e(4214);function o(n,m=document){return!!m.querySelector(n)}function l(n,m=document,p=!1){const f=m.querySelector(n);return p&&!f&&console.log(`No element found for selector: ${n}`),f}function d(n,m=document,p=!1){const f=m.querySelectorAll(n);return p&&!f.length&&console.log(`No elements found for selector: ${n}`),f}function E(n,m,p){return[...n.querySelectorAll(m)].find(f=>f.textContent.trim().includes(p))}function u(n,m,p=!1,f=!1,C=null){const s=l(m,n);return t(s,p,f,C)}function t(n,m=!1,p=!1,f=null){if(!n)return f===null?(console.log("No element found"),null):f;const C=n.innerText;return h(C,m,p)}function r(n,m,p=!1){const f=n[m];return t(f,p)}function i(n,m=!1,p=!1){const f=n.textContent;return h(f,m,p)}function h(n,m,p){m&&(n=(0,a.zr)(n)),p&&(n=n.replace(",","."));const f=Number(n);return Number.isNaN(f)?(console.log(`Invalid number: ${n}`),0):f}function g(n){return[...n.childNodes].find(m=>m.nodeType===Node.TEXT_NODE)}function O(n){const m=p=>p.nodeType===Node.TEXT_NODE&&p.textContent.trim()!==""?[p]:[...p.childNodes].flatMap(m);return m(n)}function L(n){return normalizeSpacing(n.textContent)}},5539:(F,v,e)=>{e.d(v,{Bt:()=>o,UC:()=>t,WH:()=>a,kl:()=>E});function a(c,N){c.parentNode.insertBefore(N,c.nextSibling)}function o(c){c.style.display="none"}function l(c){h(c),o(c)}function d(c){c.intersectionObserver||runOnceOnIntersection(c,()=>o(c))}function E(c){c.style.display=""}function u(c){const N=i(c);c.style.display=N}function t(c,N){N?o(c):E(c)}function r(c,N){N?d(c):(clearIntersectionObserver(c),E(c))}function i(c){return h(c),c.defaultDisplay}function h(c){if(c.defaultDisplay)return;const{display:N}=getComputedStyle(c);c.defaultDisplay=N}function g(){return{show:[],hide:[]}}function O(c,N,y){c?N.hide.push(y):N.show.push(y)}function L(c){c.show.forEach(E),c.hide.forEach(o)}function n(c,N,y=.3){N?p(c,y):m(c)}function m(c){c.style.opacity=""}function p(c,N=.3){c.style.opacity=N}function f(c){c.style.order=""}function C(c,N){c.style.order=N}function s(c,N){c.style.background=N}function D(c,N){const y=getFirstElement(N);y&&S(c,y)}function S(c,N){const y=createLink();y.href=c,N.parentNode.append(y),y.append(N)}function x(c,N){const y=getFirstElement(N);y&&I(c,y)}function I(c,N){const y=createLink();y.href=c,y.append(...N.childNodes),N.append(y)}function R(){const c=getURLQueryParam("scrollTo");if(!c)return;const N=document.getElementById(c);N?N.scrollIntoView():console.log(`Element with ID "${c}" was not found.`)}function w(c,N,y="text/plain"){const k=new Blob([c],{type:y}),X=URL.createObjectURL(k),U=document.createElement("a");U.href=X,U.download=N,document.body.appendChild(U),U.click(),document.body.removeChild(U),requestAnimationFrame(()=>URL.revokeObjectURL(X))}},6754:(F,v,e)=>{e.d(v,{ZM:()=>a});function a(E,u){Object.assign(E.style,u)}function o(E,u="custom-global-style"){let t=document.getElementById(u);t||(t=document.createElement("style"),t.id=u,t.type="text/css",document.head.appendChild(t)),t.textContent=E}function l(E){return Object.entries(E).map(([u,t])=>`${u.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t};`).join(" ")}function d(E){return E?E.split(";").filter(u=>u.trim()!=="").reduce((u,t)=>{const[r,i]=t.split(":").map(g=>g.trim()),h=r.replace(/-([a-z])/g,(g,O)=>O.toUpperCase());return u[h]=i,u},{}):{}}},4921:(F,v,e)=>{e.d(v,{sg:()=>d,xk:()=>a});function a(t,r,i=null){const h=t.querySelector(r);return h?Promise.resolve(h):new Promise(g=>{const O=new MutationObserver(n);O.observe(t,{childList:!0,subtree:!0});let L;i&&(L=setTimeout(()=>{O.disconnect(),console.log(`No element found for selector: ${r}`),g(null)},i));function n(){const m=t.querySelector(r);m&&(L&&clearTimeout(L),O.disconnect(),g(m))}})}function o(t,r){return t.querySelector(r)?new Promise(h=>{const g=new MutationObserver(O);g.observe(t,{childList:!0,subtree:!0});function O(){t.querySelector(r)||(g.disconnect(),h())}}):Promise.resolve()}function l(t,r=400){return new Promise(i=>{let h;const g=new MutationObserver(()=>{clearTimeout(h),O()});function O(){h=setTimeout(()=>{g.disconnect(),i()},r)}O(),g.observe(t,{childList:!0,subtree:!0})})}function d(t,r=250){let i;return(...h)=>{clearTimeout(i),i=setTimeout(()=>t(...h),r)}}function E(t,r){const i=new IntersectionObserver(h=>{h.forEach(g=>{g.isIntersecting&&(r(),u(t))})});t.intersectionObserver=i,i.observe(t)}function u(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}},3829:(F,v,e)=>{e.d(v,{Ay:()=>o,JE:()=>d,iG:()=>E});var a=e(8355);function o(t,r){return!l(t,r)}function l(t,r){if(!r.value)return!0;const i=t.toLowerCase(),h=(0,a.R)(r),g=[],O=[];return h.forEach(L=>{if(L.startsWith("!")){const n=L.substring(1);n&&O.push(n)}else g.push(L)}),g.every(L=>i.includes(L))&&O.every(L=>!i.includes(L))}function d(t,r){return r.value!=null&&t<r.value}function E(t,r){return r.value!=null&&t>r.value}function u(t,r){return r.value&&t!==r.value}},4521:(F,v,e)=>{e.d(v,{z:()=>o});var a=e(3048);function o(l,d=null){return{createGlobalFilter(E,u=null,t=l){return a.V.create(E,u,t)},createSectionFilter(E,u=null,t=l){if(!d)throw new Error("sectionId must be provided to use createSectionFilter.");return a.V.createWithCompositeKey(d,E,u,t)}}}},5884:(F,v,e)=>{e.d(v,{Hw:()=>E,Nm:()=>l,nW:()=>d});var a=e(9928),o=e(5467);function l(u,t,r={},i={}){const h=(0,a.kU)(i,t.updateValueFromEvent,t.value);return(0,o.E2)(h,r,u)}function d(u,t,r,i,h,g={},O={}){const L=(0,a.o5)(O,t.updateValueFromEvent,t.value,r,i,h);return(0,o.E2)(L,g,u)}function E(u,t,r={},i={}){const h=(0,a.S)(i,t.updateValueFromEvent,t.value);return(0,o.E2)(h,r,u)}},7877:(F,v,e)=>{e.d(v,{E9:()=>o,FR:()=>d,HX:()=>l,X0:()=>E,pW:()=>x});var a=e(5884);function o(I,R={},w={}){return(0,a.Nm)("\u041F\u043E\u0438\u0441\u043A: ",I,R,w)}function l(I,R={},w={},c=.1,N=3){return(0,a.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,c,N,5,R,w)}function d(I,R={},w={},c=.1,N=3){return(0,a.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",I,c,N,5,R,w)}function E(I,R={},w={}){return t("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,R,w)}function u(I,R={},w={}){return t("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",I,R,w)}function t(I,R,w={},c={}){return(0,a.nW)(I,R,"1","1","999999",w,c)}function r(I,R={},w={}){return i("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",I,R,w)}function i(I,R,w={},c={}){return createNumberFilterControl(I,R,"5","0","100",w,c)}function h(I,R={},w={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",I,"5","0","100",R,w)}function g(I,R,w={},c={},N="250"){return createNumberFilterControl(I,R,N,"0","1000000",w,c)}function O(I,R={},w={},c="25"){return g("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",I,R,w,c)}function L(I,R={},w={},c="25"){return g("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",I,R,w,c)}function n(I,R={},w={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",I,R,w)}function m(I,R,w={},c={}){return createNumberFilterControl(I,R,"1","0","99999",w,c)}function p(I,R={},w={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",I,"1","2","7",R,w)}function f(I,R={},w={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",I,1,1,10,R,w)}function C(I,R={},w={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",I,R,w)}function s(I,R={},w={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",I,R,w)}function D(I,R={},w={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",I,R,w)}function S(I,R={},w={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",I,R,w)}function x(I,R={},w={}){return(0,a.Hw)("\u0412\u043A\u043B: ",I,R,w)}},8355:(F,v,e)=>{e.d(v,{R:()=>a,f:()=>o});function a(l){return l.value.toLowerCase().split(",").map(d=>d.trim()).filter(d=>d!=="")}function o(l){return a(l).filter(d=>!d.startsWith("!"))}},5213:(F,v,e)=>{e.d(v,{b:()=>l});var a=e(9928),o=e(573);function l(d,E,u=!1,t="customFiltersContainer"){let r=(0,o.Fi)(`#${t}`,d);if(r)if(u)r.remove();else return;r=(0,a.Sw)(),r.id=t,E(r,d)}},8200:(F,v,e)=>{e.d(v,{s:()=>a});function a(o){const{target:l}=o,{type:d}=l;switch(d){case"text":return`"${l.value}"`;case"number":return l.value;case"checkbox":return l.checked;default:return console.log(`Unknown input type: ${d}`),null}}},157:(F,v,e)=>{e.d(v,{Fg:()=>a,IC:()=>d,vx:()=>l});const a=window.GM_setValue,o=window.GM.setValue,l=window.GM_getValue,d=window.GM_addValueChangeListener},1870:(F,v,e)=>{e.d(v,{j:()=>a});class a{constructor(l,d){this.value=l,this.onChange=d}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(F,v,e)=>{e.d(v,{V:()=>E});var a=e(1870),o=e(8200),l=e(3976),d=e(157);class E extends a.j{constructor(t,r=null,i=null){super((0,d.vx)(t,r),i),this.storageKey=t,this.defaultValue=r}static create(t,r=null,i=null){return new E(t,r,i)}static createWithCompositeKey(t,r,i=null,h=null){const g=`${t}-${r}`;return new E(g,i,h)}updateValueFromEvent=t=>{const r=(0,o.s)(t),i=(0,l.$)(r);this.updateValue(i)};updateValue(t,r=!0){this.value!==t&&((0,d.Fg)(this.storageKey,t),this.value=t,r&&this.onChangeIfDefined())}clearValue(t=!1){this.updateValue(null,t)}resetValue(t=!1){this.updateValue(this.defaultValue,t)}}},3976:(F,v,e)=>{e.d(v,{$:()=>a});function a(o){return o===""?null:JSON.parse(o)}},4214:(F,v,e)=>{e.d(v,{$z:()=>a,zr:()=>o});function a(u){return u.replace(/\D/g,"")}function o(u){return u.replace(/[^\d.,-]/g,"")}function l(u){return u.replace(/\s/g,"")}function d(u){return u.charAt(0).toUpperCase()+u.slice(1)}function E(u){return u.replace(/\s+/g," ").trim()}},5406:(F,v,e)=>{e.d(v,{$F:()=>u,Fc:()=>a,bn:()=>o,z2:()=>h});function a(n,m="common",p=!1){const{pathname:f}=window.location;return o(f,n,m,p)}function o(n,m,p,f=!1){const C=n.split("/");m=m<0?C.length+m:m;const s=C[m]||p;return f&&console.log(`Pathname element: ${s}`),s}function l(n,m="common",p=!1){const f=a(n,"",p);return d(f,m,p)}function d(n,m,p){if(!n)return m;const f=n.split("-").at(-1);return p&&console.log(`Pathname element ending: ${f}`),f}function E(n,m,p="common",f=!1){const C=o(n,m,"",f);return d(C,p,f)}function u(n){return new URLSearchParams(window.location.search).get(n)}function t(n){return n.split("?")[0]}function r(n){return window.location.pathname.includes(n)}function i(n){return n.some(m=>r(m))}function h(n){return window.location.pathname.split("/").some(p=>p===n)}function g(n){try{const m=new URL(window.location.href);Object.entries(n).forEach(([p,f])=>{m.searchParams.set(p,f)}),window.location.href=m.toString()}catch(m){console.error("Failed to redirect:",m)}}function O(n,m=[]){const p={pathname:window.location.pathname};m.forEach(s=>{p[s]=u(s)});function f(){const s={pathname:window.location.pathname};m.forEach(D=>{s[D]=u(D)}),Object.keys(p).some(D=>p[D]!==s[D])&&n()}let C=window.location.href;setInterval(()=>{window.location.href!==C&&(C=window.location.href,f())},200),window.addEventListener("popstate",f)}function L(n=[]){O(()=>window.location.reload(),n)}},2524:(F,v,e)=>{e.d(v,{d5:()=>l,vX:()=>t,ft:()=>d});var a=e(157);class o{constructor(h=Date.now(),g=[]){this.lastCheckDate=h,this.reviewsData=g}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(h){const{lastCheckDate:g,reviewsData:O}=h;return new o(g,O)}}const l={LAST_DOCTOR_UPDATE:"last-doctor-update"};function d(i,h){const g=E(i),O=(0,a.vx)(g),L=u(O);L.reviewsData=h,L.updateLastCheckDate(),(0,a.Fg)(g,L),(0,a.Fg)(l.LAST_DOCTOR_UPDATE,Date.now())}function E(i){return`doctor-${i}`}function u(i){return i?o.fromObject(i):new o}function t(i){return r(i)?.reviewsData??null}function r(i){const h=E(i);return(0,a.vx)(h)}},1753:(F,v,e)=>{e.a(F,async(a,o)=>{try{var l=e(573),d=e(7858),E=e(4231),u=e(5406),t=e(5072);const i=(0,l.Fi)(".appointments_page");i?(0,E.$)(i):(0,u.z2)("otzivi")?await(0,t.N)():(0,u.z2)("vrach")&&(0,d.O)(),o()}catch(r){o(r)}},1)},7653:(F,v,e)=>{e.d(v,{NI:()=>i,z1:()=>O,Np:()=>p,pR:()=>L,sp:()=>C,rd:()=>f});var a=e(9928),o=e(573);const l={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var d=e(8586),E=e(5406),u=e(4214);const t="additionalLinksAppended",r=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function i(s,D){D.classList.contains(t)||(r.forEach(S=>{h(s,D,S)}),D.classList.add(t))}function h(s,D,S){const x=g(s,S),I=(0,a.d)({},S,x),R=document.createElement("br");D.append(R,I)}function g(s,D){const S=`${s} ${D}`;return`https://www.google.com/search?q=${encodeURIComponent(S)}&btnI`}function O(){const s=(0,o.Fi)(l.DOCTOR_CARD_NAME,document,!0);if(!s)return;const D=s.innerText.trim(),S=(0,a.Sw)();S.style.textAlign="center",(0,o.Fi)(l.DOCTOR_INTRO_LEFT).append(S),i(D,S)}function L(s,D,S=!1){const x=(0,a.Sw)(d.r.REVIEWS_INFO);S&&(x.style.justifyContent="center"),x.classList.add("v-application");const I=(0,a.Sw)(d.r.REVIEWS_INFO_BLOCK);return I.style.height=S?"10px":"23px",I.append(x),s.slice(S?1:0).forEach(R=>{const{category:w,title:c,count:N,bgClassSuffix:y}=R,k=`${D}?rates_category=${w}`,X=S?N:`${c} ${N}`,U=(0,a.d)(d.r.REVIEW_INFO,X,k);U.classList=n(y),x.append(U),S&&m(U,c)}),I}function n(s){return`text-caption text--text px-2 py-1 rounded-sm bg-${s}`}function m(s,D){let S=null;s.addEventListener("mouseenter",()=>{S=(0,a.Sw)(d.r.REVIEW_INFO_TOOLTIP,D),document.body.appendChild(S);const x=s.getBoundingClientRect();S.style.left=`${(x.left+x.right)/2-S.offsetWidth/2+window.scrollX+2}px`,S.style.top=`${x.top+window.scrollY-S.offsetHeight-4}px`}),s.addEventListener("mouseleave",()=>{S&&(S.remove(),S=null)})}function p(s){const D=(0,o.Fi)(l.NAME_SPAN_HOLDER,document,!0);if(!D)return;const S=(0,o.Fi)(l.NAME_SPAN,D,!0);S&&S.append(s)}function f(){const s=(0,E.Fc)(3,"unknown");return(0,u.$z)(s)}function C(s){const D=(0,E.bn)(s,5,"");return(0,u.$z)(D)}},8586:(F,v,e)=>{e.d(v,{r:()=>o});const a={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},o={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...a.INPUT,width:"195px"},NUMBER_INPUT:{...a.INPUT,width:"70px"},CHECKBOX_INPUT:{...a.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(F,v,e)=>{e.d(v,{$:()=>c});var a=e(5406),o=e(573),l=e(5539),d=e(3829),E=e(7653),u=e(5213),t=e(5884),r=e(7877);const i={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .mr-2 .text-subtitle-1",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var h=e(4521),g=e(2524),O=e(4921),L=e(157),n=e(8586),m=e(6754);const p=(0,a.Fc)(2),{createGlobalFilter:f,createSectionFilter:C}=(0,h.z)(k,p),s=C("spec-filter"),D=C("clinic-filter"),S=C("min-reviews-filter",10),x=C("min-experience-filter",5,Y),I=C("max-experience-filter",40),R=f("filter-enabled",!0),w={doctorCardsCache:new WeakMap};function c(_){Y(),N();const M=(0,o.Fi)(i.DOCTOR_FILTERS);(0,u.b)(M,y),k(),(0,L.IC)(g.d5.LAST_DOCTOR_UPDATE,k),new MutationObserver((0,O.sg)(k)).observe(_,{childList:!0})}function N(){const _=(0,o.Fi)(i.LIST_HEADER);_&&_.remove()}function y(_,M){(0,m.ZM)(_,n.r.FILTERS_CONTAINER),_.style.marginTop="6px";const H=(0,t.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",s,n.r.CONTROL,n.r.TEXT_INPUT),K=(0,t.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",D,n.r.CONTROL,n.r.TEXT_INPUT),T=(0,r.X0)(S,n.r.CONTROL,n.r.NUMBER_INPUT),b=(0,t.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",x,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),A=(0,t.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",I,"1","0","100",n.r.CONTROL,n.r.NUMBER_INPUT),P=(0,r.pW)(R,n.r.CONTROL,n.r.CHECKBOX_INPUT);_.append(H,K,T,b,A,P),M.append(_)}function k(){(0,o.fI)(i.DOCTOR_CARD).forEach(X)}function X(_){if(!R.value){(0,l.kl)(_);return}let M=w.doctorCardsCache.get(_);if(!M){const K=(0,o.Fi)(i.PROFILE_CARD,_),T=(0,o.Fi)(i.REVIEWS_LINK,K),b=(0,o.Fi)(i.EXPERIENCE_WRAP,_);if(!T||!b){(0,l.Bt)(_);return}const P=(0,o.Fi)(i.SPEC_WRAP,_,!0).innerText.trim(),W=(0,o.Fi)(i.CLINIC_CONTAINER,_,!0),B=(0,o.Fi)(i.CLINIC_WRAP,W,!0).innerText.trim(),V=(0,o.YA)(T,!0),z=(0,o.YA)(b,!0),j=U(T);T.href=j,(0,E.NI)(Q(_),K),M={specInfo:P,clinicName:B,reviewsLinkNumber:V,experienceNumber:z,reviewsLink:T,reviewInfoAppended:!1},w.doctorCardsCache.set(_,M)}Z(M);const H=(0,d.Ay)(M.specInfo,s)||(0,d.Ay)(M.clinicName,D)||(0,d.JE)(M.reviewsLinkNumber,S)||(0,d.JE)(M.experienceNumber,x)||(0,d.iG)(M.experienceNumber,I);(0,l.UC)(_,H)}function U(_){return _.href.replace(/\/#otzivi$/,"/otzivi/")}function Q(_){return(0,o.Fi)(i.DOCTOR_CARD_NAME,_,!0).innerText}function Z(_){if(_.reviewInfoAppended)return;const{reviewsLink:M}=_,H=M.href,K=(0,g.vX)((0,E.sp)(H));if(!K)return;const T=(0,E.pR)(K,H,!0);(0,l.WH)(M,T),_.reviewInfoAppended=!0}function Y(){if(!x.value)return;const _=new URL(window.location.href);+_.searchParams.get("experience")!==x.value&&(_.searchParams.set("experience",x.value),window.location.href=_.toString())}},7858:(F,v,e)=>{e.d(v,{O:()=>u});var a=e(573),o=e(9928),l=e(7653);const d={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var E=e(2524);function u(){(0,l.z1)(),r();const h=t();i(h);const g=(0,E.vX)((0,l.rd)());if(!g)return;const O=(0,l.pR)(g,h);(0,l.Np)(O)}function t(){const{location:h}=window;return`${h.origin}${h.pathname}otzivi/`}function r(){if(!(0,a.Fi)(d.DOCTOR_CONTACTS))return;const g=[...(0,a.fI)(d.DOCTOR_DETAILS)].pop();if(!g)return;g.style.position="sticky",g.style.top="16px";const O=(0,o.Sw)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");O.classList.add("b-doctor-details__toc-title");const L=(0,o.d)({},null,"#doctor-contacts");L.classList.add("b-doctor-details__toc-item"),L.append(O),g.insertBefore(L,g.firstChild)}function i(h){const g=(0,a.Fi)(d.REVIEWS_LINK);g&&(g.href=h)}},5072:(F,v,e)=>{e.d(v,{N:()=>X});var a=e(7653);const o={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var l=e(573),d=e(4921),E=e(5406),u=e(2524),t=e(4521),r=e(5213),i=e(8586),h=e(7877),g=e(5539);function O(T,b){T.forEach(A=>L(b,A))}function L(T,b){if(!b)return;const A=new RegExp(`(${b})`,"gi"),P=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null);let W=P.nextNode();const $=[];for(;W;){const{textContent:B}=W;if(A.test(B)){const V=document.createDocumentFragment();let z=0;B.replace(A,(j,re,q)=>{q>z&&V.appendChild(document.createTextNode(B.slice(z,q)));const J=document.createElement("span");J.className="highlightedSubstring",J.style.backgroundColor="yellow",J.textContent=j,V.appendChild(J),z=q+j.length}),z<B.length&&V.appendChild(document.createTextNode(B.slice(z))),$.push({node:W,fragment:V})}W=P.nextNode()}$.forEach(({node:B,fragment:V})=>{B.parentNode.replaceChild(V,B)})}function n(T){(0,l.fI)(".highlightedSubstring",T).forEach(A=>{const{parentNode:P}=A;A.replaceWith(A.textContent),P.normalize()})}var m=e(8355);function p(T,b){const A=(0,m.f)(T);O(A,b)}function f(T,b){const A=getIncludedSearchStrings(T);b.forEach(P=>highlightSubstrings(A,P))}var C=e(3829),s=e(9928);function D(T={}){return(0,s.Sw)(T,"|")}function S(T={},b=75,A="customFiltersContainer"){const P=document.getElementById(A);if(!P)return console.log(`Element with id="${A}" not found.`),null;const W=createButton(T,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return W.addEventListener("mouseenter",()=>{W.style.filter="brightness(0.9)"}),W.addEventListener("mouseleave",()=>{W.style.filter="brightness(1)"}),W.addEventListener("click",()=>{const $=P.getBoundingClientRect();window.scrollTo({top:$.top+window.scrollY-b})}),new IntersectionObserver(([$])=>{W.style.display=$.isIntersecting?"none":"flex"},{threshold:.5}).observe(P),W}function x(T,b={}){const A=S(b);A&&T.appendChild(A)}var I=e(6754);const{createGlobalFilter:R}=(0,t.z)(Q),w=R("reviews-text-filter"),c=R("reviews-min-rating-filter"),N=R("reviews-max-rating-filter"),y=R("reviews-filter-enabled",!0),k={reviewCardsCache:new Map};async function X(){(0,a.z1)();const T=await(0,d.xk)(document,o.CONTROLS_CONTAINER);(0,r.b)(T,U),Q();const b=await _();(0,u.ft)((0,a.rd)(),b);const A=(0,a.pR)(b,H());(0,a.Np)(A),(0,E.$F)("rates_category")&&K()}function U(T,b){(0,I.ZM)(T,i.r.FILTERS_CONTAINER),T.style.marginTop="12px";const A=(0,h.E9)(w,i.r.CONTROL,i.r.TEXT_INPUT),P=(0,h.HX)(c,i.r.CONTROL,i.r.NUMBER_INPUT,1,1),W=(0,h.FR)(N,i.r.CONTROL,i.r.NUMBER_INPUT,1,1),$=D(i.r.CONTROL),B=(0,h.pW)(y,i.r.CONTROL,i.r.CHECKBOX_INPUT);T.append(A,P,W,$,B),b.append(T)}function Q(){(0,l.fI)(o.REVIEWS).forEach(Z)}function Z(T){if(!y.value){(0,g.kl)(T);return}n(T);let b=k.reviewCardsCache.get(T);if(!b){const P=(0,l.Fi)(o.REVIEW_TEXT_WRAP,T),W=(0,l.Fi)(o.REVIEW_RATING_WRAP,T);if(!P){(0,g.Bt)(T);return}b={reviewTextWrap:P,reviewText:P.innerText,rating:W&&(0,l.YA)(W)},k.reviewCardsCache.set(T,b)}w.value&&p(w,b.reviewTextWrap);const A=(0,C.Ay)(b.reviewText,w)||Y(b.rating);(0,g.UC)(T,A)}function Y(T){return T?(0,C.JE)(T,c)||(0,C.iG)(T,N):!1}async function _(){const T=(0,l.Fi)(o.FILTER_CHIP);T.click();const b=await(0,d.xk)(document,o.FILTER_LIST),A=[...(0,l.fI)(o.FILTER_LIST_ITEM,b)].map(P=>{const W=P.getAttribute("data-qa");if(!W)return null;const $=W.replace("reviews_filter_list_item_",""),B=(0,l.Fi)(o.FILTER_TITLE_WRAP,P).textContent.trim(),V=(0,l.Fi)(o.FILTER_COUNT_WRAP,P),z=(0,l.YA)(V,!0),j=M(V.classList);return{category:$,title:B,count:z,bgClassSuffix:j}});return T.click(),A}function M(T){const b=T.value.match(/bg-(\w+)/);return b?b[1]:null}function H(){const{location:T}=window;return`${T.origin}${T.pathname}`}function K(){(0,l.Fi)(o.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},ee={};function G(F){var v=ee[F];if(v!==void 0)return v.exports;var e=ee[F]={exports:{}};return te[F](e,e.exports,G),e.exports}(()=>{var F=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",v=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",e=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",a=l=>{l&&l.d<1&&(l.d=1,l.forEach(d=>d.r--),l.forEach(d=>d.r--?d.r++:d()))},o=l=>l.map(d=>{if(d!==null&&typeof d=="object"){if(d[F])return d;if(d.then){var E=[];E.d=0,d.then(r=>{u[v]=r,a(E)},r=>{u[e]=r,a(E)});var u={};return u[F]=r=>r(E),u}}var t={};return t[F]=r=>{},t[v]=d,t});G.a=(l,d,E)=>{var u;E&&((u=[]).d=-1);var t=new Set,r=l.exports,i,h,g,O=new Promise((L,n)=>{g=n,h=L});O[v]=r,O[F]=L=>(u&&L(u),t.forEach(L),O.catch(n=>{})),l.exports=O,d(L=>{i=o(L);var n,m=()=>i.map(f=>{if(f[e])throw f[e];return f[v]}),p=new Promise(f=>{n=()=>f(m),n.r=0;var C=s=>s!==u&&!t.has(s)&&(t.add(s),s&&!s.d&&(n.r++,s.push(n)));i.map(s=>s[F](C))});return n.r?p:m()},L=>(L?g(O[e]=L):h(r),a(u))),u&&u.d<0&&(u.d=0)}})(),G.d=(F,v)=>{for(var e in v)G.o(v,e)&&!G.o(F,e)&&Object.defineProperty(F,e,{enumerable:!0,get:v[e]})},G.o=(F,v)=>Object.prototype.hasOwnProperty.call(F,v);var ne=G(1753)})();})();
