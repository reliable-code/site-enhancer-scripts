// ==UserScript==
// @name         Prodoc enhancer
// @description  Hide doctor cards by filter, enhance doctor page
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://prodoctorov.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      2.0.76970372
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prodoctorov.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/prodoc.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var te={8738:(b,m,t)=>{t.d(m,{d:()=>i});var f=t(5558);function i(e={},o=null,r=null){const n=(0,f.n)("a",e,o);return r&&(n.href=r),n}function l(e,o=null,r={}){r.cursor||="pointer";const n=i(r,o);return e&&n.addEventListener("click",e),n}function p(e,o,r=null,n={},h={}){n.display||="inline-flex",n.alignItems||="center",n.gap||="0.25em";const v=l(e,r,n);return v.prepend(createLucideIcon(o,h)),v}function E(e,o,r,n=null,h={},v={}){const s=F=>{F.stopPropagation(),F.preventDefault(),window.confirm(r)&&e()},I=n?`<span>${n}</span>`:null,C=p(s,o,I,h,v);return C.classList.add("userscript-control"),C}function d(e,o,r={},n={}){return E(e,ThumbsDown,"\u0412\u044B\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?",o?"\u0414\u0438\u0437\u043B\u0430\u0439\u043A":null,r,n)}function a(e,o,r={},n={}){return E(e,RotateCcw,"\u0423\u0431\u0440\u0430\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?",o?"\u0423\u0431\u0440\u0430\u0442\u044C \u0434\u0438\u0437\u043B\u0430\u0439\u043A":null,r,n)}function c(e={},o=null,r=null){const n=createElement("button",e,o);return r&&n.addEventListener("click",r),n}},7273:(b,m,t)=>{t.d(m,{S:()=>l});var f=t(5558);function i(p={},E=null){return createElement("span",p,E)}function l(p={},E=null){return(0,f.n)("div",p,E)}},5467:(b,m,t)=>{t.d(m,{E2:()=>i});var f=t(7273);function i(E,d={},a=null){const c=(0,f.S)(d,a);return c.append(E),c}function l(E,d=null,a={},c={}){const e=createActionLink(E,d,c);return i(e,a)}function p(E,d=null,a=null,c={},e={},o={}){const r=createActionLinkWithIcon(E,a,d,e,o);return i(r,c)}},5558:(b,m,t)=>{t.d(m,{n:()=>i});var f=t(6754);function i(l,p,E=null){if(typeof p!="object"||p===null)throw new TypeError("styles should be an object");const d=document.createElement(l);return(0,f.ZM)(d,p),E&&(d.innerHTML=E),d}},740:(b,m,t)=>{t.d(m,{S:()=>d,kU:()=>l,o5:()=>p});var f=t(5558),i=t(4921);function l(e,o,r){const n=a(e,"text",o);return n.value=r,n}function p(e,o,r,n,h,v){const s=a(e,"number",o);return s.value=r,s.step=n,s.min=h,s.max=v,s}function E(e,o,r){const n=a(e,"date",o);return n.value=r,n}function d(e,o,r){const n=a(e,"checkbox",o);return n.checked=r,n}function a(e={},o=null,r=null){const n=(0,f.n)("input",e);return o&&(n.type=o),r&&(n.addEventListener("keyup",(0,i.sg)(r,200)),n.addEventListener("change",(0,i.sg)(r,100))),n}function c(e,o,r){const n=createElement("select",e);return o&&n.addEventListener("change",o),n.value=r,n}},573:(b,m,t)=>{t.d(m,{Fi:()=>l,YA:()=>c,fI:()=>p});var f=t(4214);function i(s,I=document){return!!I.querySelector(s)}function l(s,I=document,C=!1){const F=I.querySelector(s);return C&&!F&&console.log(`No element found for selector: ${s}`),F}function p(s,I=document,C=!1){const F=I.querySelectorAll(s);return C&&!F.length&&console.log(`No elements found for selector: ${s}`),F}function E(s,I=1){let C=s;for(let F=0;F<I;F++){if(!C.parentElement)return null;C=C.parentElement}return C}function d(s,I,C){return[...s.querySelectorAll(I)].find(F=>F.textContent.trim().includes(C))}function a(s,I,C=!1,F=!1,x=null){const A=l(I,s);return c(A,C,F,x)}function c(s,I=!1,C=!1,F=null){if(!s)return F===null?(console.log("No element found"),null):F;const x=s.innerText;return r(x,I,C)}function e(s,I,C=!1){const F=s[I];return c(F,C)}function o(s,I=!1,C=!1){const F=s.textContent;return r(F,I,C)}function r(s,I,C){I&&(s=(0,f.zr)(s)),C&&(s=s.replace(",","."));const F=Number(s);return Number.isNaN(F)?(console.log(`Invalid number: ${s}`),0):F}function n(s){return[...s.childNodes].find(I=>I.nodeType===Node.TEXT_NODE)}function h(s){const I=C=>C.nodeType===Node.TEXT_NODE&&C.textContent.trim()!==""?[C]:[...C.childNodes].flatMap(I);return I(s)}function v(s){return normalizeSpacing(s.textContent)}},5539:(b,m,t)=>{t.d(m,{Bt:()=>i,UC:()=>e,WH:()=>f,kl:()=>a});function f(u,R){u.parentNode.insertBefore(R,u.nextSibling)}function i(u){u.style.display="none"}function l(u,R=1){const w=document.querySelector(u);w&&p(w,R)}function p(u,R=1){const w=getElementAncestor(u,R);w&&i(w)}function E(u){n(u),i(u)}function d(u){u.intersectionObserver||runOnceOnIntersection(u,()=>i(u))}function a(u){u.style.display=""}function c(u){const R=r(u);u.style.display=R}function e(u,R){R?i(u):a(u)}function o(u,R){R?d(u):(clearIntersectionObserver(u),a(u))}function r(u){return n(u),u.dataset.defaultDisplay}function n(u){if(u.dataset.defaultDisplay)return;const{display:R}=getComputedStyle(u);u.dataset.defaultDisplay=R}function h(){return{show:[],hide:[]}}function v(u,R,w){u?R.hide.push(w):R.show.push(w)}function s(u){u.show.forEach(a),u.hide.forEach(i)}function I(u,R,w=.3){R?F(u,w):C(u)}function C(u){u.style.opacity=""}function F(u,R=.3){u.style.opacity=R}function x(u){u.style.order=""}function A(u,R){u.style.order=R}function S(u,R){u.style.background=R}function L(u,R){const w=getFirstElement(R);w&&U(u,w)}function U(u,R){const w=createLink();w.href=u,R.parentNode.append(w),w.append(R)}function $(u,R){const w=getFirstElement(R);w&&K(u,w)}function K(u,R,w={}){const k=createLink(w);k.href=u,k.append(...R.childNodes),R.append(k)}function D(){const u=getURLQueryParam("scrollTo");if(!u)return;const R=document.getElementById(u);R?R.scrollIntoView():console.log(`Element with ID "${u}" was not found.`)}function g(u,R,w=null){const k=`${R}-click-passed`,G=w?P=>findElementByText(P,u,w):P=>getFirstElement(u,P);return function(P){if(P.hasAttribute(k))return!1;const N=G(P);return N&&N.click(),P.setAttribute(k,""),!0}}function O(u,R,w="text/plain"){const k=new Blob([u],{type:w}),G=URL.createObjectURL(k),P=document.createElement("a");P.href=G,P.download=R,document.body.appendChild(P),P.click(),document.body.removeChild(P),requestAnimationFrame(()=>URL.revokeObjectURL(G))}},6754:(b,m,t)=>{t.d(m,{ZM:()=>f});function f(E,d){Object.assign(E.style,d)}function i(E,d="custom-global-style"){let a=document.getElementById(d);a||(a=document.createElement("style"),a.id=d,a.type="text/css",document.head.appendChild(a)),a.textContent=E}function l(E){return Object.entries(E).map(([d,a])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${a};`).join(" ")}function p(E){return E?E.split(";").filter(d=>d.trim()!=="").reduce((d,a)=>{const[c,e]=a.split(":").map(r=>r.trim()),o=c.replace(/-([a-z])/g,(r,n)=>n.toUpperCase());return d[o]=e,d},{}):{}}},4921:(b,m,t)=>{t.d(m,{sg:()=>p,xk:()=>f});function f(e,o,r=null){const n=e.querySelector(o);return n?Promise.resolve(n):new Promise(h=>{const v=new MutationObserver(I);v.observe(e,{childList:!0,subtree:!0});let s;r&&(s=setTimeout(()=>{v.disconnect(),console.log(`No element found for selector: ${o}`),h(null)},r));function I(){const C=e.querySelector(o);C&&(s&&clearTimeout(s),v.disconnect(),h(C))}})}function i(e,o){return e.querySelector(o)?new Promise(n=>{const h=new MutationObserver(v);h.observe(e,{childList:!0,subtree:!0});function v(){e.querySelector(o)||(h.disconnect(),n())}}):Promise.resolve()}function l(e,o=400){return new Promise(r=>{let n;const h=new MutationObserver(()=>{clearTimeout(n),v()});function v(){n=setTimeout(()=>{h.disconnect(),r()},o)}v(),h.observe(e,{childList:!0,subtree:!0})})}function p(e,o=250){let r;return function(...n){const h=this;clearTimeout(r),r=setTimeout(()=>e.apply(h,n),o)}}async function E(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function d(e,o){const r=new IntersectionObserver(n=>{n.forEach(h=>{h.isIntersecting&&(o(),a(e))})});e.intersectionObserver=r,r.observe(e)}function a(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function c(e){e&&(e.disconnect(),e=null)}},3829:(b,m,t)=>{t.d(m,{Ay:()=>i,JE:()=>d,iG:()=>a});var f=t(8355);function i(r,n){return!l(r,n)}function l(r,n){if(!n||!n.value)return!0;const h=(0,f._7)(n.value);return p(r,h)}function p(r,n){if(!n||!n.length)return!0;const h=(r||"").toLowerCase();return n.every(v=>E(h,v))}function E(r,n){return n.some(({term:h,isNegative:v})=>{const s=r.includes(h);return v?!s:s})}function d(r,n){return n.value!=null&&r<n.value}function a(r,n){return n.value!=null&&r>n.value}function c(r,n){return n.value==null?!1:r<parseDateFromISO(n.value)}function e(r,n){return n.value==null?!1:r>parseDateFromISO(n.value)}function o(r,n){return n.value&&r!==n.value}},4521:(b,m,t)=>{t.d(m,{z:()=>i});var f=t(3048);function i(l,p=null){return{createGlobalFilter(E,d=null,a=l){return f.V.create(E,d,a)},createSectionFilter(E,d=null,a=l){if(!p)throw new Error("sectionId must be provided to use createSectionFilter.");return f.V.createWithCompositeKey(p,E,d,a)}}}},5884:(b,m,t)=>{t.d(m,{Hw:()=>a,Nm:()=>l,nW:()=>p});var f=t(5467),i=t(740);function l(c,e,o={},r={}){const n=(0,i.kU)(r,e.updateValueFromEvent,e.value);return(0,f.E2)(n,o,c)}function p(c,e,o,r,n,h={},v={}){const s=(0,i.o5)(v,e.updateValueFromEvent,e.value,o,r,n);return(0,f.E2)(s,h,c)}function E(c,e,o={},r={}){const n=createSelect(r,e.updateValueFromEvent,e.value);return createControl(n,o,c)}function d(c,e,o={},r={}){const n=createDateInput(r,e.updateValueFromEvent,e.value);return createControl(n,o,c)}function a(c,e,o={},r={}){const n=(0,i.S)(r,e.updateValueFromEvent,e.value);return(0,f.E2)(n,o,c)}},7877:(b,m,t)=>{t.d(m,{E9:()=>i,FR:()=>p,HX:()=>l,X0:()=>E,pW:()=>$});var f=t(5884);function i(D,g={},O={}){return(0,f.Nm)("\u041F\u043E\u0438\u0441\u043A: ",D,g,O)}function l(D,g={},O={},u=.1,R=3){return(0,f.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",D,u,R,5,g,O)}function p(D,g={},O={},u=.1,R=3){return(0,f.nW)("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",D,u,R,5,g,O)}function E(D,g={},O={}){return a("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",D,g,O)}function d(D,g={},O={}){return a("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",D,g,O)}function a(D,g,O={},u={}){return(0,f.nW)(D,g,"1","1","999999",O,u)}function c(D,g={},O={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",D,g,O)}function e(D,g={},O={}){return o("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",D,g,O)}function o(D,g,O={},u={}){return createNumberFilterControl(D,g,"5","0","100",O,u)}function r(D,g={},O={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",D,"5","0","100",g,O)}function n(D,g,O={},u={},R="250"){return createNumberFilterControl(D,g,R,"0","1000000",O,u)}function h(D,g={},O={},u="25"){return n("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",D,g,O,u)}function v(D,g={},O={},u="25"){return n("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",D,g,O,u)}function s(D,g={},O={}){return I("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",D,g,O)}function I(D,g,O={},u={}){return createNumberFilterControl(D,g,"1","0","99999",O,u)}function C(D,g={},O={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",D,"1","2","8",g,O)}function F(D,g={},O={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",D,1,1,10,g,O)}function x(D,g={},O={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",D,g,O)}function A(D,g={},O={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",D,g,O)}function S(D,g={},O={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",D,g,O)}function L(D,g={},O={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",D,g,O)}function U(D,g={},O={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",D,g,O)}function $(D,g={},O={}){return(0,f.Hw)("\u0412\u043A\u043B: ",D,g,O)}function K(D,g,O={}){const u=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],R={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},w=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),k=[],G=()=>g?parseFloat(g.value)||0:D.value,P=()=>{const N=G();k.forEach(({button:B,value:z})=>{const T=z<=N?R.active:R.inactive;Object.assign(B.style,T)})};return u.forEach(({value:N,emoji:B,tooltip:z})=>{const V=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...O},B);V.title=z,V.type="button",V.addEventListener("click",T=>{T.preventDefault(),D.updateValue(N),g&&(g.value=N),P()}),V.addEventListener("mouseenter",()=>{N<=G()||(V.style.background=R.hover.background)}),V.addEventListener("mouseleave",()=>{P()}),k.push({button:V,value:N}),w.appendChild(V)}),P(),g&&(g.addEventListener("input",P),g.addEventListener("change",P)),w}},8355:(b,m,t)=>{t.d(m,{_7:()=>i,fO:()=>f});function f(c){if(!c)return[];const o=i(c).flat().filter(r=>r&&!r.isNegative&&r.term).map(r=>r.term);return[...new Set(o)]}function i(c){return c?c.toLowerCase().split(",").map(l).filter(Boolean):[]}function l(c){const e=c.split("/").map(r=>r.trim()).filter(Boolean);if(e.length===0)return null;const o=e.map(p).filter(Boolean);return o.length>0?o:null}function p(c){const e=c.startsWith("!"),o=e?c.slice(1).trim():c;return o?{term:o,isNegative:e}:null}function E(c,e){a(c,o=>o.style.display!=="none",e)}function d(c,e){a(c,o=>o.style.opacity==="",e)}function a(c,e,o){const r=[...c].filter(e).length;o.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${r} \u0438\u0437 ${c.length}`}},5213:(b,m,t)=>{t.d(m,{b:()=>l});var f=t(573),i=t(7273);function l(p,E,d=!1,a="customFiltersContainer"){let c=(0,f.Fi)(`#${a}`,p);if(c)if(d)c.remove();else return;c=(0,i.S)(),c.id=a,E(c,p)}},8200:(b,m,t)=>{t.d(m,{s:()=>f});function f(i){const{target:l}=i,{type:p}=l;switch(p){case"text":return`"${l.value}"`;case"number":return l.value;case"select-one":return l.value;case"date":return`"${l.value}"`;case"checkbox":return l.checked;default:return console.log(`Unknown input type: ${p}`),null}}},157:(b,m,t)=>{t.d(m,{Fg:()=>f,vx:()=>l});const f=window.GM_setValue,i=window.GM.setValue,l=window.GM_getValue},1870:(b,m,t)=>{t.d(m,{j:()=>f});class f{constructor(l,p){this.value=l,this.onChange=p}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(b,m,t)=>{t.d(m,{V:()=>E});var f=t(1870),i=t(8200),l=t(3976),p=t(157);class E extends f.j{constructor(a,c=null,e=null){super((0,p.vx)(a,c),e),this.storageKey=a,this.defaultValue=c}static create(a,c=null,e=null){return new E(a,c,e)}static createWithCompositeKey(a,c,e=null,o=null){const r=`${a}-${c}`;return new E(r,e,o)}updateValueFromEvent=a=>{const c=(0,i.s)(a),e=(0,l.$)(c);this.updateValue(e)};updateValue(a,c=!0){this.value!==a&&((0,p.Fg)(this.storageKey,a),this.value=a,c&&this.onChangeIfDefined())}clearValue(a=!1){this.updateValue(null,a)}resetValue(a=!1){this.updateValue(this.defaultValue,a)}}},3976:(b,m,t)=>{t.d(m,{$:()=>f});function f(i){return i===""?null:JSON.parse(i)}},4214:(b,m,t)=>{t.d(m,{$z:()=>f,zr:()=>i});function f(d){return d.replace(/\D/g,"")}function i(d){return d.replace(/[^\d.,-]/g,"")}function l(d){return d.replace(/\s/g,"")}function p(d){return d.charAt(0).toUpperCase()+d.slice(1)}function E(d){return d.replace(/\s+/g," ").trim()}},5406:(b,m,t)=>{t.d(m,{$F:()=>d,Fc:()=>f,bn:()=>i,z2:()=>o});function f(v,s="common",I=!1){const{pathname:C}=window.location;return i(C,v,s,I)}function i(v,s,I,C=!1){const F=v.split("/");s=s<0?F.length+s:s;const x=F[s]||I;return C&&console.log(`Pathname element: ${x}`),x}function l(v,s="common",I=!1){const C=f(v,"",I);return p(C,s,I)}function p(v,s,I){if(!v)return s;const C=v.split("-").at(-1);return I&&console.log(`Pathname element ending: ${C}`),C}function E(v,s,I="common",C=!1){const F=i(v,s,"",C);return p(F,I,C)}function d(v){return new URLSearchParams(window.location.search).get(v)}function a(v){return v.split("?")[0]}function c(v){return window.location.pathname.includes(v)}function e(v){return v.some(s=>c(s))}function o(...v){return window.location.pathname.split("/").some(I=>v.includes(I))}function r(v){try{const s=new URL(window.location.href);Object.entries(v).forEach(([I,C])=>{s.searchParams.set(I,C)}),window.location.href=s.toString()}catch(s){console.error("Failed to redirect:",s)}}function n(v,s=[]){const I={pathname:window.location.pathname};s.forEach(S=>{I[S]=d(S)});let C=!1;async function F(){if(C)return;const S={pathname:window.location.pathname};if(s.forEach(L=>{S[L]=d(L)}),Object.keys(I).some(L=>I[L]!==S[L])){Object.assign(I,S),C=!0;try{await v()}catch(L){console.error("Error in URL observer callback:",L)}finally{C=!1}}}function x(){F().catch(S=>{console.error("Error in URL change handler:",S)})}let A=window.location.href;setInterval(()=>{window.location.href!==A&&(A=window.location.href,x())},200),window.addEventListener("popstate",x)}function h(v=[]){n(()=>window.location.reload(),v)}},2524:(b,m,t)=>{t.d(m,{d5:()=>l,vX:()=>a,ft:()=>p});var f=t(157);class i{constructor(o=Date.now(),r=[]){this.lastCheckDate=o,this.reviewsData=r}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(o){const{lastCheckDate:r,reviewsData:n}=o;return new i(r,n)}}const l={LAST_DOCTOR_UPDATE:"last-doctor-update"};function p(e,o){const r=E(e),n=(0,f.vx)(r),h=d(n);h.reviewsData=o,h.updateLastCheckDate(),(0,f.Fg)(r,h),(0,f.Fg)(l.LAST_DOCTOR_UPDATE,Date.now())}function E(e){return`doctor-${e}`}function d(e){return e?i.fromObject(e):new i}function a(e){return c(e)?.reviewsData??null}function c(e){const o=E(e);return(0,f.vx)(o)}},1753:(b,m,t)=>{t.a(b,async(f,i)=>{try{var l=t(573),p=t(7858),E=t(4231),d=t(5406),a=t(5072);const e=(0,l.Fi)(".appointments_page");e?(0,E.$)(e):(0,d.z2)("otzivi")?await(0,a.N)():(0,d.z2)("vrach")&&(0,p.O)(),i()}catch(c){i(c)}},1)},7653:(b,m,t)=>{t.d(m,{NI:()=>o,z1:()=>h,Np:()=>C,pR:()=>v,sp:()=>x,rd:()=>F});var f=t(573);const i={DOCTOR_CARD_NAME:'.b-doctor-intro__title-first-line [itemprop="name"]',DOCTOR_INTRO_LEFT:".b-doctor-intro__left-side",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]'};var l=t(8586),p=t(5406),E=t(4214),d=t(7273),a=t(8738);const c="additionalLinksAppended",e=["\u042F\u043D\u0434\u0435\u043A\u0441","\u041D\u0430\u041F\u043E\u043F\u0440\u0430\u0432\u043A\u0443","DocDoc","\u0414\u043E\u043A\u0442\u0443"];function o(A,S){S.classList.contains(c)||(e.forEach(L=>{r(A,S,L)}),S.classList.add(c))}function r(A,S,L){const U=n(A,L),$=(0,a.d)({},L,U),K=document.createElement("br");S.append(K,$)}function n(A,S){const L=`${A} ${S}`;return`https://www.google.com/search?q=${encodeURIComponent(L)}&btnI`}function h(){const A=(0,f.Fi)(i.DOCTOR_CARD_NAME,document,!0);if(!A)return;const S=A.innerText.trim(),L=(0,d.S)();L.style.textAlign="center",(0,f.Fi)(i.DOCTOR_INTRO_LEFT).append(L),o(S,L)}function v(A,S,L=!1){const U=(0,d.S)(l.r.REVIEWS_INFO);L&&(U.style.justifyContent="center"),U.classList.add("v-application");const $=(0,d.S)(l.r.REVIEWS_INFO_BLOCK);return $.style.height=L?"10px":"23px",$.append(U),A.slice(L?1:0).forEach(K=>{const{category:D,title:g,count:O,bgClassSuffix:u}=K,R=`${S}?rates_category=${D}`,w=L?O:`${g} ${O}`,k=(0,a.d)(l.r.REVIEW_INFO,w,R);k.classList=s(u),U.append(k),L&&I(k,g)}),$}function s(A){return`text-caption text--text px-2 py-1 rounded-sm bg-${A}`}function I(A,S){let L=null;A.addEventListener("mouseenter",()=>{L=(0,d.S)(l.r.REVIEW_INFO_TOOLTIP,S),document.body.appendChild(L);const U=A.getBoundingClientRect();L.style.left=`${(U.left+U.right)/2-L.offsetWidth/2+window.scrollX+2}px`,L.style.top=`${U.top+window.scrollY-L.offsetHeight-4}px`}),A.addEventListener("mouseleave",()=>{L&&(L.remove(),L=null)})}function C(A){const S=(0,f.Fi)(i.NAME_SPAN_HOLDER,document,!0);if(!S)return;const L=(0,f.Fi)(i.NAME_SPAN,S,!0);L&&L.append(A)}function F(){const A=(0,p.Fc)(3,"unknown");return(0,E.$z)(A)}function x(A){const S=(0,p.bn)(A,5,"");return(0,E.$z)(S)}},8586:(b,m,t)=>{t.d(m,{r:()=>i});const f={INPUT:{border:"1px solid #c7d3d9",borderRadius:"10px",padding:"7px 14px",marginLeft:"6px"}},i={FILTERS_CONTAINER:{display:"flex",gridGap:"15px",flexFlow:"wrap"},CONTROL:{display:"flex",alignItems:"center"},TEXT_INPUT:{...f.INPUT,width:"195px"},NUMBER_INPUT:{...f.INPUT,width:"70px"},CHECKBOX_INPUT:{...f.INPUT,width:"20px",height:"20px"},REVIEWS_INFO:{gridGap:"6px"},REVIEWS_INFO_BLOCK:{marginTop:"5px"},REVIEW_INFO:{textDecoration:"none",flexShrink:0},REVIEW_INFO_TOOLTIP:{position:"absolute",backgroundColor:"#333",color:"#fff",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",zIndex:"1000",pointerEvents:"none",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},4231:(b,m,t)=>{t.d(m,{$:()=>D});var f=t(5406),i=t(573),l=t(5539),p=t(3829),E=t(7653),d=t(5213),a=t(5884),c=t(7877);const e={LIST_HEADER:".h2_rating",DOCTOR_FILTERS:".vue-the-doctors-filters > .b-container",DOCTOR_CARD:".b-doctor-card",DOCTOR_CARD_NAME:".b-doctor-card__name-surname",PROFILE_CARD:".b-profile-card",REVIEWS_LINK:":scope > a",EXPERIENCE_WRAP:".b-doctor-card__experience .text-subtitle-1",SPEC_WRAP:".b-doctor-card__spec",CLINIC_CONTAINER:"div.b-doctor-card__lpu-select",CLINIC_WRAP:".b-select__trigger-main-text"};var o=t(4521),r=t(2524),n=t(4921),h=t(8586),v=t(6754);const s=window.GM_addValueChangeListener,I=(0,f.Fc)(2),{createGlobalFilter:C,createSectionFilter:F}=(0,o.z)(u,I),x=F("spec-filter"),A=F("clinic-filter"),S=F("min-reviews-filter",10),L=F("min-experience-filter",5,P),U=F("max-experience-filter",40),$=C("filter-enabled",!0),K={doctorCardsCache:new WeakMap};function D(N){P(),g();const B=(0,i.Fi)(e.DOCTOR_FILTERS);(0,d.b)(B,O),u(),s(r.d5.LAST_DOCTOR_UPDATE,u),new MutationObserver((0,n.sg)(u)).observe(N,{childList:!0})}function g(){const N=(0,i.Fi)(e.LIST_HEADER);N&&N.remove()}function O(N,B){(0,v.ZM)(N,h.r.FILTERS_CONTAINER),N.style.marginTop="6px";const z=(0,a.Nm)("\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F:",x,h.r.CONTROL,h.r.TEXT_INPUT),V=(0,a.Nm)("\u041A\u043B\u0438\u043D\u0438\u043A\u0430:",A,h.r.CONTROL,h.r.TEXT_INPUT),T=(0,c.X0)(S,h.r.CONTROL,h.r.NUMBER_INPUT),_=(0,a.nW)("\u041C\u0438\u043D. \u043E\u043F\u044B\u0442: ",L,"1","0","100",h.r.CONTROL,h.r.NUMBER_INPUT),y=(0,a.nW)("\u041C\u0430\u043A\u0441. \u043E\u043F\u044B\u0442: ",U,"1","0","100",h.r.CONTROL,h.r.NUMBER_INPUT),M=(0,c.pW)($,h.r.CONTROL,h.r.CHECKBOX_INPUT);N.append(z,V,T,_,y,M),B.append(N)}function u(){(0,i.fI)(e.DOCTOR_CARD).forEach(R)}function R(N){if(!$.value){(0,l.kl)(N);return}let B=K.doctorCardsCache.get(N);if(!B){const V=(0,i.Fi)(e.PROFILE_CARD,N),T=(0,i.Fi)(e.REVIEWS_LINK,V),_=(0,i.Fi)(e.EXPERIENCE_WRAP,N);if(!T||!_){(0,l.Bt)(N);return}const M=(0,i.Fi)(e.SPEC_WRAP,N,!0).innerText.trim(),W=(0,i.Fi)(e.CLINIC_CONTAINER,N,!0),H=(0,i.Fi)(e.CLINIC_WRAP,W,!0).innerText.trim(),X=(0,i.YA)(T,!0),Q=(0,i.YA)(_,!0),J=w(T);T.href=J,(0,E.NI)(k(N),V),B={specInfo:M,clinicName:H,reviewsLinkNumber:X,experienceNumber:Q,reviewsLink:T,reviewInfoAppended:!1},K.doctorCardsCache.set(N,B)}G(B);const z=(0,p.Ay)(B.specInfo,x)||(0,p.Ay)(B.clinicName,A)||(0,p.JE)(B.reviewsLinkNumber,S)||(0,p.JE)(B.experienceNumber,L)||(0,p.iG)(B.experienceNumber,U);(0,l.UC)(N,z)}function w(N){return N.href.replace(/\/#otzivi$/,"/otzivi/")}function k(N){return(0,i.Fi)(e.DOCTOR_CARD_NAME,N,!0).innerText}function G(N){if(N.reviewInfoAppended)return;const{reviewsLink:B}=N,z=B.href,V=(0,r.vX)((0,E.sp)(z));if(!V)return;const T=(0,E.pR)(V,z,!0);(0,l.WH)(B,T),N.reviewInfoAppended=!0}function P(){if(!L.value)return;const N=new URL(window.location.href);+N.searchParams.get("experience")!==L.value&&(N.searchParams.set("experience",L.value),window.location.href=N.toString())}},7858:(b,m,t)=>{t.d(m,{O:()=>a});var f=t(573),i=t(7653);const l={REVIEWS_LINK:".b-doctor-intro__rates-wrapper > a",DOCTOR_DETAILS:".b-doctor-details__toc",REVIEWS_FILTER:".reviews-filter:not(.b-reviews-page__filter)",NAME_SPAN_HOLDER:".b-doctor-intro__title-first-line",NAME_SPAN:'[itemprop="name"]',REVIEWS_FILTER_SPAN:":scope > span",DOCTOR_CONTACTS:"#doctor-contacts"};var p=t(2524),E=t(7273),d=t(8738);function a(){(0,i.z1)(),e();const r=c();o(r);const n=(0,p.vX)((0,i.rd)());if(!n)return;const h=(0,i.pR)(n,r);(0,i.Np)(h)}function c(){const{location:r}=window;return`${r.origin}${r.pathname}otzivi/`}function e(){if(!(0,f.Fi)(l.DOCTOR_CONTACTS))return;const n=[...(0,f.fI)(l.DOCTOR_DETAILS)].pop();if(!n)return;n.style.position="sticky",n.style.top="16px";const h=(0,E.S)({},"\u041C\u0435\u0441\u0442\u043E \u0440\u0430\u0431\u043E\u0442\u044B");h.classList.add("b-doctor-details__toc-title");const v=(0,d.d)({},null,"#doctor-contacts");v.classList.add("b-doctor-details__toc-item"),v.append(h),n.insertBefore(v,n.firstChild)}function o(r){const n=(0,f.Fi)(l.REVIEWS_LINK);n&&(n.href=r)}},5072:(b,m,t)=>{t.d(m,{N:()=>R});var f=t(7653);const i={CONTROLS_CONTAINER:".vue-review-filter",REVIEWS:".b-review-card",REVIEW_TEXT_WRAP:".b-review-card__comment",REVIEW_RATING_WRAP:".review-card-tooltips__stars > .ui-text",FILTER_CHIP:'[data-qa="reviews_filter_chip"]',FILTER_LIST:'[data-qa="reviews_filter_list"]',FILTER_LIST_ITEM:'[data-qa^="reviews_filter_list_item"]',FILTER_TITLE_WRAP:'[data-qa="reviews_filter_title"]',FILTER_COUNT_WRAP:'[data-qa="reviews_filter_amount"]',REVIEWS_CONTAINER:"#otzivi"};var l=t(573),p=t(4921),E=t(5406),d=t(2524),a=t(4521),c=t(5213),e=t(8586),o=t(7877),r=t(5539);function n(T,_){T.forEach(y=>h(_,y))}function h(T,_){if(!_)return;const y=new RegExp(`(${_})`,"gi"),M=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null);let W=M.nextNode();const j=[];for(;W;){const{textContent:H}=W;if(y.test(H)){const X=document.createDocumentFragment();let Q=0;H.replace(y,(J,re,q)=>{q>Q&&X.appendChild(document.createTextNode(H.slice(Q,q)));const Z=document.createElement("span");Z.className="highlightedSubstring",Z.style.backgroundColor="yellow",Z.textContent=J,X.appendChild(Z),Q=q+J.length}),Q<H.length&&X.appendChild(document.createTextNode(H.slice(Q))),j.push({node:W,fragment:X})}W=M.nextNode()}j.forEach(({node:H,fragment:X})=>{H.parentNode.replaceChild(X,H)})}function v(T){(0,l.fI)(".highlightedSubstring",T).forEach(y=>{const{parentNode:M}=y;y.replaceWith(y.textContent),M.normalize()})}var s=t(8355);function I(T,_){const y=(0,s.fO)(T.value);n(y,_)}function C(T,_){const y=getIncludedSearchStrings(T.value);_.forEach(M=>highlightSubstrings(y,M))}var F=t(3829),x=t(7273);function A(T={}){return(0,x.S)(T,"|")}function S(T={},_=75,y="customFiltersContainer"){const M=document.getElementById(y);if(!M)return console.log(`Element with id="${y}" not found.`),null;const W=createButton(T,`${arrowUpIcon}\u041A \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u043C`);return W.addEventListener("mouseenter",()=>{W.style.filter="brightness(0.9)"}),W.addEventListener("mouseleave",()=>{W.style.filter="brightness(1)"}),W.addEventListener("click",()=>{const j=M.getBoundingClientRect();window.scrollTo({top:j.top+window.scrollY-_})}),new IntersectionObserver(([j])=>{W.style.display=j.isIntersecting?"none":"flex"},{threshold:.5}).observe(M),W}function L(T,_={}){const y=S(_);y&&T.appendChild(y)}var U=t(6754);const{createGlobalFilter:$}=(0,a.z)(k),K=$("reviews-text-filter"),D=$("reviews-min-rating-filter"),g=$("reviews-max-rating-filter"),O=$("reviews-filter-enabled",!0),u={reviewCardsCache:new Map};async function R(){(0,f.z1)();const T=await(0,p.xk)(document,i.CONTROLS_CONTAINER);(0,c.b)(T,w),k();const _=await N();(0,d.ft)((0,f.rd)(),_);const y=(0,f.pR)(_,z());(0,f.Np)(y),(0,E.$F)("rates_category")&&V()}function w(T,_){(0,U.ZM)(T,e.r.FILTERS_CONTAINER),T.style.marginTop="12px";const y=(0,o.E9)(K,e.r.CONTROL,e.r.TEXT_INPUT),M=(0,o.HX)(D,e.r.CONTROL,e.r.NUMBER_INPUT,1,1),W=(0,o.FR)(g,e.r.CONTROL,e.r.NUMBER_INPUT,1,1),j=A(e.r.CONTROL),H=(0,o.pW)(O,e.r.CONTROL,e.r.CHECKBOX_INPUT);T.append(y,M,W,j,H),_.append(T)}function k(){(0,l.fI)(i.REVIEWS).forEach(G)}function G(T){if(!O.value){(0,r.kl)(T);return}v(T);let _=u.reviewCardsCache.get(T);if(!_){const M=(0,l.Fi)(i.REVIEW_TEXT_WRAP,T),W=(0,l.Fi)(i.REVIEW_RATING_WRAP,T);if(!M){(0,r.Bt)(T);return}_={reviewTextWrap:M,reviewText:M.innerText,rating:W&&(0,l.YA)(W)},u.reviewCardsCache.set(T,_)}K.value&&I(K,_.reviewTextWrap);const y=(0,F.Ay)(_.reviewText,K)||P(_.rating);(0,r.UC)(T,y)}function P(T){return T?(0,F.JE)(T,D)||(0,F.iG)(T,g):!1}async function N(){const T=(0,l.Fi)(i.FILTER_CHIP);T.click();const _=await(0,p.xk)(document,i.FILTER_LIST),y=[...(0,l.fI)(i.FILTER_LIST_ITEM,_)].map(M=>{const W=M.getAttribute("data-qa");if(!W)return null;const j=W.replace("reviews_filter_list_item_",""),H=(0,l.Fi)(i.FILTER_TITLE_WRAP,M).textContent.trim(),X=(0,l.Fi)(i.FILTER_COUNT_WRAP,M),Q=(0,l.YA)(X,!0),J=B(X.classList);return{category:j,title:H,count:Q,bgClassSuffix:J}});return T.click(),y}function B(T){const _=T.value.match(/bg-(\w+)/);return _?_[1]:null}function z(){const{location:T}=window;return`${T.origin}${T.pathname}`}function V(){(0,l.Fi)(i.REVIEWS_CONTAINER).scrollIntoView({behavior:"smooth"})}}},ee={};function Y(b){var m=ee[b];if(m!==void 0)return m.exports;var t=ee[b]={exports:{}};return te[b](t,t.exports,Y),t.exports}(()=>{var b=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",f=l=>{l&&l.d<1&&(l.d=1,l.forEach(p=>p.r--),l.forEach(p=>p.r--?p.r++:p()))},i=l=>l.map(p=>{if(p!==null&&typeof p=="object"){if(p[b])return p;if(p.then){var E=[];E.d=0,p.then(c=>{d[m]=c,f(E)},c=>{d[t]=c,f(E)});var d={};return d[b]=c=>c(E),d}}var a={};return a[b]=c=>{},a[m]=p,a});Y.a=(l,p,E)=>{var d;E&&((d=[]).d=-1);var a=new Set,c=l.exports,e,o,r,n=new Promise((h,v)=>{r=v,o=h});n[m]=c,n[b]=h=>(d&&h(d),a.forEach(h),n.catch(v=>{})),l.exports=n,p(h=>{e=i(h);var v,s=()=>e.map(C=>{if(C[t])throw C[t];return C[m]}),I=new Promise(C=>{v=()=>C(s),v.r=0;var F=x=>x!==d&&!a.has(x)&&(a.add(x),x&&!x.d&&(v.r++,x.push(v)));e.map(x=>x[b](F))});return v.r?I:s()},h=>(h?r(n[t]=h):o(c),f(d))),d&&d.d<0&&(d.d=0)}})(),Y.d=(b,m)=>{for(var t in m)Y.o(m,t)&&!Y.o(b,t)&&Object.defineProperty(b,t,{enumerable:!0,get:m[t]})},Y.o=(b,m)=>Object.prototype.hasOwnProperty.call(b,m);var ne=Y(1753)})();})();
