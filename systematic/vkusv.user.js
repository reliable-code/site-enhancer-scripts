// ==UserScript==
// @name         Vkusv product cards filter
// @description  Hide product cards by filter
// @grant        GM_addStyle
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://vkusvill.ru/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77144488
// @icon         https://www.google.com/s2/favicons?sz=64&domain=vkusvill.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/vkusv.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Rt={573:(h,g,p)=>{p.d(g,{Fi:()=>C,YA:()=>I,fI:()=>A});var y=p(4214);function w(u,c=document){return!!c.querySelector(u)}function C(u,c=document,l=!1){const s=c.querySelector(u);return l&&!s&&console.log(`No element found for selector: ${u}`),s}function A(u,c=document,l=!1){const s=c.querySelectorAll(u);return l&&!s.length&&console.log(`No elements found for selector: ${u}`),s}function D(u,c=1){let l=u;for(let s=0;s<c;s++){if(!l.parentElement)return null;l=l.parentElement}return l}function f(u,c,l){return[...u.querySelectorAll(c)].find(s=>s.textContent.trim().includes(l))}function F(u,c,l=!1,s=!1,m=null){const E=C(c,u);return I(E,l,s,m)}function I(u,c=!1,l=!1,s=null){if(!u)return s===null?(console.log("No element found"),null):s;const m=u.innerText;return B(m,c,l)}function _(u,c,l=!1){const s=u[c];return I(s,l)}function L(u,c=!1,l=!1){const s=u.textContent;return B(s,c,l)}function B(u,c,l){c&&(u=(0,y.zr)(u)),l&&(u=u.replace(",","."));const s=Number(u);return Number.isNaN(s)?(console.log(`Invalid number: ${u}`),0):s}function v(u){return[...u.childNodes].find(c=>c.nodeType===Node.TEXT_NODE)}function V(u){const c=l=>l.nodeType===Node.TEXT_NODE&&l.textContent.trim()!==""?[l]:[...l.childNodes].flatMap(c);return c(u)}function T(u){return normalizeSpacing(u.textContent)}},4214:(h,g,p)=>{p.d(g,{zr:()=>w});function y(f){return f.replace(/\D/g,"")}function w(f){return f.replace(/[^\d.,-]/g,"")}function C(f){return f.replace(/\s/g,"")}function A(f){return f.charAt(0).toUpperCase()+f.slice(1)}function D(f){return f.replace(/\s+/g," ").trim()}},5406:(h,g,p)=>{p.d(g,{$F:()=>f,Fc:()=>y,rm:()=>I,z2:()=>B});function y(u,c="common",l=!1){const{pathname:s}=window.location;return w(s,u,c,l)}function w(u,c,l,s=!1){const m=u.split("/");c=c<0?m.length+c:c;const E=m[c]||l;return s&&console.log(`Pathname element: ${E}`),E}function C(u,c="common",l=!1){const s=y(u,"",l);return A(s,c,l)}function A(u,c,l){if(!u)return c;const s=u.split("-").at(-1);return l&&console.log(`Pathname element ending: ${s}`),s}function D(u,c,l="common",s=!1){const m=w(u,c,"",s);return A(m,l,s)}function f(u){return new URLSearchParams(window.location.search).get(u)}function F(u){return u.split("?")[0]}function I(u){return window.location.pathname.endsWith(u)}function _(u){return window.location.pathname.includes(u)}function L(u){return u.some(c=>_(c))}function B(...u){return window.location.pathname.split("/").some(l=>u.includes(l))}function v(u){try{const c=new URL(window.location.href);Object.entries(u).forEach(([l,s])=>{c.searchParams.set(l,s)}),window.location.href=c.toString()}catch(c){console.error("Failed to redirect:",c)}}function V(u,c=[]){const l=new AbortController;let s=!1;const m=O=>{const k=new URL(O),P={pathname:k.pathname};return c.forEach(Z=>{P[Z]=k.searchParams.get(Z)}),P};let E=m(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(s)return;const O=m(window.navigation.currentEntry.url);if(Object.keys(E).some(P=>E[P]!==O[P])){E=O,s=!0;try{await u(O)}catch(P){console.error("URL observer error:",P)}finally{s=!1}}},{signal:l.signal}),()=>l.abort()}function T(u=[]){V(()=>window.location.reload(),u)}},7061:(h,g,p)=>{p.a(h,async(y,w)=>{try{var C=p(5406),A=p(3414),D=p(9221),f=p(4616);(0,A.N)(),await F();async function F(){if((0,C.z2)("goods")&&(0,C.rm)(".html")){await(0,f.K)();return}(0,C.z2)("cart","goods","offers","populyarnoe","search")&&await(0,D.P)()}w()}catch(F){w(F)}},1)},3414:(h,g,p)=>{p.d(g,{N:()=>w});const y=`.us-control{color:#707070!important;&:hover{color:#1a1a1a!important}}
`;function w(){window.GM_addStyle(y)}},9221:(h,g,p)=>{p.d(g,{P:()=>ve});const y={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const w=["svg",y,[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}],["circle",{cx:"12",cy:"13",r:"3"}]]],C="data:audio/ogg;base64,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",A=new Audio(C);A.volume=.5,A.preload="auto",A.load();function D(){A.currentTime=0,A.play().catch(()=>{})}const f=`.custom-filters-button{padding:10px 16px!important;color:#fff!important;background-color:#179c49!important;border-radius:12px!important;&:hover{background-color:#179948!important}}.ProductCard__content{.ProductCard__notice{order:1!important;display:flex!important;flex-grow:1!important;align-items:flex-end!important;margin:0 0 6px!important}.ProductCard__price{order:2!important;flex-grow:1!important;align-items:flex-end!important;&:has(+.ProductCard__notice){flex-grow:0!important}.Price{&:not(.Price--label){padding:3px 0!important}&._last{line-height:1.25em!important;&:before{border:none!important}}}}.ProductCard__cartFooter{order:3!important}.ProductCards__item.not-in-snapshot &{background-color:#e6fffa!important;border-radius:0 0 12px 12px!important}}.VV22_Modal_Forgot{.modal-dialog{max-width:1220px!important;max-height:95vh!important;margin:2.5vh auto!important;.modal-content{max-height:95vh!important;.Modal__inner{max-height:none!important;.lk-modal-alert__title{margin-bottom:10px!important;padding-right:0!important}.ProductCards__item{width:25%!important}}}}}.HProductCard__Avail{font-size:13px!important}#js-Delivery__Order-green-state-not-empty{scroll-margin-top:130px}
`;class F{constructor(e,n){this.value=e,this.onChange=n}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}function I(t){const{target:e}=t,{type:n}=e;switch(n){case"text":return`"${e.value}"`;case"number":return e.value;case"select-one":return e.value;case"date":return`"${e.value}"`;case"checkbox":return e.checked;default:return console.log(`Unknown input type: ${n}`),null}}function _(t){return t===""?null:JSON.parse(t)}const L=window.GM_setValue,B=window.GM.setValue,v=window.GM_getValue;class V extends F{constructor(e,n=null,r=null){super(v(e,n),r),this.storageKey=e,this.defaultValue=n}static create(e,n=null,r=null){return new V(e,n,r)}static createWithCompositeKey(e,n,r=null,o=null){const i=`${e}-${n}`;return new V(i,r,o)}updateValueFromEvent=e=>{const n=I(e),r=_(n);this.updateValue(r)};updateValue(e,n=!0){this.value!==e&&(L(this.storageKey,e),this.value=e,n&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}function T(t,e=null){return{createGlobalFilter(n,r=null,o=t){return V.create(n,r,o)},createSectionFilter(n,r=null,o=t){if(!e)throw new Error("sectionId must be provided to use createSectionFilter.");return V.createWithCompositeKey(e,n,r,o)}}}function u(t){let r=2166136261;for(let o=0;o<t.length;o+=1){const i=t.charCodeAt(o);r^=i,r=Math.imul(r,16777619)}return r>>>0}function c(t){return u(t).toString(16).padStart(8,"0")}function l(t,e="common"){return t?c(t):e}var s=p(573);const m={INPUT:{border:"1px solid #d0d0d0",borderRadius:"12px",padding:"10px 16px",fontSize:"16px"},CONTROL:{display:"flex",gap:"8px",alignItems:"center",fontSize:"16px",fontWeight:"400"}},E={FILTERS_CONTAINER:{display:"flex",flexWrap:"wrap",width:"100%",gap:"12px 18px"},CONTROL:m.CONTROL,FILTERS_INFO:{...m.CONTROL,width:"100%",justifyContent:"flex-end",marginRight:"6px",fontSize:"14px",color:"#9ca3af"},TEXT_INPUT_CONTROL:{...m.CONTROL,flexGrow:1,minWidth:"180px"},TEXT_INPUT:{...m.INPUT,flexGrow:1},NUMBER_INPUT:{...m.INPUT,width:"90px"},CHECKBOX_INPUT:{width:"21px",height:"21px",cursor:"pointer",accentColor:"#179C49"}},O={DISLIKE_CONTROL:{marginLeft:"auto",gap:"3px"},DISLIKE_BUTTON_ICON_SM:{height:"0.9em",marginBottom:"1px",marginRight:"2px"},DISLIKE_BUTTON_ICON_MD:{marginBottom:"4px"},REMOVE_DISLIKE_BUTTON_ICON_SM:{height:"0.9em",marginBottom:"1px"},REMOVE_DISLIKE_BUTTON_ICON_MD:{marginBottom:"5px"}},k={PRODUCT_CARD:".ProductCards__item",PRODUCT_CARD_DATA:".ProductCard",PRODUCT_NAME:".ProductCard__link",PRODUCT_RATING_WRAP:".ProductCard__ratingText",PRODUCT_PRICE_CONTAINER:".ProductCard__price",PRODUCT_PRICE_WRAP:".js-datalayer-catalog-list-price",SHOW_MORE_BUTTON:".js-prods-modal-load-more"};function P(t,e,n=null){const r=t.querySelector(e);return r?Promise.resolve(r):new Promise(o=>{const i=new MutationObserver(S);i.observe(t,{childList:!0,subtree:!0});let d;n&&(d=setTimeout(()=>{i.disconnect(),console.log(`No element found for selector: ${e}`),o(null)},n));function S(){const b=t.querySelector(e);b&&(d&&clearTimeout(d),i.disconnect(),o(b))}})}function Z(t,e){return t.querySelector(e)?new Promise(r=>{const o=new MutationObserver(i);o.observe(t,{childList:!0,subtree:!0});function i(){t.querySelector(e)||(o.disconnect(),r())}}):Promise.resolve()}function He(t,e=400){return new Promise(n=>{let r;const o=new MutationObserver(()=>{clearTimeout(r),i()});function i(){r=setTimeout(()=>{o.disconnect(),n()},e)}i(),o.observe(t,{childList:!0,subtree:!0})})}function it(t,e=250){let n;return function(...r){const o=this;clearTimeout(n),n=setTimeout(()=>t.apply(o,r),e)}}async function Ye(t){document.visibilityState==="visible"?await t():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await t()},{once:!0})}function qe(t,e){const n=new IntersectionObserver(r=>{r.forEach(o=>{o.isIntersecting&&(e(),vt(t))})});t.intersectionObserver=n,n.observe(t)}function vt(t){t.intersectionObserver&&(t.intersectionObserver.disconnect(),t.intersectionObserver=null)}function ut(t){t&&(t.disconnect(),t=null)}class j{constructor(e=Date.now(),n=null,r=null,o={}){this.lastCheckDate=e,this.lowestPrice=n,this.highestPrice=r,this.priceHistory=o}get lowestPriceValue(){return this.lowestPrice?this.lowestPrice.value:0}get highestPriceValue(){return this.highestPrice?this.highestPrice.value:0}updateLastCheckDate=()=>{this.lastCheckDate=Date.now()};static fromObject(e){const{lastCheckDate:n,lowestPrice:r,highestPrice:o,priceHistory:i}=e;return new j(n,r,o,i)}}class H extends j{constructor(e=Date.now(),n=null,r=null,o={},i=null){super(e,n,r,o),this.rating=i}static fromObject(e){const{lastCheckDate:n,lowestPrice:r,highestPrice:o,priceHistory:i,rating:d}=e;return new H(n,r,o,i,d)}}const at=window.GM_listValues;function Ze(t,e,n=!1){getStorageValue("dbVersion")!==e&&(t(),!n&&setStorageValue("dbVersion",e))}function je(t,e=!0){const n=at();ct(n,t,e)}function Tt(t,e,n=!0){const o=at().filter(t);ct(o,e,n)}function ct(t,e,n){let r=0;t.forEach(o=>{const i=getStorageValue(o);n&&console.log(o,i),e(o,i),r+=1}),n&&console.log(`Total entries processed: ${r}`)}function ze(t,e=!1){Tt(t,r=>{e||window.GM_deleteValue(r)})}const Y={LAST_RATE_UPDATE:"last-rate-update",REVIEWS_LAST_PRODUCT_ARTICLE:"reviews-last-product-article"};function kt(t,e,n=!1){const r=st(t),o=v(r),i=xt(o);n&&i.rating===1||(i.rating=e,i.updateLastCheckDate(),L(r,i),L(Y.LAST_RATE_UPDATE,Date.now()))}function st(t){return`product-${t}`}function xt(t){return t?H.fromObject(t):new H}function Nt(t){const e=st(t);return v(e)}function lt(t){return Nt(t)?.rating??null}function Je(t){return setStorageValue(Y.REVIEWS_LAST_PRODUCT_ARTICLE,t)}function $e(){return getStorageValue(Y.REVIEWS_LAST_PRODUCT_ARTICLE)}function tn(){const t=o=>o.startsWith("product-"),e=[],n=(o,i)=>{new Date(i.lastCheckDate)<getDateMonthsAgo(9)&&e.push(i.lastCheckDate)};processEntriesByKeyFilter(t,n,!1),[...e].sort((o,i)=>new Date(o)-new Date(i)).forEach(o=>{console.log(new Date(o).toLocaleDateString())})}function z(t,e){Object.assign(t.style,e)}function en(t,e="custom-global-style"){let n=document.getElementById(e);n||(n=document.createElement("style"),n.id=e,n.type="text/css",document.head.appendChild(n)),n.textContent=t}function nn(t){return Object.entries(t).map(([e,n])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${n};`).join(" ")}function rn(t){return t?t.split(";").filter(e=>e.trim()!=="").reduce((e,n)=>{const[r,o]=n.split(":").map(d=>d.trim()),i=r.replace(/-([a-z])/g,(d,S)=>S.toUpperCase());return e[i]=o,e},{}):{}}function J(t,e,n=null){if(typeof e!="object"||e===null)throw new TypeError("styles should be an object");const r=document.createElement(t);return z(r,e),n&&(r.innerHTML=n),r}function on(t={},e=null){return createElement("span",t,e)}function $(t={},e=null){return J("div",t,e)}function Ot(t,e,n=!1,r="customFiltersContainer"){let o=t.querySelector(`#${r}`);if(o){if(!n)return;o.replaceChildren()}else o=$(),o.id=r;e(o,t)}function G(t,e={},n=null){const r=$(e,n);return r.append(t),r}function un(t,e=null,n={},r={}){const o=createActionLink(t,e,r);return G(o,n)}function an(t,e=null,n=null,r={},o={},i={}){const d=createActionLinkWithIcon(t,n,e,o,i);return G(d,r)}function Lt(t,e,n){const r=q(t,"text",e);return r.value=n,r}function Pt(t,e,n,r,o,i){const d=q(t,"number",e);return d.value=n,d.step=r,d.min=o,d.max=i,d}function cn(t,e,n){const r=q(t,"date",e);return r.value=n,r}function _t(t,e,n){const r=q(t,"checkbox",e);return r.checked=n,r}function q(t={},e=null,n=null){const r=J("input",t);return e&&(r.type=e),n&&(r.addEventListener("keyup",it(n,200)),r.addEventListener("change",it(n,100))),r}function sn(t,e,n){const r=createElement("select",t);return e&&r.addEventListener("change",e),r.value=n,r}function Bt(t,e,n={},r={}){const o=Lt(r,e.updateValueFromEvent,e.value);return G(o,n,t)}function dt(t,e,n,r,o,i={},d={}){const S=Pt(d,e.updateValueFromEvent,e.value,n,r,o);return G(S,i,t)}function ln(t,e,n={},r={}){const o=createSelect(r,e.updateValueFromEvent,e.value);return createControl(o,n,t)}function dn(t,e,n={},r={}){const o=createDateInput(r,e.updateValueFromEvent,e.value);return createControl(o,n,t)}function pt(t,e,n={},r={}){const o=_t(r,e.updateValueFromEvent,e.value);return G(o,n,t)}function Mt(t,e={},n={}){return Bt("\u041F\u043E\u0438\u0441\u043A: ",t,e,n)}function Ut(t,e={},n={},r=.1,o=3){return dt("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,r,o,5,e,n)}function pn(t,e={},n={},r=.1,o=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",t,r,o,5,e,n)}function fn(t,e={},n={}){return ft("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function An(t,e={},n={}){return ft("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",t,e,n)}function ft(t,e,n={},r={}){return createNumberFilterControl(t,e,"1","1","999999",n,r)}function mn(t,e={},n={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",t,e,n)}function gn(t,e={},n={}){return Qt("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",t,e,n)}function Qt(t,e,n={},r={}){return createNumberFilterControl(t,e,"5","0","100",n,r)}function hn(t,e={},n={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",t,"5","0","100",e,n)}function At(t,e,n={},r={},o="250"){return dt(t,e,o,"0","1000000",n,r)}function Cn(t,e={},n={},r="25"){return At("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",t,e,n,r)}function Gt(t,e={},n={},r="25"){return At("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",t,e,n,r)}function En(t,e={},n={}){return Wt("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",t,e,n)}function Wt(t,e,n={},r={}){return createNumberFilterControl(t,e,"1","0","99999",n,r)}function Sn(t,e={},n={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",t,"1","2","8",e,n)}function In(t,e={},n={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",t,1,1,10,e,n)}function yn(t,e={},n={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",t,e,n)}function Fn(t,e={},n={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",t,e,n)}function Vn(t,e={},n={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",t,e,n)}function bn(t,e={},n={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",t,e,n)}function wn(t,e={},n={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",t,e,n)}function Kt(t,e={},n={}){return pt("\u0412\u043A\u043B: ",t,e,n)}function Dn(t,e,n={}){const r=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],o={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},i=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),d=[],S=()=>e?parseFloat(e.value)||0:t.value,b=()=>{const R=S();d.forEach(({button:x,value:Q})=>{const X=Q<=R?o.active:o.inactive;Object.assign(x.style,X)})};return r.forEach(({value:R,emoji:x,tooltip:Q})=>{const N=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...n},x);N.title=Q,N.type="button",N.addEventListener("click",X=>{X.preventDefault(),t.updateValue(R),e&&(e.value=R),b()}),N.addEventListener("mouseenter",()=>{R<=S()||(N.style.background=o.hover.background)}),N.addEventListener("mouseleave",()=>{b()}),d.push({button:N,value:R}),i.appendChild(N)}),b(),e&&(e.addEventListener("input",b),e.addEventListener("change",b)),i}var U=p(5406);const mt={selectors:{productList:".ProductCards > .js-datalayer-catalog-list",productListContainer:".Catalog__col",productListHeader:".FilterPanelInner"},getSectionName:()=>(0,U.Fc)(-2)},Xt=[{id:"cart",matches:()=>(0,U.z2)("cart"),params:{selectors:{productList:"#js-modal-cart-prods-scroll > .js-datalayer-catalog-list",productListContainer:".Modal__inner",productListHeader:".lk-modal-alert__title"},filtersContainerStyles:{marginTop:"20px"},unwantedSelectors:[".js-delivery__form--vv-recoms-slider",".Delivery__Order__OrderBody-Block:has(.VV23_OrderPagePackages)",".VV24_RepeatLastOrder"],isSnapshotFeatureEnabled:!0,scrollTargetSelector:"#js-Delivery__Order-green-state-not-empty",getSectionName:()=>(0,U.Fc)(-2)}},{id:"catalog",matches:()=>(0,U.z2)("goods","populyarnoe"),params:{...mt,filtersContainerStyles:{marginTop:"12px"}}},{id:"offers",matches:()=>(0,U.z2)("offers"),params:{...mt,filtersContainerStyles:{margin:"22px 0 6px"}}},{id:"search",matches:()=>(0,U.z2)("search"),params:{selectors:{productList:".ProductCards > .js-datalayer-catalog-list",productListContainer:"#search-result-general-container",productListHeader:'[class*="_SearchPageHeader__Menu"]'},filtersContainerStyles:{marginTop:"12px"},getSectionName:()=>(0,U.$F)("q")}}];function Ht(){const t=Xt.find(e=>e.matches());if(!t)throw new Error(`Unknown context for URL: ${window.location.pathname}`);return t.params}function Rn(t,e){t.parentNode.insertBefore(e,t.nextSibling)}function W(t){t.style.display="none"}function vn(t,e=1){const n=document.querySelector(t);n&&Yt(n,e)}function Yt(t,e=1){const n=getElementAncestor(t,e);n&&W(n)}function Tn(t,e,n){const r=findElementByText(t,e,n);r&&W(r)}function kn(t){gt(t),W(t)}function qt(t){t.intersectionObserver||runOnceOnIntersection(t,()=>W(t))}function tt(t){t.style.display=""}function xn(t){const e=Zt(t);t.style.display=e}function Nn(t,e){e?W(t):tt(t)}function On(t,e){e?qt(t):(clearIntersectionObserver(t),tt(t))}function Zt(t){return gt(t),t.dataset.defaultDisplay}function gt(t){if(t.dataset.defaultDisplay)return;const{display:e}=getComputedStyle(t);t.dataset.defaultDisplay=e}function jt(){return{show:[],hide:[]}}function zt(t,e,n){t?e.hide.push(n):e.show.push(n)}function Jt(t){t.show.forEach(tt),t.hide.forEach(W)}function Ln(t,e,n=.3){e?te(t,n):$t(t)}function $t(t){t.style.opacity=""}function te(t,e=.3){t.style.opacity=e}function Pn(t){t.style.order=""}function _n(t,e){t.style.order=e}function ee(t,e,n,r="inline-flex"){e.style.display=t?r:"none",n.style.display=t?"none":r}function Bn(t,e=.3){t.style.transition="opacity 0.3s",t.style.opacity=e,ht(t)}function Mn(t){t.style.opacity="",Ct(t)}function Un(t){t.style.animation="loading-pulse 2.5s ease-in-out infinite",ht(t)}function Qn(t){t.style.animation="",Ct(t)}function ht(t){t.style.pointerEvents="none",t.style.cursor="wait"}function Ct(t){t.style.pointerEvents="",t.style.cursor=""}function Gn(t,e){const n=getFirstElement(e);n&&ne(t,n)}function ne(t,e){const n=createLink();n.href=t,e.parentNode.append(n),n.append(e)}function Wn(t,e){const n=getFirstElement(e);n&&re(t,n)}function re(t,e,n={}){const r=createLink(n);r.href=t,r.append(...e.childNodes),e.append(r)}function Kn(){const t=getURLQueryParam("scrollTo");if(!t)return;const e=document.getElementById(t);e?e.scrollIntoView():console.log(`Element with ID "${t}" was not found.`)}function Xn(t,e,n=null){const r=`${e}-click-passed`,o=n?i=>findElementByText(i,t,n):i=>getFirstElement(t,i);return function(i){if(i.hasAttribute(r))return!1;const d=o(i);return d&&d.click(),i.setAttribute(r,""),!0}}function Hn(t,e,n="text/plain"){const r=new Blob([t],{type:n}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),requestAnimationFrame(()=>URL.revokeObjectURL(o))}function Yn(t){if(!t)return[];const n=Et(t).flat().filter(r=>r&&!r.isNegative&&r.term).map(r=>r.term);return[...new Set(n)]}function Et(t){return t?t.toLowerCase().split(",").map(oe).filter(Boolean):[]}function oe(t){const e=t.split("/").map(r=>r.trim()).filter(Boolean);if(e.length===0)return null;const n=e.map(ie).filter(Boolean);return n.length>0?n:null}function ie(t){const e=t.startsWith("!"),n=e?t.slice(1).trim():t;return n?{term:n,isNegative:e}:null}function qn(t,e){St(t,n=>n.style.display!=="none",e)}function Zn(t,e){St(t,n=>n.style.opacity==="",e)}function St(t,e,n){const r=[...t].filter(e).length,o=t.length;It(n,r,o)}function It(t,e,n){t.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${e} \u0438\u0437 ${n}`}function ue(t,e){return!ae(t,e)}function ae(t,e){if(!e||!e.value)return!0;const n=Et(e.value);return ce(t,n)}function ce(t,e){if(!e||!e.length)return!0;const n=(t||"").toLowerCase();return e.every(r=>se(n,r))}function se(t,e){return e.some(({term:n,isNegative:r})=>{const o=t.includes(n);return r?!o:o})}function le(t,e){return e.value!=null&&t<e.value}function de(t,e){return e.value!=null&&t>e.value}function jn(t,e){return e.value==null?!1:t<parseDateFromISO(e.value)}function zn(t,e){return e.value==null?!1:t>parseDateFromISO(e.value)}function Jn(t,e){return e.value&&t!==e.value}const pe=["svg",y,[["path",{d:"M17 14V2"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"}]]];const fe=["svg",y,[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]]];const yt=(t,e,n=[])=>{const r=document.createElementNS("http://www.w3.org/2000/svg",t);return Object.keys(e).forEach(o=>{r.setAttribute(o,String(e[o]))}),n.length&&n.forEach(o=>{const i=yt(...o);r.appendChild(i)}),r};var Ae=([t,e,n])=>yt(t,e,n);function $n(t={},e=null){return createElement("i",t,e)}function me(t,e={}){e.width||="1em",e.height||="1em";const n=Ae(t);return z(n,e),n}function ge(t={},e=null,n=null){const r=J("a",t,e);return n&&(r.href=n),r}function he(t,e=null,n={}){n.cursor||="pointer";const r=ge(n,e);return t&&r.addEventListener("click",t),r}function Ce(t,e,n=null,r={},o={}){r.display||="inline-flex",r.alignItems||="center",r.gap||="0.25em";const i=he(t,n,r);return i.prepend(me(e,o)),i}function et(t,e,n,r=null,o={},i={},d="us-control"){const S=x=>{x.stopPropagation(),x.preventDefault(),window.confirm(n)&&t()},b=r?`<span>${r}</span>`:null,R=Ce(S,e,b,o,i);return R.classList.add(d),R}function Ee(t,e,n={},r={}){return et(t,pe,"\u0412\u044B\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?",e?"\u0414\u0438\u0437\u043B\u0430\u0439\u043A":null,n,r)}function Se(t,e,n={},r={}){return et(t,fe,"\u0423\u0431\u0440\u0430\u0442\u044C \u043D\u0438\u0437\u043A\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433?",e?"\u0423\u0431\u0440\u0430\u0442\u044C \u0434\u0438\u0437\u043B\u0430\u0439\u043A":null,n,r)}function tr(t={},e=null,n=null){const r=createElement("button",t,e);return n&&r.addEventListener("click",n),r}function er(t){let e=0,n=0;t.forEach(o=>{e+=o.rating,n+=1});const r=n>0?e/n:0;return roundToPrecision(r)}function Ie(t){return function(e){const n=lt(e.productId);e.storedRating!==n&&(e.storedRating=n,e.rating=n??e.originalRating,e.ratingWrap&&t(e.ratingWrap,e.rating),Vt(n,e.dislikeControls))}}function ye(t,e,n,r={}){const{needLabel:o,onDislike:i,onRemoveDislike:d,styles:S={}}=r,b=Ee(()=>Fe(e,i),o,S.link,S.dislikeIcon),R=Se(()=>Ve(e,d),o,S.link,S.removeDislikeIcon);t.append(b,R);const x={dislikeButton:b,removeDislikeButton:R};return Vt(n,x),x}async function Fe(t,e){await Ft(t,1,e)}async function Ve(t,e){await Ft(t,null,e)}async function Ft(t,e,n){kt(t,e),n&&await n(e)}function Vt(t,e){const{dislikeButton:n,removeDislikeButton:r}=e;ee(t!==1,n,r)}const bt="products-snapshot";function nt(t){L(bt,we(t))}function nr(){nt([])}function be(){const t=rt();return t||(nt([]),rt())}function rt(){const t=v(bt);return t&&(t.idsSet=new Set(t.ids)),t}function we(t){return{ids:t,createdAt:Date.now()}}const De=window.GM_addValueChangeListener,Re=Ie(Dt),wt={NO_RATING_TEXTS:["\u043D\u043E\u0432\u0435\u043D\u044C\u043A\u0438\u0439","\u043E\u0446\u0435\u043D\u043A\u0443"],NEW_PRODUCT_RATING:5},a={isStylesAdded:!1,context:null,productList:null,productListObserver:null,isFiltersInitialized:!1,filters:{nameFilter:null,minRatingFilter:null,maxPriceFilter:null,notInSnapshotFilter:null,filterEnabled:null},productCardsInfo:null,productCardsCache:new WeakMap,productIds:[],productsSnapshot:null};async function ve(t){a.isStylesAdded||(window.GM_addStyle(f),a.isStylesAdded=!0),t&&We();try{a.context=Ht(),Te(a.context.unwantedSelectors),ke(a.context.scrollTargetSelector),xe(),await Oe()}catch(e){console.warn(e.message)}}function Te(t){if(!t?.length)return;const n=`
        ${t.join(`,
`)} {
            display: none !important;
        }
    `;window.GM_addStyle(n)}function ke(t){if(!t)return;const e=document.querySelector(t);e&&("scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),e.scrollIntoView())}function xe(){if(!a.isFiltersInitialized){const t=Ne(),{createSectionFilter:e}=T(K,t);a.filters.nameFilter=e("name-filter"),a.filters.minRatingFilter=e("min-rating-filter",4.6),a.filters.maxPriceFilter=e("max-price-filter",800),a.context.isSnapshotFeatureEnabled&&(a.filters.notInSnapshotFilter=e("not-in-snapshot-filter",!1)),a.filters.filterEnabled=e("filter-enabled",!0),a.isFiltersInitialized=!0}}function Ne(){return l(a.context.getSectionName())}async function Oe(){const{selectors:t}=a.context;a.productList=await P(document,t.productList);const e=a.productList.closest(t.productListContainer),n=(0,s.Fi)(t.productListHeader,e);n&&(Ot(n,Le),De(Y.LAST_RATE_UPDATE,()=>K(!0)),a.context.isSnapshotFeatureEnabled&&(a.productsSnapshot=be()),K(!1),a.productListObserver&&ut(a.productListObserver),a.productListObserver=new MutationObserver(()=>K(!1)),a.productListObserver.observe(a.productList,{childList:!0}))}function Le(t,e){z(t,{...E.FILTERS_CONTAINER,...a.context.filtersContainerStyles});const n=Mt(a.filters.nameFilter,E.TEXT_INPUT_CONTROL,E.TEXT_INPUT),r=Ut(a.filters.minRatingFilter,E.CONTROL,E.NUMBER_INPUT),o=Gt(a.filters.maxPriceFilter,E.CONTROL,E.NUMBER_INPUT);if(t.append(n,r,o),a.context.isSnapshotFeatureEnabled){const d=pt("\u0412\u043D\u0435 \u0441\u043D\u0438\u043C\u043A\u0430: ",a.filters.notInSnapshotFilter,E.CONTROL,E.CHECKBOX_INPUT);t.append(d)}const i=Kt(a.filters.filterEnabled,E.CONTROL,E.CHECKBOX_INPUT);if(t.append(i),a.context.isSnapshotFeatureEnabled){const d=Pe(E.CONTROL);t.append(d)}a.productCardsInfo=$(E.FILTERS_INFO),t.append(a.productCardsInfo),e.append(t)}function Pe(t={}){const e=_e();return G(e,t)}function _e(){return et(()=>{D(),nt(a.productIds),a.productsSnapshot=rt(),K(!1)},w,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u043D\u0438\u043C\u043E\u043A \u0442\u043E\u0432\u0430\u0440\u043E\u0432?","\u0421\u043D\u0438\u043C\u043E\u043A",{gap:"5px"},{},"custom-filters-button")}function K(t=!1){const e=(0,s.fI)(k.PRODUCT_CARD,a.productList),n=jt(),r=[];if(e.forEach(i=>{const d=Be(i,t);zt(d,n,i);const S=a.productCardsCache.get(i);S?.productId&&r.push(S.productId)}),Jt(n),It(a.productCardsInfo,n.show.length,e.length),a.productIds=r,t)return;(0,s.Fi)(k.SHOW_MORE_BUTTON,a.productList)?.click()}function Be(t,e){if(!a.filters.filterEnabled.value)return!1;let n=a.productCardsCache.get(t);if(n)e&&Re(n);else{const r=(0,s.Fi)(k.PRODUCT_CARD_DATA,t);if(!r)return!0;const o=(0,s.Fi)(k.PRODUCT_NAME,r),i=(0,s.Fi)(k.PRODUCT_RATING_WRAP,r),d=(0,s.Fi)(k.PRODUCT_PRICE_CONTAINER,r);if(!o||!i||!d)return!0;const S=(0,s.Fi)(k.PRODUCT_PRICE_WRAP,d);if(!S)return!0;const b=r.dataset.id,R=o.textContent.trim(),x=i?.textContent.trim(),Q=lt(b),N=Me(Q,i),X=(0,s.YA)(S),Ke=Qe(d,b,Q);n={productId:b,nameWrap:o,name:R,ratingWrap:i,originalRating:x,storedRating:Q,rating:N,price:X,dislikeControls:Ke},a.productCardsCache.set(t,n)}return Ge(n.nameWrap),a.context.isSnapshotFeatureEnabled&&(n.notInSnapshot=!a.productsSnapshot.idsSet.has(n.productId),t.classList.toggle("not-in-snapshot",n.notInSnapshot),a.filters.notInSnapshotFilter.value&&!n.notInSnapshot)?!0:ue(n.name,a.filters.nameFilter)||le(n.rating,a.filters.minRatingFilter)||de(n.price,a.filters.maxPriceFilter)}function Me(t,e){return t?(Dt(e,t),t):Ue(e.textContent)?wt.NEW_PRODUCT_RATING:(0,s.YA)(e,!0,!1,0)}function Dt(t,e){t.textContent=e.toString().padEnd(4)}function Ue(t){return wt.NO_RATING_TEXTS.some(e=>t.toLowerCase().includes(e))}function Qe(t,e,n){const r=()=>K(!0),o={needLabel:!1,onDislike:r,onRemoveDislike:r,styles:{link:O.DISLIKE_CONTROL,dislikeIcon:O.DISLIKE_BUTTON_ICON_MD,removeDislikeIcon:O.REMOVE_DISLIKE_BUTTON_ICON_MD}};return ye(t,e,n,o)}function Ge(t){t.style.maxHeight="4lh",t.style.webkitLineClamp=4}function We(){a.productList=null,a.isFiltersInitialized=!1,a.filters={nameFilter:null,minRatingFilter:null,maxPriceFilter:null,notInSnapshotFilter:null,filterEnabled:null},a.productCardsCache=new WeakMap,a.productIds=[],a.productsSnapshot=null,ut(a.productListObserver)}},4616:(h,g,p)=>{p.d(g,{K:()=>A});const y={SHOW_MORE_BUTTON:".js-vv-text-cut-showmore"};var w=p(573);const C={};async function A(F){F&&void 0,D()}function D(){(0,w.fI)(y.SHOW_MORE_BUTTON).forEach(I=>I.click())}function f(){}}},ot={};function M(h){var g=ot[h];if(g!==void 0)return g.exports;var p=ot[h]={exports:{}};return Rt[h](p,p.exports,M),p.exports}(()=>{var h=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",g=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",p=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",y=C=>{C&&C.d<1&&(C.d=1,C.forEach(A=>A.r--),C.forEach(A=>A.r--?A.r++:A()))},w=C=>C.map(A=>{if(A!==null&&typeof A=="object"){if(A[h])return A;if(A.then){var D=[];D.d=0,A.then(I=>{f[g]=I,y(D)},I=>{f[p]=I,y(D)});var f={};return f[h]=I=>I(D),f}}var F={};return F[h]=I=>{},F[g]=A,F});M.a=(C,A,D)=>{var f;D&&((f=[]).d=-1);var F=new Set,I=C.exports,_,L,B,v=new Promise((V,T)=>{B=T,L=V});v[g]=I,v[h]=V=>(f&&V(f),F.forEach(V),v.catch(T=>{})),C.exports=v,A(V=>{_=w(V);var T,u=()=>_.map(l=>{if(l[p])throw l[p];return l[g]}),c=new Promise(l=>{T=()=>l(u),T.r=0;var s=m=>m!==f&&!F.has(m)&&(F.add(m),m&&!m.d&&(T.r++,m.push(T)));_.map(m=>m[h](s))});return T.r?c:u()},V=>(V?B(v[p]=V):L(I),y(f))),f&&f.d<0&&(f.d=0)}})(),M.d=(h,g)=>{for(var p in g)M.o(g,p)&&!M.o(h,p)&&Object.defineProperty(h,p,{enumerable:!0,get:g[p]})},M.o=(h,g)=>Object.prototype.hasOwnProperty.call(h,g);var Xe=M(7061)})();})();
