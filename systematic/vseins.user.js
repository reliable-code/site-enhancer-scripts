// ==UserScript==
// @name         Vseins product cards filter
// @description  Hide product cards by filter
// @grant        GM_addValueChangeListener
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://www.vseinstrumenti.ru/tag-page/*
// @match        https://www.vseinstrumenti.ru/category/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.75749192
// @icon         https://www.google.com/s2/favicons?sz=64&domain=vseinstrumenti.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/vseins.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var $={5467:(y,d,n)=>{n.d(d,{E2:()=>h});var f=n(9928);function h(g,i={},e=null){const r=(0,f.Sw)(i,e);return r.append(g),r}function v(g,i=null,e={},r={}){const w=createActionLink(g,i,r);return h(w,e)}function s(g,i=null,e=null,r={},w={}){const S=createActionLinkWithIcon(g,e,i,w);return h(S,r)}},9928:(y,d,n)=>{n.d(d,{S:()=>g,Sw:()=>x,kU:()=>v,o5:()=>s});var f=n(4921),h=n(6754);function v(o,t,a){const l=i(o,"text",t);return l.value=a,l}function s(o,t,a,l,I,A){const T=i(o,"number",t);return T.value=a,T.step=l,T.min=I,T.max=A,T}function g(o,t,a){const l=i(o,"checkbox",t);return l.checked=a,l}function i(o={},t=null,a=null){const l=u("input",o);return t&&(l.type=t),a&&(l.addEventListener("keyup",(0,f.sg)(a,200)),l.addEventListener("change",(0,f.sg)(a,100))),l}function e(o={},t=null){return u("span",o,t)}function r(o={},t=null,a=null){const l=u("a",o,t);return a&&(l.href=a),l}function w(o,t=null,a={}){a.cursor||="pointer";const l=r(a,t);return o&&l.addEventListener("click",o),l}function S(o,t,a=null,l={},I={}){l.display||="inline-flex",l.alignItems||="center",l.gap||="0.25em";const A=w(o,a,l);return A.prepend(b(t,I)),A}function C(o={},t=null,a=null){const l=u("button",o,t);return a&&l.addEventListener("click",a),l}function x(o={},t=null){return u("div",o,t)}function N(o={}){return u("i",o)}function b(o,t={}){t.width||="1em",t.height||="1em",t.paddingBottom||="1px";const a=N(t);return a.setAttribute("data-lucide",o),a}function u(o,t,a=null){if(typeof t!="object"||t===null)throw new TypeError("styles should be an object");const l=document.createElement(o);return(0,h.ZM)(l,t),a&&(l.innerHTML=a),l}},573:(y,d,n)=>{n.d(d,{Fi:()=>v,ML:()=>S,fI:()=>s});var f=n(4214);function h(u,o=document){return!!o.querySelector(u)}function v(u,o=document,t=!1){const a=o.querySelector(u);return t&&!a&&console.log(`No element found for selector: ${u}`),a}function s(u,o=document,t=!1){const a=o.querySelectorAll(u);return t&&!a.length&&console.log(`No elements found for selector: ${u}`),a}function g(u,o=1){let t=u;for(let a=0;a<o;a++){if(!t.parentElement)return null;t=t.parentElement}return t}function i(u,o,t){return[...u.querySelectorAll(o)].find(a=>a.textContent.trim().includes(t))}function e(u,o,t=!1,a=!1,l=null){const I=v(o,u);return r(I,t,a,l)}function r(u,o=!1,t=!1,a=null){if(!u)return a===null?(console.log("No element found"),null):a;const l=u.innerText;return C(l,o,t)}function w(u,o,t=!1){const a=u[o];return r(a,t)}function S(u,o=!1,t=!1){const a=u.textContent;return C(a,o,t)}function C(u,o,t){o&&(u=(0,f.zr)(u)),t&&(u=u.replace(",","."));const a=Number(u);return Number.isNaN(a)?(console.log(`Invalid number: ${u}`),0):a}function x(u){return[...u.childNodes].find(o=>o.nodeType===Node.TEXT_NODE)}function N(u){const o=t=>t.nodeType===Node.TEXT_NODE&&t.textContent.trim()!==""?[t]:[...t.childNodes].flatMap(o);return o(u)}function b(u){return normalizeSpacing(u.textContent)}},5539:(y,d,n)=>{n.d(d,{Bt:()=>h,UC:()=>w,kl:()=>e});function f(c,F){c.parentNode.insertBefore(F,c.nextSibling)}function h(c){c.style.display="none"}function v(c,F=1){const L=document.querySelector(c);L&&s(L,F)}function s(c,F=1){const L=getElementAncestor(c,F);L&&h(L)}function g(c){x(c),h(c)}function i(c){c.intersectionObserver||runOnceOnIntersection(c,()=>h(c))}function e(c){c.style.display=""}function r(c){const F=C(c);c.style.display=F}function w(c,F){F?h(c):e(c)}function S(c,F){F?i(c):(clearIntersectionObserver(c),e(c))}function C(c){return x(c),c.defaultDisplay}function x(c){if(c.defaultDisplay)return;const{display:F}=getComputedStyle(c);c.defaultDisplay=F}function N(){return{show:[],hide:[]}}function b(c,F,L){c?F.hide.push(L):F.show.push(L)}function u(c){c.show.forEach(e),c.hide.forEach(h)}function o(c,F,L=.3){F?a(c,L):t(c)}function t(c){c.style.opacity=""}function a(c,F=.3){c.style.opacity=F}function l(c){c.style.order=""}function I(c,F){c.style.order=F}function A(c,F){c.style.background=F}function T(c,F){const L=getFirstElement(F);L&&E(c,L)}function E(c,F){const L=createLink();L.href=c,F.parentNode.append(L),L.append(F)}function m(c,F){const L=getFirstElement(F);L&&p(c,L)}function p(c,F){const L=createLink();L.href=c,L.append(...F.childNodes),F.append(L)}function k(){const c=getURLQueryParam("scrollTo");if(!c)return;const F=document.getElementById(c);F?F.scrollIntoView():console.log(`Element with ID "${c}" was not found.`)}function R(c,F,L="text/plain"){const O=new Blob([c],{type:L}),V=URL.createObjectURL(O),P=document.createElement("a");P.href=V,P.download=F,document.body.appendChild(P),P.click(),document.body.removeChild(P),requestAnimationFrame(()=>URL.revokeObjectURL(V))}},6754:(y,d,n)=>{n.d(d,{ZM:()=>f});function f(g,i){Object.assign(g.style,i)}function h(g,i="custom-global-style"){let e=document.getElementById(i);e||(e=document.createElement("style"),e.id=i,e.type="text/css",document.head.appendChild(e)),e.textContent=g}function v(g){return Object.entries(g).map(([i,e])=>`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${e};`).join(" ")}function s(g){return g?g.split(";").filter(i=>i.trim()!=="").reduce((i,e)=>{const[r,w]=e.split(":").map(C=>C.trim()),S=r.replace(/-([a-z])/g,(C,x)=>x.toUpperCase());return i[S]=w,i},{}):{}}},4921:(y,d,n)=>{n.d(d,{sg:()=>s,xk:()=>f});function f(e,r,w=null){const S=e.querySelector(r);return S?Promise.resolve(S):new Promise(C=>{const x=new MutationObserver(b);x.observe(e,{childList:!0,subtree:!0});let N;w&&(N=setTimeout(()=>{x.disconnect(),console.log(`No element found for selector: ${r}`),C(null)},w));function b(){const u=e.querySelector(r);u&&(N&&clearTimeout(N),x.disconnect(),C(u))}})}function h(e,r){return e.querySelector(r)?new Promise(S=>{const C=new MutationObserver(x);C.observe(e,{childList:!0,subtree:!0});function x(){e.querySelector(r)||(C.disconnect(),S())}}):Promise.resolve()}function v(e,r=400){return new Promise(w=>{let S;const C=new MutationObserver(()=>{clearTimeout(S),x()});function x(){S=setTimeout(()=>{C.disconnect(),w()},r)}x(),C.observe(e,{childList:!0,subtree:!0})})}function s(e,r=250){let w;return(...S)=>{clearTimeout(w),w=setTimeout(()=>e(...S),r)}}function g(e,r){const w=new IntersectionObserver(S=>{S.forEach(C=>{C.isIntersecting&&(r(),i(e))})});e.intersectionObserver=w,w.observe(e)}function i(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}},3829:(y,d,n)=>{n.d(d,{Ay:()=>h,JE:()=>s});var f=n(8355);function h(e,r){return!v(e,r)}function v(e,r){if(!r.value)return!0;const w=e.toLowerCase(),S=(0,f.R)(r),C=[],x=[];return S.forEach(N=>{if(N.startsWith("!")){const b=N.substring(1);b&&x.push(b)}else C.push(N)}),C.every(N=>w.includes(N))&&x.every(N=>!w.includes(N))}function s(e,r){return r.value!=null&&e<r.value}function g(e,r){return r.value!=null&&e>r.value}function i(e,r){return r.value&&e!==r.value}},4521:(y,d,n)=>{n.d(d,{z:()=>h});var f=n(3048);function h(v,s=null){return{createGlobalFilter(g,i=null,e=v){return f.V.create(g,i,e)},createSectionFilter(g,i=null,e=v){if(!s)throw new Error("sectionId must be provided to use createSectionFilter.");return f.V.createWithCompositeKey(s,g,i,e)}}}},5884:(y,d,n)=>{n.d(d,{Hw:()=>g,Nm:()=>v,nW:()=>s});var f=n(9928),h=n(5467);function v(i,e,r={},w={}){const S=(0,f.kU)(w,e.updateValueFromEvent,e.value);return(0,h.E2)(S,r,i)}function s(i,e,r,w,S,C={},x={}){const N=(0,f.o5)(x,e.updateValueFromEvent,e.value,r,w,S);return(0,h.E2)(N,C,i)}function g(i,e,r={},w={}){const S=(0,f.S)(w,e.updateValueFromEvent,e.value);return(0,h.E2)(S,r,i)}},7877:(y,d,n)=>{n.d(d,{E9:()=>h,HX:()=>v,X0:()=>g,pW:()=>T});var f=n(5884);function h(E,m={},p={}){return(0,f.Nm)("\u041F\u043E\u0438\u0441\u043A: ",E,m,p)}function v(E,m={},p={},k=.1,R=3){return(0,f.nW)("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",E,k,R,5,m,p)}function s(E,m={},p={},k=.1,R=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",E,k,R,5,m,p)}function g(E,m={},p={}){return e("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",E,m,p)}function i(E,m={},p={}){return e("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",E,m,p)}function e(E,m,p={},k={}){return(0,f.nW)(E,m,"1","1","999999",p,k)}function r(E,m={},p={}){return w("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",E,m,p)}function w(E,m,p={},k={}){return createNumberFilterControl(E,m,"5","0","100",p,k)}function S(E,m={},p={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",E,"5","0","100",m,p)}function C(E,m,p={},k={},R="250"){return createNumberFilterControl(E,m,R,"0","1000000",p,k)}function x(E,m={},p={},k="25"){return C("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",E,m,p,k)}function N(E,m={},p={},k="25"){return C("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",E,m,p,k)}function b(E,m={},p={}){return u("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",E,m,p)}function u(E,m,p={},k={}){return createNumberFilterControl(E,m,"1","0","99999",p,k)}function o(E,m={},p={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",E,"1","2","7",m,p)}function t(E,m={},p={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",E,1,1,10,m,p)}function a(E,m={},p={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",E,m,p)}function l(E,m={},p={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",E,m,p)}function I(E,m={},p={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",E,m,p)}function A(E,m={},p={}){return createCheckboxFilterControl("\u0411\u0430\u043B\u043B\u044B: ",E,m,p)}function T(E,m={},p={}){return(0,f.Hw)("\u0412\u043A\u043B: ",E,m,p)}},8355:(y,d,n)=>{n.d(d,{R:()=>f});function f(v){return v.value.toLowerCase().split(",").map(s=>s.trim()).filter(s=>s!=="")}function h(v){return f(v).filter(s=>!s.startsWith("!"))}},5213:(y,d,n)=>{n.d(d,{b:()=>v});var f=n(9928),h=n(573);function v(s,g,i=!1,e="customFiltersContainer"){let r=(0,h.Fi)(`#${e}`,s);if(r)if(i)r.remove();else return;r=(0,f.Sw)(),r.id=e,g(r,s)}},8200:(y,d,n)=>{n.d(d,{s:()=>f});function f(h){const{target:v}=h,{type:s}=v;switch(s){case"text":return`"${v.value}"`;case"number":return v.value;case"checkbox":return v.checked;default:return console.log(`Unknown input type: ${s}`),null}}},157:(y,d,n)=>{n.d(d,{Fg:()=>f,vx:()=>v});const f=window.GM_setValue,h=window.GM.setValue,v=window.GM_getValue,s=window.GM_addValueChangeListener},1870:(y,d,n)=>{n.d(d,{j:()=>f});class f{constructor(v,s){this.value=v,this.onChange=s}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(y,d,n)=>{n.d(d,{V:()=>g});var f=n(1870),h=n(8200),v=n(3976),s=n(157);class g extends f.j{constructor(e,r=null,w=null){super((0,s.vx)(e,r),w),this.storageKey=e,this.defaultValue=r}static create(e,r=null,w=null){return new g(e,r,w)}static createWithCompositeKey(e,r,w=null,S=null){const C=`${e}-${r}`;return new g(C,w,S)}updateValueFromEvent=e=>{const r=(0,h.s)(e),w=(0,v.$)(r);this.updateValue(w)};updateValue(e,r=!0){this.value!==e&&((0,s.Fg)(this.storageKey,e),this.value=e,r&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}},3976:(y,d,n)=>{n.d(d,{$:()=>f});function f(h){return h===""?null:JSON.parse(h)}},4214:(y,d,n)=>{n.d(d,{zr:()=>h});function f(i){return i.replace(/\D/g,"")}function h(i){return i.replace(/[^\d.,-]/g,"")}function v(i){return i.replace(/\s/g,"")}function s(i){return i.charAt(0).toUpperCase()+i.slice(1)}function g(i){return i.replace(/\s+/g," ").trim()}},5406:(y,d,n)=>{n.d(d,{Fc:()=>f});function f(b,u="common",o=!1){const{pathname:t}=window.location;return h(t,b,u,o)}function h(b,u,o,t=!1){const a=b.split("/");u=u<0?a.length+u:u;const l=a[u]||o;return t&&console.log(`Pathname element: ${l}`),l}function v(b,u="common",o=!1){const t=f(b,"",o);return s(t,u,o)}function s(b,u,o){if(!b)return u;const t=b.split("-").at(-1);return o&&console.log(`Pathname element ending: ${t}`),t}function g(b,u,o="common",t=!1){const a=h(b,u,"",t);return s(a,o,t)}function i(b){return new URLSearchParams(window.location.search).get(b)}function e(b){return b.split("?")[0]}function r(b){return window.location.pathname.includes(b)}function w(b){return b.some(u=>r(u))}function S(b){return window.location.pathname.split("/").some(o=>o===b)}function C(b){try{const u=new URL(window.location.href);Object.entries(b).forEach(([o,t])=>{u.searchParams.set(o,t)}),window.location.href=u.toString()}catch(u){console.error("Failed to redirect:",u)}}function x(b,u=[]){const o={pathname:window.location.pathname};u.forEach(l=>{o[l]=i(l)});function t(){const l={pathname:window.location.pathname};u.forEach(I=>{l[I]=i(I)}),Object.keys(o).some(I=>o[I]!==l[I])&&b()}let a=window.location.href;setInterval(()=>{window.location.href!==a&&(a=window.location.href,t())},200),window.addEventListener("popstate",t)}function N(b=[]){x(()=>window.location.reload(),b)}},6220:(y,d,n)=>{n.a(y,async(f,h)=>{try{let A=function(m,p){(0,N.ZM)(m,C.r.filtersContainer);const k=(0,r.E9)(o,C.r.control,C.r.textInput),R=(0,r.X0)(t,C.r.control,C.r.numberInput),c=(0,r.HX)(a,C.r.control,C.r.numberInput),F=(0,r.pW)(l,C.r.control,C.r.checkboxInput);m.append(k,R,c,F),p.parentNode.insertBefore(m,p)},T=function(){(0,e.fI)(`${x.Z.PRODUCT_LIST} > div`).forEach(E)},E=function(m){if(!l.value){(0,i.kl)(m);return}const p=(0,e.Fi)(x.Z.PRODUCT_NAME_WRAP,m),k=(0,e.Fi)(x.Z.PRODUCT_RATING_WRAP,m);if(!p||!k){(0,i.Bt)(m);return}const R=p.innerText,c=(0,e.ML)(k.childNodes[2],!0),L=+(0,e.Fi)(x.Z.PRODUCT_RATING,k).getAttribute("value"),O=(0,g.Ay)(R,o)||(0,g.JE)(c,t)||(0,g.JE)(L,a);(0,i.UC)(m,O)};var v=n(4921),s=n(5213),g=n(3829),i=n(5539),e=n(573),r=n(7877),w=n(5406),S=n(4521),C=n(6504),x=n(4858),N=n(6754);const b=(0,w.Fc)(2),{createSectionFilter:u}=(0,S.z)(T,b),o=u("name-filter"),t=u("min-reviews-filter"),a=u("min-rating-filter",4.8),l=u("filter-enabled",!0);await I();async function I(){if(!await(0,v.xk)(document,x.Z.PRODUCT_LIST_TOP))return;const p=(0,e.Fi)(x.Z.PRODUCT_LIST,document,!0);(0,s.b)(p,A,!0),new MutationObserver(T).observe(p,{childList:!0,subtree:!0})}h()}catch(b){h(b)}},1)},4858:(y,d,n)=>{n.d(d,{Z:()=>f});const f={PRODUCT_LIST:'[data-qa="listing"]',PRODUCT_LIST_TOP:"#product-listing-top",PRODUCT_NAME_WRAP:'[data-qa="product-name"]',PRODUCT_RATING_WRAP:'[data-qa="product-rating"]',PRODUCT_RATING:'[name="rating"]'}},6504:(y,d,n)=>{n.d(d,{r:()=>h});const f={input:{marginLeft:"5px",border:"1px solid #dadcde",borderRadius:"8px",padding:"8px 16px",fontSize:"16px"}},h={filtersContainer:{display:"flex",gridGap:"11px",marginBottom:"18px"},control:{display:"flex",alignItems:"center",fontSize:"16px"},textInput:{...f.input,width:"180px"},numberInput:{...f.input,width:"90px"},checkboxInput:{marginLeft:"5px",width:"22px",height:"22px"}}}},U={};function D(y){var d=U[y];if(d!==void 0)return d.exports;var n=U[y]={exports:{}};return $[y](n,n.exports,D),n.exports}(()=>{var y=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",d=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",f=v=>{v&&v.d<1&&(v.d=1,v.forEach(s=>s.r--),v.forEach(s=>s.r--?s.r++:s()))},h=v=>v.map(s=>{if(s!==null&&typeof s=="object"){if(s[y])return s;if(s.then){var g=[];g.d=0,s.then(r=>{i[d]=r,f(g)},r=>{i[n]=r,f(g)});var i={};return i[y]=r=>r(g),i}}var e={};return e[y]=r=>{},e[d]=s,e});D.a=(v,s,g)=>{var i;g&&((i=[]).d=-1);var e=new Set,r=v.exports,w,S,C,x=new Promise((N,b)=>{C=b,S=N});x[d]=r,x[y]=N=>(i&&N(i),e.forEach(N),x.catch(b=>{})),v.exports=x,s(N=>{w=h(N);var b,u=()=>w.map(t=>{if(t[n])throw t[n];return t[d]}),o=new Promise(t=>{b=()=>t(u),b.r=0;var a=l=>l!==i&&!e.has(l)&&(e.add(l),l&&!l.d&&(b.r++,l.push(b)));w.map(l=>l[y](a))});return b.r?o:u()},N=>(N?C(x[n]=N):S(r),f(i))),i&&i.d<0&&(i.d=0)}})(),D.d=(y,d)=>{for(var n in d)D.o(d,n)&&!D.o(y,n)&&Object.defineProperty(y,n,{enumerable:!0,get:d[n]})},D.o=(y,d)=>Object.prototype.hasOwnProperty.call(y,d);var B=D(6220)})();})();
