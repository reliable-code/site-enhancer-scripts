// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76830129
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(N,h,n)=>{n.d(h,{E2:()=>y});var b=n(9928);function y(p,i={},e=null){const o=(0,b.Sw)(i,e);return o.append(p),o}function v(p,i=null,e={},o={}){const u=createActionLink(p,i,o);return y(u,e)}function w(p,i=null,e=null,o={},u={}){const d=createActionLinkWithIcon(p,e,i,u);return y(d,o)}},9928:(N,h,n)=>{n.d(h,{Sw:()=>I,kU:()=>v});var b=n(4921),y=n(6754);function v(r,g,l){const T=e(r,"text",g);return T.value=l,T}function w(r,g,l,T,L,D){const W=e(r,"number",g);return W.value=l,W.step=T,W.min=L,W.max=D,W}function p(r,g,l){const T=e(r,"date",g);return T.value=l,T}function i(r,g,l){const T=e(r,"checkbox",g);return T.checked=l,T}function e(r={},g=null,l=null){const T=s("input",r);return g&&(T.type=g),l&&(T.addEventListener("keyup",(0,b.sg)(l,200)),T.addEventListener("change",(0,b.sg)(l,100))),T}function o(r={},g=null){return s("span",r,g)}function u(r={},g=null,l=null){const T=s("a",r,g);return l&&(T.href=l),T}function d(r,g=null,l={}){l.cursor||="pointer";const T=u(l,g);return r&&T.addEventListener("click",r),T}function x(r,g,l=null,T={},L={}){T.display||="inline-flex",T.alignItems||="center",T.gap||="0.25em";const D=d(r,l,T);return D.prepend(a(g,L)),D}function C(r={},g=null,l=null){const T=s("button",r,g);return l&&T.addEventListener("click",l),T}function I(r={},g=null){return s("div",r,g)}function t(r={}){return s("i",r)}function a(r,g={}){g.width||="1em",g.height||="1em",g.paddingBottom||="1px";const l=t(g);return l.setAttribute("data-lucide",r),l}function s(r,g,l=null){if(typeof g!="object"||g===null)throw new TypeError("styles should be an object");const T=document.createElement(r);return(0,y.ZM)(T,g),l&&(T.innerHTML=l),T}},573:(N,h,n)=>{n.d(h,{Fi:()=>y,Yl:()=>p,fI:()=>v});function b(t,a=document){return!!a.querySelector(t)}function y(t,a=document,s=!1){const r=a.querySelector(t);return s&&!r&&console.log(`No element found for selector: ${t}`),r}function v(t,a=document,s=!1){const r=a.querySelectorAll(t);return s&&!r.length&&console.log(`No elements found for selector: ${t}`),r}function w(t,a=1){let s=t;for(let r=0;r<a;r++){if(!s.parentElement)return null;s=s.parentElement}return s}function p(t,a,s){return[...t.querySelectorAll(a)].find(r=>r.textContent.trim().includes(s))}function i(t,a,s=!1,r=!1,g=null){const l=y(a,t);return e(l,s,r,g)}function e(t,a=!1,s=!1,r=null){if(!t)return r===null?(console.log("No element found"),null):r;const g=t.innerText;return d(g,a,s)}function o(t,a,s=!1){const r=t[a];return e(r,s)}function u(t,a=!1,s=!1){const r=t.textContent;return d(r,a,s)}function d(t,a,s){a&&(t=removeNonNumber(t)),s&&(t=t.replace(",","."));const r=Number(t);return Number.isNaN(r)?(console.log(`Invalid number: ${t}`),0):r}function x(t){return[...t.childNodes].find(a=>a.nodeType===Node.TEXT_NODE)}function C(t){const a=s=>s.nodeType===Node.TEXT_NODE&&s.textContent.trim()!==""?[s]:[...s.childNodes].flatMap(a);return a(t)}function I(t){return normalizeSpacing(t.textContent)}},8506:(N,h,n)=>{n.d(h,{hf:()=>y,kZ:()=>w});var b=n(573);function y(p,i){p.forEach(e=>v(i,e))}function v(p,i){if(!i)return;const e=new RegExp(`(${i})`,"gi"),o=document.createTreeWalker(p,NodeFilter.SHOW_TEXT,null);let u=o.nextNode();const d=[];for(;u;){const{textContent:x}=u;if(e.test(x)){const C=document.createDocumentFragment();let I=0;x.replace(e,(t,a,s)=>{s>I&&C.appendChild(document.createTextNode(x.slice(I,s)));const r=document.createElement("span");r.className="highlightedSubstring",r.style.backgroundColor="yellow",r.textContent=t,C.appendChild(r),I=s+t.length}),I<x.length&&C.appendChild(document.createTextNode(x.slice(I))),d.push({node:u,fragment:C})}u=o.nextNode()}d.forEach(({node:x,fragment:C})=>{x.parentNode.replaceChild(C,x)})}function w(p){(0,b.fI)(".highlightedSubstring",p).forEach(e=>{const{parentNode:o}=e;e.replaceWith(e.textContent),o.normalize()})}},5539:(N,h,n)=>{n.d(h,{Bt:()=>v,Bz:()=>t,GY:()=>a,L5:()=>R,pB:()=>s});var b=n(573);function y(c,f){c.parentNode.insertBefore(f,c.nextSibling)}function v(c){c.style.display="none"}function w(c,f=1){const S=document.querySelector(c);S&&p(S,f)}function p(c,f=1){const S=getElementAncestor(c,f);S&&v(S)}function i(c){I(c),v(c)}function e(c){c.intersectionObserver||runOnceOnIntersection(c,()=>v(c))}function o(c){c.style.display=""}function u(c){const f=C(c);c.style.display=f}function d(c,f){f?v(c):o(c)}function x(c,f){f?e(c):(clearIntersectionObserver(c),o(c))}function C(c){return I(c),c.defaultDisplay}function I(c){if(c.defaultDisplay)return;const{display:f}=getComputedStyle(c);c.defaultDisplay=f}function t(){return{show:[],hide:[]}}function a(c,f,S){c?f.hide.push(S):f.show.push(S)}function s(c){c.show.forEach(o),c.hide.forEach(v)}function r(c,f,S=.3){f?l(c,S):g(c)}function g(c){c.style.opacity=""}function l(c,f=.3){c.style.opacity=f}function T(c){c.style.order=""}function L(c,f){c.style.order=f}function D(c,f){c.style.background=f}function W(c,f){const S=getFirstElement(f);S&&U(c,S)}function U(c,f){const S=createLink();S.href=c,f.parentNode.append(S),S.append(f)}function E(c,f){const S=getFirstElement(f);S&&m(c,S)}function m(c,f,S={}){const A=createLink(S);A.href=c,A.append(...f.childNodes),f.append(A)}function F(){const c=getURLQueryParam("scrollTo");if(!c)return;const f=document.getElementById(c);f?f.scrollIntoView():console.log(`Element with ID "${c}" was not found.`)}function R(c,f,S=null){const A=`${f}-click-passed`,O=S?k=>(0,b.Yl)(k,c,S):k=>(0,b.Fi)(c,k);return function(k){if(k.hasAttribute(A))return!1;const M=O(k);return M&&M.click(),k.setAttribute(A,""),!0}}function V(c,f,S="text/plain"){const A=new Blob([c],{type:S}),O=URL.createObjectURL(A),k=document.createElement("a");k.href=O,k.download=f,document.body.appendChild(k),k.click(),document.body.removeChild(k),requestAnimationFrame(()=>URL.revokeObjectURL(O))}},6754:(N,h,n)=>{n.d(h,{ZM:()=>b});function b(p,i){Object.assign(p.style,i)}function y(p,i="custom-global-style"){let e=document.getElementById(i);e||(e=document.createElement("style"),e.id=i,e.type="text/css",document.head.appendChild(e)),e.textContent=p}function v(p){return Object.entries(p).map(([i,e])=>`${i.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${e};`).join(" ")}function w(p){return p?p.split(";").filter(i=>i.trim()!=="").reduce((i,e)=>{const[o,u]=e.split(":").map(x=>x.trim()),d=o.replace(/-([a-z])/g,(x,C)=>C.toUpperCase());return i[d]=u,i},{}):{}}},4921:(N,h,n)=>{n.d(h,{Un:()=>p,XW:()=>v,sg:()=>w,wP:()=>o,xk:()=>b});function b(u,d,x=null){const C=u.querySelector(d);return C?Promise.resolve(C):new Promise(I=>{const t=new MutationObserver(s);t.observe(u,{childList:!0,subtree:!0});let a;x&&(a=setTimeout(()=>{t.disconnect(),console.log(`No element found for selector: ${d}`),I(null)},x));function s(){const r=u.querySelector(d);r&&(a&&clearTimeout(a),t.disconnect(),I(r))}})}function y(u,d){return u.querySelector(d)?new Promise(C=>{const I=new MutationObserver(t);I.observe(u,{childList:!0,subtree:!0});function t(){u.querySelector(d)||(I.disconnect(),C())}}):Promise.resolve()}function v(u,d=400){return new Promise(x=>{let C;const I=new MutationObserver(()=>{clearTimeout(C),t()});function t(){C=setTimeout(()=>{I.disconnect(),x()},d)}t(),I.observe(u,{childList:!0,subtree:!0})})}function w(u,d=250){let x;return(...C)=>{clearTimeout(x),x=setTimeout(()=>u(...C),d)}}async function p(u){document.visibilityState==="visible"?await u():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await u()},{once:!0})}function i(u,d){const x=new IntersectionObserver(C=>{C.forEach(I=>{I.isIntersecting&&(d(),e(u))})});u.intersectionObserver=x,x.observe(u)}function e(u){u.intersectionObserver&&(u.intersectionObserver.disconnect(),u.intersectionObserver=null)}function o(u){u&&(u.disconnect(),u=null)}},3829:(N,h,n)=>{n.d(h,{Ay:()=>y});var b=n(8355);function y(u,d){return!v(u,d)}function v(u,d){if(!d.value)return!0;const x=u.toLowerCase(),C=(0,b.Rn)(d),I=[],t=[];return C.forEach(a=>{if(a.startsWith("!")){const s=a.substring(1);s&&t.push(s)}else I.push(a)}),I.every(a=>x.includes(a))&&t.every(a=>!x.includes(a))}function w(u,d){return d.value!=null&&u<d.value}function p(u,d){return d.value!=null&&u>d.value}function i(u,d){return d.value==null?!1:u<parseDateFromISO(d.value)}function e(u,d){return d.value==null?!1:u>parseDateFromISO(d.value)}function o(u,d){return d.value&&u!==d.value}},4521:(N,h,n)=>{n.d(h,{z:()=>y});var b=n(3048);function y(v,w=null){return{createGlobalFilter(p,i=null,e=v){return b.V.create(p,i,e)},createSectionFilter(p,i=null,e=v){if(!w)throw new Error("sectionId must be provided to use createSectionFilter.");return b.V.createWithCompositeKey(w,p,i,e)}}}},5884:(N,h,n)=>{n.d(h,{Nm:()=>v});var b=n(9928),y=n(5467);function v(e,o,u={},d={}){const x=(0,b.kU)(d,o.updateValueFromEvent,o.value);return(0,y.E2)(x,u,e)}function w(e,o,u,d,x,C={},I={}){const t=createNumberInput(I,o.updateValueFromEvent,o.value,u,d,x);return createControl(t,C,e)}function p(e,o,u={},d={}){const x=createDateInput(d,o.updateValueFromEvent,o.value);return createControl(x,u,e)}function i(e,o,u={},d={}){const x=createCheckboxInput(d,o.updateValueFromEvent,o.value);return createControl(x,u,e)}},7877:(N,h,n)=>{n.d(h,{E9:()=>y});var b=n(5884);function y(E,m={},F={}){return(0,b.Nm)("\u041F\u043E\u0438\u0441\u043A: ",E,m,F)}function v(E,m={},F={},R=.1,V=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",E,R,V,5,m,F)}function w(E,m={},F={},R=.1,V=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",E,R,V,5,m,F)}function p(E,m={},F={}){return e("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",E,m,F)}function i(E,m={},F={}){return e("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",E,m,F)}function e(E,m,F={},R={}){return createNumberFilterControl(E,m,"1","1","999999",F,R)}function o(E,m={},F={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",E,m,F)}function u(E,m={},F={}){return d("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",E,m,F)}function d(E,m,F={},R={}){return createNumberFilterControl(E,m,"5","0","100",F,R)}function x(E,m={},F={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",E,"5","0","100",m,F)}function C(E,m,F={},R={},V="250"){return createNumberFilterControl(E,m,V,"0","1000000",F,R)}function I(E,m={},F={},R="25"){return C("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",E,m,F,R)}function t(E,m={},F={},R="25"){return C("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",E,m,F,R)}function a(E,m={},F={}){return s("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",E,m,F)}function s(E,m,F={},R={}){return createNumberFilterControl(E,m,"1","0","99999",F,R)}function r(E,m={},F={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",E,"1","2","8",m,F)}function g(E,m={},F={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",E,1,1,10,m,F)}function l(E,m={},F={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",E,m,F)}function T(E,m={},F={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",E,m,F)}function L(E,m={},F={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",E,m,F)}function D(E,m={},F={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",E,m,F)}function W(E,m={},F={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",E,m,F)}function U(E,m,F={}){const R=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],V={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},c=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),f=[],S=()=>m?parseFloat(m.value)||0:E.value,A=()=>{const O=S();f.forEach(({button:k,value:M})=>{const z=M<=O?V.active:V.inactive;Object.assign(k.style,z)})};return R.forEach(({value:O,emoji:k,tooltip:M})=>{const P=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...F},k);P.title=M,P.type="button",P.addEventListener("click",z=>{z.preventDefault(),E.updateValue(O),m&&(m.value=O),A()}),P.addEventListener("mouseenter",()=>{O<=S()||(P.style.background=V.hover.background)}),P.addEventListener("mouseleave",()=>{A()}),f.push({button:P,value:O}),c.appendChild(P)}),A(),m&&(m.addEventListener("input",A),m.addEventListener("change",A)),c}},8355:(N,h,n)=>{n.d(h,{Rn:()=>b,fO:()=>y,oM:()=>v});function b(i){return i.value.toLowerCase().split(",").map(e=>e.trim()).filter(e=>e!=="")}function y(i){return b(i).filter(e=>!e.startsWith("!"))}function v(i,e){p(i,o=>o.style.display!=="none",e)}function w(i,e){p(i,o=>o.style.opacity==="",e)}function p(i,e,o){const u=[...i].filter(e).length;o.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${u} \u0438\u0437 ${i.length}`}},4292:(N,h,n)=>{n.d(h,{C:()=>v});var b=n(8355),y=n(8506);function v(p,i){const e=(0,b.fO)(p);(0,y.hf)(e,i)}function w(p,i){const e=getIncludedSearchStrings(p);i.forEach(o=>highlightSubstrings(e,o))}},5213:(N,h,n)=>{n.d(h,{b:()=>v});var b=n(9928),y=n(573);function v(w,p,i=!1,e="customFiltersContainer"){let o=(0,y.Fi)(`#${e}`,w);if(o)if(i)o.remove();else return;o=(0,b.Sw)(),o.id=e,p(o,w)}},8200:(N,h,n)=>{n.d(h,{s:()=>b});function b(y){const{target:v}=y,{type:w}=v;switch(w){case"text":return`"${v.value}"`;case"number":return v.value;case"date":return`"${v.value}"`;case"checkbox":return v.checked;default:return console.log(`Unknown input type: ${w}`),null}}},157:(N,h,n)=>{n.d(h,{Fg:()=>b,vx:()=>v});const b=window.GM_setValue,y=window.GM.setValue,v=window.GM_getValue},1870:(N,h,n)=>{n.d(h,{j:()=>b});class b{constructor(v,w){this.value=v,this.onChange=w}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(N,h,n)=>{n.d(h,{V:()=>p});var b=n(1870),y=n(8200),v=n(3976),w=n(157);class p extends b.j{constructor(e,o=null,u=null){super((0,w.vx)(e,o),u),this.storageKey=e,this.defaultValue=o}static create(e,o=null,u=null){return new p(e,o,u)}static createWithCompositeKey(e,o,u=null,d=null){const x=`${e}-${o}`;return new p(x,u,d)}updateValueFromEvent=e=>{const o=(0,y.s)(e),u=(0,v.$)(o);this.updateValue(u)};updateValue(e,o=!0){this.value!==e&&((0,w.Fg)(this.storageKey,e),this.value=e,o&&this.onChangeIfDefined())}clearValue(e=!1){this.updateValue(null,e)}resetValue(e=!1){this.updateValue(this.defaultValue,e)}}},3976:(N,h,n)=>{n.d(h,{$:()=>b});function b(y){return y===""?null:JSON.parse(y)}},5406:(N,h,n)=>{n.d(h,{k1:()=>C,z2:()=>d});function b(t,a="common",s=!1){const{pathname:r}=window.location;return y(r,t,a,s)}function y(t,a,s,r=!1){const g=t.split("/");a=a<0?g.length+a:a;const l=g[a]||s;return r&&console.log(`Pathname element: ${l}`),l}function v(t,a="common",s=!1){const r=b(t,"",s);return w(r,a,s)}function w(t,a,s){if(!t)return a;const r=t.split("-").at(-1);return s&&console.log(`Pathname element ending: ${r}`),r}function p(t,a,s="common",r=!1){const g=y(t,a,"",r);return w(g,s,r)}function i(t){return new URLSearchParams(window.location.search).get(t)}function e(t){return t.split("?")[0]}function o(t){return window.location.pathname.includes(t)}function u(t){return t.some(a=>o(a))}function d(...t){return window.location.pathname.split("/").some(s=>t.includes(s))}function x(t){try{const a=new URL(window.location.href);Object.entries(t).forEach(([s,r])=>{a.searchParams.set(s,r)}),window.location.href=a.toString()}catch(a){console.error("Failed to redirect:",a)}}function C(t,a=[]){const s={pathname:window.location.pathname};a.forEach(L=>{s[L]=i(L)});let r=!1;async function g(){if(r)return;const L={pathname:window.location.pathname};if(a.forEach(D=>{L[D]=i(D)}),Object.keys(s).some(D=>s[D]!==L[D])){Object.assign(s,L),r=!0;try{await t()}catch(D){console.error("Error in URL observer callback:",D)}finally{r=!1}}}function l(){g().catch(L=>{console.error("Error in URL change handler:",L)})}let T=window.location.href;setInterval(()=>{window.location.href!==T&&(T=window.location.href,l())},200),window.addEventListener("popstate",l)}function I(t=[]){C(()=>window.location.reload(),t)}},3539:(N,h,n)=>{n.a(N,async(b,y)=>{try{let L=function(){return(0,a.z2)("org","reviews")},W=function(){U(o.Z.REVIEWS_VIEW_SUMMARY),U(o.Z.TAGS_CONTAINER),U(o.Z.FRIENDS_SUGGEST)},U=function(f,S=l.activeTabWrapper){const A=(0,i.Fi)(f,S);A&&(0,p.Bt)(A)},E=function(){if(!l.isFiltersInitialized){const{createGlobalFilter:f}=(0,d.z)(R);l.reviewTextFilter=f("review-text-filter"),l.isFiltersInitialized=!0}},m=function(f,S){(0,x.ZM)(f,u.r.FILTERS_CONTAINER),F();const A=(0,e.E9)(l.reviewTextFilter,u.r.CONTROL,u.r.TEXT_INPUT);l.reviewsInfo=(0,s.Sw)(u.r.INFO),f.append(A,l.reviewsInfo),S.append(f)},F=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},c=function(){l.activeTabWrapper=null,l.isFiltersInitialized=!1,l.reviewTextFilter=null,l.reviewsInfo=null,(0,C.wP)(l.reviewsObserver)};var v=n(5213),w=n(3829),p=n(5539),i=n(573),e=n(7877),o=n(6613),u=n(3613),d=n(4521),x=n(6754),C=n(4921),I=n(4292),t=n(8506),a=n(5406),s=n(9928),r=n(8355);const g=(0,p.L5)("span.business-review-view__expand","read-more"),l={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,C.Un)(T),(0,a.k1)(async()=>{await T(!0)});async function T(f=!1){f&&c(),L()&&(await(0,C.XW)(document.body),await D())}async function D(){l.activeTabWrapper=await(0,C.xk)(document,o.Z.ACTIVE_TAB_WRAPPER),W(),E();const f=(0,i.Fi)(o.Z.FILTER_CONTAINER_WRAP,l.activeTabWrapper,!0);(0,v.b)(f,m,!0),await R();const S=(0,i.Fi)(o.Z.REVIEWS_CONTAINER,l.activeTabWrapper);l.reviewsObserver=new MutationObserver((0,C.sg)(R)),l.reviewsObserver.observe(S,{childList:!0})}async function R(){l.isFiltersInitialized||E();const f=(0,i.fI)(o.Z.REVIEW_CARD,l.activeTabWrapper),S=(0,p.Bz)();await Promise.all([...f].map(async A=>{const O=await V(A);(0,p.GY)(O,S,A)})),(0,p.pB)(S),(0,r.oM)(f,l.reviewsInfo)}async function V(f){g(f)&&await(0,C.XW)(f),(0,t.kZ)(f);const S=(0,i.Fi)(o.Z.REVIEW_TEXT_WRAP,f);if(!S)return!0;l.reviewTextFilter.value&&(0,I.C)(l.reviewTextFilter,S);const A=S.innerText;return(0,w.Ay)(A,l.reviewTextFilter)}y()}catch(g){y(g)}},1)},6613:(N,h,n)=>{n.d(h,{Z:()=>b});const b={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(N,h,n)=>{n.d(h,{r:()=>y});const y={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},$={};function B(N){var h=$[N];if(h!==void 0)return h.exports;var n=$[N]={exports:{}};return j[N](n,n.exports,B),n.exports}(()=>{var N=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",b=v=>{v&&v.d<1&&(v.d=1,v.forEach(w=>w.r--),v.forEach(w=>w.r--?w.r++:w()))},y=v=>v.map(w=>{if(w!==null&&typeof w=="object"){if(w[N])return w;if(w.then){var p=[];p.d=0,w.then(o=>{i[h]=o,b(p)},o=>{i[n]=o,b(p)});var i={};return i[N]=o=>o(p),i}}var e={};return e[N]=o=>{},e[h]=w,e});B.a=(v,w,p)=>{var i;p&&((i=[]).d=-1);var e=new Set,o=v.exports,u,d,x,C=new Promise((I,t)=>{x=t,d=I});C[h]=o,C[N]=I=>(i&&I(i),e.forEach(I),C.catch(t=>{})),v.exports=C,w(I=>{u=y(I);var t,a=()=>u.map(r=>{if(r[n])throw r[n];return r[h]}),s=new Promise(r=>{t=()=>r(a),t.r=0;var g=l=>l!==i&&!e.has(l)&&(e.add(l),l&&!l.d&&(t.r++,l.push(t)));u.map(l=>l[N](g))});return t.r?s:a()},I=>(I?x(C[n]=I):d(o),b(i))),i&&i.d<0&&(i.d=0)}})(),B.d=(N,h)=>{for(var n in h)B.o(h,n)&&!B.o(N,n)&&Object.defineProperty(N,n,{enumerable:!0,get:h[n]})},B.o=(N,h)=>Object.prototype.hasOwnProperty.call(N,h);var G=B(3539)})();})();
