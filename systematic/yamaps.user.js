// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76927367
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var $={5467:(A,h,t)=>{t.d(h,{E2:()=>S});var y=t(9928);function S(p,d={},u=null){const n=(0,y.Sw)(d,u);return n.append(p),n}function b(p,d=null,u={},n={}){const r=createActionLink(p,d,n);return S(r,u)}function w(p,d=null,u=null,n={},r={}){const m=createActionLinkWithIcon(p,u,d,r);return S(m,n)}},9928:(A,h,t)=>{t.d(h,{Sw:()=>e,kU:()=>b});var y=t(4921),S=t(6754);function b(E,i,N){const F=u(E,"text",i);return F.value=N,F}function w(E,i,N,F,D,B){const V=u(E,"number",i);return V.value=N,V.step=F,V.min=D,V.max=B,V}function p(E,i,N){const F=u(E,"date",i);return F.value=N,F}function d(E,i,N){const F=u(E,"checkbox",i);return F.checked=N,F}function u(E={},i=null,N=null){const F=s("input",E);return i&&(F.type=i),N&&(F.addEventListener("keyup",(0,y.sg)(N,200)),F.addEventListener("change",(0,y.sg)(N,100))),F}function n(E,i,N){const F=s("select",E);return i&&F.addEventListener("change",i),F.value=N,F}function r(E={},i=null){return s("span",E,i)}function m(E={},i=null,N=null){const F=s("a",E,i);return N&&(F.href=N),F}function a(E,i=null,N={}){N.cursor||="pointer";const F=m(N,i);return E&&F.addEventListener("click",E),F}function o(E,i,N=null,F={},D={}){F.display||="inline-flex",F.alignItems||="center",F.gap||="0.25em";const B=a(E,N,F);return B.prepend(v(i,D)),B}function T(E={},i=null,N=null){const F=s("button",E,i);return N&&F.addEventListener("click",N),F}function e(E={},i=null){return s("div",E,i)}function l(E={},i=null){return s("i",E,i)}function v(E,i={}){i.width||="1em",i.height||="1em",i.paddingBottom||="1px";const N=l(i);return N.setAttribute("data-lucide",E),N}function s(E,i,N=null){if(typeof i!="object"||i===null)throw new TypeError("styles should be an object");const F=document.createElement(E);return(0,S.ZM)(F,i),N&&(F.innerHTML=N),F}},573:(A,h,t)=>{t.d(h,{Fi:()=>S,Yl:()=>p,fI:()=>b});function y(e,l=document){return!!l.querySelector(e)}function S(e,l=document,v=!1){const s=l.querySelector(e);return v&&!s&&console.log(`No element found for selector: ${e}`),s}function b(e,l=document,v=!1){const s=l.querySelectorAll(e);return v&&!s.length&&console.log(`No elements found for selector: ${e}`),s}function w(e,l=1){let v=e;for(let s=0;s<l;s++){if(!v.parentElement)return null;v=v.parentElement}return v}function p(e,l,v){return[...e.querySelectorAll(l)].find(s=>s.textContent.trim().includes(v))}function d(e,l,v=!1,s=!1,E=null){const i=S(l,e);return u(i,v,s,E)}function u(e,l=!1,v=!1,s=null){if(!e)return s===null?(console.log("No element found"),null):s;const E=e.innerText;return m(E,l,v)}function n(e,l,v=!1){const s=e[l];return u(s,v)}function r(e,l=!1,v=!1){const s=e.textContent;return m(s,l,v)}function m(e,l,v){l&&(e=removeNonNumber(e)),v&&(e=e.replace(",","."));const s=Number(e);return Number.isNaN(s)?(console.log(`Invalid number: ${e}`),0):s}function a(e){return[...e.childNodes].find(l=>l.nodeType===Node.TEXT_NODE)}function o(e){const l=v=>v.nodeType===Node.TEXT_NODE&&v.textContent.trim()!==""?[v]:[...v.childNodes].flatMap(l);return l(e)}function T(e){return normalizeSpacing(e.textContent)}},8506:(A,h,t)=>{t.d(h,{hf:()=>S,kZ:()=>w});var y=t(573);function S(p,d){p.forEach(u=>b(d,u))}function b(p,d){if(!d)return;const u=new RegExp(`(${d})`,"gi"),n=document.createTreeWalker(p,NodeFilter.SHOW_TEXT,null);let r=n.nextNode();const m=[];for(;r;){const{textContent:a}=r;if(u.test(a)){const o=document.createDocumentFragment();let T=0;a.replace(u,(e,l,v)=>{v>T&&o.appendChild(document.createTextNode(a.slice(T,v)));const s=document.createElement("span");s.className="highlightedSubstring",s.style.backgroundColor="yellow",s.textContent=e,o.appendChild(s),T=v+e.length}),T<a.length&&o.appendChild(document.createTextNode(a.slice(T))),m.push({node:r,fragment:o})}r=n.nextNode()}m.forEach(({node:a,fragment:o})=>{a.parentNode.replaceChild(o,a)})}function w(p){(0,y.fI)(".highlightedSubstring",p).forEach(u=>{const{parentNode:n}=u;u.replaceWith(u.textContent),n.normalize()})}},5539:(A,h,t)=>{t.d(h,{Bt:()=>b,Bz:()=>e,GY:()=>l,L5:()=>R,pB:()=>v});var y=t(573);function S(c,f){c.parentNode.insertBefore(f,c.nextSibling)}function b(c){c.style.display="none"}function w(c,f=1){const I=document.querySelector(c);I&&p(I,f)}function p(c,f=1){const I=getElementAncestor(c,f);I&&b(I)}function d(c){T(c),b(c)}function u(c){c.intersectionObserver||runOnceOnIntersection(c,()=>b(c))}function n(c){c.style.display=""}function r(c){const f=o(c);c.style.display=f}function m(c,f){f?b(c):n(c)}function a(c,f){f?u(c):(clearIntersectionObserver(c),n(c))}function o(c){return T(c),c.defaultDisplay}function T(c){if(c.defaultDisplay)return;const{display:f}=getComputedStyle(c);c.defaultDisplay=f}function e(){return{show:[],hide:[]}}function l(c,f,I){c?f.hide.push(I):f.show.push(I)}function v(c){c.show.forEach(n),c.hide.forEach(b)}function s(c,f,I=.3){f?i(c,I):E(c)}function E(c){c.style.opacity=""}function i(c,f=.3){c.style.opacity=f}function N(c){c.style.order=""}function F(c,f){c.style.order=f}function D(c,f){c.style.background=f}function B(c,f){const I=getFirstElement(f);I&&V(c,I)}function V(c,f){const I=createLink();I.href=c,f.parentNode.append(I),I.append(f)}function C(c,f){const I=getFirstElement(f);I&&g(c,I)}function g(c,f,I={}){const L=createLink(I);L.href=c,L.append(...f.childNodes),f.append(L)}function x(){const c=getURLQueryParam("scrollTo");if(!c)return;const f=document.getElementById(c);f?f.scrollIntoView():console.log(`Element with ID "${c}" was not found.`)}function R(c,f,I=null){const L=`${f}-click-passed`,O=I?k=>(0,y.Yl)(k,c,I):k=>(0,y.Fi)(c,k);return function(k){if(k.hasAttribute(L))return!1;const M=O(k);return M&&M.click(),k.setAttribute(L,""),!0}}function P(c,f,I="text/plain"){const L=new Blob([c],{type:I}),O=URL.createObjectURL(L),k=document.createElement("a");k.href=O,k.download=f,document.body.appendChild(k),k.click(),document.body.removeChild(k),requestAnimationFrame(()=>URL.revokeObjectURL(O))}},6754:(A,h,t)=>{t.d(h,{ZM:()=>y});function y(p,d){Object.assign(p.style,d)}function S(p,d="custom-global-style"){let u=document.getElementById(d);u||(u=document.createElement("style"),u.id=d,u.type="text/css",document.head.appendChild(u)),u.textContent=p}function b(p){return Object.entries(p).map(([d,u])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function w(p){return p?p.split(";").filter(d=>d.trim()!=="").reduce((d,u)=>{const[n,r]=u.split(":").map(a=>a.trim()),m=n.replace(/-([a-z])/g,(a,o)=>o.toUpperCase());return d[m]=r,d},{}):{}}},4921:(A,h,t)=>{t.d(h,{Un:()=>p,XW:()=>b,sg:()=>w,wP:()=>n,xk:()=>y});function y(r,m,a=null){const o=r.querySelector(m);return o?Promise.resolve(o):new Promise(T=>{const e=new MutationObserver(v);e.observe(r,{childList:!0,subtree:!0});let l;a&&(l=setTimeout(()=>{e.disconnect(),console.log(`No element found for selector: ${m}`),T(null)},a));function v(){const s=r.querySelector(m);s&&(l&&clearTimeout(l),e.disconnect(),T(s))}})}function S(r,m){return r.querySelector(m)?new Promise(o=>{const T=new MutationObserver(e);T.observe(r,{childList:!0,subtree:!0});function e(){r.querySelector(m)||(T.disconnect(),o())}}):Promise.resolve()}function b(r,m=400){return new Promise(a=>{let o;const T=new MutationObserver(()=>{clearTimeout(o),e()});function e(){o=setTimeout(()=>{T.disconnect(),a()},m)}e(),T.observe(r,{childList:!0,subtree:!0})})}function w(r,m=250){let a;return(...o)=>{clearTimeout(a),a=setTimeout(()=>r(...o),m)}}async function p(r){document.visibilityState==="visible"?await r():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await r()},{once:!0})}function d(r,m){const a=new IntersectionObserver(o=>{o.forEach(T=>{T.isIntersecting&&(m(),u(r))})});r.intersectionObserver=a,a.observe(r)}function u(r){r.intersectionObserver&&(r.intersectionObserver.disconnect(),r.intersectionObserver=null)}function n(r){r&&(r.disconnect(),r=null)}},3829:(A,h,t)=>{t.d(h,{Ay:()=>S});var y=t(8355);function S(a,o){return!b(a,o)}function b(a,o){if(!o||!o.value)return!0;const T=(0,y._7)(o.value);return w(a,T)}function w(a,o){if(!o||!o.length)return!0;const T=(a||"").toLowerCase();return o.every(e=>p(T,e))}function p(a,o){return o.some(({term:T,isNegative:e})=>{const l=a.includes(T);return e?!l:l})}function d(a,o){return o.value!=null&&a<o.value}function u(a,o){return o.value!=null&&a>o.value}function n(a,o){return o.value==null?!1:a<parseDateFromISO(o.value)}function r(a,o){return o.value==null?!1:a>parseDateFromISO(o.value)}function m(a,o){return o.value&&a!==o.value}},4521:(A,h,t)=>{t.d(h,{z:()=>S});var y=t(3048);function S(b,w=null){return{createGlobalFilter(p,d=null,u=b){return y.V.create(p,d,u)},createSectionFilter(p,d=null,u=b){if(!w)throw new Error("sectionId must be provided to use createSectionFilter.");return y.V.createWithCompositeKey(w,p,d,u)}}}},5884:(A,h,t)=>{t.d(h,{Nm:()=>b});var y=t(9928),S=t(5467);function b(n,r,m={},a={}){const o=(0,y.kU)(a,r.updateValueFromEvent,r.value);return(0,S.E2)(o,m,n)}function w(n,r,m,a,o,T={},e={}){const l=createNumberInput(e,r.updateValueFromEvent,r.value,m,a,o);return createControl(l,T,n)}function p(n,r,m={},a={}){const o=createSelect(a,r.updateValueFromEvent,r.value);return createControl(o,m,n)}function d(n,r,m={},a={}){const o=createDateInput(a,r.updateValueFromEvent,r.value);return createControl(o,m,n)}function u(n,r,m={},a={}){const o=createCheckboxInput(a,r.updateValueFromEvent,r.value);return createControl(o,m,n)}},7877:(A,h,t)=>{t.d(h,{E9:()=>S});var y=t(5884);function S(C,g={},x={}){return(0,y.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,g,x)}function b(C,g={},x={},R=.1,P=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,R,P,5,g,x)}function w(C,g={},x={},R=.1,P=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,R,P,5,g,x)}function p(C,g={},x={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,x)}function d(C,g={},x={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,x)}function u(C,g,x={},R={}){return createNumberFilterControl(C,g,"1","1","999999",x,R)}function n(C,g={},x={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",C,g,x)}function r(C,g={},x={}){return m("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,g,x)}function m(C,g,x={},R={}){return createNumberFilterControl(C,g,"5","0","100",x,R)}function a(C,g={},x={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",g,x)}function o(C,g,x={},R={},P="250"){return createNumberFilterControl(C,g,P,"0","1000000",x,R)}function T(C,g={},x={},R="25"){return o("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,g,x,R)}function e(C,g={},x={},R="25"){return o("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,g,x,R)}function l(C,g={},x={}){return v("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,g,x)}function v(C,g,x={},R={}){return createNumberFilterControl(C,g,"1","0","99999",x,R)}function s(C,g={},x={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","8",g,x)}function E(C,g={},x={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,g,x)}function i(C,g={},x={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,g,x)}function N(C,g={},x={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,g,x)}function F(C,g={},x={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,g,x)}function D(C,g={},x={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",C,g,x)}function B(C,g={},x={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",C,g,x)}function V(C,g,x={}){const R=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],P={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},c=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),f=[],I=()=>g?parseFloat(g.value)||0:C.value,L=()=>{const O=I();f.forEach(({button:k,value:M})=>{const z=M<=O?P.active:P.inactive;Object.assign(k.style,z)})};return R.forEach(({value:O,emoji:k,tooltip:M})=>{const W=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...x},k);W.title=M,W.type="button",W.addEventListener("click",z=>{z.preventDefault(),C.updateValue(O),g&&(g.value=O),L()}),W.addEventListener("mouseenter",()=>{O<=I()||(W.style.background=P.hover.background)}),W.addEventListener("mouseleave",()=>{L()}),f.push({button:W,value:O}),c.appendChild(W)}),L(),g&&(g.addEventListener("input",L),g.addEventListener("change",L)),c}},8355:(A,h,t)=>{t.d(h,{_7:()=>S,fO:()=>y,oM:()=>p});function y(n){if(!n)return[];const m=S(n).flat().filter(a=>a&&!a.isNegative&&a.term).map(a=>a.term);return[...new Set(m)]}function S(n){return n?n.toLowerCase().split(",").map(b).filter(Boolean):[]}function b(n){const r=n.split("/").map(a=>a.trim()).filter(Boolean);if(r.length===0)return null;const m=r.map(w).filter(Boolean);return m.length>0?m:null}function w(n){const r=n.startsWith("!"),m=r?n.slice(1).trim():n;return m?{term:m,isNegative:r}:null}function p(n,r){u(n,m=>m.style.display!=="none",r)}function d(n,r){u(n,m=>m.style.opacity==="",r)}function u(n,r,m){const a=[...n].filter(r).length;m.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${n.length}`}},4292:(A,h,t)=>{t.d(h,{C:()=>b});var y=t(8355),S=t(8506);function b(p,d){const u=(0,y.fO)(p.value);(0,S.hf)(u,d)}function w(p,d){const u=getIncludedSearchStrings(p.value);d.forEach(n=>highlightSubstrings(u,n))}},5213:(A,h,t)=>{t.d(h,{b:()=>b});var y=t(9928),S=t(573);function b(w,p,d=!1,u="customFiltersContainer"){let n=(0,S.Fi)(`#${u}`,w);if(n)if(d)n.remove();else return;n=(0,y.Sw)(),n.id=u,p(n,w)}},8200:(A,h,t)=>{t.d(h,{s:()=>y});function y(S){const{target:b}=S,{type:w}=b;switch(w){case"text":return`"${b.value}"`;case"number":return b.value;case"select-one":return b.value;case"date":return`"${b.value}"`;case"checkbox":return b.checked;default:return console.log(`Unknown input type: ${w}`),null}}},157:(A,h,t)=>{t.d(h,{Fg:()=>y,vx:()=>b});const y=window.GM_setValue,S=window.GM.setValue,b=window.GM_getValue},1870:(A,h,t)=>{t.d(h,{j:()=>y});class y{constructor(b,w){this.value=b,this.onChange=w}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,h,t)=>{t.d(h,{V:()=>p});var y=t(1870),S=t(8200),b=t(3976),w=t(157);class p extends y.j{constructor(u,n=null,r=null){super((0,w.vx)(u,n),r),this.storageKey=u,this.defaultValue=n}static create(u,n=null,r=null){return new p(u,n,r)}static createWithCompositeKey(u,n,r=null,m=null){const a=`${u}-${n}`;return new p(a,r,m)}updateValueFromEvent=u=>{const n=(0,S.s)(u),r=(0,b.$)(n);this.updateValue(r)};updateValue(u,n=!0){this.value!==u&&((0,w.Fg)(this.storageKey,u),this.value=u,n&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(A,h,t)=>{t.d(h,{$:()=>y});function y(S){return S===""?null:JSON.parse(S)}},5406:(A,h,t)=>{t.d(h,{k1:()=>o,z2:()=>m});function y(e,l="common",v=!1){const{pathname:s}=window.location;return S(s,e,l,v)}function S(e,l,v,s=!1){const E=e.split("/");l=l<0?E.length+l:l;const i=E[l]||v;return s&&console.log(`Pathname element: ${i}`),i}function b(e,l="common",v=!1){const s=y(e,"",v);return w(s,l,v)}function w(e,l,v){if(!e)return l;const s=e.split("-").at(-1);return v&&console.log(`Pathname element ending: ${s}`),s}function p(e,l,v="common",s=!1){const E=S(e,l,"",s);return w(E,v,s)}function d(e){return new URLSearchParams(window.location.search).get(e)}function u(e){return e.split("?")[0]}function n(e){return window.location.pathname.includes(e)}function r(e){return e.some(l=>n(l))}function m(...e){return window.location.pathname.split("/").some(v=>e.includes(v))}function a(e){try{const l=new URL(window.location.href);Object.entries(e).forEach(([v,s])=>{l.searchParams.set(v,s)}),window.location.href=l.toString()}catch(l){console.error("Failed to redirect:",l)}}function o(e,l=[]){const v={pathname:window.location.pathname};l.forEach(F=>{v[F]=d(F)});let s=!1;async function E(){if(s)return;const F={pathname:window.location.pathname};if(l.forEach(D=>{F[D]=d(D)}),Object.keys(v).some(D=>v[D]!==F[D])){Object.assign(v,F),s=!0;try{await e()}catch(D){console.error("Error in URL observer callback:",D)}finally{s=!1}}}function i(){E().catch(F=>{console.error("Error in URL change handler:",F)})}let N=window.location.href;setInterval(()=>{window.location.href!==N&&(N=window.location.href,i())},200),window.addEventListener("popstate",i)}function T(e=[]){o(()=>window.location.reload(),e)}},3539:(A,h,t)=>{t.a(A,async(y,S)=>{try{let F=function(){return(0,l.z2)("org","reviews")},B=function(){V(n.Z.REVIEWS_VIEW_SUMMARY),V(n.Z.TAGS_CONTAINER),V(n.Z.FRIENDS_SUGGEST)},V=function(f,I=i.activeTabWrapper){const L=(0,d.Fi)(f,I);L&&(0,p.Bt)(L)},C=function(){if(!i.isFiltersInitialized){const{createGlobalFilter:f}=(0,m.z)(R);i.reviewTextFilter=f("review-text-filter"),i.isFiltersInitialized=!0}},g=function(f,I){(0,a.ZM)(f,r.r.FILTERS_CONTAINER),x();const L=(0,u.E9)(i.reviewTextFilter,r.r.CONTROL,r.r.TEXT_INPUT);i.reviewsInfo=(0,v.Sw)(r.r.INFO),f.append(L,i.reviewsInfo),I.append(f)},x=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},c=function(){i.activeTabWrapper=null,i.isFiltersInitialized=!1,i.reviewTextFilter=null,i.reviewsInfo=null,(0,o.wP)(i.reviewsObserver)};var b=t(5213),w=t(3829),p=t(5539),d=t(573),u=t(7877),n=t(6613),r=t(3613),m=t(4521),a=t(6754),o=t(4921),T=t(4292),e=t(8506),l=t(5406),v=t(9928),s=t(8355);const E=(0,p.L5)("span.business-review-view__expand","read-more"),i={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,o.Un)(N),(0,l.k1)(async()=>{await N(!0)});async function N(f=!1){f&&c(),F()&&(await(0,o.XW)(document.body),await D())}async function D(){i.activeTabWrapper=await(0,o.xk)(document,n.Z.ACTIVE_TAB_WRAPPER),B(),C();const f=(0,d.Fi)(n.Z.FILTER_CONTAINER_WRAP,i.activeTabWrapper,!0);(0,b.b)(f,g,!0),await R();const I=(0,d.Fi)(n.Z.REVIEWS_CONTAINER,i.activeTabWrapper);i.reviewsObserver=new MutationObserver((0,o.sg)(R)),i.reviewsObserver.observe(I,{childList:!0})}async function R(){i.isFiltersInitialized||C();const f=(0,d.fI)(n.Z.REVIEW_CARD,i.activeTabWrapper),I=(0,p.Bz)();await Promise.all([...f].map(async L=>{const O=await P(L);(0,p.GY)(O,I,L)})),(0,p.pB)(I),(0,s.oM)(f,i.reviewsInfo)}async function P(f){E(f)&&await(0,o.XW)(f),(0,e.kZ)(f);const I=(0,d.Fi)(n.Z.REVIEW_TEXT_WRAP,f);if(!I)return!0;i.reviewTextFilter.value&&(0,T.C)(i.reviewTextFilter,I);const L=I.innerText;return(0,w.Ay)(L,i.reviewTextFilter)}S()}catch(E){S(E)}},1)},6613:(A,h,t)=>{t.d(h,{Z:()=>y});const y={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(A,h,t)=>{t.d(h,{r:()=>S});const S={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},G={};function U(A){var h=G[A];if(h!==void 0)return h.exports;var t=G[A]={exports:{}};return $[A](t,t.exports,U),t.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",y=b=>{b&&b.d<1&&(b.d=1,b.forEach(w=>w.r--),b.forEach(w=>w.r--?w.r++:w()))},S=b=>b.map(w=>{if(w!==null&&typeof w=="object"){if(w[A])return w;if(w.then){var p=[];p.d=0,w.then(n=>{d[h]=n,y(p)},n=>{d[t]=n,y(p)});var d={};return d[A]=n=>n(p),d}}var u={};return u[A]=n=>{},u[h]=w,u});U.a=(b,w,p)=>{var d;p&&((d=[]).d=-1);var u=new Set,n=b.exports,r,m,a,o=new Promise((T,e)=>{a=e,m=T});o[h]=n,o[A]=T=>(d&&T(d),u.forEach(T),o.catch(e=>{})),b.exports=o,w(T=>{r=S(T);var e,l=()=>r.map(s=>{if(s[t])throw s[t];return s[h]}),v=new Promise(s=>{e=()=>s(l),e.r=0;var E=i=>i!==d&&!u.has(i)&&(u.add(i),i&&!i.d&&(e.r++,i.push(e)));r.map(i=>i[A](E))});return e.r?v:l()},T=>(T?a(o[t]=T):m(n),y(d))),d&&d.d<0&&(d.d=0)}})(),U.d=(A,h)=>{for(var t in h)U.o(h,t)&&!U.o(A,t)&&Object.defineProperty(A,t,{enumerable:!0,get:h[t]})},U.o=(A,h)=>Object.prototype.hasOwnProperty.call(A,h);var j=U(3539)})();})();
