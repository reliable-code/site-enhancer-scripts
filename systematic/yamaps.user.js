// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76970372
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={7273:(T,p,n)=>{n.d(p,{S:()=>v});var w=n(5558);function F(h={},s=null){return createElement("span",h,s)}function v(h={},s=null){return(0,w.n)("div",h,s)}},5467:(T,p,n)=>{n.d(p,{E2:()=>F});var w=n(7273);function F(s,d={},i=null){const u=(0,w.S)(d,i);return u.append(s),u}function v(s,d=null,i={},u={}){const e=createActionLink(s,d,u);return F(e,i)}function h(s,d=null,i=null,u={},e={},c={}){const o=createActionLinkWithIcon(s,i,d,e,c);return F(o,u)}},5558:(T,p,n)=>{n.d(p,{n:()=>F});var w=n(6754);function F(v,h,s=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const d=document.createElement(v);return(0,w.ZM)(d,h),s&&(d.innerHTML=s),d}},740:(T,p,n)=>{n.d(p,{kU:()=>v});var w=n(5558),F=n(4921);function v(e,c,o){const t=i(e,"text",c);return t.value=o,t}function h(e,c,o,t,y,r){const l=i(e,"number",c);return l.value=o,l.step=t,l.min=y,l.max=r,l}function s(e,c,o){const t=i(e,"date",c);return t.value=o,t}function d(e,c,o){const t=i(e,"checkbox",c);return t.checked=o,t}function i(e={},c=null,o=null){const t=(0,w.n)("input",e);return c&&(t.type=c),o&&(t.addEventListener("keyup",(0,F.sg)(o,200)),t.addEventListener("change",(0,F.sg)(o,100))),t}function u(e,c,o){const t=createElement("select",e);return c&&t.addEventListener("change",c),t.value=o,t}},573:(T,p,n)=>{n.d(p,{Fi:()=>F,Yl:()=>s,fI:()=>v});function w(r,l=document){return!!l.querySelector(r)}function F(r,l=document,m=!1){const E=l.querySelector(r);return m&&!E&&console.log(`No element found for selector: ${r}`),E}function v(r,l=document,m=!1){const E=l.querySelectorAll(r);return m&&!E.length&&console.log(`No elements found for selector: ${r}`),E}function h(r,l=1){let m=r;for(let E=0;E<l;E++){if(!m.parentElement)return null;m=m.parentElement}return m}function s(r,l,m){return[...r.querySelectorAll(l)].find(E=>E.textContent.trim().includes(m))}function d(r,l,m=!1,E=!1,N=null){const x=F(l,r);return i(x,m,E,N)}function i(r,l=!1,m=!1,E=null){if(!r)return E===null?(console.log("No element found"),null):E;const N=r.innerText;return c(N,l,m)}function u(r,l,m=!1){const E=r[l];return i(E,m)}function e(r,l=!1,m=!1){const E=r.textContent;return c(E,l,m)}function c(r,l,m){l&&(r=removeNonNumber(r)),m&&(r=r.replace(",","."));const E=Number(r);return Number.isNaN(E)?(console.log(`Invalid number: ${r}`),0):E}function o(r){return[...r.childNodes].find(l=>l.nodeType===Node.TEXT_NODE)}function t(r){const l=m=>m.nodeType===Node.TEXT_NODE&&m.textContent.trim()!==""?[m]:[...m.childNodes].flatMap(l);return l(r)}function y(r){return normalizeSpacing(r.textContent)}},8506:(T,p,n)=>{n.d(p,{hf:()=>F,kZ:()=>h});var w=n(573);function F(s,d){s.forEach(i=>v(d,i))}function v(s,d){if(!d)return;const i=new RegExp(`(${d})`,"gi"),u=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null);let e=u.nextNode();const c=[];for(;e;){const{textContent:o}=e;if(i.test(o)){const t=document.createDocumentFragment();let y=0;o.replace(i,(r,l,m)=>{m>y&&t.appendChild(document.createTextNode(o.slice(y,m)));const E=document.createElement("span");E.className="highlightedSubstring",E.style.backgroundColor="yellow",E.textContent=r,t.appendChild(E),y=m+r.length}),y<o.length&&t.appendChild(document.createTextNode(o.slice(y))),c.push({node:e,fragment:t})}e=u.nextNode()}c.forEach(({node:o,fragment:t})=>{o.parentNode.replaceChild(t,o)})}function h(s){(0,w.fI)(".highlightedSubstring",s).forEach(i=>{const{parentNode:u}=i;i.replaceWith(i.textContent),u.normalize()})}},5539:(T,p,n)=>{n.d(p,{Bt:()=>v,Bz:()=>r,GY:()=>l,L5:()=>g,pB:()=>m});var w=n(573);function F(a,f){a.parentNode.insertBefore(f,a.nextSibling)}function v(a){a.style.display="none"}function h(a,f=1){const S=document.querySelector(a);S&&s(S,f)}function s(a,f=1){const S=getElementAncestor(a,f);S&&v(S)}function d(a){y(a),v(a)}function i(a){a.intersectionObserver||runOnceOnIntersection(a,()=>v(a))}function u(a){a.style.display=""}function e(a){const f=t(a);a.style.display=f}function c(a,f){f?v(a):u(a)}function o(a,f){f?i(a):(clearIntersectionObserver(a),u(a))}function t(a){return y(a),a.dataset.defaultDisplay}function y(a){if(a.dataset.defaultDisplay)return;const{display:f}=getComputedStyle(a);a.dataset.defaultDisplay=f}function r(){return{show:[],hide:[]}}function l(a,f,S){a?f.hide.push(S):f.show.push(S)}function m(a){a.show.forEach(u),a.hide.forEach(v)}function E(a,f,S=.3){f?x(a,S):N(a)}function N(a){a.style.opacity=""}function x(a,f=.3){a.style.opacity=f}function P(a){a.style.order=""}function k(a,f){a.style.order=f}function D(a,f){a.style.background=f}function z(a,f){const S=getFirstElement(f);S&&W(a,S)}function W(a,f){const S=createLink();S.href=a,f.parentNode.append(S),S.append(f)}function U(a,f){const S=getFirstElement(f);S&&C(a,S)}function C(a,f,S={}){const I=createLink(S);I.href=a,I.append(...f.childNodes),f.append(I)}function b(){const a=getURLQueryParam("scrollTo");if(!a)return;const f=document.getElementById(a);f?f.scrollIntoView():console.log(`Element with ID "${a}" was not found.`)}function g(a,f,S=null){const I=`${f}-click-passed`,L=S?R=>(0,w.Yl)(R,a,S):R=>(0,w.Fi)(a,R);return function(R){if(R.hasAttribute(I))return!1;const B=L(R);return B&&B.click(),R.setAttribute(I,""),!0}}function A(a,f,S="text/plain"){const I=new Blob([a],{type:S}),L=URL.createObjectURL(I),R=document.createElement("a");R.href=L,R.download=f,document.body.appendChild(R),R.click(),document.body.removeChild(R),requestAnimationFrame(()=>URL.revokeObjectURL(L))}},6754:(T,p,n)=>{n.d(p,{ZM:()=>w});function w(s,d){Object.assign(s.style,d)}function F(s,d="custom-global-style"){let i=document.getElementById(d);i||(i=document.createElement("style"),i.id=d,i.type="text/css",document.head.appendChild(i)),i.textContent=s}function v(s){return Object.entries(s).map(([d,i])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${i};`).join(" ")}function h(s){return s?s.split(";").filter(d=>d.trim()!=="").reduce((d,i)=>{const[u,e]=i.split(":").map(o=>o.trim()),c=u.replace(/-([a-z])/g,(o,t)=>t.toUpperCase());return d[c]=e,d},{}):{}}},4921:(T,p,n)=>{n.d(p,{Un:()=>s,XW:()=>v,sg:()=>h,wP:()=>u,xk:()=>w});function w(e,c,o=null){const t=e.querySelector(c);return t?Promise.resolve(t):new Promise(y=>{const r=new MutationObserver(m);r.observe(e,{childList:!0,subtree:!0});let l;o&&(l=setTimeout(()=>{r.disconnect(),console.log(`No element found for selector: ${c}`),y(null)},o));function m(){const E=e.querySelector(c);E&&(l&&clearTimeout(l),r.disconnect(),y(E))}})}function F(e,c){return e.querySelector(c)?new Promise(t=>{const y=new MutationObserver(r);y.observe(e,{childList:!0,subtree:!0});function r(){e.querySelector(c)||(y.disconnect(),t())}}):Promise.resolve()}function v(e,c=400){return new Promise(o=>{let t;const y=new MutationObserver(()=>{clearTimeout(t),r()});function r(){t=setTimeout(()=>{y.disconnect(),o()},c)}r(),y.observe(e,{childList:!0,subtree:!0})})}function h(e,c=250){let o;return function(...t){const y=this;clearTimeout(o),o=setTimeout(()=>e.apply(y,t),c)}}async function s(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function d(e,c){const o=new IntersectionObserver(t=>{t.forEach(y=>{y.isIntersecting&&(c(),i(e))})});e.intersectionObserver=o,o.observe(e)}function i(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function u(e){e&&(e.disconnect(),e=null)}},3829:(T,p,n)=>{n.d(p,{Ay:()=>F});var w=n(8355);function F(o,t){return!v(o,t)}function v(o,t){if(!t||!t.value)return!0;const y=(0,w._7)(t.value);return h(o,y)}function h(o,t){if(!t||!t.length)return!0;const y=(o||"").toLowerCase();return t.every(r=>s(y,r))}function s(o,t){return t.some(({term:y,isNegative:r})=>{const l=o.includes(y);return r?!l:l})}function d(o,t){return t.value!=null&&o<t.value}function i(o,t){return t.value!=null&&o>t.value}function u(o,t){return t.value==null?!1:o<parseDateFromISO(t.value)}function e(o,t){return t.value==null?!1:o>parseDateFromISO(t.value)}function c(o,t){return t.value&&o!==t.value}},4521:(T,p,n)=>{n.d(p,{z:()=>F});var w=n(3048);function F(v,h=null){return{createGlobalFilter(s,d=null,i=v){return w.V.create(s,d,i)},createSectionFilter(s,d=null,i=v){if(!h)throw new Error("sectionId must be provided to use createSectionFilter.");return w.V.createWithCompositeKey(h,s,d,i)}}}},5884:(T,p,n)=>{n.d(p,{Nm:()=>v});var w=n(5467),F=n(740);function v(u,e,c={},o={}){const t=(0,F.kU)(o,e.updateValueFromEvent,e.value);return(0,w.E2)(t,c,u)}function h(u,e,c,o,t,y={},r={}){const l=createNumberInput(r,e.updateValueFromEvent,e.value,c,o,t);return createControl(l,y,u)}function s(u,e,c={},o={}){const t=createSelect(o,e.updateValueFromEvent,e.value);return createControl(t,c,u)}function d(u,e,c={},o={}){const t=createDateInput(o,e.updateValueFromEvent,e.value);return createControl(t,c,u)}function i(u,e,c={},o={}){const t=createCheckboxInput(o,e.updateValueFromEvent,e.value);return createControl(t,c,u)}},7877:(T,p,n)=>{n.d(p,{E9:()=>F});var w=n(5884);function F(C,b={},g={}){return(0,w.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,b,g)}function v(C,b={},g={},A=.1,a=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,A,a,5,b,g)}function h(C,b={},g={},A=.1,a=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,A,a,5,b,g)}function s(C,b={},g={}){return i("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,b,g)}function d(C,b={},g={}){return i("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,b,g)}function i(C,b,g={},A={}){return createNumberFilterControl(C,b,"1","1","999999",g,A)}function u(C,b={},g={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",C,b,g)}function e(C,b={},g={}){return c("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,b,g)}function c(C,b,g={},A={}){return createNumberFilterControl(C,b,"5","0","100",g,A)}function o(C,b={},g={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",b,g)}function t(C,b,g={},A={},a="250"){return createNumberFilterControl(C,b,a,"0","1000000",g,A)}function y(C,b={},g={},A="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,b,g,A)}function r(C,b={},g={},A="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,b,g,A)}function l(C,b={},g={}){return m("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,b,g)}function m(C,b,g={},A={}){return createNumberFilterControl(C,b,"1","0","99999",g,A)}function E(C,b={},g={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","8",b,g)}function N(C,b={},g={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,b,g)}function x(C,b={},g={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,b,g)}function P(C,b={},g={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,b,g)}function k(C,b={},g={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,b,g)}function D(C,b={},g={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",C,b,g)}function z(C,b={},g={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",C,b,g)}function W(C,b={},g={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",C,b,g)}function U(C,b,g={}){const A=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],a={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},f=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),S=[],I=()=>b?parseFloat(b.value)||0:C.value,L=()=>{const R=I();S.forEach(({button:B,value:G})=>{const M=G<=R?a.active:a.inactive;Object.assign(B.style,M)})};return A.forEach(({value:R,emoji:B,tooltip:G})=>{const O=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...g},B);O.title=G,O.type="button",O.addEventListener("click",M=>{M.preventDefault(),C.updateValue(R),b&&(b.value=R),L()}),O.addEventListener("mouseenter",()=>{R<=I()||(O.style.background=a.hover.background)}),O.addEventListener("mouseleave",()=>{L()}),S.push({button:O,value:R}),f.appendChild(O)}),L(),b&&(b.addEventListener("input",L),b.addEventListener("change",L)),f}},8355:(T,p,n)=>{n.d(p,{_7:()=>F,fO:()=>w,oM:()=>s});function w(u){if(!u)return[];const c=F(u).flat().filter(o=>o&&!o.isNegative&&o.term).map(o=>o.term);return[...new Set(c)]}function F(u){return u?u.toLowerCase().split(",").map(v).filter(Boolean):[]}function v(u){const e=u.split("/").map(o=>o.trim()).filter(Boolean);if(e.length===0)return null;const c=e.map(h).filter(Boolean);return c.length>0?c:null}function h(u){const e=u.startsWith("!"),c=e?u.slice(1).trim():u;return c?{term:c,isNegative:e}:null}function s(u,e){i(u,c=>c.style.display!=="none",e)}function d(u,e){i(u,c=>c.style.opacity==="",e)}function i(u,e,c){const o=[...u].filter(e).length;c.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${o} \u0438\u0437 ${u.length}`}},4292:(T,p,n)=>{n.d(p,{C:()=>v});var w=n(8355),F=n(8506);function v(s,d){const i=(0,w.fO)(s.value);(0,F.hf)(i,d)}function h(s,d){const i=getIncludedSearchStrings(s.value);d.forEach(u=>highlightSubstrings(i,u))}},5213:(T,p,n)=>{n.d(p,{b:()=>v});var w=n(573),F=n(7273);function v(h,s,d=!1,i="customFiltersContainer"){let u=(0,w.Fi)(`#${i}`,h);if(u)if(d)u.remove();else return;u=(0,F.S)(),u.id=i,s(u,h)}},8200:(T,p,n)=>{n.d(p,{s:()=>w});function w(F){const{target:v}=F,{type:h}=v;switch(h){case"text":return`"${v.value}"`;case"number":return v.value;case"select-one":return v.value;case"date":return`"${v.value}"`;case"checkbox":return v.checked;default:return console.log(`Unknown input type: ${h}`),null}}},157:(T,p,n)=>{n.d(p,{Fg:()=>w,vx:()=>v});const w=window.GM_setValue,F=window.GM.setValue,v=window.GM_getValue},1870:(T,p,n)=>{n.d(p,{j:()=>w});class w{constructor(v,h){this.value=v,this.onChange=h}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,p,n)=>{n.d(p,{V:()=>s});var w=n(1870),F=n(8200),v=n(3976),h=n(157);class s extends w.j{constructor(i,u=null,e=null){super((0,h.vx)(i,u),e),this.storageKey=i,this.defaultValue=u}static create(i,u=null,e=null){return new s(i,u,e)}static createWithCompositeKey(i,u,e=null,c=null){const o=`${i}-${u}`;return new s(o,e,c)}updateValueFromEvent=i=>{const u=(0,F.s)(i),e=(0,v.$)(u);this.updateValue(e)};updateValue(i,u=!0){this.value!==i&&((0,h.Fg)(this.storageKey,i),this.value=i,u&&this.onChangeIfDefined())}clearValue(i=!1){this.updateValue(null,i)}resetValue(i=!1){this.updateValue(this.defaultValue,i)}}},3976:(T,p,n)=>{n.d(p,{$:()=>w});function w(F){return F===""?null:JSON.parse(F)}},5406:(T,p,n)=>{n.d(p,{k1:()=>t,z2:()=>c});function w(r,l="common",m=!1){const{pathname:E}=window.location;return F(E,r,l,m)}function F(r,l,m,E=!1){const N=r.split("/");l=l<0?N.length+l:l;const x=N[l]||m;return E&&console.log(`Pathname element: ${x}`),x}function v(r,l="common",m=!1){const E=w(r,"",m);return h(E,l,m)}function h(r,l,m){if(!r)return l;const E=r.split("-").at(-1);return m&&console.log(`Pathname element ending: ${E}`),E}function s(r,l,m="common",E=!1){const N=F(r,l,"",E);return h(N,m,E)}function d(r){return new URLSearchParams(window.location.search).get(r)}function i(r){return r.split("?")[0]}function u(r){return window.location.pathname.includes(r)}function e(r){return r.some(l=>u(l))}function c(...r){return window.location.pathname.split("/").some(m=>r.includes(m))}function o(r){try{const l=new URL(window.location.href);Object.entries(r).forEach(([m,E])=>{l.searchParams.set(m,E)}),window.location.href=l.toString()}catch(l){console.error("Failed to redirect:",l)}}function t(r,l=[]){const m={pathname:window.location.pathname};l.forEach(k=>{m[k]=d(k)});let E=!1;async function N(){if(E)return;const k={pathname:window.location.pathname};if(l.forEach(D=>{k[D]=d(D)}),Object.keys(m).some(D=>m[D]!==k[D])){Object.assign(m,k),E=!0;try{await r()}catch(D){console.error("Error in URL observer callback:",D)}finally{E=!1}}}function x(){N().catch(k=>{console.error("Error in URL change handler:",k)})}let P=window.location.href;setInterval(()=>{window.location.href!==P&&(P=window.location.href,x())},200),window.addEventListener("popstate",x)}function y(r=[]){t(()=>window.location.reload(),r)}},3539:(T,p,n)=>{n.a(T,async(w,F)=>{try{let k=function(){return(0,l.z2)("org","reviews")},z=function(){W(u.Z.REVIEWS_VIEW_SUMMARY),W(u.Z.TAGS_CONTAINER),W(u.Z.FRIENDS_SUGGEST)},W=function(f,S=x.activeTabWrapper){const I=(0,d.Fi)(f,S);I&&(0,s.Bt)(I)},U=function(){if(!x.isFiltersInitialized){const{createGlobalFilter:f}=(0,c.z)(g);x.reviewTextFilter=f("review-text-filter"),x.isFiltersInitialized=!0}},C=function(f,S){(0,o.ZM)(f,e.r.FILTERS_CONTAINER),b();const I=(0,i.E9)(x.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);x.reviewsInfo=(0,E.S)(e.r.INFO),f.append(I,x.reviewsInfo),S.append(f)},b=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},a=function(){x.activeTabWrapper=null,x.isFiltersInitialized=!1,x.reviewTextFilter=null,x.reviewsInfo=null,(0,t.wP)(x.reviewsObserver)};var v=n(5213),h=n(3829),s=n(5539),d=n(573),i=n(7877),u=n(6613),e=n(3613),c=n(4521),o=n(6754),t=n(4921),y=n(4292),r=n(8506),l=n(5406),m=n(8355),E=n(7273);const N=(0,s.L5)("span.business-review-view__expand","read-more"),x={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,t.Un)(P),(0,l.k1)(async()=>{await P(!0)});async function P(f=!1){f&&a(),k()&&(await(0,t.XW)(document.body),await D())}async function D(){x.activeTabWrapper=await(0,t.xk)(document,u.Z.ACTIVE_TAB_WRAPPER),z(),U();const f=(0,d.Fi)(u.Z.FILTER_CONTAINER_WRAP,x.activeTabWrapper,!0);(0,v.b)(f,C,!0),await g();const S=(0,d.Fi)(u.Z.REVIEWS_CONTAINER,x.activeTabWrapper);x.reviewsObserver=new MutationObserver((0,t.sg)(g)),x.reviewsObserver.observe(S,{childList:!0})}async function g(){x.isFiltersInitialized||U();const f=(0,d.fI)(u.Z.REVIEW_CARD,x.activeTabWrapper),S=(0,s.Bz)();await Promise.all([...f].map(async I=>{const L=await A(I);(0,s.GY)(L,S,I)})),(0,s.pB)(S),(0,m.oM)(f,x.reviewsInfo)}async function A(f){N(f)&&await(0,t.XW)(f),(0,r.kZ)(f);const S=(0,d.Fi)(u.Z.REVIEW_TEXT_WRAP,f);if(!S)return!0;x.reviewTextFilter.value&&(0,y.C)(x.reviewTextFilter,S);const I=S.innerText;return(0,h.Ay)(I,x.reviewTextFilter)}F()}catch(N){F(N)}},1)},6613:(T,p,n)=>{n.d(p,{Z:()=>w});const w={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(T,p,n)=>{n.d(p,{r:()=>F});const F={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},$={};function V(T){var p=$[T];if(p!==void 0)return p.exports;var n=$[T]={exports:{}};return j[T](n,n.exports,V),n.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",p=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",w=v=>{v&&v.d<1&&(v.d=1,v.forEach(h=>h.r--),v.forEach(h=>h.r--?h.r++:h()))},F=v=>v.map(h=>{if(h!==null&&typeof h=="object"){if(h[T])return h;if(h.then){var s=[];s.d=0,h.then(u=>{d[p]=u,w(s)},u=>{d[n]=u,w(s)});var d={};return d[T]=u=>u(s),d}}var i={};return i[T]=u=>{},i[p]=h,i});V.a=(v,h,s)=>{var d;s&&((d=[]).d=-1);var i=new Set,u=v.exports,e,c,o,t=new Promise((y,r)=>{o=r,c=y});t[p]=u,t[T]=y=>(d&&y(d),i.forEach(y),t.catch(r=>{})),v.exports=t,h(y=>{e=F(y);var r,l=()=>e.map(E=>{if(E[n])throw E[n];return E[p]}),m=new Promise(E=>{r=()=>E(l),r.r=0;var N=x=>x!==d&&!i.has(x)&&(i.add(x),x&&!x.d&&(r.r++,x.push(r)));e.map(x=>x[T](N))});return r.r?m:l()},y=>(y?o(t[n]=y):c(u),w(d))),d&&d.d<0&&(d.d=0)}})(),V.d=(T,p)=>{for(var n in p)V.o(p,n)&&!V.o(T,n)&&Object.defineProperty(T,n,{enumerable:!0,get:p[n]})},V.o=(T,p)=>Object.prototype.hasOwnProperty.call(T,p);var Z=V(3539)})();})();
