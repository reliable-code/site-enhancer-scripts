// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77116688
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Y={7273:(S,m,n)=>{n.d(m,{S:()=>h});var w=n(5558);function y(v={},s=null){return createElement("span",v,s)}function h(v={},s=null){return(0,w.n)("div",v,s)}},5467:(S,m,n)=>{n.d(m,{E2:()=>y});var w=n(7273);function y(s,l={},i=null){const d=(0,w.S)(l,i);return d.append(s),d}function h(s,l=null,i={},d={}){const e=createActionLink(s,l,d);return y(e,i)}function v(s,l=null,i=null,d={},e={},a={}){const o=createActionLinkWithIcon(s,i,l,e,a);return y(o,d)}},5558:(S,m,n)=>{n.d(m,{n:()=>y});var w=n(6754);function y(h,v,s=null){if(typeof v!="object"||v===null)throw new TypeError("styles should be an object");const l=document.createElement(h);return(0,w.ZM)(l,v),s&&(l.innerHTML=s),l}},740:(S,m,n)=>{n.d(m,{kU:()=>h});var w=n(5558),y=n(4921);function h(e,a,o){const t=i(e,"text",a);return t.value=o,t}function v(e,a,o,t,F,c){const u=i(e,"number",a);return u.value=o,u.step=t,u.min=F,u.max=c,u}function s(e,a,o){const t=i(e,"date",a);return t.value=o,t}function l(e,a,o){const t=i(e,"checkbox",a);return t.checked=o,t}function i(e={},a=null,o=null){const t=(0,w.n)("input",e);return a&&(t.type=a),o&&(t.addEventListener("keyup",(0,y.sg)(o,200)),t.addEventListener("change",(0,y.sg)(o,100))),t}function d(e,a,o){const t=createElement("select",e);return a&&t.addEventListener("change",a),t.value=o,t}},573:(S,m,n)=>{n.d(m,{Fi:()=>y,Yl:()=>s,fI:()=>h});function w(c,u=document){return!!u.querySelector(c)}function y(c,u=document,f=!1){const p=u.querySelector(c);return f&&!p&&console.log(`No element found for selector: ${c}`),p}function h(c,u=document,f=!1){const p=u.querySelectorAll(c);return f&&!p.length&&console.log(`No elements found for selector: ${c}`),p}function v(c,u=1){let f=c;for(let p=0;p<u;p++){if(!f.parentElement)return null;f=f.parentElement}return f}function s(c,u,f){return[...c.querySelectorAll(u)].find(p=>p.textContent.trim().includes(f))}function l(c,u,f=!1,p=!1,I=null){const x=y(u,c);return i(x,f,p,I)}function i(c,u=!1,f=!1,p=null){if(!c)return p===null?(console.log("No element found"),null):p;const I=c.innerText;return a(I,u,f)}function d(c,u,f=!1){const p=c[u];return i(p,f)}function e(c,u=!1,f=!1){const p=c.textContent;return a(p,u,f)}function a(c,u,f){u&&(c=removeNonNumber(c)),f&&(c=c.replace(",","."));const p=Number(c);return Number.isNaN(p)?(console.log(`Invalid number: ${c}`),0):p}function o(c){return[...c.childNodes].find(u=>u.nodeType===Node.TEXT_NODE)}function t(c){const u=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(u);return u(c)}function F(c){return normalizeSpacing(c.textContent)}},8506:(S,m,n)=>{n.d(m,{hf:()=>y,kZ:()=>v});var w=n(573);function y(s,l){s.forEach(i=>h(l,i))}function h(s,l){if(!l)return;const i=new RegExp(`(${l})`,"gi"),d=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null);let e=d.nextNode();const a=[];for(;e;){const{textContent:o}=e;if(i.test(o)){const t=document.createDocumentFragment();let F=0;o.replace(i,(c,u,f)=>{f>F&&t.appendChild(document.createTextNode(o.slice(F,f)));const p=document.createElement("span");p.className="highlightedSubstring",p.style.backgroundColor="yellow",p.textContent=c,t.appendChild(p),F=f+c.length}),F<o.length&&t.appendChild(document.createTextNode(o.slice(F))),a.push({node:e,fragment:t})}e=d.nextNode()}a.forEach(({node:o,fragment:t})=>{o.parentNode.replaceChild(t,o)})}function v(s){(0,w.fI)(".highlightedSubstring",s).forEach(i=>{const{parentNode:d}=i;i.replaceWith(i.textContent),d.normalize()})}},5539:(S,m,n)=>{n.d(m,{Bt:()=>h,Bz:()=>u,GY:()=>f,L5:()=>z,pB:()=>p});var w=n(573);function y(r,E){r.parentNode.insertBefore(E,r.nextSibling)}function h(r){r.style.display="none"}function v(r,E=1){const T=document.querySelector(r);T&&s(T,E)}function s(r,E=1){const T=getElementAncestor(r,E);T&&h(T)}function l(r,E,T){const V=findElementByText(r,E,T);V&&h(V)}function i(r){c(r),h(r)}function d(r){r.intersectionObserver||runOnceOnIntersection(r,()=>h(r))}function e(r){r.style.display=""}function a(r){const E=F(r);r.style.display=E}function o(r,E){E?h(r):e(r)}function t(r,E){E?d(r):(clearIntersectionObserver(r),e(r))}function F(r){return c(r),r.dataset.defaultDisplay}function c(r){if(r.dataset.defaultDisplay)return;const{display:E}=getComputedStyle(r);r.dataset.defaultDisplay=E}function u(){return{show:[],hide:[]}}function f(r,E,T){r?E.hide.push(T):E.show.push(T)}function p(r){r.show.forEach(e),r.hide.forEach(h)}function I(r,E,T=.3){E?k(r,T):x(r)}function x(r){r.style.opacity=""}function k(r,E=.3){r.style.opacity=E}function B(r){r.style.order=""}function O(r,E){r.style.order=E}function A(r,E,T,V="inline-flex"){E.style.display=r?V:"none",T.style.display=r?"none":V}function U(r,E=.3){r.style.transition="opacity 0.3s",r.style.opacity=E,b(r)}function $(r){r.style.opacity="",L(r)}function C(r){r.style.animation="loading-pulse 2.5s ease-in-out infinite",b(r)}function g(r){r.style.animation="",L(r)}function b(r){r.style.pointerEvents="none",r.style.cursor="wait"}function L(r){r.style.pointerEvents="",r.style.cursor=""}function W(r,E){const T=getFirstElement(E);T&&N(r,T)}function N(r,E){const T=createLink();T.href=r,E.parentNode.append(T),T.append(E)}function R(r,E){const T=getFirstElement(E);T&&D(r,T)}function D(r,E,T={}){const V=createLink(T);V.href=r,V.append(...E.childNodes),E.append(V)}function M(){const r=getURLQueryParam("scrollTo");if(!r)return;const E=document.getElementById(r);E?E.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function z(r,E,T=null){const V=`${E}-click-passed`,Z=T?P=>(0,w.Yl)(P,r,T):P=>(0,w.Fi)(r,P);return function(P){if(P.hasAttribute(V))return!1;const X=Z(P);return X&&X.click(),P.setAttribute(V,""),!0}}function j(r,E,T="text/plain"){const V=new Blob([r],{type:T}),Z=URL.createObjectURL(V),P=document.createElement("a");P.href=Z,P.download=E,document.body.appendChild(P),P.click(),document.body.removeChild(P),requestAnimationFrame(()=>URL.revokeObjectURL(Z))}},6754:(S,m,n)=>{n.d(m,{ZM:()=>w});function w(s,l){Object.assign(s.style,l)}function y(s,l="custom-global-style"){let i=document.getElementById(l);i||(i=document.createElement("style"),i.id=l,i.type="text/css",document.head.appendChild(i)),i.textContent=s}function h(s){return Object.entries(s).map(([l,i])=>`${l.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${i};`).join(" ")}function v(s){return s?s.split(";").filter(l=>l.trim()!=="").reduce((l,i)=>{const[d,e]=i.split(":").map(o=>o.trim()),a=d.replace(/-([a-z])/g,(o,t)=>t.toUpperCase());return l[a]=e,l},{}):{}}},4921:(S,m,n)=>{n.d(m,{Un:()=>s,XW:()=>h,sg:()=>v,wP:()=>d,xk:()=>w});function w(e,a,o=null){const t=e.querySelector(a);return t?Promise.resolve(t):new Promise(F=>{const c=new MutationObserver(f);c.observe(e,{childList:!0,subtree:!0});let u;o&&(u=setTimeout(()=>{c.disconnect(),console.log(`No element found for selector: ${a}`),F(null)},o));function f(){const p=e.querySelector(a);p&&(u&&clearTimeout(u),c.disconnect(),F(p))}})}function y(e,a){return e.querySelector(a)?new Promise(t=>{const F=new MutationObserver(c);F.observe(e,{childList:!0,subtree:!0});function c(){e.querySelector(a)||(F.disconnect(),t())}}):Promise.resolve()}function h(e,a=400){return new Promise(o=>{let t;const F=new MutationObserver(()=>{clearTimeout(t),c()});function c(){t=setTimeout(()=>{F.disconnect(),o()},a)}c(),F.observe(e,{childList:!0,subtree:!0})})}function v(e,a=250){let o;return function(...t){const F=this;clearTimeout(o),o=setTimeout(()=>e.apply(F,t),a)}}async function s(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function l(e,a){const o=new IntersectionObserver(t=>{t.forEach(F=>{F.isIntersecting&&(a(),i(e))})});e.intersectionObserver=o,o.observe(e)}function i(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function d(e){e&&(e.disconnect(),e=null)}},3829:(S,m,n)=>{n.d(m,{Ay:()=>y});var w=n(8355);function y(o,t){return!h(o,t)}function h(o,t){if(!t||!t.value)return!0;const F=(0,w._7)(t.value);return v(o,F)}function v(o,t){if(!t||!t.length)return!0;const F=(o||"").toLowerCase();return t.every(c=>s(F,c))}function s(o,t){return t.some(({term:F,isNegative:c})=>{const u=o.includes(F);return c?!u:u})}function l(o,t){return t.value!=null&&o<t.value}function i(o,t){return t.value!=null&&o>t.value}function d(o,t){return t.value==null?!1:o<parseDateFromISO(t.value)}function e(o,t){return t.value==null?!1:o>parseDateFromISO(t.value)}function a(o,t){return t.value&&o!==t.value}},4521:(S,m,n)=>{n.d(m,{z:()=>y});var w=n(3048);function y(h,v=null){return{createGlobalFilter(s,l=null,i=h){return w.V.create(s,l,i)},createSectionFilter(s,l=null,i=h){if(!v)throw new Error("sectionId must be provided to use createSectionFilter.");return w.V.createWithCompositeKey(v,s,l,i)}}}},5884:(S,m,n)=>{n.d(m,{Nm:()=>h});var w=n(5467),y=n(740);function h(d,e,a={},o={}){const t=(0,y.kU)(o,e.updateValueFromEvent,e.value);return(0,w.E2)(t,a,d)}function v(d,e,a,o,t,F={},c={}){const u=createNumberInput(c,e.updateValueFromEvent,e.value,a,o,t);return createControl(u,F,d)}function s(d,e,a={},o={}){const t=createSelect(o,e.updateValueFromEvent,e.value);return createControl(t,a,d)}function l(d,e,a={},o={}){const t=createDateInput(o,e.updateValueFromEvent,e.value);return createControl(t,a,d)}function i(d,e,a={},o={}){const t=createCheckboxInput(o,e.updateValueFromEvent,e.value);return createControl(t,a,d)}},7877:(S,m,n)=>{n.d(m,{E9:()=>y});var w=n(5884);function y(C,g={},b={}){return(0,w.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,g,b)}function h(C,g={},b={},L=.1,W=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,L,W,5,g,b)}function v(C,g={},b={},L=.1,W=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,L,W,5,g,b)}function s(C,g={},b={}){return i("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,b)}function l(C,g={},b={}){return i("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,b)}function i(C,g,b={},L={}){return createNumberFilterControl(C,g,"1","1","999999",b,L)}function d(C,g={},b={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",C,g,b)}function e(C,g={},b={}){return a("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,g,b)}function a(C,g,b={},L={}){return createNumberFilterControl(C,g,"5","0","100",b,L)}function o(C,g={},b={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",g,b)}function t(C,g,b={},L={},W="250"){return createNumberFilterControl(C,g,W,"0","1000000",b,L)}function F(C,g={},b={},L="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,g,b,L)}function c(C,g={},b={},L="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,g,b,L)}function u(C,g={},b={}){return f("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,g,b)}function f(C,g,b={},L={}){return createNumberFilterControl(C,g,"1","0","99999",b,L)}function p(C,g={},b={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","8",g,b)}function I(C,g={},b={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,g,b)}function x(C,g={},b={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,g,b)}function k(C,g={},b={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,g,b)}function B(C,g={},b={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,g,b)}function O(C,g={},b={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",C,g,b)}function A(C,g={},b={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",C,g,b)}function U(C,g={},b={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",C,g,b)}function $(C,g,b={}){const L=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],W={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},N=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),R=[],D=()=>g?parseFloat(g.value)||0:C.value,M=()=>{const z=D();R.forEach(({button:j,value:r})=>{const T=r<=z?W.active:W.inactive;Object.assign(j.style,T)})};return L.forEach(({value:z,emoji:j,tooltip:r})=>{const E=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...b},j);E.title=r,E.type="button",E.addEventListener("click",T=>{T.preventDefault(),C.updateValue(z),g&&(g.value=z),M()}),E.addEventListener("mouseenter",()=>{z<=D()||(E.style.background=W.hover.background)}),E.addEventListener("mouseleave",()=>{M()}),R.push({button:E,value:z}),N.appendChild(E)}),M(),g&&(g.addEventListener("input",M),g.addEventListener("change",M)),N}},8355:(S,m,n)=>{n.d(m,{Vk:()=>d,_7:()=>y,fO:()=>w});function w(e){if(!e)return[];const o=y(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(o)]}function y(e){return e?e.toLowerCase().split(",").map(h).filter(Boolean):[]}function h(e){const a=e.split("/").map(t=>t.trim()).filter(Boolean);if(a.length===0)return null;const o=a.map(v).filter(Boolean);return o.length>0?o:null}function v(e){const a=e.startsWith("!"),o=a?e.slice(1).trim():e;return o?{term:o,isNegative:a}:null}function s(e,a){i(e,o=>o.style.display!=="none",a)}function l(e,a){i(e,o=>o.style.opacity==="",a)}function i(e,a,o){const t=[...e].filter(a).length,F=e.length;d(o,t,F)}function d(e,a,o){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${o}`}},4292:(S,m,n)=>{n.d(m,{C:()=>h});var w=n(8355),y=n(8506);function h(s,l){const i=(0,w.fO)(s.value);(0,y.hf)(i,l)}function v(s,l){const i=getIncludedSearchStrings(s.value);l.forEach(d=>highlightSubstrings(i,d))}},5213:(S,m,n)=>{n.d(m,{b:()=>y});var w=n(7273);function y(h,v,s=!1,l="customFiltersContainer"){let i=h.querySelector(`#${l}`);if(i){if(!s)return;i.replaceChildren()}else i=(0,w.S)(),i.id=l;v(i,h)}},8200:(S,m,n)=>{n.d(m,{s:()=>w});function w(y){const{target:h}=y,{type:v}=h;switch(v){case"text":return`"${h.value}"`;case"number":return h.value;case"select-one":return h.value;case"date":return`"${h.value}"`;case"checkbox":return h.checked;default:return console.log(`Unknown input type: ${v}`),null}}},157:(S,m,n)=>{n.d(m,{Fg:()=>w,vx:()=>h});const w=window.GM_setValue,y=window.GM.setValue,h=window.GM_getValue},1870:(S,m,n)=>{n.d(m,{j:()=>w});class w{constructor(h,v){this.value=h,this.onChange=v}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,m,n)=>{n.d(m,{V:()=>s});var w=n(1870),y=n(8200),h=n(3976),v=n(157);class s extends w.j{constructor(i,d=null,e=null){super((0,v.vx)(i,d),e),this.storageKey=i,this.defaultValue=d}static create(i,d=null,e=null){return new s(i,d,e)}static createWithCompositeKey(i,d,e=null,a=null){const o=`${i}-${d}`;return new s(o,e,a)}updateValueFromEvent=i=>{const d=(0,y.s)(i),e=(0,h.$)(d);this.updateValue(e)};updateValue(i,d=!0){this.value!==i&&((0,v.Fg)(this.storageKey,i),this.value=i,d&&this.onChangeIfDefined())}clearValue(i=!1){this.updateValue(null,i)}resetValue(i=!1){this.updateValue(this.defaultValue,i)}}},3976:(S,m,n)=>{n.d(m,{$:()=>w});function w(y){return y===""?null:JSON.parse(y)}},5406:(S,m,n)=>{n.d(m,{$G:()=>F,z2:()=>a});function w(u,f="common",p=!1){const{pathname:I}=window.location;return y(I,u,f,p)}function y(u,f,p,I=!1){const x=u.split("/");f=f<0?x.length+f:f;const k=x[f]||p;return I&&console.log(`Pathname element: ${k}`),k}function h(u,f="common",p=!1){const I=w(u,"",p);return v(I,f,p)}function v(u,f,p){if(!u)return f;const I=u.split("-").at(-1);return p&&console.log(`Pathname element ending: ${I}`),I}function s(u,f,p="common",I=!1){const x=y(u,f,"",I);return v(x,p,I)}function l(u){return new URLSearchParams(window.location.search).get(u)}function i(u){return u.split("?")[0]}function d(u){return window.location.pathname.includes(u)}function e(u){return u.some(f=>d(f))}function a(...u){return window.location.pathname.split("/").some(p=>u.includes(p))}function o(u){try{const f=new URL(window.location.href);Object.entries(u).forEach(([p,I])=>{f.searchParams.set(p,I)}),window.location.href=f.toString()}catch(f){console.error("Failed to redirect:",f)}}function t(u,f=[]){const p=new AbortController;let I=!1;const x=B=>{const O=new URL(B),A={pathname:O.pathname};return f.forEach(U=>{A[U]=O.searchParams.get(U)}),A};let k=x(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(I)return;const B=x(window.navigation.currentEntry.url);if(Object.keys(k).some(A=>k[A]!==B[A])){k=B,I=!0;try{await u(B)}catch(A){console.error("URL observer error:",A)}finally{I=!1}}},{signal:p.signal}),()=>p.abort()}function F(u,f=[]){const p={pathname:window.location.pathname};f.forEach(O=>{p[O]=l(O)});let I=!1;async function x(){if(I)return;const O={pathname:window.location.pathname};if(f.forEach(A=>{O[A]=l(A)}),Object.keys(p).some(A=>p[A]!==O[A])){Object.assign(p,O),I=!0;try{await u()}catch(A){console.error("Error in URL observer callback:",A)}finally{I=!1}}}function k(){x().catch(O=>{console.error("Error in URL change handler:",O)})}let B=window.location.href;setInterval(()=>{window.location.href!==B&&(console.log("URL changed:",window.location.href),B=window.location.href,k())},200),window.addEventListener("popstate",k)}function c(u=[]){F(()=>window.location.reload(),u)}},3539:(S,m,n)=>{n.a(S,async(w,y)=>{try{let B=function(){return(0,u.z2)("org","reviews")},A=function(){U(d.Z.REVIEWS_VIEW_SUMMARY),U(d.Z.TAGS_CONTAINER),U(d.Z.FRIENDS_SUGGEST)},U=function(N,R=x.activeTabWrapper){const D=(0,l.Fi)(N,R);D&&(0,s.Bt)(D)},$=function(){if(!x.isFiltersInitialized){const{createGlobalFilter:N}=(0,a.z)(b);x.reviewTextFilter=N("review-text-filter"),x.isFiltersInitialized=!0}},C=function(N,R){(0,o.ZM)(N,e.r.FILTERS_CONTAINER),g();const D=(0,i.E9)(x.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);x.reviewsInfo=(0,p.S)(e.r.INFO),N.append(D,x.reviewsInfo),R.append(N)},g=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},W=function(){x.activeTabWrapper=null,x.isFiltersInitialized=!1,x.reviewTextFilter=null,x.reviewsInfo=null,(0,t.wP)(x.reviewsObserver)};var h=n(5213),v=n(3829),s=n(5539),l=n(573),i=n(7877),d=n(6613),e=n(3613),a=n(4521),o=n(6754),t=n(4921),F=n(4292),c=n(8506),u=n(5406),f=n(8355),p=n(7273);const I=(0,s.L5)("span.business-review-view__expand","read-more"),x={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,t.Un)(k),(0,u.$G)(async()=>{await k(!0)});async function k(N=!1){N&&W(),B()&&(await(0,t.XW)(document.body),await O())}async function O(){x.activeTabWrapper=await(0,t.xk)(document,d.Z.ACTIVE_TAB_WRAPPER),A(),$();const N=(0,l.Fi)(d.Z.FILTER_CONTAINER_WRAP,x.activeTabWrapper,!0);(0,h.b)(N,C,!0),await b();const R=(0,l.Fi)(d.Z.REVIEWS_CONTAINER,x.activeTabWrapper);x.reviewsObserver=new MutationObserver((0,t.sg)(b)),x.reviewsObserver.observe(R,{childList:!0})}async function b(){x.isFiltersInitialized||$();const N=(0,l.fI)(d.Z.REVIEW_CARD,x.activeTabWrapper),R=(0,s.Bz)();await Promise.all([...N].map(async D=>{const M=await L(D);(0,s.GY)(M,R,D)})),(0,s.pB)(R),(0,f.Vk)(x.reviewsInfo,R.show.length,N.length)}async function L(N){I(N)&&await(0,t.XW)(N),(0,c.kZ)(N);const R=(0,l.Fi)(d.Z.REVIEW_TEXT_WRAP,N);if(!R)return!0;x.reviewTextFilter.value&&(0,F.C)(x.reviewTextFilter,R);const D=R.innerText;return(0,v.Ay)(D,x.reviewTextFilter)}y()}catch(I){y(I)}},1)},6613:(S,m,n)=>{n.d(m,{Z:()=>w});const w={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(S,m,n)=>{n.d(m,{r:()=>y});const y={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},Q={};function G(S){var m=Q[S];if(m!==void 0)return m.exports;var n=Q[S]={exports:{}};return Y[S](n,n.exports,G),n.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",w=h=>{h&&h.d<1&&(h.d=1,h.forEach(v=>v.r--),h.forEach(v=>v.r--?v.r++:v()))},y=h=>h.map(v=>{if(v!==null&&typeof v=="object"){if(v[S])return v;if(v.then){var s=[];s.d=0,v.then(d=>{l[m]=d,w(s)},d=>{l[n]=d,w(s)});var l={};return l[S]=d=>d(s),l}}var i={};return i[S]=d=>{},i[m]=v,i});G.a=(h,v,s)=>{var l;s&&((l=[]).d=-1);var i=new Set,d=h.exports,e,a,o,t=new Promise((F,c)=>{o=c,a=F});t[m]=d,t[S]=F=>(l&&F(l),i.forEach(F),t.catch(c=>{})),h.exports=t,v(F=>{e=y(F);var c,u=()=>e.map(p=>{if(p[n])throw p[n];return p[m]}),f=new Promise(p=>{c=()=>p(u),c.r=0;var I=x=>x!==l&&!i.has(x)&&(i.add(x),x&&!x.d&&(c.r++,x.push(c)));e.map(x=>x[S](I))});return c.r?f:u()},F=>(F?o(t[n]=F):a(d),w(l))),l&&l.d<0&&(l.d=0)}})(),G.d=(S,m)=>{for(var n in m)G.o(m,n)&&!G.o(S,n)&&Object.defineProperty(S,n,{enumerable:!0,get:m[n]})},G.o=(S,m)=>Object.prototype.hasOwnProperty.call(S,m);var H=G(3539)})();})();
