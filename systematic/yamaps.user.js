// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.76943516
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={5467:(A,h,t)=>{t.d(h,{E2:()=>S});var x=t(9928);function S(p,d={},u=null){const n=(0,x.Sw)(d,u);return n.append(p),n}function b(p,d=null,u={},n={}){const r=createActionLink(p,d,n);return S(r,u)}function C(p,d=null,u=null,n={},r={},m={}){const c=createActionLinkWithIcon(p,u,d,r,m);return S(c,n)}},9928:(A,h,t)=>{t.d(h,{Sw:()=>e,kU:()=>b});var x=t(4921),S=t(6754);function b(F,a,N){const y=u(F,"text",a);return y.value=N,y}function C(F,a,N,y,D,W){const O=u(F,"number",a);return O.value=N,O.step=y,O.min=D,O.max=W,O}function p(F,a,N){const y=u(F,"date",a);return y.value=N,y}function d(F,a,N){const y=u(F,"checkbox",a);return y.checked=N,y}function u(F={},a=null,N=null){const y=s("input",F);return a&&(y.type=a),N&&(y.addEventListener("keyup",(0,x.sg)(N,200)),y.addEventListener("change",(0,x.sg)(N,100))),y}function n(F,a,N){const y=s("select",F);return a&&y.addEventListener("change",a),y.value=N,y}function r(F={},a=null){return s("span",F,a)}function m(F={},a=null,N=null){const y=s("a",F,a);return N&&(y.href=N),y}function c(F,a=null,N={}){N.cursor||="pointer";const y=m(N,a);return F&&y.addEventListener("click",F),y}function i(F,a,N=null,y={},D={}){y.display||="inline-flex",y.alignItems||="center",y.gap||="0.25em";const W=c(F,N,y);return W.prepend(v(a,D)),W}function T(F={},a=null,N=null){const y=s("button",F,a);return N&&y.addEventListener("click",N),y}function e(F={},a=null){return s("div",F,a)}function l(F={},a=null){return s("i",F,a)}function v(F,a={}){a.width||="1em",a.height||="1em";const N=createLucideSvg(F);return applyStyles(N,a),N}function s(F,a,N=null){if(typeof a!="object"||a===null)throw new TypeError("styles should be an object");const y=document.createElement(F);return(0,S.ZM)(y,a),N&&(y.innerHTML=N),y}},573:(A,h,t)=>{t.d(h,{Fi:()=>S,Yl:()=>p,fI:()=>b});function x(e,l=document){return!!l.querySelector(e)}function S(e,l=document,v=!1){const s=l.querySelector(e);return v&&!s&&console.log(`No element found for selector: ${e}`),s}function b(e,l=document,v=!1){const s=l.querySelectorAll(e);return v&&!s.length&&console.log(`No elements found for selector: ${e}`),s}function C(e,l=1){let v=e;for(let s=0;s<l;s++){if(!v.parentElement)return null;v=v.parentElement}return v}function p(e,l,v){return[...e.querySelectorAll(l)].find(s=>s.textContent.trim().includes(v))}function d(e,l,v=!1,s=!1,F=null){const a=S(l,e);return u(a,v,s,F)}function u(e,l=!1,v=!1,s=null){if(!e)return s===null?(console.log("No element found"),null):s;const F=e.innerText;return m(F,l,v)}function n(e,l,v=!1){const s=e[l];return u(s,v)}function r(e,l=!1,v=!1){const s=e.textContent;return m(s,l,v)}function m(e,l,v){l&&(e=removeNonNumber(e)),v&&(e=e.replace(",","."));const s=Number(e);return Number.isNaN(s)?(console.log(`Invalid number: ${e}`),0):s}function c(e){return[...e.childNodes].find(l=>l.nodeType===Node.TEXT_NODE)}function i(e){const l=v=>v.nodeType===Node.TEXT_NODE&&v.textContent.trim()!==""?[v]:[...v.childNodes].flatMap(l);return l(e)}function T(e){return normalizeSpacing(e.textContent)}},8506:(A,h,t)=>{t.d(h,{hf:()=>S,kZ:()=>C});var x=t(573);function S(p,d){p.forEach(u=>b(d,u))}function b(p,d){if(!d)return;const u=new RegExp(`(${d})`,"gi"),n=document.createTreeWalker(p,NodeFilter.SHOW_TEXT,null);let r=n.nextNode();const m=[];for(;r;){const{textContent:c}=r;if(u.test(c)){const i=document.createDocumentFragment();let T=0;c.replace(u,(e,l,v)=>{v>T&&i.appendChild(document.createTextNode(c.slice(T,v)));const s=document.createElement("span");s.className="highlightedSubstring",s.style.backgroundColor="yellow",s.textContent=e,i.appendChild(s),T=v+e.length}),T<c.length&&i.appendChild(document.createTextNode(c.slice(T))),m.push({node:r,fragment:i})}r=n.nextNode()}m.forEach(({node:c,fragment:i})=>{c.parentNode.replaceChild(i,c)})}function C(p){(0,x.fI)(".highlightedSubstring",p).forEach(u=>{const{parentNode:n}=u;u.replaceWith(u.textContent),n.normalize()})}},5539:(A,h,t)=>{t.d(h,{Bt:()=>b,Bz:()=>e,GY:()=>l,L5:()=>E,pB:()=>v});var x=t(573);function S(o,f){o.parentNode.insertBefore(f,o.nextSibling)}function b(o){o.style.display="none"}function C(o,f=1){const I=document.querySelector(o);I&&p(I,f)}function p(o,f=1){const I=getElementAncestor(o,f);I&&b(I)}function d(o){T(o),b(o)}function u(o){o.intersectionObserver||runOnceOnIntersection(o,()=>b(o))}function n(o){o.style.display=""}function r(o){const f=i(o);o.style.display=f}function m(o,f){f?b(o):n(o)}function c(o,f){f?u(o):(clearIntersectionObserver(o),n(o))}function i(o){return T(o),o.defaultDisplay}function T(o){if(o.defaultDisplay)return;const{display:f}=getComputedStyle(o);o.defaultDisplay=f}function e(){return{show:[],hide:[]}}function l(o,f,I){o?f.hide.push(I):f.show.push(I)}function v(o){o.show.forEach(n),o.hide.forEach(b)}function s(o,f,I=.3){f?a(o,I):F(o)}function F(o){o.style.opacity=""}function a(o,f=.3){o.style.opacity=f}function N(o){o.style.order=""}function y(o,f){o.style.order=f}function D(o,f){o.style.background=f}function W(o,f){const I=getFirstElement(f);I&&O(o,I)}function O(o,f){const I=createLink();I.href=o,f.parentNode.append(I),I.append(f)}function M(o,f){const I=getFirstElement(f);I&&w(o,I)}function w(o,f,I={}){const k=createLink(I);k.href=o,k.append(...f.childNodes),f.append(k)}function g(){const o=getURLQueryParam("scrollTo");if(!o)return;const f=document.getElementById(o);f?f.scrollIntoView():console.log(`Element with ID "${o}" was not found.`)}function E(o,f,I=null){const k=`${f}-click-passed`,V=I?R=>(0,x.Yl)(R,o,I):R=>(0,x.Fi)(o,R);return function(R){if(R.hasAttribute(k))return!1;const U=V(R);return U&&U.click(),R.setAttribute(k,""),!0}}function L(o,f,I="text/plain"){const k=new Blob([o],{type:I}),V=URL.createObjectURL(k),R=document.createElement("a");R.href=V,R.download=f,document.body.appendChild(R),R.click(),document.body.removeChild(R),requestAnimationFrame(()=>URL.revokeObjectURL(V))}},6754:(A,h,t)=>{t.d(h,{ZM:()=>x});function x(p,d){Object.assign(p.style,d)}function S(p,d="custom-global-style"){let u=document.getElementById(d);u||(u=document.createElement("style"),u.id=d,u.type="text/css",document.head.appendChild(u)),u.textContent=p}function b(p){return Object.entries(p).map(([d,u])=>`${d.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function C(p){return p?p.split(";").filter(d=>d.trim()!=="").reduce((d,u)=>{const[n,r]=u.split(":").map(c=>c.trim()),m=n.replace(/-([a-z])/g,(c,i)=>i.toUpperCase());return d[m]=r,d},{}):{}}},4921:(A,h,t)=>{t.d(h,{Un:()=>p,XW:()=>b,sg:()=>C,wP:()=>n,xk:()=>x});function x(r,m,c=null){const i=r.querySelector(m);return i?Promise.resolve(i):new Promise(T=>{const e=new MutationObserver(v);e.observe(r,{childList:!0,subtree:!0});let l;c&&(l=setTimeout(()=>{e.disconnect(),console.log(`No element found for selector: ${m}`),T(null)},c));function v(){const s=r.querySelector(m);s&&(l&&clearTimeout(l),e.disconnect(),T(s))}})}function S(r,m){return r.querySelector(m)?new Promise(i=>{const T=new MutationObserver(e);T.observe(r,{childList:!0,subtree:!0});function e(){r.querySelector(m)||(T.disconnect(),i())}}):Promise.resolve()}function b(r,m=400){return new Promise(c=>{let i;const T=new MutationObserver(()=>{clearTimeout(i),e()});function e(){i=setTimeout(()=>{T.disconnect(),c()},m)}e(),T.observe(r,{childList:!0,subtree:!0})})}function C(r,m=250){let c;return(...i)=>{clearTimeout(c),c=setTimeout(()=>r(...i),m)}}async function p(r){document.visibilityState==="visible"?await r():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await r()},{once:!0})}function d(r,m){const c=new IntersectionObserver(i=>{i.forEach(T=>{T.isIntersecting&&(m(),u(r))})});r.intersectionObserver=c,c.observe(r)}function u(r){r.intersectionObserver&&(r.intersectionObserver.disconnect(),r.intersectionObserver=null)}function n(r){r&&(r.disconnect(),r=null)}},3829:(A,h,t)=>{t.d(h,{Ay:()=>S});var x=t(8355);function S(c,i){return!b(c,i)}function b(c,i){if(!i||!i.value)return!0;const T=(0,x._7)(i.value);return C(c,T)}function C(c,i){if(!i||!i.length)return!0;const T=(c||"").toLowerCase();return i.every(e=>p(T,e))}function p(c,i){return i.some(({term:T,isNegative:e})=>{const l=c.includes(T);return e?!l:l})}function d(c,i){return i.value!=null&&c<i.value}function u(c,i){return i.value!=null&&c>i.value}function n(c,i){return i.value==null?!1:c<parseDateFromISO(i.value)}function r(c,i){return i.value==null?!1:c>parseDateFromISO(i.value)}function m(c,i){return i.value&&c!==i.value}},4521:(A,h,t)=>{t.d(h,{z:()=>S});var x=t(3048);function S(b,C=null){return{createGlobalFilter(p,d=null,u=b){return x.V.create(p,d,u)},createSectionFilter(p,d=null,u=b){if(!C)throw new Error("sectionId must be provided to use createSectionFilter.");return x.V.createWithCompositeKey(C,p,d,u)}}}},5884:(A,h,t)=>{t.d(h,{Nm:()=>b});var x=t(9928),S=t(5467);function b(n,r,m={},c={}){const i=(0,x.kU)(c,r.updateValueFromEvent,r.value);return(0,S.E2)(i,m,n)}function C(n,r,m,c,i,T={},e={}){const l=createNumberInput(e,r.updateValueFromEvent,r.value,m,c,i);return createControl(l,T,n)}function p(n,r,m={},c={}){const i=createSelect(c,r.updateValueFromEvent,r.value);return createControl(i,m,n)}function d(n,r,m={},c={}){const i=createDateInput(c,r.updateValueFromEvent,r.value);return createControl(i,m,n)}function u(n,r,m={},c={}){const i=createCheckboxInput(c,r.updateValueFromEvent,r.value);return createControl(i,m,n)}},7877:(A,h,t)=>{t.d(h,{E9:()=>S});var x=t(5884);function S(w,g={},E={}){return(0,x.Nm)("\u041F\u043E\u0438\u0441\u043A: ",w,g,E)}function b(w,g={},E={},L=.1,o=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",w,L,o,5,g,E)}function C(w,g={},E={},L=.1,o=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",w,L,o,5,g,E)}function p(w,g={},E={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",w,g,E)}function d(w,g={},E={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",w,g,E)}function u(w,g,E={},L={}){return createNumberFilterControl(w,g,"1","1","999999",E,L)}function n(w,g={},E={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",w,g,E)}function r(w,g={},E={}){return m("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",w,g,E)}function m(w,g,E={},L={}){return createNumberFilterControl(w,g,"5","0","100",E,L)}function c(w,g={},E={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",w,"5","0","100",g,E)}function i(w,g,E={},L={},o="250"){return createNumberFilterControl(w,g,o,"0","1000000",E,L)}function T(w,g={},E={},L="25"){return i("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",w,g,E,L)}function e(w,g={},E={},L="25"){return i("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",w,g,E,L)}function l(w,g={},E={}){return v("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",w,g,E)}function v(w,g,E={},L={}){return createNumberFilterControl(w,g,"1","0","99999",E,L)}function s(w,g={},E={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",w,"1","2","8",g,E)}function F(w,g={},E={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",w,1,1,10,g,E)}function a(w,g={},E={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",w,g,E)}function N(w,g={},E={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",w,g,E)}function y(w,g={},E={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",w,g,E)}function D(w,g={},E={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",w,g,E)}function W(w,g={},E={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",w,g,E)}function O(w,g={},E={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",w,g,E)}function M(w,g,E={}){const L=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],o={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},f=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),I=[],k=()=>g?parseFloat(g.value)||0:w.value,V=()=>{const R=k();I.forEach(({button:U,value:G})=>{const z=G<=R?o.active:o.inactive;Object.assign(U.style,z)})};return L.forEach(({value:R,emoji:U,tooltip:G})=>{const P=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...E},U);P.title=G,P.type="button",P.addEventListener("click",z=>{z.preventDefault(),w.updateValue(R),g&&(g.value=R),V()}),P.addEventListener("mouseenter",()=>{R<=k()||(P.style.background=o.hover.background)}),P.addEventListener("mouseleave",()=>{V()}),I.push({button:P,value:R}),f.appendChild(P)}),V(),g&&(g.addEventListener("input",V),g.addEventListener("change",V)),f}},8355:(A,h,t)=>{t.d(h,{_7:()=>S,fO:()=>x,oM:()=>p});function x(n){if(!n)return[];const m=S(n).flat().filter(c=>c&&!c.isNegative&&c.term).map(c=>c.term);return[...new Set(m)]}function S(n){return n?n.toLowerCase().split(",").map(b).filter(Boolean):[]}function b(n){const r=n.split("/").map(c=>c.trim()).filter(Boolean);if(r.length===0)return null;const m=r.map(C).filter(Boolean);return m.length>0?m:null}function C(n){const r=n.startsWith("!"),m=r?n.slice(1).trim():n;return m?{term:m,isNegative:r}:null}function p(n,r){u(n,m=>m.style.display!=="none",r)}function d(n,r){u(n,m=>m.style.opacity==="",r)}function u(n,r,m){const c=[...n].filter(r).length;m.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${c} \u0438\u0437 ${n.length}`}},4292:(A,h,t)=>{t.d(h,{C:()=>b});var x=t(8355),S=t(8506);function b(p,d){const u=(0,x.fO)(p.value);(0,S.hf)(u,d)}function C(p,d){const u=getIncludedSearchStrings(p.value);d.forEach(n=>highlightSubstrings(u,n))}},5213:(A,h,t)=>{t.d(h,{b:()=>b});var x=t(9928),S=t(573);function b(C,p,d=!1,u="customFiltersContainer"){let n=(0,S.Fi)(`#${u}`,C);if(n)if(d)n.remove();else return;n=(0,x.Sw)(),n.id=u,p(n,C)}},8200:(A,h,t)=>{t.d(h,{s:()=>x});function x(S){const{target:b}=S,{type:C}=b;switch(C){case"text":return`"${b.value}"`;case"number":return b.value;case"select-one":return b.value;case"date":return`"${b.value}"`;case"checkbox":return b.checked;default:return console.log(`Unknown input type: ${C}`),null}}},157:(A,h,t)=>{t.d(h,{Fg:()=>x,vx:()=>b});const x=window.GM_setValue,S=window.GM.setValue,b=window.GM_getValue},1870:(A,h,t)=>{t.d(h,{j:()=>x});class x{constructor(b,C){this.value=b,this.onChange=C}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(A,h,t)=>{t.d(h,{V:()=>p});var x=t(1870),S=t(8200),b=t(3976),C=t(157);class p extends x.j{constructor(u,n=null,r=null){super((0,C.vx)(u,n),r),this.storageKey=u,this.defaultValue=n}static create(u,n=null,r=null){return new p(u,n,r)}static createWithCompositeKey(u,n,r=null,m=null){const c=`${u}-${n}`;return new p(c,r,m)}updateValueFromEvent=u=>{const n=(0,S.s)(u),r=(0,b.$)(n);this.updateValue(r)};updateValue(u,n=!0){this.value!==u&&((0,C.Fg)(this.storageKey,u),this.value=u,n&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(A,h,t)=>{t.d(h,{$:()=>x});function x(S){return S===""?null:JSON.parse(S)}},5406:(A,h,t)=>{t.d(h,{k1:()=>i,z2:()=>m});function x(e,l="common",v=!1){const{pathname:s}=window.location;return S(s,e,l,v)}function S(e,l,v,s=!1){const F=e.split("/");l=l<0?F.length+l:l;const a=F[l]||v;return s&&console.log(`Pathname element: ${a}`),a}function b(e,l="common",v=!1){const s=x(e,"",v);return C(s,l,v)}function C(e,l,v){if(!e)return l;const s=e.split("-").at(-1);return v&&console.log(`Pathname element ending: ${s}`),s}function p(e,l,v="common",s=!1){const F=S(e,l,"",s);return C(F,v,s)}function d(e){return new URLSearchParams(window.location.search).get(e)}function u(e){return e.split("?")[0]}function n(e){return window.location.pathname.includes(e)}function r(e){return e.some(l=>n(l))}function m(...e){return window.location.pathname.split("/").some(v=>e.includes(v))}function c(e){try{const l=new URL(window.location.href);Object.entries(e).forEach(([v,s])=>{l.searchParams.set(v,s)}),window.location.href=l.toString()}catch(l){console.error("Failed to redirect:",l)}}function i(e,l=[]){const v={pathname:window.location.pathname};l.forEach(y=>{v[y]=d(y)});let s=!1;async function F(){if(s)return;const y={pathname:window.location.pathname};if(l.forEach(D=>{y[D]=d(D)}),Object.keys(v).some(D=>v[D]!==y[D])){Object.assign(v,y),s=!0;try{await e()}catch(D){console.error("Error in URL observer callback:",D)}finally{s=!1}}}function a(){F().catch(y=>{console.error("Error in URL change handler:",y)})}let N=window.location.href;setInterval(()=>{window.location.href!==N&&(N=window.location.href,a())},200),window.addEventListener("popstate",a)}function T(e=[]){i(()=>window.location.reload(),e)}},3539:(A,h,t)=>{t.a(A,async(x,S)=>{try{let y=function(){return(0,l.z2)("org","reviews")},W=function(){O(n.Z.REVIEWS_VIEW_SUMMARY),O(n.Z.TAGS_CONTAINER),O(n.Z.FRIENDS_SUGGEST)},O=function(f,I=a.activeTabWrapper){const k=(0,d.Fi)(f,I);k&&(0,p.Bt)(k)},M=function(){if(!a.isFiltersInitialized){const{createGlobalFilter:f}=(0,m.z)(E);a.reviewTextFilter=f("review-text-filter"),a.isFiltersInitialized=!0}},w=function(f,I){(0,c.ZM)(f,r.r.FILTERS_CONTAINER),g();const k=(0,u.E9)(a.reviewTextFilter,r.r.CONTROL,r.r.TEXT_INPUT);a.reviewsInfo=(0,v.Sw)(r.r.INFO),f.append(k,a.reviewsInfo),I.append(f)},g=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},o=function(){a.activeTabWrapper=null,a.isFiltersInitialized=!1,a.reviewTextFilter=null,a.reviewsInfo=null,(0,i.wP)(a.reviewsObserver)};var b=t(5213),C=t(3829),p=t(5539),d=t(573),u=t(7877),n=t(6613),r=t(3613),m=t(4521),c=t(6754),i=t(4921),T=t(4292),e=t(8506),l=t(5406),v=t(9928),s=t(8355);const F=(0,p.L5)("span.business-review-view__expand","read-more"),a={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,i.Un)(N),(0,l.k1)(async()=>{await N(!0)});async function N(f=!1){f&&o(),y()&&(await(0,i.XW)(document.body),await D())}async function D(){a.activeTabWrapper=await(0,i.xk)(document,n.Z.ACTIVE_TAB_WRAPPER),W(),M();const f=(0,d.Fi)(n.Z.FILTER_CONTAINER_WRAP,a.activeTabWrapper,!0);(0,b.b)(f,w,!0),await E();const I=(0,d.Fi)(n.Z.REVIEWS_CONTAINER,a.activeTabWrapper);a.reviewsObserver=new MutationObserver((0,i.sg)(E)),a.reviewsObserver.observe(I,{childList:!0})}async function E(){a.isFiltersInitialized||M();const f=(0,d.fI)(n.Z.REVIEW_CARD,a.activeTabWrapper),I=(0,p.Bz)();await Promise.all([...f].map(async k=>{const V=await L(k);(0,p.GY)(V,I,k)})),(0,p.pB)(I),(0,s.oM)(f,a.reviewsInfo)}async function L(f){F(f)&&await(0,i.XW)(f),(0,e.kZ)(f);const I=(0,d.Fi)(n.Z.REVIEW_TEXT_WRAP,f);if(!I)return!0;a.reviewTextFilter.value&&(0,T.C)(a.reviewTextFilter,I);const k=I.innerText;return(0,C.Ay)(k,a.reviewTextFilter)}S()}catch(F){S(F)}},1)},6613:(A,h,t)=>{t.d(h,{Z:()=>x});const x={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(A,h,t)=>{t.d(h,{r:()=>S});const S={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},$={};function B(A){var h=$[A];if(h!==void 0)return h.exports;var t=$[A]={exports:{}};return j[A](t,t.exports,B),t.exports}(()=>{var A=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",t=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",x=b=>{b&&b.d<1&&(b.d=1,b.forEach(C=>C.r--),b.forEach(C=>C.r--?C.r++:C()))},S=b=>b.map(C=>{if(C!==null&&typeof C=="object"){if(C[A])return C;if(C.then){var p=[];p.d=0,C.then(n=>{d[h]=n,x(p)},n=>{d[t]=n,x(p)});var d={};return d[A]=n=>n(p),d}}var u={};return u[A]=n=>{},u[h]=C,u});B.a=(b,C,p)=>{var d;p&&((d=[]).d=-1);var u=new Set,n=b.exports,r,m,c,i=new Promise((T,e)=>{c=e,m=T});i[h]=n,i[A]=T=>(d&&T(d),u.forEach(T),i.catch(e=>{})),b.exports=i,C(T=>{r=S(T);var e,l=()=>r.map(s=>{if(s[t])throw s[t];return s[h]}),v=new Promise(s=>{e=()=>s(l),e.r=0;var F=a=>a!==d&&!u.has(a)&&(u.add(a),a&&!a.d&&(e.r++,a.push(e)));r.map(a=>a[A](F))});return e.r?v:l()},T=>(T?c(i[t]=T):m(n),x(d))),d&&d.d<0&&(d.d=0)}})(),B.d=(A,h)=>{for(var t in h)B.o(h,t)&&!B.o(A,t)&&Object.defineProperty(A,t,{enumerable:!0,get:h[t]})},B.o=(A,h)=>Object.prototype.hasOwnProperty.call(A,h);var Z=B(3539)})();})();
