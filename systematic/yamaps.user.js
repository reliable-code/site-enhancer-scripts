// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77136793
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var Y={7273:(S,m,n)=>{n.d(m,{S:()=>p});var w=n(5558);function y(h={},c=null){return createElement("span",h,c)}function p(h={},c=null){return(0,w.n)("div",h,c)}},5467:(S,m,n)=>{n.d(m,{E2:()=>y});var w=n(7273);function y(c,s={},o=null){const d=(0,w.S)(s,o);return d.append(c),d}function p(c,s=null,o={},d={}){const e=createActionLink(c,s,d);return y(e,o)}function h(c,s=null,o=null,d={},e={},a={}){const r=createActionLinkWithIcon(c,o,s,e,a);return y(r,d)}},5558:(S,m,n)=>{n.d(m,{n:()=>y});var w=n(6754);function y(p,h,c=null){if(typeof h!="object"||h===null)throw new TypeError("styles should be an object");const s=document.createElement(p);return(0,w.ZM)(s,h),c&&(s.innerHTML=c),s}},740:(S,m,n)=>{n.d(m,{kU:()=>p});var w=n(5558),y=n(4921);function p(e,a,r){const t=o(e,"text",a);return t.value=r,t}function h(e,a,r,t,F,l){const i=o(e,"number",a);return i.value=r,i.step=t,i.min=F,i.max=l,i}function c(e,a,r){const t=o(e,"date",a);return t.value=r,t}function s(e,a,r){const t=o(e,"checkbox",a);return t.checked=r,t}function o(e={},a=null,r=null){const t=(0,w.n)("input",e);return a&&(t.type=a),r&&(t.addEventListener("keyup",(0,y.sg)(r,200)),t.addEventListener("change",(0,y.sg)(r,100))),t}function d(e,a,r){const t=createElement("select",e);return a&&t.addEventListener("change",a),t.value=r,t}},573:(S,m,n)=>{n.d(m,{Fi:()=>y,Yl:()=>c,fI:()=>p});function w(l,i=document){return!!i.querySelector(l)}function y(l,i=document,f=!1){const v=i.querySelector(l);return f&&!v&&console.log(`No element found for selector: ${l}`),v}function p(l,i=document,f=!1){const v=i.querySelectorAll(l);return f&&!v.length&&console.log(`No elements found for selector: ${l}`),v}function h(l,i=1){let f=l;for(let v=0;v<i;v++){if(!f.parentElement)return null;f=f.parentElement}return f}function c(l,i,f){return[...l.querySelectorAll(i)].find(v=>v.textContent.trim().includes(f))}function s(l,i,f=!1,v=!1,I=null){const x=y(i,l);return o(x,f,v,I)}function o(l,i=!1,f=!1,v=null){if(!l)return v===null?(console.log("No element found"),null):v;const I=l.innerText;return a(I,i,f)}function d(l,i,f=!1){const v=l[i];return o(v,f)}function e(l,i=!1,f=!1){const v=l.textContent;return a(v,i,f)}function a(l,i,f){i&&(l=removeNonNumber(l)),f&&(l=l.replace(",","."));const v=Number(l);return Number.isNaN(v)?(console.log(`Invalid number: ${l}`),0):v}function r(l){return[...l.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function t(l){const i=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(i);return i(l)}function F(l){return normalizeSpacing(l.textContent)}},8506:(S,m,n)=>{n.d(m,{hf:()=>y,kZ:()=>h});var w=n(573);function y(c,s){c.forEach(o=>p(s,o))}function p(c,s){if(!s)return;const o=new RegExp(`(${s})`,"gi"),d=document.createTreeWalker(c,NodeFilter.SHOW_TEXT,null);let e=d.nextNode();const a=[];for(;e;){const{textContent:r}=e;if(o.test(r)){const t=document.createDocumentFragment();let F=0;r.replace(o,(l,i,f)=>{f>F&&t.appendChild(document.createTextNode(r.slice(F,f)));const v=document.createElement("span");v.className="highlightedSubstring",v.style.backgroundColor="yellow",v.textContent=l,t.appendChild(v),F=f+l.length}),F<r.length&&t.appendChild(document.createTextNode(r.slice(F))),a.push({node:e,fragment:t})}e=d.nextNode()}a.forEach(({node:r,fragment:t})=>{r.parentNode.replaceChild(t,r)})}function h(c){(0,w.fI)(".highlightedSubstring",c).forEach(o=>{const{parentNode:d}=o;o.replaceWith(o.textContent),d.normalize()})}},5539:(S,m,n)=>{n.d(m,{Bt:()=>p,Bz:()=>i,GY:()=>f,L5:()=>M,pB:()=>v});var w=n(573);function y(u,E){u.parentNode.insertBefore(E,u.nextSibling)}function p(u){u.style.display="none"}function h(u,E=1){const T=document.querySelector(u);T&&c(T,E)}function c(u,E=1){const T=getElementAncestor(u,E);T&&p(T)}function s(u,E,T){const R=findElementByText(u,E,T);R&&p(R)}function o(u){l(u),p(u)}function d(u){u.intersectionObserver||runOnceOnIntersection(u,()=>p(u))}function e(u){u.style.display=""}function a(u){const E=F(u);u.style.display=E}function r(u,E){E?p(u):e(u)}function t(u,E){E?d(u):(clearIntersectionObserver(u),e(u))}function F(u){return l(u),u.dataset.defaultDisplay}function l(u){if(u.dataset.defaultDisplay)return;const{display:E}=getComputedStyle(u);u.dataset.defaultDisplay=E}function i(){return{show:[],hide:[]}}function f(u,E,T){u?E.hide.push(T):E.show.push(T)}function v(u){u.show.forEach(e),u.hide.forEach(p)}function I(u,E,T=.3){E?D(u,T):x(u)}function x(u){u.style.opacity=""}function D(u,E=.3){u.style.opacity=E}function W(u){u.style.order=""}function G(u,E){u.style.order=E}function P(u,E,T,R="inline-flex"){E.style.display=u?R:"none",T.style.display=u?"none":R}function B(u,E=.3){u.style.transition="opacity 0.3s",u.style.opacity=E,b(u)}function $(u){u.style.opacity="",A(u)}function C(u){u.style.animation="loading-pulse 2.5s ease-in-out infinite",b(u)}function g(u){u.style.animation="",A(u)}function b(u){u.style.pointerEvents="none",u.style.cursor="wait"}function A(u){u.style.pointerEvents="",u.style.cursor=""}function V(u,E){const T=getFirstElement(E);T&&N(u,T)}function N(u,E){const T=createLink();T.href=u,E.parentNode.append(T),T.append(E)}function k(u,E){const T=getFirstElement(E);T&&L(u,T)}function L(u,E,T={}){const R=createLink(T);R.href=u,R.append(...E.childNodes),E.append(R)}function U(){const u=getURLQueryParam("scrollTo");if(!u)return;const E=document.getElementById(u);E?E.scrollIntoView():console.log(`Element with ID "${u}" was not found.`)}function M(u,E,T=null){const R=`${E}-click-passed`,Z=T?O=>(0,w.Yl)(O,u,T):O=>(0,w.Fi)(u,O);return function(O){if(O.hasAttribute(R))return!1;const X=Z(O);return X&&X.click(),O.setAttribute(R,""),!0}}function j(u,E,T="text/plain"){const R=new Blob([u],{type:T}),Z=URL.createObjectURL(R),O=document.createElement("a");O.href=Z,O.download=E,document.body.appendChild(O),O.click(),document.body.removeChild(O),requestAnimationFrame(()=>URL.revokeObjectURL(Z))}},6754:(S,m,n)=>{n.d(m,{ZM:()=>w});function w(c,s){Object.assign(c.style,s)}function y(c,s="custom-global-style"){let o=document.getElementById(s);o||(o=document.createElement("style"),o.id=s,o.type="text/css",document.head.appendChild(o)),o.textContent=c}function p(c){return Object.entries(c).map(([s,o])=>`${s.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o};`).join(" ")}function h(c){return c?c.split(";").filter(s=>s.trim()!=="").reduce((s,o)=>{const[d,e]=o.split(":").map(r=>r.trim()),a=d.replace(/-([a-z])/g,(r,t)=>t.toUpperCase());return s[a]=e,s},{}):{}}},4921:(S,m,n)=>{n.d(m,{Un:()=>c,XW:()=>p,sg:()=>h,wP:()=>d,xk:()=>w});function w(e,a,r=null){const t=e.querySelector(a);return t?Promise.resolve(t):new Promise(F=>{const l=new MutationObserver(f);l.observe(e,{childList:!0,subtree:!0});let i;r&&(i=setTimeout(()=>{l.disconnect(),console.log(`No element found for selector: ${a}`),F(null)},r));function f(){const v=e.querySelector(a);v&&(i&&clearTimeout(i),l.disconnect(),F(v))}})}function y(e,a){return e.querySelector(a)?new Promise(t=>{const F=new MutationObserver(l);F.observe(e,{childList:!0,subtree:!0});function l(){e.querySelector(a)||(F.disconnect(),t())}}):Promise.resolve()}function p(e,a=400){return new Promise(r=>{let t;const F=new MutationObserver(()=>{clearTimeout(t),l()});function l(){t=setTimeout(()=>{F.disconnect(),r()},a)}l(),F.observe(e,{childList:!0,subtree:!0})})}function h(e,a=250){let r;return function(...t){const F=this;clearTimeout(r),r=setTimeout(()=>e.apply(F,t),a)}}async function c(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function s(e,a){const r=new IntersectionObserver(t=>{t.forEach(F=>{F.isIntersecting&&(a(),o(e))})});e.intersectionObserver=r,r.observe(e)}function o(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function d(e){e&&(e.disconnect(),e=null)}},3829:(S,m,n)=>{n.d(m,{Ay:()=>y});var w=n(8355);function y(r,t){return!p(r,t)}function p(r,t){if(!t||!t.value)return!0;const F=(0,w._7)(t.value);return h(r,F)}function h(r,t){if(!t||!t.length)return!0;const F=(r||"").toLowerCase();return t.every(l=>c(F,l))}function c(r,t){return t.some(({term:F,isNegative:l})=>{const i=r.includes(F);return l?!i:i})}function s(r,t){return t.value!=null&&r<t.value}function o(r,t){return t.value!=null&&r>t.value}function d(r,t){return t.value==null?!1:r<parseDateFromISO(t.value)}function e(r,t){return t.value==null?!1:r>parseDateFromISO(t.value)}function a(r,t){return t.value&&r!==t.value}},4521:(S,m,n)=>{n.d(m,{z:()=>y});var w=n(3048);function y(p,h=null){return{createGlobalFilter(c,s=null,o=p){return w.V.create(c,s,o)},createSectionFilter(c,s=null,o=p){if(!h)throw new Error("sectionId must be provided to use createSectionFilter.");return w.V.createWithCompositeKey(h,c,s,o)}}}},5884:(S,m,n)=>{n.d(m,{Nm:()=>p});var w=n(5467),y=n(740);function p(d,e,a={},r={}){const t=(0,y.kU)(r,e.updateValueFromEvent,e.value);return(0,w.E2)(t,a,d)}function h(d,e,a,r,t,F={},l={}){const i=createNumberInput(l,e.updateValueFromEvent,e.value,a,r,t);return createControl(i,F,d)}function c(d,e,a={},r={}){const t=createSelect(r,e.updateValueFromEvent,e.value);return createControl(t,a,d)}function s(d,e,a={},r={}){const t=createDateInput(r,e.updateValueFromEvent,e.value);return createControl(t,a,d)}function o(d,e,a={},r={}){const t=createCheckboxInput(r,e.updateValueFromEvent,e.value);return createControl(t,a,d)}},7877:(S,m,n)=>{n.d(m,{E9:()=>y});var w=n(5884);function y(C,g={},b={}){return(0,w.Nm)("\u041F\u043E\u0438\u0441\u043A: ",C,g,b)}function p(C,g={},b={},A=.1,V=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,A,V,5,g,b)}function h(C,g={},b={},A=.1,V=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",C,A,V,5,g,b)}function c(C,g={},b={}){return o("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,b)}function s(C,g={},b={}){return o("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",C,g,b)}function o(C,g,b={},A={}){return createNumberFilterControl(C,g,"1","1","999999",b,A)}function d(C,g={},b={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",C,g,b)}function e(C,g={},b={}){return a("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",C,g,b)}function a(C,g,b={},A={}){return createNumberFilterControl(C,g,"5","0","100",b,A)}function r(C,g={},b={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",C,"5","0","100",g,b)}function t(C,g,b={},A={},V="250"){return createNumberFilterControl(C,g,V,"0","1000000",b,A)}function F(C,g={},b={},A="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",C,g,b,A)}function l(C,g={},b={},A="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",C,g,b,A)}function i(C,g={},b={}){return f("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",C,g,b)}function f(C,g,b={},A={}){return createNumberFilterControl(C,g,"1","0","99999",b,A)}function v(C,g={},b={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",C,"1","2","8",g,b)}function I(C,g={},b={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",C,1,1,10,g,b)}function x(C,g={},b={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",C,g,b)}function D(C,g={},b={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",C,g,b)}function W(C,g={},b={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",C,g,b)}function G(C,g={},b={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",C,g,b)}function P(C,g={},b={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",C,g,b)}function B(C,g={},b={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",C,g,b)}function $(C,g,b={}){const A=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],V={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},N=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),k=[],L=()=>g?parseFloat(g.value)||0:C.value,U=()=>{const M=L();k.forEach(({button:j,value:u})=>{const T=u<=M?V.active:V.inactive;Object.assign(j.style,T)})};return A.forEach(({value:M,emoji:j,tooltip:u})=>{const E=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...b},j);E.title=u,E.type="button",E.addEventListener("click",T=>{T.preventDefault(),C.updateValue(M),g&&(g.value=M),U()}),E.addEventListener("mouseenter",()=>{M<=L()||(E.style.background=V.hover.background)}),E.addEventListener("mouseleave",()=>{U()}),k.push({button:E,value:M}),N.appendChild(E)}),U(),g&&(g.addEventListener("input",U),g.addEventListener("change",U)),N}},8355:(S,m,n)=>{n.d(m,{Vk:()=>d,_7:()=>y,fO:()=>w});function w(e){if(!e)return[];const r=y(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(r)]}function y(e){return e?e.toLowerCase().split(",").map(p).filter(Boolean):[]}function p(e){const a=e.split("/").map(t=>t.trim()).filter(Boolean);if(a.length===0)return null;const r=a.map(h).filter(Boolean);return r.length>0?r:null}function h(e){const a=e.startsWith("!"),r=a?e.slice(1).trim():e;return r?{term:r,isNegative:a}:null}function c(e,a){o(e,r=>r.style.display!=="none",a)}function s(e,a){o(e,r=>r.style.opacity==="",a)}function o(e,a,r){const t=[...e].filter(a).length,F=e.length;d(r,t,F)}function d(e,a,r){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${a} \u0438\u0437 ${r}`}},4292:(S,m,n)=>{n.d(m,{C:()=>p});var w=n(8355),y=n(8506);function p(c,s){const o=(0,w.fO)(c.value);(0,y.hf)(o,s)}function h(c,s){const o=getIncludedSearchStrings(c.value);s.forEach(d=>highlightSubstrings(o,d))}},5213:(S,m,n)=>{n.d(m,{b:()=>y});var w=n(7273);function y(p,h,c=!1,s="customFiltersContainer"){let o=p.querySelector(`#${s}`);if(o){if(!c)return;o.replaceChildren()}else o=(0,w.S)(),o.id=s;h(o,p)}},8200:(S,m,n)=>{n.d(m,{s:()=>w});function w(y){const{target:p}=y,{type:h}=p;switch(h){case"text":return`"${p.value}"`;case"number":return p.value;case"select-one":return p.value;case"date":return`"${p.value}"`;case"checkbox":return p.checked;default:return console.log(`Unknown input type: ${h}`),null}}},157:(S,m,n)=>{n.d(m,{Fg:()=>w,vx:()=>p});const w=window.GM_setValue,y=window.GM.setValue,p=window.GM_getValue},1870:(S,m,n)=>{n.d(m,{j:()=>w});class w{constructor(p,h){this.value=p,this.onChange=h}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(S,m,n)=>{n.d(m,{V:()=>c});var w=n(1870),y=n(8200),p=n(3976),h=n(157);class c extends w.j{constructor(o,d=null,e=null){super((0,h.vx)(o,d),e),this.storageKey=o,this.defaultValue=d}static create(o,d=null,e=null){return new c(o,d,e)}static createWithCompositeKey(o,d,e=null,a=null){const r=`${o}-${d}`;return new c(r,e,a)}updateValueFromEvent=o=>{const d=(0,y.s)(o),e=(0,p.$)(d);this.updateValue(e)};updateValue(o,d=!0){this.value!==o&&((0,h.Fg)(this.storageKey,o),this.value=o,d&&this.onChangeIfDefined())}clearValue(o=!1){this.updateValue(null,o)}resetValue(o=!1){this.updateValue(this.defaultValue,o)}}},3976:(S,m,n)=>{n.d(m,{$:()=>w});function w(y){return y===""?null:JSON.parse(y)}},5406:(S,m,n)=>{n.d(m,{k1:()=>F,z2:()=>r});function w(i,f="common",v=!1){const{pathname:I}=window.location;return y(I,i,f,v)}function y(i,f,v,I=!1){const x=i.split("/");f=f<0?x.length+f:f;const D=x[f]||v;return I&&console.log(`Pathname element: ${D}`),D}function p(i,f="common",v=!1){const I=w(i,"",v);return h(I,f,v)}function h(i,f,v){if(!i)return f;const I=i.split("-").at(-1);return v&&console.log(`Pathname element ending: ${I}`),I}function c(i,f,v="common",I=!1){const x=y(i,f,"",I);return h(x,v,I)}function s(i){return new URLSearchParams(window.location.search).get(i)}function o(i){return i.split("?")[0]}function d(i){return window.location.pathname.endsWith(i)}function e(i){return window.location.pathname.includes(i)}function a(i){return i.some(f=>e(f))}function r(...i){return window.location.pathname.split("/").some(v=>i.includes(v))}function t(i){try{const f=new URL(window.location.href);Object.entries(i).forEach(([v,I])=>{f.searchParams.set(v,I)}),window.location.href=f.toString()}catch(f){console.error("Failed to redirect:",f)}}function F(i,f=[]){const v=new AbortController;let I=!1;const x=W=>{const G=new URL(W),P={pathname:G.pathname};return f.forEach(B=>{P[B]=G.searchParams.get(B)}),P};let D=x(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(I)return;const W=x(window.navigation.currentEntry.url);if(Object.keys(D).some(P=>D[P]!==W[P])){D=W,I=!0;try{await i(W)}catch(P){console.error("URL observer error:",P)}finally{I=!1}}},{signal:v.signal}),()=>v.abort()}function l(i=[]){F(()=>window.location.reload(),i)}},3539:(S,m,n)=>{n.a(S,async(w,y)=>{try{let W=function(){return(0,i.z2)("org","reviews")},P=function(){B(d.Z.REVIEWS_VIEW_SUMMARY),B(d.Z.TAGS_CONTAINER),B(d.Z.FRIENDS_SUGGEST)},B=function(N,k=x.activeTabWrapper){const L=(0,s.Fi)(N,k);L&&(0,c.Bt)(L)},$=function(){if(!x.isFiltersInitialized){const{createGlobalFilter:N}=(0,a.z)(b);x.reviewTextFilter=N("review-text-filter"),x.isFiltersInitialized=!0}},C=function(N,k){(0,r.ZM)(N,e.r.FILTERS_CONTAINER),g();const L=(0,o.E9)(x.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);x.reviewsInfo=(0,v.S)(e.r.INFO),N.append(L,x.reviewsInfo),k.append(N)},g=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},V=function(){x.activeTabWrapper=null,x.isFiltersInitialized=!1,x.reviewTextFilter=null,x.reviewsInfo=null,(0,t.wP)(x.reviewsObserver)};var p=n(5213),h=n(3829),c=n(5539),s=n(573),o=n(7877),d=n(6613),e=n(3613),a=n(4521),r=n(6754),t=n(4921),F=n(4292),l=n(8506),i=n(5406),f=n(8355),v=n(7273);const I=(0,c.L5)("span.business-review-view__expand","read-more"),x={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,t.Un)(D),(0,i.k1)(async()=>{await D(!0)});async function D(N=!1){N&&V(),W()&&(await(0,t.XW)(document.body),await G())}async function G(){x.activeTabWrapper=await(0,t.xk)(document,d.Z.ACTIVE_TAB_WRAPPER),P(),$();const N=(0,s.Fi)(d.Z.FILTER_CONTAINER_WRAP,x.activeTabWrapper,!0);(0,p.b)(N,C,!0),await b();const k=(0,s.Fi)(d.Z.REVIEWS_CONTAINER,x.activeTabWrapper);x.reviewsObserver=new MutationObserver((0,t.sg)(b)),x.reviewsObserver.observe(k,{childList:!0})}async function b(){x.isFiltersInitialized||$();const N=(0,s.fI)(d.Z.REVIEW_CARD,x.activeTabWrapper),k=(0,c.Bz)();await Promise.all([...N].map(async L=>{const U=await A(L);(0,c.GY)(U,k,L)})),(0,c.pB)(k),(0,f.Vk)(x.reviewsInfo,k.show.length,N.length)}async function A(N){I(N)&&await(0,t.XW)(N),(0,l.kZ)(N);const k=(0,s.Fi)(d.Z.REVIEW_TEXT_WRAP,N);if(!k)return!0;x.reviewTextFilter.value&&(0,F.C)(x.reviewTextFilter,k);const L=k.innerText;return(0,h.Ay)(L,x.reviewTextFilter)}y()}catch(I){y(I)}},1)},6613:(S,m,n)=>{n.d(m,{Z:()=>w});const w={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(S,m,n)=>{n.d(m,{r:()=>y});const y={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},Q={};function z(S){var m=Q[S];if(m!==void 0)return m.exports;var n=Q[S]={exports:{}};return Y[S](n,n.exports,z),n.exports}(()=>{var S=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",m=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",w=p=>{p&&p.d<1&&(p.d=1,p.forEach(h=>h.r--),p.forEach(h=>h.r--?h.r++:h()))},y=p=>p.map(h=>{if(h!==null&&typeof h=="object"){if(h[S])return h;if(h.then){var c=[];c.d=0,h.then(d=>{s[m]=d,w(c)},d=>{s[n]=d,w(c)});var s={};return s[S]=d=>d(c),s}}var o={};return o[S]=d=>{},o[m]=h,o});z.a=(p,h,c)=>{var s;c&&((s=[]).d=-1);var o=new Set,d=p.exports,e,a,r,t=new Promise((F,l)=>{r=l,a=F});t[m]=d,t[S]=F=>(s&&F(s),o.forEach(F),t.catch(l=>{})),p.exports=t,h(F=>{e=y(F);var l,i=()=>e.map(v=>{if(v[n])throw v[n];return v[m]}),f=new Promise(v=>{l=()=>v(i),l.r=0;var I=x=>x!==s&&!o.has(x)&&(o.add(x),x&&!x.d&&(l.r++,x.push(l)));e.map(x=>x[S](I))});return l.r?f:i()},F=>(F?r(t[n]=F):a(d),w(s))),s&&s.d<0&&(s.d=0)}})(),z.d=(S,m)=>{for(var n in m)z.o(m,n)&&!z.o(S,n)&&Object.defineProperty(S,n,{enumerable:!0,get:m[n]})},z.o=(S,m)=>Object.prototype.hasOwnProperty.call(S,m);var H=z(3539)})();})();
