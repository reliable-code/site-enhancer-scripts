// ==UserScript==
// @name         Yamaps reviews filter
// @description  Hide reviews by filter
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @match        https://yandex.ru/maps/*
// @namespace    https://github.com/reliable-code/site-enhancer-scripts
// @version      1.0.77032510
// @icon         https://www.google.com/s2/favicons?sz=64&domain=yandex.ru
// @author       reliable-code
// @downloadURL  https://raw.githubusercontent.com/reliable-code/site-enhancer-scripts/main/systematic/yamaps.user.js
// ==/UserScript==

(()=>{(()=>{"use strict";var j={7273:(T,h,n)=>{n.d(h,{S:()=>m});var E=n(5558);function C(g={},c=null){return createElement("span",g,c)}function m(g={},c=null){return(0,E.n)("div",g,c)}},5467:(T,h,n)=>{n.d(h,{E2:()=>C});var E=n(7273);function C(c,s={},u=null){const a=(0,E.S)(s,u);return a.append(c),a}function m(c,s=null,u={},a={}){const e=createActionLink(c,s,a);return C(e,u)}function g(c,s=null,u=null,a={},e={},l={}){const o=createActionLinkWithIcon(c,u,s,e,l);return C(o,a)}},5558:(T,h,n)=>{n.d(h,{n:()=>C});var E=n(6754);function C(m,g,c=null){if(typeof g!="object"||g===null)throw new TypeError("styles should be an object");const s=document.createElement(m);return(0,E.ZM)(s,g),c&&(s.innerHTML=c),s}},740:(T,h,n)=>{n.d(h,{kU:()=>m});var E=n(5558),C=n(4921);function m(e,l,o){const t=u(e,"text",l);return t.value=o,t}function g(e,l,o,t,F,d){const i=u(e,"number",l);return i.value=o,i.step=t,i.min=F,i.max=d,i}function c(e,l,o){const t=u(e,"date",l);return t.value=o,t}function s(e,l,o){const t=u(e,"checkbox",l);return t.checked=o,t}function u(e={},l=null,o=null){const t=(0,E.n)("input",e);return l&&(t.type=l),o&&(t.addEventListener("keyup",(0,C.sg)(o,200)),t.addEventListener("change",(0,C.sg)(o,100))),t}function a(e,l,o){const t=createElement("select",e);return l&&t.addEventListener("change",l),t.value=o,t}},573:(T,h,n)=>{n.d(h,{Fi:()=>C,Yl:()=>c,fI:()=>m});function E(d,i=document){return!!i.querySelector(d)}function C(d,i=document,f=!1){const p=i.querySelector(d);return f&&!p&&console.log(`No element found for selector: ${d}`),p}function m(d,i=document,f=!1){const p=i.querySelectorAll(d);return f&&!p.length&&console.log(`No elements found for selector: ${d}`),p}function g(d,i=1){let f=d;for(let p=0;p<i;p++){if(!f.parentElement)return null;f=f.parentElement}return f}function c(d,i,f){return[...d.querySelectorAll(i)].find(p=>p.textContent.trim().includes(f))}function s(d,i,f=!1,p=!1,I=null){const x=C(i,d);return u(x,f,p,I)}function u(d,i=!1,f=!1,p=null){if(!d)return p===null?(console.log("No element found"),null):p;const I=d.innerText;return l(I,i,f)}function a(d,i,f=!1){const p=d[i];return u(p,f)}function e(d,i=!1,f=!1){const p=d.textContent;return l(p,i,f)}function l(d,i,f){i&&(d=removeNonNumber(d)),f&&(d=d.replace(",","."));const p=Number(d);return Number.isNaN(p)?(console.log(`Invalid number: ${d}`),0):p}function o(d){return[...d.childNodes].find(i=>i.nodeType===Node.TEXT_NODE)}function t(d){const i=f=>f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""?[f]:[...f.childNodes].flatMap(i);return i(d)}function F(d){return normalizeSpacing(d.textContent)}},8506:(T,h,n)=>{n.d(h,{hf:()=>C,kZ:()=>g});var E=n(573);function C(c,s){c.forEach(u=>m(s,u))}function m(c,s){if(!s)return;const u=new RegExp(`(${s})`,"gi"),a=document.createTreeWalker(c,NodeFilter.SHOW_TEXT,null);let e=a.nextNode();const l=[];for(;e;){const{textContent:o}=e;if(u.test(o)){const t=document.createDocumentFragment();let F=0;o.replace(u,(d,i,f)=>{f>F&&t.appendChild(document.createTextNode(o.slice(F,f)));const p=document.createElement("span");p.className="highlightedSubstring",p.style.backgroundColor="yellow",p.textContent=d,t.appendChild(p),F=f+d.length}),F<o.length&&t.appendChild(document.createTextNode(o.slice(F))),l.push({node:e,fragment:t})}e=a.nextNode()}l.forEach(({node:o,fragment:t})=>{o.parentNode.replaceChild(t,o)})}function g(c){(0,E.fI)(".highlightedSubstring",c).forEach(u=>{const{parentNode:a}=u;u.replaceWith(u.textContent),a.normalize()})}},5539:(T,h,n)=>{n.d(h,{Bt:()=>m,Bz:()=>d,GY:()=>i,L5:()=>N,pB:()=>f});var E=n(573);function C(r,v){r.parentNode.insertBefore(v,r.nextSibling)}function m(r){r.style.display="none"}function g(r,v=1){const S=document.querySelector(r);S&&c(S,v)}function c(r,v=1){const S=getElementAncestor(r,v);S&&m(S)}function s(r){F(r),m(r)}function u(r){r.intersectionObserver||runOnceOnIntersection(r,()=>m(r))}function a(r){r.style.display=""}function e(r){const v=t(r);r.style.display=v}function l(r,v){v?m(r):a(r)}function o(r,v){v?u(r):(clearIntersectionObserver(r),a(r))}function t(r){return F(r),r.dataset.defaultDisplay}function F(r){if(r.dataset.defaultDisplay)return;const{display:v}=getComputedStyle(r);r.dataset.defaultDisplay=v}function d(){return{show:[],hide:[]}}function i(r,v,S){r?v.hide.push(S):v.show.push(S)}function f(r){r.show.forEach(a),r.hide.forEach(m)}function p(r,v,S=.3){v?x(r,S):I(r)}function I(r){r.style.opacity=""}function x(r,v=.3){r.style.opacity=v}function D(r){r.style.order=""}function O(r,v){r.style.order=v}function k(r,v,S,A="inline-flex"){v.style.display=r?A:"none",S.style.display=r?"none":A}function R(r,v){r.style.background=v}function B(r,v){const S=getFirstElement(v);S&&z(r,S)}function z(r,v){const S=createLink();S.href=r,v.parentNode.append(S),S.append(v)}function y(r,v){const S=getFirstElement(v);S&&b(r,S)}function b(r,v,S={}){const A=createLink(S);A.href=r,A.append(...v.childNodes),v.append(A)}function w(){const r=getURLQueryParam("scrollTo");if(!r)return;const v=document.getElementById(r);v?v.scrollIntoView():console.log(`Element with ID "${r}" was not found.`)}function N(r,v,S=null){const A=`${v}-click-passed`,V=S?L=>(0,E.Yl)(L,r,S):L=>(0,E.Fi)(r,L);return function(L){if(L.hasAttribute(A))return!1;const M=V(L);return M&&M.click(),L.setAttribute(A,""),!0}}function P(r,v,S="text/plain"){const A=new Blob([r],{type:S}),V=URL.createObjectURL(A),L=document.createElement("a");L.href=V,L.download=v,document.body.appendChild(L),L.click(),document.body.removeChild(L),requestAnimationFrame(()=>URL.revokeObjectURL(V))}},6754:(T,h,n)=>{n.d(h,{ZM:()=>E});function E(c,s){Object.assign(c.style,s)}function C(c,s="custom-global-style"){let u=document.getElementById(s);u||(u=document.createElement("style"),u.id=s,u.type="text/css",document.head.appendChild(u)),u.textContent=c}function m(c){return Object.entries(c).map(([s,u])=>`${s.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${u};`).join(" ")}function g(c){return c?c.split(";").filter(s=>s.trim()!=="").reduce((s,u)=>{const[a,e]=u.split(":").map(o=>o.trim()),l=a.replace(/-([a-z])/g,(o,t)=>t.toUpperCase());return s[l]=e,s},{}):{}}},4921:(T,h,n)=>{n.d(h,{Un:()=>c,XW:()=>m,sg:()=>g,wP:()=>a,xk:()=>E});function E(e,l,o=null){const t=e.querySelector(l);return t?Promise.resolve(t):new Promise(F=>{const d=new MutationObserver(f);d.observe(e,{childList:!0,subtree:!0});let i;o&&(i=setTimeout(()=>{d.disconnect(),console.log(`No element found for selector: ${l}`),F(null)},o));function f(){const p=e.querySelector(l);p&&(i&&clearTimeout(i),d.disconnect(),F(p))}})}function C(e,l){return e.querySelector(l)?new Promise(t=>{const F=new MutationObserver(d);F.observe(e,{childList:!0,subtree:!0});function d(){e.querySelector(l)||(F.disconnect(),t())}}):Promise.resolve()}function m(e,l=400){return new Promise(o=>{let t;const F=new MutationObserver(()=>{clearTimeout(t),d()});function d(){t=setTimeout(()=>{F.disconnect(),o()},l)}d(),F.observe(e,{childList:!0,subtree:!0})})}function g(e,l=250){let o;return function(...t){const F=this;clearTimeout(o),o=setTimeout(()=>e.apply(F,t),l)}}async function c(e){document.visibilityState==="visible"?await e():document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await e()},{once:!0})}function s(e,l){const o=new IntersectionObserver(t=>{t.forEach(F=>{F.isIntersecting&&(l(),u(e))})});e.intersectionObserver=o,o.observe(e)}function u(e){e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}function a(e){e&&(e.disconnect(),e=null)}},3829:(T,h,n)=>{n.d(h,{Ay:()=>C});var E=n(8355);function C(o,t){return!m(o,t)}function m(o,t){if(!t||!t.value)return!0;const F=(0,E._7)(t.value);return g(o,F)}function g(o,t){if(!t||!t.length)return!0;const F=(o||"").toLowerCase();return t.every(d=>c(F,d))}function c(o,t){return t.some(({term:F,isNegative:d})=>{const i=o.includes(F);return d?!i:i})}function s(o,t){return t.value!=null&&o<t.value}function u(o,t){return t.value!=null&&o>t.value}function a(o,t){return t.value==null?!1:o<parseDateFromISO(t.value)}function e(o,t){return t.value==null?!1:o>parseDateFromISO(t.value)}function l(o,t){return t.value&&o!==t.value}},4521:(T,h,n)=>{n.d(h,{z:()=>C});var E=n(3048);function C(m,g=null){return{createGlobalFilter(c,s=null,u=m){return E.V.create(c,s,u)},createSectionFilter(c,s=null,u=m){if(!g)throw new Error("sectionId must be provided to use createSectionFilter.");return E.V.createWithCompositeKey(g,c,s,u)}}}},5884:(T,h,n)=>{n.d(h,{Nm:()=>m});var E=n(5467),C=n(740);function m(a,e,l={},o={}){const t=(0,C.kU)(o,e.updateValueFromEvent,e.value);return(0,E.E2)(t,l,a)}function g(a,e,l,o,t,F={},d={}){const i=createNumberInput(d,e.updateValueFromEvent,e.value,l,o,t);return createControl(i,F,a)}function c(a,e,l={},o={}){const t=createSelect(o,e.updateValueFromEvent,e.value);return createControl(t,l,a)}function s(a,e,l={},o={}){const t=createDateInput(o,e.updateValueFromEvent,e.value);return createControl(t,l,a)}function u(a,e,l={},o={}){const t=createCheckboxInput(o,e.updateValueFromEvent,e.value);return createControl(t,l,a)}},7877:(T,h,n)=>{n.d(h,{E9:()=>C});var E=n(5884);function C(y,b={},w={}){return(0,E.Nm)("\u041F\u043E\u0438\u0441\u043A: ",y,b,w)}function m(y,b={},w={},N=.1,P=3){return createNumberFilterControl("\u041C\u0438\u043D. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",y,N,P,5,b,w)}function g(y,b={},w={},N=.1,P=3){return createNumberFilterControl("\u041C\u0430\u043A\u0441. \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",y,N,P,5,b,w)}function c(y,b={},w={}){return u("\u041C\u0438\u043D. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",y,b,w)}function s(y,b={},w={}){return u("\u041C\u0430\u043A\u0441. \u043E\u0442\u0437\u044B\u0432\u043E\u0432: ",y,b,w)}function u(y,b,w={},N={}){return createNumberFilterControl(y,b,"1","1","999999",w,N)}function a(y,b={},w={}){return createDateFilterControl("\u041C\u0438\u043D. \u0434\u0430\u0442\u0430: ",y,b,w)}function e(y,b={},w={}){return l("\u041C\u0438\u043D. \u0441\u043A\u0438\u0434\u043A\u0430: ",y,b,w)}function l(y,b,w={},N={}){return createNumberFilterControl(y,b,"5","0","100",w,N)}function o(y,b={},w={}){return createNumberFilterControl("\u041C\u0438\u043D. \u043A\u0435\u0448\u0431\u0435\u043A: ",y,"5","0","100",b,w)}function t(y,b,w={},N={},P="250"){return createNumberFilterControl(y,b,P,"0","1000000",w,N)}function F(y,b={},w={},N="25"){return t("\u041C\u0438\u043D. \u0446\u0435\u043D\u0430: ",y,b,w,N)}function d(y,b={},w={},N="25"){return t("\u041C\u0430\u043A\u0441. \u0446\u0435\u043D\u0430: ",y,b,w,N)}function i(y,b={},w={}){return f("\u041C\u0438\u043D. \u043B\u0430\u0438\u0306\u043A\u043E\u0432: ",y,b,w)}function f(y,b,w={},N={}){return createNumberFilterControl(y,b,"1","0","99999",w,N)}function p(y,b={},w={}){return createNumberFilterControl("\u041A\u043E\u043B\u043E\u043D\u043E\u043A: ",y,"1","2","8",b,w)}function I(y,b={},w={}){return createNumberFilterControl("\u0421\u0442\u0440\u043E\u043A \u0438\u043C\u0435\u043D\u0438: ",y,1,1,10,b,w)}function x(y,b={},w={}){return createCheckboxFilterControl("\u0411\u0435\u0437 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430: ",y,b,w)}function D(y,b={},w={}){return createCheckboxFilterControl("\u0421 \u0444\u043E\u0442\u043E: ",y,b,w)}function O(y,b={},w={}){return createCheckboxFilterControl("\u041F\u0440\u043E\u0433\u0440\u0443\u0437\u043A\u0430: ",y,b,w)}function k(y,b={},w={}){return createCheckboxFilterControl("\u0411\u043E\u043D\u0443\u0441: ",y,b,w)}function R(y,b={},w={}){return createCheckboxFilterControl("\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438: ",y,b,w)}function B(y,b={},w={}){return createCheckboxFilterControl("\u0412\u043A\u043B: ",y,b,w)}function z(y,b,w={}){const N=[{value:-25,emoji:"\u{1F48E}",tooltip:"\u0421\u0443\u043F\u0435\u0440 \u0446\u0435\u043D\u0430 (-25%)"},{value:-15,emoji:"\u{1F525}",tooltip:"\u041E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-15%)"},{value:-5,emoji:"\u{1F31F}",tooltip:"\u041A\u043B\u0430\u0441\u0441\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (-5%)"},{value:5,emoji:"\u{1F44C}",tooltip:"\u0425\u043E\u0440\u043E\u0448\u0430\u044F \u0446\u0435\u043D\u0430 (+5%)"}],P={active:{background:"#e3f2fd",borderColor:"#2196f3",boxShadow:"0 0 0 1px #2196f3"},inactive:{background:"#fff",borderColor:"#ccc",boxShadow:"none"},hover:{background:"#f5f5f5"}},r=createDiv({display:"inline-flex",gap:"4px",marginLeft:"4px"}),v=[],S=()=>b?parseFloat(b.value)||0:y.value,A=()=>{const V=S();v.forEach(({button:L,value:M})=>{const G=M<=V?P.active:P.inactive;Object.assign(L.style,G)})};return N.forEach(({value:V,emoji:L,tooltip:M})=>{const W=createButton({padding:"2px 6px",fontSize:"16px",cursor:"pointer",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",transition:"all 0.2s",...w},L);W.title=M,W.type="button",W.addEventListener("click",G=>{G.preventDefault(),y.updateValue(V),b&&(b.value=V),A()}),W.addEventListener("mouseenter",()=>{V<=S()||(W.style.background=P.hover.background)}),W.addEventListener("mouseleave",()=>{A()}),v.push({button:W,value:V}),r.appendChild(W)}),A(),b&&(b.addEventListener("input",A),b.addEventListener("change",A)),r}},8355:(T,h,n)=>{n.d(h,{Vk:()=>a,_7:()=>C,fO:()=>E});function E(e){if(!e)return[];const o=C(e).flat().filter(t=>t&&!t.isNegative&&t.term).map(t=>t.term);return[...new Set(o)]}function C(e){return e?e.toLowerCase().split(",").map(m).filter(Boolean):[]}function m(e){const l=e.split("/").map(t=>t.trim()).filter(Boolean);if(l.length===0)return null;const o=l.map(g).filter(Boolean);return o.length>0?o:null}function g(e){const l=e.startsWith("!"),o=l?e.slice(1).trim():e;return o?{term:o,isNegative:l}:null}function c(e,l){u(e,o=>o.style.display!=="none",l)}function s(e,l){u(e,o=>o.style.opacity==="",l)}function u(e,l,o){const t=[...e].filter(l).length,F=e.length;a(o,t,F)}function a(e,l,o){e.textContent=`\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E: ${l} \u0438\u0437 ${o}`}},4292:(T,h,n)=>{n.d(h,{C:()=>m});var E=n(8355),C=n(8506);function m(c,s){const u=(0,E.fO)(c.value);(0,C.hf)(u,s)}function g(c,s){const u=getIncludedSearchStrings(c.value);s.forEach(a=>highlightSubstrings(u,a))}},5213:(T,h,n)=>{n.d(h,{b:()=>m});var E=n(573),C=n(7273);function m(g,c,s=!1,u="customFiltersContainer"){let a=(0,E.Fi)(`#${u}`,g);if(a)if(s)a.remove();else return;a=(0,C.S)(),a.id=u,c(a,g)}},8200:(T,h,n)=>{n.d(h,{s:()=>E});function E(C){const{target:m}=C,{type:g}=m;switch(g){case"text":return`"${m.value}"`;case"number":return m.value;case"select-one":return m.value;case"date":return`"${m.value}"`;case"checkbox":return m.checked;default:return console.log(`Unknown input type: ${g}`),null}}},157:(T,h,n)=>{n.d(h,{Fg:()=>E,vx:()=>m});const E=window.GM_setValue,C=window.GM.setValue,m=window.GM_getValue},1870:(T,h,n)=>{n.d(h,{j:()=>E});class E{constructor(m,g){this.value=m,this.onChange=g}onChangeIfDefined=()=>{this.onChange&&this.onChange()}}},3048:(T,h,n)=>{n.d(h,{V:()=>c});var E=n(1870),C=n(8200),m=n(3976),g=n(157);class c extends E.j{constructor(u,a=null,e=null){super((0,g.vx)(u,a),e),this.storageKey=u,this.defaultValue=a}static create(u,a=null,e=null){return new c(u,a,e)}static createWithCompositeKey(u,a,e=null,l=null){const o=`${u}-${a}`;return new c(o,e,l)}updateValueFromEvent=u=>{const a=(0,C.s)(u),e=(0,m.$)(a);this.updateValue(e)};updateValue(u,a=!0){this.value!==u&&((0,g.Fg)(this.storageKey,u),this.value=u,a&&this.onChangeIfDefined())}clearValue(u=!1){this.updateValue(null,u)}resetValue(u=!1){this.updateValue(this.defaultValue,u)}}},3976:(T,h,n)=>{n.d(h,{$:()=>E});function E(C){return C===""?null:JSON.parse(C)}},5406:(T,h,n)=>{n.d(h,{$G:()=>F,z2:()=>l});function E(i,f="common",p=!1){const{pathname:I}=window.location;return C(I,i,f,p)}function C(i,f,p,I=!1){const x=i.split("/");f=f<0?x.length+f:f;const D=x[f]||p;return I&&console.log(`Pathname element: ${D}`),D}function m(i,f="common",p=!1){const I=E(i,"",p);return g(I,f,p)}function g(i,f,p){if(!i)return f;const I=i.split("-").at(-1);return p&&console.log(`Pathname element ending: ${I}`),I}function c(i,f,p="common",I=!1){const x=C(i,f,"",I);return g(x,p,I)}function s(i){return new URLSearchParams(window.location.search).get(i)}function u(i){return i.split("?")[0]}function a(i){return window.location.pathname.includes(i)}function e(i){return i.some(f=>a(f))}function l(...i){return window.location.pathname.split("/").some(p=>i.includes(p))}function o(i){try{const f=new URL(window.location.href);Object.entries(i).forEach(([p,I])=>{f.searchParams.set(p,I)}),window.location.href=f.toString()}catch(f){console.error("Failed to redirect:",f)}}function t(i,f=[]){const p=new AbortController;let I=!1;const x=O=>{const k=new URL(O),R={pathname:k.pathname};return f.forEach(B=>{R[B]=k.searchParams.get(B)}),R};let D=x(window.location.href);return window.navigation.addEventListener("navigatesuccess",async()=>{if(I)return;const O=x(window.navigation.currentEntry.url);if(Object.keys(D).some(R=>D[R]!==O[R])){D=O,I=!0;try{await i(O)}catch(R){console.error("URL observer error:",R)}finally{I=!1}}},{signal:p.signal}),()=>p.abort()}function F(i,f=[]){const p={pathname:window.location.pathname};f.forEach(k=>{p[k]=s(k)});let I=!1;async function x(){if(I)return;const k={pathname:window.location.pathname};if(f.forEach(R=>{k[R]=s(R)}),Object.keys(p).some(R=>p[R]!==k[R])){Object.assign(p,k),I=!0;try{await i()}catch(R){console.error("Error in URL observer callback:",R)}finally{I=!1}}}function D(){x().catch(k=>{console.error("Error in URL change handler:",k)})}let O=window.location.href;setInterval(()=>{window.location.href!==O&&(console.log("URL changed:",window.location.href),O=window.location.href,D())},200),window.addEventListener("popstate",D)}function d(i=[]){F(()=>window.location.reload(),i)}},3539:(T,h,n)=>{n.a(T,async(E,C)=>{try{let O=function(){return(0,i.z2)("org","reviews")},R=function(){B(a.Z.REVIEWS_VIEW_SUMMARY),B(a.Z.TAGS_CONTAINER),B(a.Z.FRIENDS_SUGGEST)},B=function(r,v=x.activeTabWrapper){const S=(0,s.Fi)(r,v);S&&(0,c.Bt)(S)},z=function(){if(!x.isFiltersInitialized){const{createGlobalFilter:r}=(0,l.z)(w);x.reviewTextFilter=r("review-text-filter"),x.isFiltersInitialized=!0}},y=function(r,v){(0,o.ZM)(r,e.r.FILTERS_CONTAINER),b();const S=(0,u.E9)(x.reviewTextFilter,e.r.CONTROL,e.r.TEXT_INPUT);x.reviewsInfo=(0,p.S)(e.r.INFO),r.append(S,x.reviewsInfo),v.append(r)},b=function(){window.GM_addStyle(`
        aside:is(._view_wide, ._view_wide-full) #customFiltersContainer {
            margin: 0 80px;
            padding: 0 0 8px;
        }
        
        aside._view_second #customFiltersContainer {
            padding: 0 20px 8px 16px;
        }
    `)},P=function(){x.activeTabWrapper=null,x.isFiltersInitialized=!1,x.reviewTextFilter=null,x.reviewsInfo=null,(0,t.wP)(x.reviewsObserver)};var m=n(5213),g=n(3829),c=n(5539),s=n(573),u=n(7877),a=n(6613),e=n(3613),l=n(4521),o=n(6754),t=n(4921),F=n(4292),d=n(8506),i=n(5406),f=n(8355),p=n(7273);const I=(0,c.L5)("span.business-review-view__expand","read-more"),x={activeTabWrapper:null,isFiltersInitialized:!1,reviewTextFilter:null,reviewsInfo:null,reviewsObserver:null};await(0,t.Un)(D),(0,i.$G)(async()=>{await D(!0)});async function D(r=!1){r&&P(),O()&&(await(0,t.XW)(document.body),await k())}async function k(){x.activeTabWrapper=await(0,t.xk)(document,a.Z.ACTIVE_TAB_WRAPPER),R(),z();const r=(0,s.Fi)(a.Z.FILTER_CONTAINER_WRAP,x.activeTabWrapper,!0);(0,m.b)(r,y,!0),await w();const v=(0,s.Fi)(a.Z.REVIEWS_CONTAINER,x.activeTabWrapper);x.reviewsObserver=new MutationObserver((0,t.sg)(w)),x.reviewsObserver.observe(v,{childList:!0})}async function w(){x.isFiltersInitialized||z();const r=(0,s.fI)(a.Z.REVIEW_CARD,x.activeTabWrapper),v=(0,c.Bz)();await Promise.all([...r].map(async S=>{const A=await N(S);(0,c.GY)(A,v,S)})),(0,c.pB)(v),(0,f.Vk)(x.reviewsInfo,v.show.length,r.length)}async function N(r){I(r)&&await(0,t.XW)(r),(0,d.kZ)(r);const v=(0,s.Fi)(a.Z.REVIEW_TEXT_WRAP,r);if(!v)return!0;x.reviewTextFilter.value&&(0,F.C)(x.reviewTextFilter,v);const S=v.innerText;return(0,g.Ay)(S,x.reviewTextFilter)}C()}catch(I){C(I)}},1)},6613:(T,h,n)=>{n.d(h,{Z:()=>E});const E={ACTIVE_TAB_WRAPPER:"div.business-tab-wrapper._materialized",FILTER_CONTAINER_WRAP:"div.business-reviews-card-view__header",REVIEWS_VIEW_SUMMARY:"div.card-reviews-view__summary",TAGS_CONTAINER:"div.business-reviews-card-view__tags-container",FRIENDS_SUGGEST:"div.business-reviews-card-view__friends-suggest",REVIEWS_CONTAINER:"div.business-reviews-card-view__reviews-container",REVIEW_CARD:"div.business-reviews-card-view__review",REVIEW_TEXT_WRAP:"span.spoiler-view__text-container"}},3613:(T,h,n)=>{n.d(h,{r:()=>C});const C={FILTERS_CONTAINER:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#fff",boxShadow:"0 1px 0 #ebebeb",zIndex:100},CONTROL:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"14px",fontWeight:"500",width:"100%",letterSpacing:"0.01em"},TEXT_INPUT:{...{INPUT:{padding:"7px 14px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ccc",outline:"none"}}.INPUT,width:"100%",boxSizing:"border-box"},INFO:{margin:"4px 2px 0",fontSize:"13px",color:"#9ca3af",textAlign:"right"}}}},$={};function U(T){var h=$[T];if(h!==void 0)return h.exports;var n=$[T]={exports:{}};return j[T](n,n.exports,U),n.exports}(()=>{var T=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",h=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",E=m=>{m&&m.d<1&&(m.d=1,m.forEach(g=>g.r--),m.forEach(g=>g.r--?g.r++:g()))},C=m=>m.map(g=>{if(g!==null&&typeof g=="object"){if(g[T])return g;if(g.then){var c=[];c.d=0,g.then(a=>{s[h]=a,E(c)},a=>{s[n]=a,E(c)});var s={};return s[T]=a=>a(c),s}}var u={};return u[T]=a=>{},u[h]=g,u});U.a=(m,g,c)=>{var s;c&&((s=[]).d=-1);var u=new Set,a=m.exports,e,l,o,t=new Promise((F,d)=>{o=d,l=F});t[h]=a,t[T]=F=>(s&&F(s),u.forEach(F),t.catch(d=>{})),m.exports=t,g(F=>{e=C(F);var d,i=()=>e.map(p=>{if(p[n])throw p[n];return p[h]}),f=new Promise(p=>{d=()=>p(i),d.r=0;var I=x=>x!==s&&!u.has(x)&&(u.add(x),x&&!x.d&&(d.r++,x.push(d)));e.map(x=>x[T](I))});return d.r?f:i()},F=>(F?o(t[n]=F):l(a),E(s))),s&&s.d<0&&(s.d=0)}})(),U.d=(T,h)=>{for(var n in h)U.o(h,n)&&!U.o(T,n)&&Object.defineProperty(T,n,{enumerable:!0,get:h[n]})},U.o=(T,h)=>Object.prototype.hasOwnProperty.call(T,h);var Z=U(3539)})();})();
